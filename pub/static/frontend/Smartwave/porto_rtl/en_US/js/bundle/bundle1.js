require.config({
    config: {
        'jsbuild':{"Magento_OfflineShipping/js/model/shipping-rates-validator/flatrate.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global define*/\ndefine(\n    [\n        'jquery',\n        'mageUtils',\n        '../shipping-rates-validation-rules/flatrate',\n        'mage/translate'\n    ],\n    function ($, utils, validationRules, $t) {\n        \"use strict\";\n        return {\n            validationErrors: [],\n            validate: function(address) {\n                var self = this;\n                this.validationErrors = [];\n                $.each(validationRules.getRules(), function(field, rule) {\n                    if (rule.required && utils.isEmpty(address[field])) {\n                        var message = $t('Field ') + field + $t(' is required.');\n                        self.validationErrors.push(message);\n                    }\n                });\n                return !Boolean(this.validationErrors.length);\n            }\n        };\n    }\n);\n","Magento_OfflineShipping/js/model/shipping-rates-validator/tablerate.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global define*/\ndefine(\n    [\n        'jquery',\n        'mageUtils',\n        '../shipping-rates-validation-rules/tablerate',\n        'mage/translate'\n    ],\n    function ($, utils, validationRules, $t) {\n        'use strict';\n        return {\n            validationErrors: [],\n            validate: function (address) {\n                var self = this;\n                this.validationErrors = [];\n                $.each(validationRules.getRules(), function (field, rule) {\n                    if (rule.required && utils.isEmpty(address[field])) {\n                        var message = $t('Field ') + field + $t(' is required.');\n                        var regionFields = ['region', 'region_id', 'region_id_input'];\n                        if (\n                            $.inArray(field, regionFields) === -1\n                            || utils.isEmpty(address['region']) && utils.isEmpty(address['region_id'])\n                        ) {\n                            self.validationErrors.push(message);\n                        }\n                    }\n                });\n                return !Boolean(this.validationErrors.length);\n            }\n        };\n    }\n);\n","Magento_OfflineShipping/js/model/shipping-rates-validator/freeshipping.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global define*/\ndefine(\n    [\n        'jquery',\n        'mageUtils',\n        '../shipping-rates-validation-rules/freeshipping',\n        'mage/translate'\n    ],\n    function ($, utils, validationRules, $t) {\n        \"use strict\";\n        return {\n            validationErrors: [],\n            validate: function(address) {\n                var self = this;\n                this.validationErrors = [];\n                $.each(validationRules.getRules(), function(field, rule) {\n                    if (rule.required && utils.isEmpty(address[field])) {\n                        var message = $t('Field ') + field + $t(' is required.');\n                        self.validationErrors.push(message);\n                    }\n                });\n                return !Boolean(this.validationErrors.length);\n            }\n        };\n    }\n);\n","Magento_OfflineShipping/js/view/shipping-rates-validation/flatrate.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/shipping-rates-validator',\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\n        '../../model/shipping-rates-validator/flatrate',\n        '../../model/shipping-rates-validation-rules/flatrate'\n    ],\n    function (\n        Component,\n        defaultShippingRatesValidator,\n        defaultShippingRatesValidationRules,\n        flatrateShippingRatesValidator,\n        flatrateShippingRatesValidationRules\n    ) {\n        \"use strict\";\n        defaultShippingRatesValidator.registerValidator('flatrate', flatrateShippingRatesValidator);\n        defaultShippingRatesValidationRules.registerRules('flatrate', flatrateShippingRatesValidationRules);\n        return Component;\n    }\n);\n","Magento_OfflineShipping/js/view/shipping-rates-validation/tablerate.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/shipping-rates-validator',\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\n        '../../model/shipping-rates-validator/tablerate',\n        '../../model/shipping-rates-validation-rules/tablerate'\n    ],\n    function (\n        Component,\n        defaultShippingRatesValidator,\n        defaultShippingRatesValidationRules,\n        tablerateShippingRatesValidator,\n        tablerateShippingRatesValidationRules\n    ) {\n        \"use strict\";\n        defaultShippingRatesValidator.registerValidator('tablerate', tablerateShippingRatesValidator);\n        defaultShippingRatesValidationRules.registerRules('tablerate', tablerateShippingRatesValidationRules);\n        return Component;\n    }\n);\n","Magento_OfflineShipping/js/view/shipping-rates-validation/freeshipping.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/shipping-rates-validator',\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\n        '../../model/shipping-rates-validator/freeshipping',\n        '../../model/shipping-rates-validation-rules/freeshipping'\n    ],\n    function (\n        Component,\n        defaultShippingRatesValidator,\n        defaultShippingRatesValidationRules,\n        freeshippingShippingRatesValidator,\n        freeshippingShippingRatesValidationRules\n    ) {\n        \"use strict\";\n        defaultShippingRatesValidator.registerValidator('freeshipping', freeshippingShippingRatesValidator);\n        defaultShippingRatesValidationRules.registerRules('freeshipping', freeshippingShippingRatesValidationRules);\n        return Component;\n    }\n);\n","Magento_OfflinePayments/js/view/payment/offline-payments.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n        rendererList.push(\n            {\n                type: 'checkmo',\n                component: 'Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method'\n            },\n            {\n                type: 'banktransfer',\n                component: 'Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method'\n            },\n            {\n                type: 'cashondelivery',\n                component: 'Magento_OfflinePayments/js/view/payment/method-renderer/cashondelivery-method'\n            },\n            {\n                type: 'purchaseorder',\n                component: 'Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method'\n            }\n        );\n        /** Add view logic here if needed */\n        return Component.extend({});\n    }\n);","Magento_OfflinePayments/js/view/payment/method-renderer/purchaseorder-method.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'Magento_Checkout/js/view/payment/default',\n        'jquery',\n        \"mage/validation\"\n    ],\n    function (Component, $) {\n        'use strict';\n        return Component.extend({\n            defaults: {\n                template: 'Magento_OfflinePayments/payment/purchaseorder-form',\n                purchaseOrderNumber: ''\n            },\n            initObservable: function () {\n                this._super()\n                    .observe('purchaseOrderNumber');\n                return this;\n            },\n            getData: function () {\n                return {\n                    \"method\": this.item.method,\n                    'po_number': this.purchaseOrderNumber(),\n                    \"additional_data\": null\n                };\n\n            },\n            validate: function () {\n                var form = 'form[data-role=purchaseorder-form]';\n                return $(form).validation() && $(form).validation('isValid');\n            }\n        });\n    }\n);\n","Magento_OfflinePayments/js/view/payment/method-renderer/banktransfer-method.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'ko',\n        'Magento_Checkout/js/view/payment/default'\n    ],\n    function (ko, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Magento_OfflinePayments/payment/banktransfer'\n            },\n            /**\n             * Get value of instruction field.\n             * @returns {String}\n             */\n            getInstructions: function () {\n                return window.checkoutConfig.payment.instructions[this.item.method];\n            }\n        });\n    }\n);\n","Magento_OfflinePayments/js/view/payment/method-renderer/checkmo-method.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'Magento_Checkout/js/view/payment/default'\n    ],\n    function (Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Magento_OfflinePayments/payment/checkmo'\n            },\n\n            /** Returns send check to info */\n            getMailingAddress: function() {\n                return window.checkoutConfig.payment.checkmo.mailingAddress;\n            },\n\n            /** Returns payable to info */\n            getPayableTo: function() {\n                return window.checkoutConfig.payment.checkmo.payableTo;\n            }\n        });\n    }\n);\n","Magento_Multishipping/js/overview.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint jquery:true*/\n/*global alert*/\ndefine([\n    \"jquery\",\n    \"jquery/ui\",\n    \"mage/translate\"\n], function($){\n    \"use strict\";\n\n    $.widget('mage.orderOverview', {\n        options: {\n            opacity: 0.5, // CSS opacity for the 'Place Order' button when it's clicked and then disabled.\n            pleaseWaitLoader: 'span.please-wait', // 'Submitting order information...' Ajax loader.\n            placeOrderSubmit: 'button[type=\"submit\"]', // The 'Place Order' button.\n            agreements: '#checkout-agreements' // Container for all of the checkout agreements and terms/conditions\n        },\n\n        /**\n         * Bind a submit handler to the form.\n         * @private\n         */\n        _create: function() {\n            this.element.on('submit', $.proxy(this._showLoader, this));\n        },\n\n        /**\n         * Verify that all agreements and terms/conditions are checked. Show the Ajax loader. Disable\n         * the submit button (i.e. Place Order).\n         * @return {Boolean}\n         * @private\n         */\n        _showLoader: function() {\n            if ($(this.options.agreements).find('input[type=\"checkbox\"]:not(:checked)').length > 0) {\n                return false;\n            }\n            this.element.find(this.options.pleaseWaitLoader).show().end()\n                .find(this.options.placeOrderSubmit).prop('disabled', true).css('opacity', this.options.opacity);\n            return true;\n        }\n    });\n\n    return $.mage.orderOverview;\n});\n","Magento_Multishipping/js/payment.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true*/\n/*global alert*/\n\ndefine([\n    'jquery',\n    'mage/template',\n    'Magento_Ui/js/modal/alert',\n    'jquery/ui',\n    'mage/translate'\n], function ($, mageTemplate, alert) {\n    'use strict';\n\n    $.widget('mage.payment', {\n        options: {\n            continueSelector: '#payment-continue',\n            methodsContainer: '#payment-methods',\n            minBalance: 0.0001,\n            tmpl: '<input id=\"hidden-free\" type=\"hidden\" name=\"payment[method]\" value=\"free\">'\n        },\n\n        _create: function () {\n            this.element.find('dd [name^=\"payment[\"]').prop('disabled', true).end()\n                .on('click', this.options.continueSelector, $.proxy(this._submitHandler, this))\n                .on('updateCheckoutPrice', $.proxy(function (event, data) {\n                    //updating the checkoutPrice\n                    if (data.price) {\n                        this.options.checkoutPrice += data.price;\n                    }\n\n                    //updating total price\n                    if (data.totalPrice) {\n                        data.totalPrice = this.options.checkoutPrice;\n                    }\n\n                    if (this.options.checkoutPrice < this.options.minBalance) {\n                        // Add free input field, hide and disable unchecked checkbox payment method and all radio button payment methods\n                        this._disablePaymentMethods();\n                    } else {\n                        // Remove free input field, show all payment method\n                        this._enablePaymentMethods();\n                    }\n                }, this))\n                .on('click', 'dt input:radio', $.proxy(this._paymentMethodHandler, this));\n\n            if (this.options.checkoutPrice < this.options.minBalance) {\n                this._disablePaymentMethods();\n            } else {\n                this._enablePaymentMethods();\n            }\n        },\n\n        /**\n         * Display payment details when payment method radio button is checked\n         * @private\n         * @param {EventObject} e\n         */\n        _paymentMethodHandler: function (e) {\n            var element = $(e.target),\n                parentsDl = element.closest('dl');\n\n            parentsDl.find('dt input:radio').prop('checked', false);\n            parentsDl.find('.items').hide().find('[name^=\"payment[\"]').prop('disabled', true);\n            element.prop('checked', true).parent().nextUntil('dt').find('.items').show().find('[name^=\"payment[\"]').prop('disabled', false);\n        },\n\n        /**\n         * make sure one payment method is selected\n         * @private\n         * @return {Boolean}\n         */\n        _validatePaymentMethod: function () {\n            var methods = this.element.find('[name^=\"payment[\"]'),\n                isValid = false;\n\n            if (methods.length === 0) {\n                alert({\n                    content: $.mage.__('We can\\'t complete your order because you don\\'t have a payment method set up.')\n                });\n            } else if (this.options.checkoutPrice < this.options.minBalance) {\n                isValid = true;\n            } else if (methods.filter('input:radio:checked').length) {\n                isValid = true;\n            } else {\n                alert({\n                    content: $.mage.__('Please choose a payment method.')\n                });\n            }\n\n            return isValid;\n        },\n\n        /**\n         * Disable and enable payment methods\n         * @private\n         */\n        _disablePaymentMethods: function () {\n            var tmpl = mageTemplate(this.options.tmpl, {\n                data: {}\n            });\n\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', true).end()\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', true).parent().hide();\n            this.element.find('[name=\"payment[method]\"][value=\"free\"]').parent('dt').remove();\n            this.element.find(this.options.methodsContainer).hide().find('[name^=\"payment[\"]').prop('disabled', true);\n\n            $(tmpl).appendTo(this.element);\n        },\n\n        /**\n         * Enable and enable payment methods\n         * @private\n         */\n        _enablePaymentMethods: function () {\n            this.element.find('input[name=\"payment[method]\"]').prop('disabled', false).end()\n                .find('input[name=\"payment[method]\"][value=\"free\"]').remove().end()\n                .find('dt input:radio:checked').trigger('click').end()\n                .find('input[id^=\"use\"][name^=\"payment[use\"]:not(:checked)').prop('disabled', false).parent().show();\n            this.element.find(this.options.methodsContainer).show();\n        },\n\n        /**\n         * Validate  before form submit\n         * @private\n         * @param {EventObject} e\n         */\n        _submitHandler: function (e) {\n            e.preventDefault();\n\n            if (this._validatePaymentMethod()) {\n                this.element.submit();\n            }\n        }\n    });\n\n    return $.mage.payment;\n});\n","Magento_Multishipping/js/multi-shipping.js":"/**\n * @category    checkout multi-shipping addresses\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint jquery:true*/\ndefine([\n    \"jquery\",\n    \"jquery/ui\"\n], function($){\n    \"use strict\";\n    \n    $.widget('mage.multiShipping', {\n        options: {\n            addNewAddressBtn: 'button[data-role=\"add-new-address\"]', // Add a new multishipping address.\n            addNewAddressFlag: '#add_new_address_flag', // Hidden input field with value 0 or 1.\n            canContinueBtn: 'button[data-role=\"can-continue\"]', // Continue (update quantity or go to shipping).\n            canContinueFlag: '#can_continue_flag' // Hidden input field with value 0 or 1.\n        },\n\n        /**\n         * Bind event handlers to click events for corresponding buttons.\n         * @private\n         */\n        _create: function() {\n            $(this.options.addNewAddressBtn).on('click', $.proxy(this._addNewAddress, this));\n            $(this.options.canContinueBtn).on('click', $.proxy(this._canContinue, this));\n        },\n\n        /**\n         * Add a new address. Set the hidden input field and submit the form. Then enter a new shipping address.\n         * @private\n         */\n        _addNewAddress: function() {\n            $(this.options.addNewAddressFlag).val(1);\n            this.element.submit();\n        },\n\n        /**\n         * Can the user continue to the next step? The data-flag attribute holds either 0 (no) or 1 (yes).\n         * @private\n         * @param event {Event} - Click event on the corresponding button.\n         */\n        _canContinue: function(event) {\n            $(this.options.canContinueFlag).val(parseInt($(event.currentTarget).data('flag'), 10));\n        }\n    });\n    \n    return $.mage.multiShipping;\n});","Magento_Fedex/js/model/shipping-rates-validator.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global define*/\ndefine(\n    [\n        'jquery',\n        'mageUtils',\n        'Magento_Fedex/js/model/shipping-rates-validation-rules',\n        'mage/translate'\n    ],\n    function ($, utils, validationRules, $t) {\n        'use strict';\n\n        return {\n            validationErrors: [],\n            validate: function (address) {\n                var self = this;\n                this.validationErrors = [];\n                $.each(validationRules.getRules(), function (field, rule) {\n                    if (rule.required && utils.isEmpty(address[field])) {\n                        var message = $t('Field ') + field + $t(' is required.');\n\n                        self.validationErrors.push(message);\n                    }\n                });\n                return !Boolean(this.validationErrors.length);\n            }\n        };\n    }\n);\n","Magento_Fedex/js/model/shipping-rates-validation-rules.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global define*/\ndefine(\n    [],\n    function () {\n        'use strict';\n\n        return {\n            getRules: function () {\n                return {\n                    'postcode': {\n                        'required': true\n                    },\n                    'country_id': {\n                        'required': true\n                    }\n                };\n            }\n        };\n    }\n);\n","Magento_Fedex/js/view/shipping-rates-validation.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/shipping-rates-validator',\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\n        'Magento_Fedex/js/model/shipping-rates-validator',\n        'Magento_Fedex/js/model/shipping-rates-validation-rules'\n    ],\n    function (\n        Component,\n        defaultShippingRatesValidator,\n        defaultShippingRatesValidationRules,\n        fedexShippingRatesValidator,\n        fedexShippingRatesValidationRules\n    ) {\n        'use strict';\n        defaultShippingRatesValidator.registerValidator('fedex', fedexShippingRatesValidator);\n        defaultShippingRatesValidationRules.registerRules('fedex', fedexShippingRatesValidationRules);\n        return Component;\n    }\n);\n","Magento_Dhl/js/model/shipping-rates-validator.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global define*/\ndefine(\n    [\n        'jquery',\n        'mageUtils',\n        'Magento_Dhl/js/model/shipping-rates-validation-rules',\n        'mage/translate'\n    ],\n    function ($, utils, validationRules, $t) {\n        'use strict';\n\n        return {\n            validationErrors: [],\n            validate: function (address) {\n                var self = this;\n\n                this.validationErrors = [];\n                $.each(validationRules.getRules(), function (field, rule) {\n                    if (rule.required && utils.isEmpty(address[field])) {\n                        var message = $t('Field ') + field + $t(' is required.');\n\n                        self.validationErrors.push(message);\n                    }\n                });\n                return !Boolean(this.validationErrors.length);\n            }\n        };\n    }\n);\n","Magento_Dhl/js/model/shipping-rates-validation-rules.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*global define*/\ndefine(\n    [],\n    function () {\n        'use strict';\n\n        return {\n            getRules: function () {\n                return {\n                    'postcode': {\n                        'required': true\n                    },\n                    'country_id': {\n                        'required': true\n                    }\n                };\n            }\n        };\n    }\n);\n","Magento_Dhl/js/view/shipping-rates-validation.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/shipping-rates-validator',\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\n        'Magento_Dhl/js/model/shipping-rates-validator',\n        'Magento_Dhl/js/model/shipping-rates-validation-rules'\n    ],\n    function (\n        Component,\n        defaultShippingRatesValidator,\n        defaultShippingRatesValidationRules,\n        dhlShippingRatesValidator,\n        dhlShippingRatesValidationRules\n    ) {\n        'use strict';\n\n        defaultShippingRatesValidator.registerValidator('dhl', dhlShippingRatesValidator);\n        defaultShippingRatesValidationRules.registerRules('dhl', dhlShippingRatesValidationRules);\n        return Component;\n    }\n);\n","Magento_CheckoutAgreements/js/model/place-order-mixin.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\n], function ($, wrapper, agreementsAssigner) {\n    'use strict';\n\n    return function (placeOrderAction) {\n\n        /** Override default place order action and add agreement_ids to request */\n        return wrapper.wrap(placeOrderAction, function (originalAction, paymentData, messageContainer) {\n            agreementsAssigner(paymentData);\n\n            return originalAction(paymentData, messageContainer);\n        });\n    };\n});\n","Magento_CheckoutAgreements/js/model/set-payment-information-mixin.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine([\n    'jquery',\n    'mage/utils/wrapper',\n    'Magento_CheckoutAgreements/js/model/agreements-assigner'\n], function ($, wrapper, agreementsAssigner) {\n    'use strict';\n\n    return function (placeOrderAction) {\n\n        /** Override place-order-mixin for set-payment-information action as they differs only by method signature */\n        return wrapper.wrap(placeOrderAction, function (originalAction, messageContainer, paymentData) {\n            agreementsAssigner(paymentData);\n\n            return originalAction(messageContainer, paymentData);\n        });\n    };\n});\n","Magento_CheckoutAgreements/js/model/agreements-modal.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine(\n    [\n        'jquery',\n        'Magento_Ui/js/modal/modal',\n        'mage/translate'\n    ],\n    function ($, modal, $t) {\n        'use strict';\n        return {\n            modalWindow: null,\n\n            /** Create popUp window for provided element */\n            createModal: function(element) {\n                this.modalWindow = element;\n                var options = {\n                    'type': 'popup',\n                    'modalClass': 'agreements-modal',\n                    'responsive': true,\n                    'innerScroll': true,\n                    'trigger': '.show-modal',\n                    'buttons': [\n                        {\n                            text: $t('Close'),\n                            class: 'action secondary action-hide-popup',\n                            click: function() {\n                                this.closeModal();\n                            }\n                        }\n                    ]\n                };\n                modal(options, $(this.modalWindow));\n            },\n\n            /** Show login popup window */\n            showModal: function() {\n                $(this.modalWindow).modal('openModal');\n            }\n        }\n    }\n);\n","Magento_CheckoutAgreements/js/model/agreements-assigner.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine([\n    'jquery'\n], function ($) {\n    'use strict';\n\n    var agreementsConfig = window.checkoutConfig.checkoutAgreements;\n\n    /** Override default place order action and add agreement_ids to request */\n    return function (paymentData) {\n        var agreementForm,\n            agreementData,\n            agreementIds;\n\n        if (!agreementsConfig.isEnabled) {\n            return;\n        }\n\n        agreementForm = $('.payment-method._active div[data-role=checkout-agreements] input');\n        agreementData = agreementForm.serializeArray();\n        agreementIds = [];\n\n        agreementData.forEach(function (item) {\n            agreementIds.push(item.value);\n        });\n\n        if (paymentData['extension_attributes'] === undefined) {\n            paymentData['extension_attributes'] = {};\n        }\n\n        paymentData['extension_attributes']['agreement_ids'] = agreementIds;\n    };\n});\n","Magento_CheckoutAgreements/js/model/agreement-validator.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine(\n    [\n        'jquery',\n        'mage/validation'\n    ],\n    function ($) {\n        'use strict';\n        var checkoutConfig = window.checkoutConfig,\n            agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\n\n        var agreementsInputPath = '.payment-method._active div.checkout-agreements input';\n\n        return {\n            /**\n             * Validate checkout agreements\n             *\n             * @returns {boolean}\n             */\n            validate: function() {\n                if (!agreementsConfig.isEnabled) {\n                    return true;\n                }\n\n                if ($(agreementsInputPath).length == 0) {\n                    return true;\n                }\n\n                return $('#co-payment-form').validate({\n                    errorClass: 'mage-error',\n                    errorElement: 'div',\n                    meta: 'validate',\n                    errorPlacement: function (error, element) {\n                        var errorPlacement = element;\n                        if (element.is(':checkbox') || element.is(':radio')) {\n                            errorPlacement = element.siblings('label').last();\n                        }\n                        errorPlacement.after(error);\n                    }\n                }).element(agreementsInputPath);\n            }\n        }\n    }\n);\n","Magento_CheckoutAgreements/js/view/checkout-agreements.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'ko',\n        'jquery',\n        'uiComponent',\n        'Magento_CheckoutAgreements/js/model/agreements-modal'\n    ],\n    function (ko, $, Component, agreementsModal) {\n        'use strict';\n        var checkoutConfig = window.checkoutConfig,\n            agreementManualMode = 1,\n            agreementsConfig = checkoutConfig ? checkoutConfig.checkoutAgreements : {};\n\n        return Component.extend({\n            defaults: {\n                template: 'Magento_CheckoutAgreements/checkout/checkout-agreements'\n            },\n            isVisible: agreementsConfig.isEnabled,\n            agreements: agreementsConfig.agreements,\n            modalTitle: ko.observable(null),\n            modalContent: ko.observable(null),\n            modalWindow: null,\n\n            /**\n             * Checks if agreement required\n             *\n             * @param element\n             */\n            isAgreementRequired: function(element) {\n                return element.mode == agreementManualMode;\n            },\n\n            /**\n             * Show agreement content in modal\n             *\n             * @param element\n             */\n            showContent: function (element) {\n                this.modalTitle(element.checkboxText);\n                this.modalContent(element.content);\n                agreementsModal.showModal();\n            },\n\n            /**\n             * Init modal window for rendered element\n             *\n             * @param element\n             */\n            initModal: function(element) {\n                agreementsModal.createModal(element);\n            }\n        });\n    }\n);\n","Magento_CheckoutAgreements/js/view/agreement-validation.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/additional-validators',\n        'Magento_CheckoutAgreements/js/model/agreement-validator'\n    ],\n    function (Component, additionalValidators, agreementValidator) {\n        'use strict';\n        additionalValidators.registerValidator(agreementValidator);\n        return Component.extend({});\n    }\n);\n","Magento_Captcha/captcha.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\ndefine([\n    \"jquery\",\n    \"jquery/ui\"\n], function($){\n    \"use strict\";\n    \n    $.widget('mage.captcha', {\n        options: {\n            refreshClass: 'refreshing',\n            reloadSelector: '.captcha-reload',\n            imageSelector: '.captcha-img',\n            imageLoader: ''\n        },\n\n        /**\n         * Method binds click event to reload image\n         * @private\n         */\n        _create: function() {\n            this.element.on('click', this.options.reloadSelector, $.proxy(this.refresh, this));\n        },\n\n        /**\n         * Method triggeres an AJAX request to refresh the CAPTCHA image\n         * @param e - Event\n         */\n        refresh: function(e) {\n            var imageLoader = this.options.imageLoader;\n\n            if (imageLoader) {\n                this.element.find(this.options.imageSelector).attr('src', imageLoader);\n            }\n            this.element.addClass(this.options.refreshClass);\n\n            $.ajax({\n                url: this.options.url,\n                type: 'post',\n                async: false,\n                dataType: 'json',\n                context: this,\n                data: {\n                    'formId': this.options.type\n                },\n                success: function (response) {\n                    if (response.imgSrc) {\n                        this.element.find(this.options.imageSelector).attr('src', response.imgSrc);\n                    }\n                },\n                complete: function() {\n                    this.element.removeClass(this.options.refreshClass);\n                }\n            });\n        }\n    });\n\n    return $.mage.captcha;\n});","Magento_Captcha/onepage.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\ndefine([\"jquery\"], function($){\n    \"use strict\";\n    $(document).on(\"login\",function() {\n        $(\"[data-captcha='guest_checkout'], [data-captcha='register_during_checkout']\").hide();\n        $(\"[role='guest_checkout'], [role='register_during_checkout']\").hide();\n        var type = ($(\"#login\\\\:guest\").is(':checked')) ? 'guest_checkout' : 'register_during_checkout';\n        $(\"[role='\" + type + \"'], [data-captcha='\" + type + \"']\").show();\n    }).on('billingSave', function() {\n            $(\".captcha-reload:visible\").trigger(\"click\");\n        });\n});","Magento_Captcha/js/model/captchaList.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true*/\n/*global define*/\ndefine(['jquery'], function($) {\n    \"use strict\";\n    var captchaList = [];\n    return {\n        add: function (captcha) {\n            captchaList.push(captcha);\n        },\n        getCaptchaByFormId: function(formId) {\n            var captcha = null;\n            $.each(captchaList, function(key, item) {\n                if (formId === item.formId) {\n                    captcha = item;\n                    return false;\n                }\n            });\n            return captcha;\n        },\n        getCaptchaList: function() {\n            return captchaList;\n        }\n    };\n});\n","Magento_Captcha/js/model/captcha.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\n/*global alert*/\ndefine(\n    [\n        'jquery',\n        'ko',\n        'Magento_Captcha/js/action/refresh'\n    ],\n    function($, ko, refreshAction) {\n        return function (captchaData) {\n            return {\n                formId: captchaData.formId,\n                imageSource: ko.observable(captchaData.imageSrc),\n                visibility: ko.observable(false),\n                captchaValue: ko.observable(null),\n                isRequired: captchaData.isRequired,\n                isCaseSensitive: captchaData.isCaseSensitive,\n                imageHeight: captchaData.imageHeight,\n                refreshUrl: captchaData.refreshUrl,\n                isLoading: ko.observable(false),\n\n                getFormId: function () {\n                    return this.formId;\n                },\n                setFormId: function (formId) {\n                    this.formId = formId;\n                },\n                getIsVisible: function () {\n                    return this.visibility;\n                },\n                setIsVisible: function (flag) {\n                    this.visibility(flag);\n                },\n                getIsRequired: function () {\n                    return this.isRequired;\n                },\n                setIsRequired: function (flag) {\n                    this.isRequired = flag;\n                },\n                getIsCaseSensitive: function () {\n                    return this.isCaseSensitive;\n                },\n                setIsCaseSensitive: function (flag) {\n                    this.isCaseSensitive = flag;\n                },\n                getImageHeight: function () {\n                    return this.imageHeight;\n                },\n                setImageHeight: function (height) {\n                    this.imageHeight = height;\n                },\n                getImageSource: function () {\n                    return this.imageSource;\n                },\n                setImageSource: function (imageSource) {\n                     this.imageSource(imageSource);\n                },\n                getRefreshUrl: function () {\n                    return this.refreshUrl;\n                },\n                setRefreshUrl: function (url) {\n                    this.refreshUrl = url;\n                },\n                getCaptchaValue: function () {\n                    return this.captchaValue;\n                },\n                setCaptchaValue: function (value) {\n                    this.captchaValue(value);\n                },\n                refresh: function() {\n                    var refresh,\n                        self = this;\n                    this.isLoading(true);\n\n                    refresh = refreshAction(this.getRefreshUrl(), this.getFormId(), this.getImageSource());\n                    $.when(refresh).done(function() {\n                        self.isLoading(false);\n                    });\n                }\n            };\n        }\n    }\n);\n","Magento_Captcha/js/action/refresh.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true*/\n/*global define*/\ndefine(\n    ['mage/storage'],\n    function(storage) {\n        \"use strict\";\n        return function(refreshUrl, formId, imageSource) {\n            return storage.post(\n                refreshUrl,\n                JSON.stringify({'formId': formId}),\n                false\n            ).done(\n                function (response) {\n                    if (response.imgSrc) {\n                        imageSource(response.imgSrc);\n                    }\n                }\n            );\n        };\n    }\n);\n","Magento_Captcha/js/view/checkout/loginCaptcha.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true jquery:true*/\n/*global define*/\ndefine(\n    [\n        'Magento_Captcha/js/view/checkout/defaultCaptcha',\n        'Magento_Captcha/js/model/captchaList',\n        'Magento_Customer/js/action/login'\n    ],\n    function (defaultCaptcha, captchaList, loginAction) {\n        'use strict';\n        return defaultCaptcha.extend({\n            initialize: function() {\n                this._super();\n                var currentCaptcha = captchaList.getCaptchaByFormId(this.formId),\n                    self = this;\n\n                if (currentCaptcha != null) {\n                    currentCaptcha.setIsVisible(true);\n                    this.setCurrentCaptcha(currentCaptcha);\n\n                    loginAction.registerLoginCallback(function(loginData) {\n                        if (loginData.captcha_form_id && loginData.captcha_form_id == self.formId) {\n                            self.refresh();\n                        }\n                    });\n                }\n            }\n        });\n    }\n);\n","Magento_Captcha/js/view/checkout/defaultCaptcha.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true jquery:true*/\n/*global define*/\ndefine(\n    [\n        'jquery',\n        'uiComponent',\n        'Magento_Captcha/js/model/captcha',\n        'Magento_Captcha/js/model/captchaList'\n    ],\n    function ($, Component, Captcha, captchaList) {\n        'use strict';\n        var captchaConfig;\n\n        return Component.extend({\n            defaults: {\n                template: 'Magento_Captcha/checkout/captcha'\n            },\n            dataScope: 'global',\n            currentCaptcha: null,\n            captchaValue: function() {\n                return this.currentCaptcha.getCaptchaValue();\n            },\n            initialize: function() {\n                this._super();\n                captchaConfig = window[this.configSource]['captcha'];\n\n                if (captchaConfig) {\n                    $.each(captchaConfig, function(formId, captchaData) {\n                        captchaData.formId = formId;\n                        captchaList.add(Captcha(captchaData));\n                    });\n                }\n            },\n            getIsLoading: function() {\n                return this.currentCaptcha !== null ? this.currentCaptcha.isLoading : false;\n            },\n            getCurrentCaptcha: function() {\n                return this.currentCaptcha;\n            },\n            setCurrentCaptcha: function(captcha) {\n                this.currentCaptcha = captcha;\n            },\n            getFormId: function() {\n                return this.currentCaptcha !== null ? this.currentCaptcha.getFormId() : null;\n            },\n            getIsVisible: function() {\n                return this.currentCaptcha !== null ? this.currentCaptcha.getIsVisible() : false;\n            },\n            setIsVisible: function(flag) {\n                this.currentCaptcha.setIsVisible(flag);\n            },\n            isRequired: function() {\n                return this.currentCaptcha !== null ? this.currentCaptcha.getIsRequired() : false;\n            },\n            isCaseSensitive: function() {\n                return this.currentCaptcha !== null ? this.currentCaptcha.getIsCaseSensitive() : false;\n            },\n            imageHeight: function() {\n                return this.currentCaptcha !== null ? this.currentCaptcha.getImageHeight() : null;\n            },\n            getImageSource: function () {\n                return this.currentCaptcha !== null ? this.currentCaptcha.getImageSource() : null;\n            },\n            refresh: function() {\n                this.currentCaptcha.refresh();\n            }\n        });\n    }\n);\n","Magento_Braintree/js/validator.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'underscore'\n], function (_) {\n    'use strict';\n\n    return {\n        config: {},\n\n        /**\n         * Set configuration\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n        },\n\n        /**\n         * Get List of available card types\n         * @returns {*|exports.defaults.availableCardTypes|{}}\n         */\n        getAvailableCardTypes: function () {\n            return this.config.availableCardTypes;\n        },\n\n        /**\n         * Get list of card types\n         * @returns {Object}\n         */\n        getCcTypesMapper: function () {\n            return this.config.ccTypesMapper;\n        },\n\n        /**\n         * Find mage card type by Braintree type\n         * @param {String} type\n         * @param {Object} availableTypes\n         * @returns {*}\n         */\n        getMageCardType: function (type, availableTypes) {\n            var storedCardType = null,\n                mapper = this.getCcTypesMapper();\n\n            if (type && typeof mapper[type] !== 'undefined') {\n                storedCardType = mapper[type];\n\n                if (_.indexOf(availableTypes, storedCardType) !== -1) {\n                    return storedCardType;\n                }\n            }\n\n            return null;\n        },\n\n        /**\n         * Filter list of available card types\n         * @param {Object} availableTypes\n         * @param {Object} countrySpecificCardTypes\n         * @returns {Object}\n         */\n        collectTypes: function (availableTypes, countrySpecificCardTypes) {\n            var key,\n                filteredTypes = [];\n\n            for (key in availableTypes) {\n                if (_.indexOf(countrySpecificCardTypes, availableTypes[key]) !== -1) {\n                    filteredTypes.push(availableTypes[key]);\n                }\n            }\n\n            return filteredTypes;\n        },\n\n        /**\n         * Get list of card types for country\n         * @param {String} countryId\n         * @returns {*}\n         */\n        getCountrySpecificCardTypes: function (countryId) {\n            if (typeof this.config.countrySpecificCardTypes[countryId] !== 'undefined') {\n\n                return this.config.countrySpecificCardTypes[countryId];\n            }\n\n            return false;\n        }\n    };\n});\n","Magento_Braintree/js/paypal/form-builder.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'jquery',\n        'underscore',\n        'mage/template'\n    ],\n    function ($, _, mageTemplate) {\n        'use strict';\n\n        return {\n\n            /**\n             * @param {Object} formData\n             * @returns {*|jQuery}\n             */\n            build: function (formData) {\n                var formTmpl = mageTemplate('<form action=\"<%= data.action %>\"' +\n                    ' method=\"POST\" hidden enctype=\"application/x-www-form-urlencoded\">' +\n                        '<% _.each(data.fields, function(val, key){ %>' +\n                            '<input value=\\'<%= val %>\\' name=\"<%= key %>\" type=\"hidden\">' +\n                        '<% }); %>' +\n                    '</form>');\n\n                return $(formTmpl({\n                    data: {\n                        action: formData.action,\n                        fields: formData.fields\n                    }\n                })).appendTo($('[data-container=\"body\"]'));\n            }\n        };\n    }\n);\n","Magento_Braintree/js/paypal/button.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'rjsResolver',\n        'uiRegistry',\n        'uiComponent',\n        'underscore',\n        'jquery',\n        'braintree',\n        'Magento_Braintree/js/paypal/form-builder',\n        'domReady!'\n    ],\n    function (\n        resolver,\n        registry,\n        Component,\n        _,\n        $,\n        braintree,\n        formBuilder\n    ) {\n        'use strict';\n\n        return Component.extend({\n\n            defaults: {\n\n                integrationName: 'braintreePaypal.currentIntegration',\n\n                /**\n                 * {String}\n                 */\n                displayName: null,\n\n                /**\n                 * {String}\n                 */\n                clientToken: null,\n\n                /**\n                 * {Object}\n                 */\n                clientConfig: {\n\n                    /**\n                     * @param {Object} integration\n                     */\n                    onReady: function (integration) {\n                        resolver(function () {\n                            registry.set(this.integrationName, integration);\n                            $('#' + this.id).removeAttr('disabled');\n                        }, this);\n                    },\n\n                    /**\n                     * @param {Object} payload\n                     */\n                    onPaymentMethodReceived: function (payload) {\n                        $('body').trigger('processStart');\n\n                        formBuilder.build(\n                            {\n                                action: this.actionSuccess,\n                                fields: {\n                                    result: JSON.stringify(payload)\n                                }\n                            }\n                        ).submit();\n                    }\n                }\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initialize: function () {\n                this._super()\n                    .initComponent();\n\n                return this;\n            },\n\n            /**\n             * @returns {Object}\n             */\n            initComponent: function () {\n                var currentIntegration = registry.get(this.integrationName),\n                    $this = $('#' + this.id),\n                    self = this,\n                    data = {\n                        amount: $this.data('amount'),\n                        locale: $this.data('locale'),\n                        currency: $this.data('currency')\n                    },\n                    initCallback = function () {\n                        $this.attr('disabled', 'disabled');\n                        registry.remove(this.integrationName);\n                        braintree.setup(this.clientToken, 'custom', this.getClientConfig(data));\n\n                        $this.off('click')\n                            .on('click', function (event) {\n                                event.preventDefault();\n\n                                registry.get(self.integrationName, function (integration) {\n                                    integration.paypal.initAuthFlow();\n                                });\n                            });\n                    }.bind(this);\n\n                currentIntegration ?\n                    currentIntegration.teardown(initCallback) :\n                    initCallback();\n\n                return this;\n            },\n\n            /**\n             * @returns {Object}\n             */\n            getClientConfig: function (data) {\n                this.clientConfig.paypal = {\n                    singleUse: true,\n                    amount: data.amount,\n                    currency: data.currency,\n                    locale: data.locale,\n                    enableShippingAddress: true,\n                    headless: true\n                };\n\n                if (this.displayName) {\n                    this.clientConfig.paypal.displayName = this.displayName;\n                }\n\n                _.each(this.clientConfig, function (fn, name) {\n                    if (typeof fn === 'function') {\n                        this.clientConfig[name] = fn.bind(this);\n                    }\n                }, this);\n\n                return this.clientConfig;\n            }\n        });\n    }\n);\n","Magento_Braintree/js/view/payment/validator-handler.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\n\ndefine([\n    'jquery',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Braintree/js/view/payment/3d-secure'\n], function ($, globalMessageList, verify3DSecure) {\n    'use strict';\n\n    return {\n        validators: [],\n\n        /**\n         * Get payment config\n         * @returns {Object}\n         */\n        getConfig: function () {\n            return window.checkoutConfig.payment;\n        },\n\n        /**\n         * Init list of validators\n         */\n        initialize: function () {\n            var config = this.getConfig();\n\n            if (config[verify3DSecure.getCode()].enabled) {\n                verify3DSecure.setConfig(config[verify3DSecure.getCode()]);\n                this.add(verify3DSecure);\n            }\n        },\n\n        /**\n         * Add new validator\n         * @param {Object} validator\n         */\n        add: function (validator) {\n            this.validators.push(validator);\n        },\n\n        /**\n         * Run pull of validators\n         * @param {Object} context\n         * @param {Function} callback\n         */\n        validate: function (context, callback) {\n            var self = this,\n                deferred;\n\n            // no available validators\n            if (!self.validators.length) {\n                callback();\n\n                return;\n            }\n\n            // get list of deferred validators\n            deferred = $.map(self.validators, function (current) {\n                return current.validate(context);\n            });\n\n            $.when.apply($, deferred)\n                .done(function () {\n                    callback();\n                }).fail(function (error) {\n                    self.showError(error);\n                });\n        },\n\n        /**\n         * Show error message\n         * @param {String} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n        }\n    };\n});\n","Magento_Braintree/js/view/payment/adapter.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'braintree',\n    'Magento_Ui/js/model/messageList',\n    'mage/translate'\n], function ($, braintree, globalMessageList, $t) {\n    'use strict';\n\n    return {\n        apiClient: null,\n        config: {},\n        checkout: null,\n\n        /**\n         * Get Braintree api client\n         * @returns {Object}\n         */\n        getApiClient: function () {\n            if (!this.apiClient) {\n                this.apiClient = new braintree.api.Client({\n                    clientToken: this.getClientToken()\n                });\n            }\n\n            return this.apiClient;\n        },\n\n        /**\n         * Set configuration\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n        },\n\n        /**\n         * Setup Braintree SDK\n         */\n        setup: function () {\n            if (!this.getClientToken()) {\n                this.showError($t('Sorry, but something went wrong.'));\n            }\n\n            braintree.setup(this.getClientToken(), 'custom', this.config);\n        },\n\n        /**\n         * Get payment name\n         * @returns {String}\n         */\n        getCode: function () {\n            return 'braintree';\n        },\n\n        /**\n         * Get client token\n         * @returns {String|*}\n         */\n        getClientToken: function () {\n\n            return window.checkoutConfig.payment[this.getCode()].clientToken;\n        },\n\n        /**\n         * Show error message\n         *\n         * @param {String} errorMessage\n         */\n        showError: function (errorMessage) {\n            globalMessageList.addErrorMessage({\n                message: errorMessage\n            });\n        }\n    };\n});\n","Magento_Braintree/js/view/payment/3d-secure.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\n\ndefine([\n    'jquery',\n    'Magento_Braintree/js/view/payment/adapter',\n    'Magento_Checkout/js/model/quote',\n    'mage/translate'\n], function ($, braintree, quote, $t) {\n    'use strict';\n\n    return {\n        config: null,\n\n        /**\n         * Set 3d secure config\n         * @param {Object} config\n         */\n        setConfig: function (config) {\n            this.config = config;\n            this.config.thresholdAmount = parseFloat(config.thresholdAmount);\n        },\n\n        /**\n         * Get code\n         * @returns {String}\n         */\n        getCode: function () {\n            return 'three_d_secure';\n        },\n\n        /**\n         * Validate Braintree payment nonce\n         * @param {Object} context\n         * @returns {Object}\n         */\n        validate: function (context) {\n            var client = braintree.getApiClient(),\n                state = $.Deferred(),\n                totalAmount = quote.totals()['base_grand_total'],\n                billingAddress = quote.billingAddress();\n\n            if (!this.isAmountAvailable(totalAmount) || !this.isCountryAvailable(billingAddress.countryId)) {\n                state.resolve();\n\n                return state.promise();\n            }\n\n            client.verify3DS({\n                amount: totalAmount,\n                creditCard: context.paymentMethodNonce\n            }, function (error, response) {\n                var liability;\n\n                if (error) {\n                    state.reject(error.message);\n\n                    return;\n                }\n\n                liability = {\n                    shifted: response.verificationDetails.liabilityShifted,\n                    shiftPossible: response.verificationDetails.liabilityShiftPossible\n                };\n\n                if (liability.shifted || !liability.shifted && !liability.shiftPossible) {\n                    context.paymentMethodNonce = response.nonce;\n                    state.resolve();\n                } else {\n                    state.reject($t('Please try again with another form of payment.'));\n                }\n            });\n\n            return state.promise();\n        },\n\n        /**\n         * Check minimal amount for 3d secure activation\n         * @param {Number} amount\n         * @returns {Boolean}\n         */\n        isAmountAvailable: function (amount) {\n            amount = parseFloat(amount);\n\n            return amount >= this.config.thresholdAmount;\n        },\n\n        /**\n         * Check if current country is available for 3d secure\n         * @param {String} countryId\n         * @returns {Boolean}\n         */\n        isCountryAvailable: function (countryId) {\n            var key,\n                specificCountries = this.config.specificCountries;\n\n            // all countries are available\n            if (!specificCountries.length) {\n                return true;\n            }\n\n            for (key in specificCountries) {\n                if (countryId === specificCountries[key]) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    };\n});\n","Magento_Braintree/js/view/payment/braintree.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'uiRegistry',\n        'Magento_Braintree/js/view/payment/adapter',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        Registry,\n        Braintree,\n        rendererList\n    ) {\n        'use strict';\n\n        var config = window.checkoutConfig.payment,\n            braintreeType = 'braintree',\n            payPalType = 'braintree_paypal',\n            path = 'checkout.steps.billing-step.payment.payments-list.',\n            components = [];\n\n        if (config[braintreeType].isActive) {\n            components.push(path + braintreeType);\n            rendererList.push(\n                {\n                    type: braintreeType,\n                    component: 'Magento_Braintree/js/view/payment/method-renderer/hosted-fields'\n                }\n            );\n        }\n\n        if (config[payPalType].isActive) {\n            rendererList.push(\n                {\n                    type: payPalType,\n                    component: 'Magento_Braintree/js/view/payment/method-renderer/paypal'\n                }\n            );\n        }\n\n        // setup Braintree SDK with merged configuration from all related components\n        if (components.length) {\n            Registry.get(components, function () {\n                Braintree.setup();\n            });\n        }\n\n        /** Add view logic here if needed */\n        return Component.extend({});\n    }\n);\n","Magento_Braintree/js/view/payment/method-renderer/cc-form.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'underscore',\n        'jquery',\n        'Magento_Payment/js/view/payment/cc-form',\n        'Magento_Checkout/js/model/quote',\n        'Magento_Braintree/js/view/payment/adapter',\n        'mage/translate',\n        'Magento_Braintree/js/validator',\n        'Magento_Braintree/js/view/payment/validator-handler',\n        'Magento_Checkout/js/model/full-screen-loader'\n    ],\n    function (\n        _,\n        $,\n        Component,\n        quote,\n        braintree,\n        $t,\n        validator,\n        validatorManager,\n        fullScreenLoader\n    ) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                active: false,\n                braintreeClient: null,\n                braintreeDeviceData: null,\n                paymentMethodNonce: null,\n                lastBillingAddress: null,\n                validatorManager: validatorManager,\n                code: 'braintree',\n\n                /**\n                 * Additional payment data\n                 *\n                 * {Object}\n                 */\n                additionalData: {},\n\n                /**\n                 * Braintree client configuration\n                 *\n                 * {Object}\n                 */\n                clientConfig: {\n\n                    /**\n                     * Triggers on payment nonce receive\n                     * @param {Object} response\n                     */\n                    onPaymentMethodReceived: function (response) {\n                        this.beforePlaceOrder(response);\n                    },\n\n                    /**\n                     * Triggers on any Braintree error\n                     */\n                    onError: function () {\n                        this.paymentMethodNonce = null;\n                    },\n\n                    /**\n                     * Triggers when customer click \"Cancel\"\n                     */\n                    onCancelled: function () {\n                        this.paymentMethodNonce = null;\n                    }\n                },\n                imports: {\n                    onActiveChange: 'active'\n                }\n            },\n\n            /**\n             * Set list of observable attributes\n             *\n             * @returns {exports.initObservable}\n             */\n            initObservable: function () {\n                validator.setConfig(window.checkoutConfig.payment[this.getCode()]);\n                this._super()\n                    .observe(['active']);\n                this.validatorManager.initialize();\n                this.initBraintree();\n\n                return this;\n            },\n\n            /**\n             * Get payment name\n             *\n             * @returns {String}\n             */\n            getCode: function () {\n                return this.code;\n            },\n\n            /**\n             * Check if payment is active\n             *\n             * @returns {Boolean}\n             */\n            isActive: function () {\n                var active = this.getCode() === this.isChecked();\n\n                this.active(active);\n\n                return active;\n            },\n\n            /**\n             * Triggers when payment method change\n             * @param {Boolean} isActive\n             */\n            onActiveChange: function (isActive) {\n                if (!isActive || this.isSingleUse()) {\n                    return;\n                }\n\n                this.reInitBraintree();\n            },\n\n            /**\n             * Init config\n             */\n            initClientConfig: function () {\n                // Advanced fraud tools settings\n                if (this.hasFraudProtection()) {\n                    this.clientConfig = _.extend(this.clientConfig, this.kountConfig());\n                }\n\n                _.each(this.clientConfig, function (fn, name) {\n                    if (typeof fn === 'function') {\n                        this.clientConfig[name] = fn.bind(this);\n                    }\n                }, this);\n            },\n\n            /**\n             * Create Braintree configuration\n             */\n            initBraintree: function () {\n                this.initClientConfig();\n                braintree.config = _.extend(braintree.config, this.clientConfig);\n            },\n\n            /**\n             * Re-init Braintree configuration\n             */\n            reInitBraintree: function () {\n                var intervalId = setInterval(function () {\n                    // stop loader when frame will be loaded\n                    if ($('#braintree-hosted-field-number').length) {\n                        clearInterval(intervalId);\n                        fullScreenLoader.stopLoader();\n                    }\n                }, 500);\n\n                fullScreenLoader.startLoader();\n                braintree.setConfig(this.clientConfig);\n                braintree.setup();\n            },\n\n            /**\n             * @returns {Object}\n             */\n            kountConfig: function () {\n                var config = {\n                    dataCollector: {\n                        kount: {\n                            environment: this.getEnvironment()\n                        }\n                    },\n\n                    /**\n                     * Device data initialization\n                     *\n                     * @param {Object} checkout\n                     */\n                    onReady: function (checkout) {\n                        braintree.checkout = checkout;\n                        this.additionalData['device_data'] = checkout.deviceData;\n                    }\n                };\n\n                if (this.getKountMerchantId()) {\n                    config.dataCollector.kount.merchantId = this.getKountMerchantId();\n                }\n\n                return config;\n            },\n\n            /**\n             * Get full selector name\n             *\n             * @param {String} field\n             * @returns {String}\n             */\n            getSelector: function (field) {\n                return '#' + this.getCode() + '_' + field;\n            },\n\n            /**\n             * Get list of available CC types\n             *\n             * @returns {Object}\n             */\n            getCcAvailableTypes: function () {\n                var availableTypes = validator.getAvailableCardTypes(),\n                    billingAddress = quote.billingAddress(),\n                    billingCountryId;\n\n                this.lastBillingAddress = quote.shippingAddress();\n\n                if (!billingAddress) {\n                    billingAddress = this.lastBillingAddress;\n                }\n\n                billingCountryId = billingAddress.countryId;\n\n                if (billingCountryId && validator.getCountrySpecificCardTypes(billingCountryId)) {\n\n                    return validator.collectTypes(\n                        availableTypes, validator.getCountrySpecificCardTypes(billingCountryId)\n                    );\n                }\n\n                return availableTypes;\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            hasFraudProtection: function () {\n                return window.checkoutConfig.payment[this.getCode()].hasFraudProtection;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getEnvironment: function () {\n                return window.checkoutConfig.payment[this.getCode()].environment;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getKountMerchantId: function () {\n                return window.checkoutConfig.payment[this.getCode()].kountMerchantId;\n            },\n\n            /**\n             * Get data\n             *\n             * @returns {Object}\n             */\n            getData: function () {\n                var data = {\n                    'method': this.getCode(),\n                    'additional_data': {\n                        'payment_method_nonce': this.paymentMethodNonce\n                    }\n                };\n\n                data['additional_data'] = _.extend(data['additional_data'], this.additionalData);\n\n                return data;\n            },\n\n            /**\n             * Set payment nonce\n             * @param {String} paymentMethodNonce\n             */\n            setPaymentMethodNonce: function (paymentMethodNonce) {\n                this.paymentMethodNonce = paymentMethodNonce;\n            },\n\n            /**\n             * Prepare data to place order\n             * @param {Object} data\n             */\n            beforePlaceOrder: function (data) {\n                this.setPaymentMethodNonce(data.nonce);\n                this.placeOrder();\n            },\n\n            /**\n             * Action to place order\n             * @param {String} key\n             */\n            placeOrder: function (key) {\n                var self = this;\n\n                if (key) {\n                    return self._super();\n                }\n                // place order on success validation\n                self.validatorManager.validate(self, function () {\n                    return self.placeOrder('parent');\n                });\n\n                return false;\n            },\n\n            /**\n             * Check if Braintree configured without PayPal\n             * @returns {Boolean}\n             */\n            isSingleUse: function () {\n                return window.checkoutConfig.payment[this.getCode()].isSingleUse;\n            }\n        });\n    }\n);\n","Magento_Braintree/js/view/payment/method-renderer/paypal.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'underscore',\n    'Magento_Checkout/js/view/payment/default',\n    'Magento_Braintree/js/view/payment/adapter',\n    'Magento_Checkout/js/model/quote',\n    'Magento_Checkout/js/model/full-screen-loader',\n    'Magento_Checkout/js/model/payment/additional-validators'\n], function ($, _, Component, Braintree, quote, fullScreenLoader, additionalValidators) {\n    'use strict';\n\n    return Component.extend({\n        defaults: {\n            template: 'Magento_Braintree/payment/paypal',\n            code: 'braintree_paypal',\n            active: false,\n            paymentMethodNonce: null,\n            grandTotalAmount: null,\n\n            /**\n             * PayPal client configuration\n             * {Object}\n             */\n            clientConfig: {\n\n                /**\n                 * Triggers when widget is loaded\n                 * @param {Object} checkout\n                 */\n                onReady: function (checkout) {\n                    Braintree.checkout = checkout;\n                    this.enableButton();\n                },\n\n                /**\n                 * Triggers on payment nonce receive\n                 * @param {Object} response\n                 */\n                onPaymentMethodReceived: function (response) {\n                    this.beforePlaceOrder(response);\n                }\n            },\n            imports: {\n                onActiveChange: 'active'\n            }\n        },\n\n        /**\n         * Set list of observable attributes\n         * @returns {exports.initObservable}\n         */\n        initObservable: function () {\n            var self = this;\n\n            this._super()\n                .observe(['active']);\n\n            this.grandTotalAmount = quote.totals()['base_grand_total'];\n\n            quote.totals.subscribe(function () {\n                if (self.grandTotalAmount !== quote.totals()['base_grand_total']) {\n                    self.grandTotalAmount = quote.totals()['base_grand_total'];\n                    self.reInitPayPal();\n                }\n            });\n\n            this.initClientConfig();\n\n            return this;\n        },\n\n        /**\n         * Get payment name\n         *\n         * @returns {String}\n         */\n        getCode: function () {\n            return this.code;\n        },\n\n        /**\n         * Get payment title\n         *\n         * @returns {String}\n         */\n        getTitle: function () {\n            return window.checkoutConfig.payment[this.getCode()].title;\n        },\n\n        /**\n         * Check if payment is active\n         *\n         * @returns {Boolean}\n         */\n        isActive: function () {\n            var active = this.getCode() === this.isChecked();\n\n            this.active(active);\n\n            return active;\n        },\n\n        /**\n         * Triggers when payment method change\n         * @param {Boolean} isActive\n         */\n        onActiveChange: function (isActive) {\n            if (!isActive) {\n                return;\n            }\n\n            // need always re-init Braintree with PayPal configuration\n            this.reInitPayPal();\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            this.clientConfig = _.extend(this.clientConfig, this.getPayPalConfig());\n\n            _.each(this.clientConfig, function (fn, name) {\n                if (typeof fn === 'function') {\n                    this.clientConfig[name] = fn.bind(this);\n                }\n            }, this);\n\n            Braintree.config = _.extend(Braintree.config, this.clientConfig);\n        },\n\n        /**\n         * Set payment nonce\n         * @param {String} paymentMethodNonce\n         */\n        setPaymentMethodNonce: function (paymentMethodNonce) {\n            this.paymentMethodNonce = paymentMethodNonce;\n        },\n\n        /**\n         * Update quote billing address\n         * @param {Object}customer\n         * @param {Object}address\n         */\n        setBillingAddress: function (customer, address) {\n            var billingAddress = {\n                street: [address.streetAddress],\n                city: address.locality,\n                regionCode: address.region,\n                postcode: address.postalCode,\n                countryId: address.countryCodeAlpha2,\n                firstname: customer.firstName,\n                lastname: customer.lastName,\n                telephone: customer.phone\n            };\n\n            quote.billingAddress(billingAddress);\n        },\n\n        /**\n         * Prepare data to place order\n         * @param {Object} data\n         */\n        beforePlaceOrder: function (data) {\n            this.setPaymentMethodNonce(data.nonce);\n\n            if (quote.billingAddress() === null && typeof data.details.billingAddress !== 'undefined') {\n                this.setBillingAddress(data.details, data.details.billingAddress);\n            }\n            this.placeOrder();\n        },\n\n        /**\n         * Re-init PayPal Auth Flow\n         */\n        reInitPayPal: function () {\n            if (Braintree.checkout) {\n                Braintree.checkout.teardown(function () {\n                    Braintree.checkout = null;\n                });\n            }\n\n            this.disableButton();\n            this.clientConfig.paypal.amount = this.grandTotalAmount;\n\n            Braintree.setConfig(this.clientConfig);\n            Braintree.setup();\n        },\n\n        /**\n         * Triggers when customer click \"Continue to PayPal\" button\n         */\n        payWithPayPal: function () {\n            if (additionalValidators.validate()) {\n                Braintree.checkout.paypal.initAuthFlow();\n            }\n        },\n\n        /**\n         * Get locale\n         * @returns {String}\n         */\n        getLocale: function () {\n            return window.checkoutConfig.payment[this.getCode()].locale;\n        },\n\n        /**\n         * Is shipping address can be editable on PayPal side\n         * @returns {Boolean}\n         */\n        isAllowOverrideShippingAddress: function () {\n            return window.checkoutConfig.payment[this.getCode()].isAllowShippingAddressOverride;\n        },\n\n        /**\n         * Get configuration for PayPal\n         * @returns {Object}\n         */\n        getPayPalConfig: function () {\n            var totals = quote.totals(),\n                config = {};\n\n            config.paypal = {\n                container: 'paypal-container',\n                singleUse: true,\n                headless: true,\n                amount: this.grandTotalAmount,\n                currency: totals['base_currency_code'],\n                locale: this.getLocale(),\n                enableShippingAddress: true,\n\n                /**\n                 * Triggers on any Braintree error\n                 */\n                onError: function () {\n                    this.paymentMethodNonce = null;\n                },\n\n                /**\n                 * Triggers if browser doesn't support PayPal Checkout\n                 */\n                onUnsupported: function () {\n                    this.paymentMethodNonce = null;\n                }\n            };\n\n            config.paypal.shippingAddressOverride = this.getShippingAddress();\n\n            if (this.getMerchantName()) {\n                config.paypal.displayName = this.getMerchantName();\n            }\n\n            return config;\n        },\n\n        /**\n         * Get shipping address\n         * @returns {Object}\n         */\n        getShippingAddress: function () {\n            var address = quote.shippingAddress();\n\n            if (address.postcode === null) {\n\n                return {};\n            }\n\n            return {\n                recipientName: address.firstname + ' ' + address.lastname,\n                streetAddress: address.street[0],\n                locality: address.city,\n                countryCodeAlpha2: address.countryId,\n                postalCode: address.postcode,\n                region: address.regionCode,\n                phone: address.telephone,\n                editable: this.isAllowOverrideShippingAddress()\n            };\n        },\n\n        /**\n         * Get merchant name\n         * @returns {String}\n         */\n        getMerchantName: function () {\n            return window.checkoutConfig.payment[this.getCode()].merchantName;\n        },\n\n        /**\n         * Get data\n         * @returns {Object}\n         */\n        getData: function () {\n            return {\n                'method': this.getCode(),\n                'additional_data': {\n                    'payment_method_nonce': this.paymentMethodNonce\n                }\n            };\n        },\n\n        /**\n         * Returns payment acceptance mark image path\n         * @returns {String}\n         */\n        getPaymentAcceptanceMarkSrc: function () {\n\n            return window.checkoutConfig.payment[this.getCode()].paymentAcceptanceMarkSrc;\n        },\n\n        /**\n         * Disable submit button\n         */\n        disableButton: function () {\n            // stop any previous shown loaders\n            fullScreenLoader.stopLoader();\n            fullScreenLoader.startLoader();\n            $('[data-button=\"place\"]').attr('disabled', 'disabled');\n        },\n\n        /**\n         * Enable submit button\n         */\n        enableButton: function () {\n            $('[data-button=\"place\"]').removeAttr('disabled');\n            fullScreenLoader.stopLoader();\n        }\n    });\n});\n","Magento_Braintree/js/view/payment/method-renderer/hosted-fields.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\n\ndefine([\n    'jquery',\n    'Magento_Braintree/js/view/payment/method-renderer/cc-form',\n    'Magento_Braintree/js/validator',\n    'Magento_Vault/js/view/payment/vault-enabler',\n    'mage/translate'\n], function ($, Component, validator, VaultEnabler, $t) {\n    'use strict';\n\n    return Component.extend({\n\n        defaults: {\n            template: 'Magento_Braintree/payment/form',\n            clientConfig: {\n\n                /**\n                 * {String}\n                 */\n                id: 'co-transparent-form-braintree'\n            },\n            isValidCardNumber: false\n        },\n\n        /**\n         * @returns {exports.initialize}\n         */\n        initialize: function () {\n            this._super();\n            this.vaultEnabler = new VaultEnabler();\n            this.vaultEnabler.setPaymentCode(this.getVaultCode());\n\n            return this;\n        },\n\n        /**\n         * Init config\n         */\n        initClientConfig: function () {\n            this._super();\n\n            // Hosted fields settings\n            this.clientConfig.hostedFields = this.getHostedFields();\n        },\n\n        /**\n         * @returns {Object}\n         */\n        getData: function () {\n            var data = this._super();\n\n            this.vaultEnabler.visitAdditionalData(data);\n\n            return data;\n        },\n\n        /**\n         * @returns {Bool}\n         */\n        isVaultEnabled: function () {\n            return this.vaultEnabler.isVaultEnabled();\n        },\n\n        /**\n         * Get Braintree Hosted Fields\n         * @returns {Object}\n         */\n        getHostedFields: function () {\n            var self = this,\n                fields = {\n                    number: {\n                        selector: self.getSelector('cc_number')\n                    },\n                    expirationMonth: {\n                        selector: self.getSelector('expirationMonth'),\n                        placeholder: $t('MM')\n                    },\n                    expirationYear: {\n                        selector: self.getSelector('expirationYear'),\n                        placeholder: $t('YY')\n                    }\n                };\n\n            if (self.hasVerification()) {\n                fields.cvv = {\n                    selector: self.getSelector('cc_cid')\n                };\n            }\n\n            /**\n             * Triggers on Hosted Field changes\n             * @param {Object} event\n             * @returns {Boolean}\n             */\n            fields.onFieldEvent = function (event) {\n                if (event.isEmpty === false) {\n                    self.validateCardType();\n                }\n\n                if (event.type !== 'fieldStateChange') {\n\n                    return false;\n                }\n\n                // Handle a change in validation or card type\n                if (event.target.fieldKey === 'number') {\n                    self.selectedCardType(null);\n                }\n\n                if (event.target.fieldKey === 'number' && event.card) {\n                    self.isValidCardNumber = event.isValid;\n                    self.selectedCardType(\n                        validator.getMageCardType(event.card.type, self.getCcAvailableTypes())\n                    );\n                }\n            };\n\n            return fields;\n        },\n\n        /**\n         * Validate current credit card type\n         * @returns {Boolean}\n         */\n        validateCardType: function () {\n            var $selector = $(this.getSelector('cc_number')),\n                invalidClass = 'braintree-hosted-fields-invalid';\n\n            $selector.removeClass(invalidClass);\n\n            if (this.selectedCardType() === null || !this.isValidCardNumber) {\n                $(this.getSelector('cc_number')).addClass(invalidClass);\n\n                return false;\n            }\n\n            return true;\n        },\n\n        /**\n         * Trigger order placing\n         */\n        placeOrderClick: function () {\n            if (this.validateCardType()) {\n                $(this.getSelector('submit')).trigger('click');\n            }\n        },\n\n        /**\n         * @returns {String}\n         */\n        getVaultCode: function () {\n            return window.checkoutConfig.payment[this.getCode()].ccVaultCode;\n        }\n    });\n});\n","Magento_Braintree/js/view/payment/method-renderer/vault.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine([\n    'jquery',\n    'Magento_Braintree/js/view/payment/method-renderer/cc-form',\n    'Magento_Vault/js/view/payment/method-renderer/vault',\n    'Magento_Ui/js/model/messageList',\n    'Magento_Checkout/js/model/full-screen-loader'\n], function ($, Component, VaultComponent, globalMessageList, fullScreenLoader) {\n    'use strict';\n\n    return VaultComponent.extend({\n        defaults: {\n            template: 'Magento_Vault/payment/form',\n            modules: {\n                hostedFields: '${ $.parentName }.braintree'\n            }\n        },\n\n        /**\n         * Get last 4 digits of card\n         * @returns {String}\n         */\n        getMaskedCard: function () {\n            return this.details.maskedCC;\n        },\n\n        /**\n         * Get expiration date\n         * @returns {String}\n         */\n        getExpirationDate: function () {\n            return this.details.expirationDate;\n        },\n\n        /**\n         * Get card type\n         * @returns {String}\n         */\n        getCardType: function () {\n            return this.details.type;\n        },\n\n        /**\n         * Place order\n         */\n        placeOrder: function () {\n            this.getPaymentMethodNonce();\n        },\n\n        /**\n         * Send request to get payment method nonce\n         */\n        getPaymentMethodNonce: function () {\n            var self = this;\n\n            fullScreenLoader.startLoader();\n            $.get(self.nonceUrl, {\n                'public_hash': self.publicHash\n            })\n                .done(function (response) {\n                    fullScreenLoader.stopLoader();\n                    self.hostedFields(function (formComponent) {\n                        formComponent.setPaymentMethodNonce(response.paymentMethodNonce);\n                        formComponent.additionalData['public_hash'] = self.publicHash;\n                        formComponent.code = self.code;\n                        formComponent.placeOrder();\n                    });\n                })\n                .fail(function (response) {\n                    var error = JSON.parse(response.responseText);\n\n                    fullScreenLoader.stopLoader();\n                    globalMessageList.addErrorMessage({\n                        message: error.message\n                    });\n                });\n        }\n    });\n});\n","Magento_Authorizenet/js/view/payment/authorizenet.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*browser:true*/\n/*global define*/\ndefine(\n    [\n        'uiComponent',\n        'Magento_Checkout/js/model/payment/renderer-list'\n    ],\n    function (\n        Component,\n        rendererList\n    ) {\n        'use strict';\n        rendererList.push(\n            {\n                type: 'authorizenet_directpost',\n                component: 'Magento_Authorizenet/js/view/payment/method-renderer/authorizenet-directpost'\n            }\n        );\n        /** Add view logic here if needed */\n        return Component.extend({});\n    }\n);","Magento_Authorizenet/js/view/payment/method-renderer/authorizenet-directpost.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine(\n    [\n        'jquery',\n        'Magento_Payment/js/view/payment/iframe'\n    ],\n    function ($, Component) {\n        'use strict';\n\n        return Component.extend({\n            defaults: {\n                template: 'Magento_Authorizenet/payment/authorizenet-directpost',\n                timeoutMessage: 'Sorry, but something went wrong. Please contact the seller.'\n            },\n            placeOrderHandler: null,\n            validateHandler: null,\n\n            /**\n             * @param {Object} handler\n             */\n            setPlaceOrderHandler: function (handler) {\n                this.placeOrderHandler = handler;\n            },\n\n            /**\n             * @param {Object} handler\n             */\n            setValidateHandler: function (handler) {\n                this.validateHandler = handler;\n            },\n\n            /**\n             * @returns {Object}\n             */\n            context: function () {\n                return this;\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            isShowLegend: function () {\n                return true;\n            },\n\n            /**\n             * @returns {String}\n             */\n            getCode: function () {\n                return 'authorizenet_directpost';\n            },\n\n            /**\n             * @returns {Boolean}\n             */\n            isActive: function () {\n                return true;\n            }\n        });\n    }\n);\n","Wyomind_GoogleTrustedStores/js/testorder.js":"GtsValidator = {order:false};","Wyomind_GoogleTrustedStores/js/validator.js":"require([\n    \"jquery\",\n    \"mage/mage\",\n    \"mage/translate\"\n], function ($) {\n    $(function () {\n\n        jQuery(document).ready(function () {\n            setTimeout(function() {\n            GtsValidator.notify = jQuery('<div/>', {id: 'GtsValidator'});\n\n            if (typeof GtsValidator !== \"undefined\") {\n                if (typeof GtsValidator.badge !== \"undefined\") {\n                    if (GtsValidator.badge) {\n\n                        // check potential errors\n                        var errors = \"\";\n                        // check badge position\n                        var badge_position = \"\";\n\n                        for (var option in gts) {\n                            switch (gts[option][0]) {\n                                case \"id\":\n                                    if (gts[option][1] == \"\") {\n                                        errors += \"- \" + jQuery.mage.__(\"Google Trusted Stores account id is empty\") + \"<br/>\";\n                                    }\n                                    break;\n                                case \"google_base_country\":\n                                    if (gts[option][1] == \"\") {\n                                        errors += \"- \" + jQuery.mage.__(\"Country is empty\") + \"<br/>\";\n                                    }\n                                    break;\n                                case \"google_base_country\":\n                                    if (gts[option][1] == \"\") {\n                                        errors += \"- \" + jQuery.mage.__(\"Country is empty\") + \"<br/>\";\n                                    }\n                                    break;\n                                case \"badge_position\":\n                                    badge_position = gts[option][1];\n                                    break;\n                                default:\n                                    break;\n                            }\n                        }\n\n                        if (errors.length == 0) {\n                            GtsValidator.notify.text(jQuery.mage.__('Google Trusted Stores badge implemented!'));\n                            GtsValidator.notify.css({\"color\": \"green\"});\n\n                            if (jQuery(\"#gts_container\")) {\n                                jQuery(\"#gts_container\").css({\n                                    \"width\": \"150px\",\n                                    \"height\": \"75px\",\n                                    \"background\": \"white\",\n                                    \"border\": \"1px solid green\",\n                                    \"border-radius\": \"2px\"\n                                });\n                                if (badge_position == \"BOTTOM_LEFT\") {\n                                    jQuery(\"#gts_container\").css({\n                                        \"position\": \"fixed\",\n                                        \"z-index\": 999,\n                                        \"padding\": \"5px\",\n                                        \"bottom\": \"0px\",\n                                        \"left\": \"0px\"\n                                    });\n                                } else if (badge_position == \"BOTTOM_RIGHT\") {\n                                    jQuery(\"#gts_container\").css({\n                                        \"position\": \"fixed\",\n                                        \"z-index\": 999,\n                                        \"padding\": \"5px\",\n                                        \"bottom\": \"0px\",\n                                        \"right\": \"0px\"\n                                    });\n                                }\n                                jQuery(\"#gts_container\").html(jQuery.mage.__(\"Google Trusted Badge will be displayed<br/>here\"));\n                            }\n\n                        } else {\n                            GtsValidator.notify.html(jQuery.mage.__('Google Trusted Stores badge implemented but some errors have been found!')+'<br/>' + errors);\n                            GtsValidator.notify.css({\"color\": \"orange\"});\n                        }\n                    } else {\n                        GtsValidator.notify.text(jQuery.mage.__(\"Google Trusted Stores badge can't be found!\"));\n                        GtsValidator.notify.css({\"color\": \"red\"});\n                    }\n                }\n                if (typeof GtsValidator.order !== \"undefined\") {\n                    if (GtsValidator.order) {\n                        GtsValidator.notify.text(jQuery.mage.__(\"Google Trusted Stores confirmation module implemented!\"));\n                        GtsValidator.notify.css({\"color\": \"green\"});\n                    } else {\n                        GtsValidator.notify.text(jQuery.mage.__(\"Google Trusted Stores confirmation module can't be found!\"));\n                        GtsValidator.notify.css({\"color\": \"red\"});\n                    }\n                }\n            } else {\n                GtsValidator.notify(jQuery.mage.__(\"Google Trusted Stores doesn't seem to be implemented!\"));\n                GtsValidator.notify.setStyle({\"color\": \"red\"});\n            }\n            jQuery(\"body\").append(GtsValidator.notify);\n            },2000);\n        });\n\n    });\n});\n        ","Wyomind_GoogleTrustedStores/js/testbadge.js":"GtsValidator = {badge:false};","Smartwave_Porto/js/imagesloaded.js":"/*!\n * imagesLoaded PACKAGED v4.1.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n/**\n * EvEmitter v1.0.1\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'ev-emitter/ev-emitter',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( this, function() {\n\n\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners array\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || [];\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var i = 0;\n  var listener = listeners[i];\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  while ( listener ) {\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n    // get next listener\n    i += isOnce ? 0 : 1;\n    listener = listeners[i];\n  }\n\n  return this;\n};\n\nreturn EvEmitter;\n\n}));\n\n/*!\n * imagesLoaded v4.1.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) { 'use strict';\n  // universal module definition\n\n  /*global define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n      'ev-emitter/ev-emitter'\n    ], function( EvEmitter ) {\n      return factory( window, EvEmitter );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('ev-emitter')\n    );\n  } else {\n    // browser global\n    window.imagesLoaded = factory(\n      window,\n      window.EvEmitter\n    );\n  }\n\n})( window,\n\n// --------------------------  factory -------------------------- //\n\nfunction factory( window, EvEmitter ) {\n\n\n\nvar $ = window.jQuery;\nvar console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// extend objects\nfunction extend( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n}\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {Array, Element, NodeList, String} elem\n * @param {Object or Function} options - if function, use as callback\n * @param {Function} onAlways - callback function\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelectorAll( elem );\n  }\n\n  this.elements = makeArray( elem );\n  this.options = extend( {}, this.options );\n\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    extend( this.options, options );\n  }\n\n  if ( onAlways ) {\n    this.on( 'always', onAlways );\n  }\n\n  this.getImages();\n\n  if ( $ ) {\n    // add jQuery Deferred object\n    this.jqDeferred = new $.Deferred();\n  }\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( function() {\n    this.check();\n  }.bind( this ));\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.options = {};\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\n/**\n * @param {Node} element\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName == 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  var nodeType = elem.nodeType;\n  if ( !nodeType || !elementNodeTypes[ nodeType ] ) {\n    return;\n  }\n  var childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( var i=0; i < childImgs.length; i++ ) {\n    var img = childImgs[i];\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    var children = elem.querySelectorAll( this.options.background );\n    for ( i=0; i < children.length; i++ ) {\n      var child = children[i];\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nvar elementNodeTypes = {\n  1: true,\n  9: true,\n  11: true\n};\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n    return;\n  }\n  // get url inside url(\"...\")\n  var reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n  var matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    var url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  var loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  var background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  var _this = this;\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  function onProgress( image, elem, message ) {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( function() {\n      _this.progress( image, elem, message );\n    });\n  }\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  });\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount == this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( 'progress: ' + message, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  var eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    var jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  return this.img.complete && this.img.naturalWidth !== undefined;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.img, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  var isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) {\n    return;\n  }\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, callback ) {\n    var instance = new ImagesLoaded( this, options, callback );\n    return instance.jqDeferred.promise( $(this) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n});\n","Smartwave_Porto/js/jquery.bridget.js":"/**\n * Bridget makes jQuery widgets\n * v1.0.1\n */\n\n( function( window ) {\n\n'use strict';\n\n// -------------------------- utils -------------------------- //\n\nvar slice = Array.prototype.slice;\n\nfunction noop() {}\n\n// -------------------------- definition -------------------------- //\n\nfunction defineBridget( $ ) {\n\n// bail if no jQuery\nif ( !$ ) {\n  return;\n}\n\n// -------------------------- addOptionMethod -------------------------- //\n\n/**\n * adds option method -> $().plugin('option', {...})\n * @param {Function} PluginClass - constructor class\n */\nfunction addOptionMethod( PluginClass ) {\n  // don't overwrite original option method\n  if(typeof PluginClass === \"function\"){\n      if ( PluginClass.prototype.option ) {\n        return;\n      }\n\n      // option setter\n      PluginClass.prototype.option = function( opts ) {\n        // bail out if not an object\n        if ( !$.isPlainObject( opts ) ){\n          return;\n        }\n        this.options = $.extend( true, this.options, opts );\n      };\n  } else {\n      return;\n  }\n}\n\n\n// -------------------------- plugin bridge -------------------------- //\n\n// helper function for logging errors\n// $.error breaks jQuery chaining\nvar logError = typeof console === 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n/**\n * jQuery plugin bridge, access methods like $elem.plugin('method')\n * @param {String} namespace - plugin name\n * @param {Function} PluginClass - constructor class\n */\nfunction bridge( namespace, PluginClass ) {\n  // add to jQuery fn namespace\n  $.fn[ namespace ] = function( options ) {\n    if ( typeof options === 'string' ) {\n      // call plugin method when first argument is a string\n      // get arguments for method\n      var args = slice.call( arguments, 1 );\n\n      for ( var i=0, len = this.length; i < len; i++ ) {\n        var elem = this[i];\n        var instance = $.data( elem, namespace );\n        if ( !instance ) {\n          logError( \"cannot call methods on \" + namespace + \" prior to initialization; \" +\n            \"attempted to call '\" + options + \"'\" );\n          continue;\n        }\n        if ( !$.isFunction( instance[options] ) || options.charAt(0) === '_' ) {\n          logError( \"no such method '\" + options + \"' for \" + namespace + \" instance\" );\n          continue;\n        }\n\n        // trigger method with arguments\n        var returnValue = instance[ options ].apply( instance, args );\n\n        // break look and return first value if provided\n        if ( returnValue !== undefined ) {\n          return returnValue;\n        }\n      }\n      // return this if no return value\n      return this;\n    } else {\n      return this.each( function() {\n        var instance = $.data( this, namespace );\n        if ( instance ) {\n          // apply options & init\n          instance.option( options );\n          instance._init();\n        } else {\n          // initialize new instance\n          instance = new PluginClass( this, options );\n          $.data( this, namespace, instance );\n        }\n      });\n    }\n  };\n\n}\n\n// -------------------------- bridget -------------------------- //\n\n/**\n * converts a Prototypical class into a proper jQuery plugin\n *   the class must have a ._init method\n * @param {String} namespace - plugin name, used in $().pluginName\n * @param {Function} PluginClass - constructor class\n */\n$.bridget = function( namespace, PluginClass ) {\n  addOptionMethod( PluginClass );\n  bridge( namespace, PluginClass );\n};\n\nreturn $.bridget;\n\n}\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( [ 'jquery' ], defineBridget );\n} else {\n  // get jquery from browser global\n  defineBridget( window.jQuery );\n}\n\n})( window );\n","Smartwave_Porto/js/packery.pkgd.js":"/*!\n * Packery PACKAGED v1.4.3\n * bin-packing layout library\n *\n * Licensed GPLv3 for open source use\n * or Flickity Commercial License for commercial use\n *\n * http://packery.metafizzy.co\n * Copyright 2015 Metafizzy\n */\n\n/**\n * Bridget makes jQuery widgets\n * v1.1.0\n * MIT license\n */\n\n( function( window ) {\n\n\n\n// -------------------------- utils -------------------------- //\n\nvar slice = Array.prototype.slice;\n\nfunction noop() {}\n\n// -------------------------- definition -------------------------- //\n\nfunction defineBridget( $ ) {\n\n// bail if no jQuery\nif ( !$ ) {\n  return;\n}\n\n// -------------------------- addOptionMethod -------------------------- //\n\n/**\n * adds option method -> $().plugin('option', {...})\n * @param {Function} PluginClass - constructor class\n */\nfunction addOptionMethod( PluginClass ) {\n  // don't overwrite original option method\n  if ( PluginClass.prototype.option ) {\n    return;\n  }\n\n  // option setter\n  PluginClass.prototype.option = function( opts ) {\n    // bail out if not an object\n    if ( !$.isPlainObject( opts ) ){\n      return;\n    }\n    this.options = $.extend( true, this.options, opts );\n  };\n}\n\n// -------------------------- plugin bridge -------------------------- //\n\n// helper function for logging errors\n// $.error breaks jQuery chaining\nvar logError = typeof console === 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n/**\n * jQuery plugin bridge, access methods like $elem.plugin('method')\n * @param {String} namespace - plugin name\n * @param {Function} PluginClass - constructor class\n */\nfunction bridge( namespace, PluginClass ) {\n  // add to jQuery fn namespace\n  $.fn[ namespace ] = function( options ) {\n    if ( typeof options === 'string' ) {\n      // call plugin method when first argument is a string\n      // get arguments for method\n      var args = slice.call( arguments, 1 );\n\n      for ( var i=0, len = this.length; i < len; i++ ) {\n        var elem = this[i];\n        var instance = $.data( elem, namespace );\n        if ( !instance ) {\n          logError( \"cannot call methods on \" + namespace + \" prior to initialization; \" +\n            \"attempted to call '\" + options + \"'\" );\n          continue;\n        }\n        if ( !$.isFunction( instance[options] ) || options.charAt(0) === '_' ) {\n          logError( \"no such method '\" + options + \"' for \" + namespace + \" instance\" );\n          continue;\n        }\n\n        // trigger method with arguments\n        var returnValue = instance[ options ].apply( instance, args );\n\n        // break look and return first value if provided\n        if ( returnValue !== undefined ) {\n          return returnValue;\n        }\n      }\n      // return this if no return value\n      return this;\n    } else {\n      return this.each( function() {\n        var instance = $.data( this, namespace );\n        if ( instance ) {\n          // apply options & init\n          instance.option( options );\n          instance._init();\n        } else {\n          // initialize new instance\n          instance = new PluginClass( this, options );\n          $.data( this, namespace, instance );\n        }\n      });\n    }\n  };\n\n}\n\n// -------------------------- bridget -------------------------- //\n\n/**\n * converts a Prototypical class into a proper jQuery plugin\n *   the class must have a ._init method\n * @param {String} namespace - plugin name, used in $().pluginName\n * @param {Function} PluginClass - constructor class\n */\n$.bridget = function( namespace, PluginClass ) {\n  addOptionMethod( PluginClass );\n  bridge( namespace, PluginClass );\n};\n\nreturn $.bridget;\n\n}\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( 'jquery-bridget/jquery.bridget',[ 'jquery' ], defineBridget );\n} else if ( typeof exports === 'object' ) {\n  defineBridget( require('jquery') );\n} else {\n  // get jquery from browser global\n  defineBridget( window.jQuery );\n}\ndefineBridget( window.jQuery );\n})( window );\n\n/*!\n * classie v1.0.1\n * class helper functions\n * from bonzo https://github.com/ded/bonzo\n * MIT license\n * \n * classie.has( elem, 'my-class' ) -> true/false\n * classie.add( elem, 'my-new-class' )\n * classie.remove( elem, 'my-unwanted-class' )\n * classie.toggle( elem, 'my-class' )\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false */\n\n( function( window ) {\n\n\n\n// class helper functions from bonzo https://github.com/ded/bonzo\n\nfunction classReg( className ) {\n  return new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\");\n}\n\n// classList support for class management\n// altho to be fair, the api sucks because it won't accept multiple classes at once\nvar hasClass, addClass, removeClass;\n\nif ( 'classList' in document.documentElement ) {\n  hasClass = function( elem, c ) {\n    return elem.classList.contains( c );\n  };\n  addClass = function( elem, c ) {\n    elem.classList.add( c );\n  };\n  removeClass = function( elem, c ) {\n    elem.classList.remove( c );\n  };\n}\nelse {\n  hasClass = function( elem, c ) {\n    return classReg( c ).test( elem.className );\n  };\n  addClass = function( elem, c ) {\n    if ( !hasClass( elem, c ) ) {\n      elem.className = elem.className + ' ' + c;\n    }\n  };\n  removeClass = function( elem, c ) {\n    elem.className = elem.className.replace( classReg( c ), ' ' );\n  };\n}\n\nfunction toggleClass( elem, c ) {\n  var fn = hasClass( elem, c ) ? removeClass : addClass;\n  fn( elem, c );\n}\n\nvar classie = {\n  // full names\n  hasClass: hasClass,\n  addClass: addClass,\n  removeClass: removeClass,\n  toggleClass: toggleClass,\n  // short names\n  has: hasClass,\n  add: addClass,\n  remove: removeClass,\n  toggle: toggleClass\n};\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( 'classie/classie',classie );\n} else if ( typeof exports === 'object' ) {\n  // CommonJS\n  module.exports = classie;\n} else {\n  // browser global\n  window.classie = classie;\n}\n\n})( window );\n\n/*!\n * getStyleProperty v1.0.4\n * original by kangax\n * http://perfectionkills.com/feature-testing-css-properties/\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true */\n/*global define: false, exports: false, module: false */\n\n( function( window ) {\n\n\n\nvar prefixes = 'Webkit Moz ms Ms O'.split(' ');\nvar docElemStyle = document.documentElement.style;\n\nfunction getStyleProperty( propName ) {\n  if ( !propName ) {\n    return;\n  }\n\n  // test standard property first\n  if ( typeof docElemStyle[ propName ] === 'string' ) {\n    return propName;\n  }\n\n  // capitalize\n  propName = propName.charAt(0).toUpperCase() + propName.slice(1);\n\n  // test vendor specific properties\n  var prefixed;\n  for ( var i=0, len = prefixes.length; i < len; i++ ) {\n    prefixed = prefixes[i] + propName;\n    if ( typeof docElemStyle[ prefixed ] === 'string' ) {\n      return prefixed;\n    }\n  }\n}\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( 'get-style-property/get-style-property',[],function() {\n    return getStyleProperty;\n  });\n} else if ( typeof exports === 'object' ) {\n  // CommonJS for Component\n  module.exports = getStyleProperty;\n} else {\n  // browser global\n  window.getStyleProperty = getStyleProperty;\n}\n\n})( window );\n\n/*!\n * getSize v1.2.2\n * measure size of elements\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, exports: false, require: false, module: false, console: false */\n\n( function( window, undefined ) {\n\n\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') === -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console === 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0, len = measurements.length; i < len; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n\n\nfunction defineGetSize( getStyleProperty ) {\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar getStyle, boxSizingProp, isBoxSizeOuter;\n\n/**\n * setup vars and functions\n * do it on initial getSize(), rather than on script load\n * For Firefox bug https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  var getComputedStyle = window.getComputedStyle;\n  getStyle = ( function() {\n    var getStyleFn = getComputedStyle ?\n      function( elem ) {\n        return getComputedStyle( elem, null );\n      } :\n      function( elem ) {\n        return elem.currentStyle;\n      };\n\n      return function getStyle( elem ) {\n        var style = getStyleFn( elem );\n        if ( !style ) {\n          logError( 'Style returned ' + style +\n            '. Are you running this code in a hidden iframe on Firefox? ' +\n            'See http://bit.ly/getsizebug1' );\n        }\n        return style;\n      };\n  })();\n\n  // -------------------------- box sizing -------------------------- //\n\n  boxSizingProp = getStyleProperty('boxSizing');\n\n  /**\n   * WebKit measures the outer-width on style.width on border-box elems\n   * IE & Firefox measures the inner-width\n   */\n  if ( boxSizingProp ) {\n    var div = document.createElement('div');\n    div.style.width = '200px';\n    div.style.padding = '1px 2px 3px 4px';\n    div.style.borderStyle = 'solid';\n    div.style.borderWidth = '1px 2px 3px 4px';\n    div.style[ boxSizingProp ] = 'border-box';\n\n    var body = document.body || document.documentElement;\n    body.appendChild( div );\n    var style = getStyle( div );\n\n    isBoxSizeOuter = getStyleSize( style.width ) === 200;\n    body.removeChild( div );\n  }\n\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem === 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem !== 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display === 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = !!( boxSizingProp &&\n    style[ boxSizingProp ] && style[ boxSizingProp ] === 'border-box' );\n\n  // get all measurements\n  for ( var i=0, len = measurements.length; i < len; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    value = mungeNonPixel( elem, value );\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\n// IE8 returns percent values, not pixels\n// taken from jQuery's curCSS\nfunction mungeNonPixel( elem, value ) {\n  // IE8 and has percent value\n  if ( window.getComputedStyle || value.indexOf('%') === -1 ) {\n    return value;\n  }\n  var style = elem.style;\n  // Remember the original values\n  var left = style.left;\n  var rs = elem.runtimeStyle;\n  var rsLeft = rs && rs.left;\n\n  // Put in the new values to get a computed value out\n  if ( rsLeft ) {\n    rs.left = elem.currentStyle.left;\n  }\n  style.left = value;\n  value = style.pixelLeft;\n\n  // Revert the changed values\n  style.left = left;\n  if ( rsLeft ) {\n    rs.left = rsLeft;\n  }\n\n  return value;\n}\n\nreturn getSize;\n\n}\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD for RequireJS\n  define( 'get-size/get-size',[ 'get-style-property/get-style-property' ], defineGetSize );\n} else if ( typeof exports === 'object' ) {\n  // CommonJS for Component\n  module.exports = defineGetSize( require('desandro-get-style-property') );\n} else {\n  // browser global\n  window.getSize = defineGetSize( window.getStyleProperty );\n}\n\n})( window );\n\n/*!\n * eventie v1.0.6\n * event binding helper\n *   eventie.bind( elem, 'click', myFn )\n *   eventie.unbind( elem, 'click', myFn )\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true */\n/*global define: false, module: false */\n\n( function( window ) {\n\n\n\nvar docElem = document.documentElement;\n\nvar bind = function() {};\n\nfunction getIEEvent( obj ) {\n  var event = window.event;\n  // add event.target\n  event.target = event.target || event.srcElement || obj;\n  return event;\n}\n\nif ( docElem.addEventListener ) {\n  bind = function( obj, type, fn ) {\n    obj.addEventListener( type, fn, false );\n  };\n} else if ( docElem.attachEvent ) {\n  bind = function( obj, type, fn ) {\n    obj[ type + fn ] = fn.handleEvent ?\n      function() {\n        var event = getIEEvent( obj );\n        fn.handleEvent.call( fn, event );\n      } :\n      function() {\n        var event = getIEEvent( obj );\n        fn.call( obj, event );\n      };\n    obj.attachEvent( \"on\" + type, obj[ type + fn ] );\n  };\n}\n\nvar unbind = function() {};\n\nif ( docElem.removeEventListener ) {\n  unbind = function( obj, type, fn ) {\n    obj.removeEventListener( type, fn, false );\n  };\n} else if ( docElem.detachEvent ) {\n  unbind = function( obj, type, fn ) {\n    obj.detachEvent( \"on\" + type, obj[ type + fn ] );\n    try {\n      delete obj[ type + fn ];\n    } catch ( err ) {\n      // can't delete window object properties\n      obj[ type + fn ] = undefined;\n    }\n  };\n}\n\nvar eventie = {\n  bind: bind,\n  unbind: unbind\n};\n\n// ----- module definition ----- //\n\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( 'eventie/eventie',eventie );\n} else if ( typeof exports === 'object' ) {\n  // CommonJS\n  module.exports = eventie;\n} else {\n  // browser global\n  window.eventie = eventie;\n}\nwindow.eventie = eventie;\n})( window );\n\n/*!\n * EventEmitter v4.2.11 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n;(function () {\n    \n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var exports = this;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listeners = this.getListenersAsObject(evt);\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                i = listeners[key].length;\n\n                while (i--) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[key][i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define('eventEmitter/EventEmitter',[],function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}.call(this));\n\n/*!\n * docReady v1.0.4\n * Cross browser DOMContentLoaded event emitter\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true*/\n/*global define: false, require: false, module: false */\n\n( function( window ) {\n\n\n\nvar document = window.document;\n// collection of functions to be triggered on ready\nvar queue = [];\n\nfunction docReady( fn ) {\n  // throw out non-functions\n  if ( typeof fn !== 'function' ) {\n    return;\n  }\n\n  if ( docReady.isReady ) {\n    // ready now, hit it\n    fn();\n  } else {\n    // queue function when ready\n    queue.push( fn );\n  }\n}\n\ndocReady.isReady = false;\n\n// triggered on various doc ready events\nfunction onReady( event ) {\n  // bail if already triggered or IE8 document is not ready just yet\n  var isIE8NotReady = event.type === 'readystatechange' && document.readyState !== 'complete';\n  if ( docReady.isReady || isIE8NotReady ) {\n    return;\n  }\n\n  trigger();\n}\n\nfunction trigger() {\n  docReady.isReady = true;\n  // process queue\n  for ( var i=0, len = queue.length; i < len; i++ ) {\n    var fn = queue[i];\n    fn();\n  }\n}\n\nfunction defineDocReady( eventie ) {\n  // trigger ready if page is ready\n  if ( document.readyState === 'complete' ) {\n    trigger();\n  } else {\n    // listen for events\n    window.eventie.bind( document, 'DOMContentLoaded', onReady );\n    window.eventie.bind( document, 'readystatechange', onReady );\n    window.eventie.bind( window, 'load', onReady );\n  }\n\n  return docReady;\n}\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( 'doc-ready/doc-ready',[ 'eventie/eventie' ], defineDocReady );\n} else if ( typeof exports === 'object' ) {\n  module.exports = defineDocReady( require('eventie') );\n} else {\n  // browser global\n  window.docReady = defineDocReady( window.eventie );\n}\n\n})( window );\n\n/**\n * matchesSelector v1.0.3\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false */\n\n( function( ElemProto ) {\n\n  \n\n  var matchesMethod = ( function() {\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0, len = prefixes.length; i < len; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  // ----- match ----- //\n\n  function match( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  }\n\n  // ----- appendToFragment ----- //\n\n  function checkParent( elem ) {\n    // not needed if already has parent\n    if ( elem.parentNode ) {\n      return;\n    }\n    var fragment = document.createDocumentFragment();\n    fragment.appendChild( elem );\n  }\n\n  // ----- query ----- //\n\n  // fall back to using QSA\n  // thx @jonathantneal https://gist.github.com/3062955\n  function query( elem, selector ) {\n    // append to fragment if no parent\n    checkParent( elem );\n\n    // match elem with all selected elems of parent\n    var elems = elem.parentNode.querySelectorAll( selector );\n    for ( var i=0, len = elems.length; i < len; i++ ) {\n      // return true if match\n      if ( elems[i] === elem ) {\n        return true;\n      }\n    }\n    // otherwise return false\n    return false;\n  }\n\n  // ----- matchChild ----- //\n\n  function matchChild( elem, selector ) {\n    checkParent( elem );\n    return match( elem, selector );\n  }\n\n  // ----- matchesSelector ----- //\n\n  var matchesSelector;\n\n  if ( matchesMethod ) {\n    // IE9 supports matchesSelector, but doesn't work on orphaned elems\n    // check for that\n    var div = document.createElement('div');\n    var supportsOrphans = match( div, 'div' );\n    matchesSelector = supportsOrphans ? match : matchChild;\n  } else {\n    matchesSelector = query;\n  }\n\n  // transport\n  if ( typeof define === 'function' && define.amd ) {\n    // AMD\n    define( 'matches-selector/matches-selector',[],function() {\n      return matchesSelector;\n    });\n  } else if ( typeof exports === 'object' ) {\n    module.exports = matchesSelector;\n  }\n  else {\n    // browser global\n    window.matchesSelector = matchesSelector;\n  }\n\n})( Element.prototype );\n\n/**\n * Fizzy UI utils v1.0.1\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false, require: false */\n  \n  // universal module definition\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'fizzy-ui-utils/utils',[\n      'doc-ready/doc-ready',\n      'matches-selector/matches-selector'\n    ], function( docReady, matchesSelector ) {\n      return factory( window, docReady, matchesSelector );\n    });\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('doc-ready'),\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.docReady,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, docReady, matchesSelector ) {\n\n\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- isArray ----- //\n  \nvar objToString = Object.prototype.toString;\nutils.isArray = function( obj ) {\n  return objToString.call( obj ) == '[object Array]';\n};\n\n// ----- makeArray ----- //\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  var ary = [];\n  if ( utils.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( obj && typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0, len = obj.length; i < len; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n};\n\n// ----- indexOf ----- //\n\n// index of helper cause IE8\nutils.indexOf = Array.prototype.indexOf ? function( ary, obj ) {\n    return ary.indexOf( obj );\n  } : function( ary, obj ) {\n    for ( var i=0, len = ary.length; i < len; i++ ) {\n      if ( ary[i] === obj ) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = utils.indexOf( ary, obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- isElement ----- //\n\n// http://stackoverflow.com/a/384380/182183\nutils.isElement = ( typeof HTMLElement == 'function' || typeof HTMLElement == 'object' ) ?\n  function isElementDOM2( obj ) {\n    return obj instanceof HTMLElement;\n  } :\n  function isElementQuirky( obj ) {\n    return obj && typeof obj == 'object' &&\n      obj.nodeType == 1 && typeof obj.nodeName == 'string';\n  };\n\n// ----- setText ----- //\n\nutils.setText = ( function() {\n  var setTextProperty;\n  function setText( elem, text ) {\n    // only check setTextProperty once\n    setTextProperty = setTextProperty || ( document.documentElement.textContent !== undefined ? 'textContent' : 'innerText' );\n    elem[ setTextProperty ] = text;\n  }\n  return setText;\n})();\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  for ( var i=0, len = elems.length; i < len; i++ ) {\n    var elem = elems[i];\n    // check that elem is an actual element\n    if ( !utils.isElement( elem ) ) {\n      continue;\n    }\n    // filter & find items if we have a selector\n    if ( selector ) {\n      // filter siblings\n      if ( matchesSelector( elem, selector ) ) {\n        ffElems.push( elem );\n      }\n      // find children\n      var childElems = elem.querySelectorAll( selector );\n      // concat childElems to filterFound array\n      for ( var j=0, jLen = childElems.length; j < jLen; j++ ) {\n        ffElems.push( childElems[j] );\n      }\n    } else {\n      ffElems.push( elem );\n    }\n  }\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    if ( timeout ) {\n      clearTimeout( timeout );\n    }\n    var args = arguments;\n\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold || 100 );\n  };\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-option attribute\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var elems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var dataAttr = 'data-' + dashedNamespace + '-options';\n\n    for ( var i=0, len = elems.length; i < len; i++ ) {\n      var elem = elems[i];\n      var attr = elem.getAttribute( dataAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' +\n            elem.nodeName.toLowerCase() + ( elem.id ? '#' + elem.id : '' ) + ': ' +\n            error );\n        }\n        continue;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('layoutname')\n      var jQuery = window.jQuery;\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    }\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n\n/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  \n  // universal module definition\n  if ( typeof define === 'function' && define.amd ) {\n    // AMD\n    define( 'outlayer/item',[\n        'eventEmitter/EventEmitter',\n        'get-size/get-size',\n        'get-style-property/get-style-property',\n        'fizzy-ui-utils/utils'\n      ],\n      function( EventEmitter, getSize, getStyleProperty, utils ) {\n        return factory( window, EventEmitter, getSize, getStyleProperty, utils );\n      }\n    );\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('wolfy87-eventemitter'),\n      require('get-size'),\n      require('desandro-get-style-property'),\n      require('fizzy-ui-utils')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window,\n      window.EventEmitter,\n      window.getSize,\n      window.getStyleProperty,\n      window.fizzyUIUtils\n    );\n  }\n\n}( window, function factory( window, EventEmitter, getSize, getStyleProperty, utils ) {\n\n\n// ----- helpers ----- //\n\nvar getComputedStyle = window.getComputedStyle;\nvar getStyle = getComputedStyle ?\n  function( elem ) {\n    return getComputedStyle( elem, null );\n  } :\n  function( elem ) {\n    return elem.currentStyle;\n  };\n\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\nvar transitionProperty = getStyleProperty('transition');\nvar transformProperty = getStyleProperty('transform');\nvar supportsCSS3 = transitionProperty && transformProperty;\nvar is3d = !!getStyleProperty('perspective');\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  MozTransition: 'transitionend',\n  OTransition: 'otransitionend',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// properties that could have vendor prefix\nvar prefixableProperties = [\n  'transform',\n  'transition',\n  'transitionDuration',\n  'transitionProperty'\n];\n\n// cache all vendor properties\nvar vendorProperties = ( function() {\n  var cache = {};\n  for ( var i=0, len = prefixableProperties.length; i < len; i++ ) {\n    var prop = prefixableProperties[i];\n    var supportedProp = getStyleProperty( prop );\n    if ( supportedProp && supportedProp !== prop ) {\n      cache[ prop ] = supportedProp;\n    }\n  }\n  return cache;\n})();\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Isotope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EventEmitter\nutils.extend( Item.prototype, EventEmitter.prototype );\n\nItem.prototype._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nItem.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nItem.prototype.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nItem.prototype.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nItem.prototype.getPosition = function() {\n  var style = getStyle( this.element );\n  var layoutOptions = this.layout.options;\n  var isOriginLeft = layoutOptions.isOriginLeft;\n  var isOriginTop = layoutOptions.isOriginTop;\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  var x = xValue.indexOf('%') != -1 ?\n    ( parseFloat( xValue ) / 100 ) * layoutSize.width : parseInt( xValue, 10 );\n  var y = yValue.indexOf('%') != -1 ?\n    ( parseFloat( yValue ) / 100 ) * layoutSize.height : parseInt( yValue, 10 );\n\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nItem.prototype.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var layoutOptions = this.layout.options;\n  var style = {};\n\n  // x\n  var xPadding = layoutOptions.isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = layoutOptions.isOriginLeft ? 'left' : 'right';\n  var xResetProperty = layoutOptions.isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = layoutOptions.isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = layoutOptions.isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = layoutOptions.isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nItem.prototype.getXValue = function( x ) {\n  var layoutOptions = this.layout.options;\n  return layoutOptions.percentPosition && !layoutOptions.isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nItem.prototype.getYValue = function( y ) {\n  var layoutOptions = this.layout.options;\n  return layoutOptions.percentPosition && layoutOptions.isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\n\nItem.prototype._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var compareX = parseInt( x, 10 );\n  var compareY = parseInt( y, 10 );\n  var didNotMove = compareX === this.position.x && compareY === this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nItem.prototype.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var layoutOptions = this.layout.options;\n  x = layoutOptions.isOriginLeft ? x : -x;\n  y = layoutOptions.isOriginTop ? y : -y;\n\n  if ( is3d ) {\n    return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n  }\n\n  return 'translate(' + x + 'px, ' + y + 'px)';\n};\n\n// non transition + transform support\nItem.prototype.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\n// use transition and transforms if supported\nItem.prototype.moveTo = supportsCSS3 ?\n  Item.prototype._transitionTo : Item.prototype.goTo;\n\nItem.prototype.setPosition = function( x, y ) {\n  this.position.x = parseInt( x, 10 );\n  this.position.y = parseInt( y, 10 );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nItem.prototype._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nItem.prototype._transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' +\n  toDashedAll( vendorProperties.transform || 'transform' );\n\nItem.prototype.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: this.layout.options.transitionDuration\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\nItem.prototype.transition = Item.prototype[ transitionProperty ? '_transition' : '_nonTransition' ];\n\n// ----- events ----- //\n\nItem.prototype.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nItem.prototype.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform',\n  '-moz-transform': 'transform',\n  '-o-transform': 'transform'\n};\n\nItem.prototype.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nItem.prototype.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nItem.prototype._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: ''\n};\n\nItem.prototype.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nItem.prototype.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nItem.prototype.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  var _this = this;\n  this.once( 'transitionEnd', function() {\n    _this.removeElem();\n  });\n  this.hide();\n};\n\nItem.prototype.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nItem.prototype.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nItem.prototype.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nItem.prototype.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nItem.prototype.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nItem.prototype.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n/*!\n * Outlayer v1.4.2\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  \n  // universal module definition\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'outlayer/outlayer',[\n        'eventie/eventie',\n        'eventEmitter/EventEmitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './item'\n      ],\n      function( eventie, EventEmitter, getSize, utils, Item ) {\n        return factory( window, eventie, EventEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('eventie'),\n      require('wolfy87-eventemitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.eventie,\n      window.EventEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, eventie, EventEmitter, getSize, utils, Item ) {\n\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  if ( this.options.isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  isInitLayout: true,\n  isOriginLeft: true,\n  isOriginTop: true,\n  isResizeBound: true,\n  isResizingContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\n// inherit EventEmitter\nutils.extend( Outlayer.prototype, EventEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nOutlayer.prototype.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\nOutlayer.prototype._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  if ( this.options.isResizeBound ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nOutlayer.prototype.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nOutlayer.prototype._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0, len = itemElems.length; i < len; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nOutlayer.prototype._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nOutlayer.prototype.getItemElements = function() {\n  var elems = [];\n  for ( var i=0, len = this.items.length; i < len; i++ ) {\n    elems.push( this.items[i].element );\n  }\n  return elems;\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nOutlayer.prototype.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var isInstant = this.options.isLayoutInstant !== undefined ?\n    this.options.isLayoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nOutlayer.prototype._init = Outlayer.prototype.layout;\n\n/**\n * logic before any new layout\n */\nOutlayer.prototype._resetLayout = function() {\n  this.getSize();\n};\n\n\nOutlayer.prototype.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nOutlayer.prototype._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option === 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( utils.isElement( option ) ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nOutlayer.prototype.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nOutlayer.prototype._getItemsForLayout = function( items ) {\n  var layoutItems = [];\n  for ( var i=0, len = items.length; i < len; i++ ) {\n    var item = items[i];\n    if ( !item.isIgnored ) {\n      layoutItems.push( item );\n    }\n  }\n  return layoutItems;\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nOutlayer.prototype._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  for ( var i=0, len = items.length; i < len; i++ ) {\n    var item = items[i];\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nOutlayer.prototype._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nOutlayer.prototype._processLayoutQueue = function( queue ) {\n  for ( var i=0, len = queue.length; i < len; i++ ) {\n    var obj = queue[i];\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant );\n  }\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nOutlayer.prototype._positionItem = function( item, x, y, isInstant ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nOutlayer.prototype._postLayout = function() {\n  this.resizeContainer();\n};\n\nOutlayer.prototype.resizeContainer = function() {\n  if ( !this.options.isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nOutlayer.prototype._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nOutlayer.prototype._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nOutlayer.prototype._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount === count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  for ( var i=0, len = items.length; i < len; i++ ) {\n    var item = items[i];\n    item.once( eventName, tick );\n  }\n};\n\n/**\n * emits events via eventEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nOutlayer.prototype.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nOutlayer.prototype.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nOutlayer.prototype.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nOutlayer.prototype.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  for ( var i=0, len = elems.length; i < len; i++ ) {\n    var elem = elems[i];\n    this.ignore( elem );\n  }\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nOutlayer.prototype.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  for ( var i=0, len = elems.length; i < len; i++ ) {\n    var elem = elems[i];\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }\n\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nOutlayer.prototype._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems === 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nOutlayer.prototype._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  for ( var i=0, len = this.stamps.length; i < len; i++ ) {\n    var stamp = this.stamps[i];\n    this._manageStamp( stamp );\n  }\n};\n\n// update boundingLeft / Top\nOutlayer.prototype._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nOutlayer.prototype._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nOutlayer.prototype._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nOutlayer.prototype.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n/**\n * Bind layout to window resizing\n */\nOutlayer.prototype.bindResize = function() {\n  // bind just one listener\n  if ( this.isResizeBound ) {\n    return;\n  }\n  window.eventie.bind( window, 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nOutlayer.prototype.unbindResize = function() {\n  if ( this.isResizeBound ) {\n    window.eventie.unbind( window, 'resize', this );\n  }\n  this.isResizeBound = false;\n};\n\n// original debounce by John Hann\n// http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/\n\n// this fires every resize\nOutlayer.prototype.onresize = function() {\n  if ( this.resizeTimeout ) {\n    clearTimeout( this.resizeTimeout );\n  }\n\n  var _this = this;\n  function delayed() {\n    _this.resize();\n    delete _this.resizeTimeout;\n  }\n\n  this.resizeTimeout = setTimeout( delayed, 100 );\n};\n\n// debounced, layout on resize\nOutlayer.prototype.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nOutlayer.prototype.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nOutlayer.prototype.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nOutlayer.prototype.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nOutlayer.prototype.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nOutlayer.prototype.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n\n  var len = items && items.length;\n  for ( var i=0; len && i < len; i++ ) {\n    var item = items[i];\n    item.reveal();\n  }\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nOutlayer.prototype.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n\n  var len = items && items.length;\n  for ( var i=0; len && i < len; i++ ) {\n    var item = items[i];\n    item.hide();\n  }\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nOutlayer.prototype.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nOutlayer.prototype.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nOutlayer.prototype.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0, len = this.items.length; i < len; i++ ) {\n    var item = this.items[i];\n    if ( item.element === elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nOutlayer.prototype.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  for ( var i=0, len = elems.length; i < len; i++ ) {\n    var elem = elems[i];\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nOutlayer.prototype.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  for ( var i=0, len = removeItems.length; i < len; i++ ) {\n    var item = removeItems[i];\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nOutlayer.prototype.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  for ( var i=0, len = this.items.length; i < len; i++ ) {\n    var item = this.items[i];\n    item.destroy();\n  }\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  function Layout() {\n    Outlayer.apply( this, arguments );\n  }\n  // inherit Outlayer prototype, use Object.create if there\n  if ( Object.create ) {\n    Layout.prototype = Object.create( Outlayer.prototype );\n  } else {\n    utils.extend( Layout.prototype, Outlayer.prototype );\n  }\n  // set contructor, used for namespace and Item\n  Layout.prototype.constructor = Layout;\n\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  // apply new options\n  utils.extend( Layout.defaults, options );\n  // keep prototype.settings for backwards compatibility (Packery v1.2.0)\n  Layout.prototype.settings = {};\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = function LayoutItem() {\n    Item.apply( this, arguments );\n  };\n\n  Layout.Item.prototype = new Item();\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n\n\n/**\n * Rect\n * low-level utility class for basic geometry\n */\n\n( function( window, factory ) {\n  \n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'packery/js/rect',factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.Packery = window.Packery || {};\n    window.Packery.Rect = factory();\n  }\n\n}( window, function factory() {\n\n\n// -------------------------- Packery -------------------------- //\n\n// global namespace\nvar Packery = window.Packery = function() {};\n\n// -------------------------- Rect -------------------------- //\n\nfunction Rect( props ) {\n  // extend properties from defaults\n  for ( var prop in Rect.defaults ) {\n    this[ prop ] = Rect.defaults[ prop ];\n  }\n\n  for ( prop in props ) {\n    this[ prop ] = props[ prop ];\n  }\n\n}\n\n// make available\nPackery.Rect = Rect;\n\nRect.defaults = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0\n};\n\n/**\n * Determines whether or not this rectangle wholly encloses another rectangle or point.\n * @param {Rect} rect\n * @returns {Boolean}\n**/\nRect.prototype.contains = function( rect ) {\n  // points don't have width or height\n  var otherWidth = rect.width || 0;\n  var otherHeight = rect.height || 0;\n  return this.x <= rect.x &&\n    this.y <= rect.y &&\n    this.x + this.width >= rect.x + otherWidth &&\n    this.y + this.height >= rect.y + otherHeight;\n};\n\n/**\n * Determines whether or not the rectangle intersects with another.\n * @param {Rect} rect\n * @returns {Boolean}\n**/\nRect.prototype.overlaps = function( rect ) {\n  var thisRight = this.x + this.width;\n  var thisBottom = this.y + this.height;\n  var rectRight = rect.x + rect.width;\n  var rectBottom = rect.y + rect.height;\n\n  // http://stackoverflow.com/a/306332\n  return this.x < rectRight &&\n    thisRight > rect.x &&\n    this.y < rectBottom &&\n    thisBottom > rect.y;\n};\n\n/**\n * @param {Rect} rect - the overlapping rect\n * @returns {Array} freeRects - rects representing the area around the rect\n**/\nRect.prototype.getMaximalFreeRects = function( rect ) {\n\n  // if no intersection, return false\n  if ( !this.overlaps( rect ) ) {\n    return false;\n  }\n\n  var freeRects = [];\n  var freeRect;\n\n  var thisRight = this.x + this.width;\n  var thisBottom = this.y + this.height;\n  var rectRight = rect.x + rect.width;\n  var rectBottom = rect.y + rect.height;\n\n  // top\n  if ( this.y < rect.y ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: rect.y - this.y\n    });\n    freeRects.push( freeRect );\n  }\n\n  // right\n  if ( thisRight > rectRight ) {\n    freeRect = new Rect({\n      x: rectRight,\n      y: this.y,\n      width: thisRight - rectRight,\n      height: this.height\n    });\n    freeRects.push( freeRect );\n  }\n\n  // bottom\n  if ( thisBottom > rectBottom ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: rectBottom,\n      width: this.width,\n      height: thisBottom - rectBottom\n    });\n    freeRects.push( freeRect );\n  }\n\n  // left\n  if ( this.x < rect.x ) {\n    freeRect = new Rect({\n      x: this.x,\n      y: this.y,\n      width: rect.x - this.x,\n      height: this.height\n    });\n    freeRects.push( freeRect );\n  }\n\n  return freeRects;\n};\n\nRect.prototype.canFit = function( rect ) {\n  return this.width >= rect.width && this.height >= rect.height;\n};\n\nreturn Rect;\n\n}));\n\n/**\n * Packer\n * bin-packing algorithm\n */\n\n( function( window, factory ) {\n  \n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'packery/js/packer',[ './rect' ], factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      require('./rect')\n    );\n  } else {\n    // browser global\n    var Packery = window.Packery = window.Packery || {};\n    Packery.Packer = factory( Packery.Rect );\n  }\n\n}( window, function factory( Rect ) {\n\n\n// -------------------------- Packer -------------------------- //\n\n/**\n * @param {Number} width\n * @param {Number} height\n * @param {String} sortDirection\n *   topLeft for vertical, leftTop for horizontal\n */\nfunction Packer( width, height, sortDirection ) {\n  this.width = width || 0;\n  this.height = height || 0;\n  this.sortDirection = sortDirection || 'downwardLeftToRight';\n\n  this.reset();\n}\n\nPacker.prototype.reset = function() {\n  this.spaces = [];\n  this.newSpaces = [];\n\n  var initialSpace = new Rect({\n    x: 0,\n    y: 0,\n    width: this.width,\n    height: this.height\n  });\n\n  this.spaces.push( initialSpace );\n  // set sorter\n  this.sorter = sorters[ this.sortDirection ] || sorters.downwardLeftToRight;\n};\n\n// change x and y of rect to fit with in Packer's available spaces\nPacker.prototype.pack = function( rect ) {\n  for ( var i=0, len = this.spaces.length; i < len; i++ ) {\n    var space = this.spaces[i];\n    if ( space.canFit( rect ) ) {\n      this.placeInSpace( rect, space );\n      break;\n    }\n  }\n};\n\nPacker.prototype.placeInSpace = function( rect, space ) {\n  // place rect in space\n  rect.x = space.x;\n  rect.y = space.y;\n\n  this.placed( rect );\n};\n\n// update spaces with placed rect\nPacker.prototype.placed = function( rect ) {\n  // update spaces\n  var revisedSpaces = [];\n  for ( var i=0, len = this.spaces.length; i < len; i++ ) {\n    var space = this.spaces[i];\n    var newSpaces = space.getMaximalFreeRects( rect );\n    // add either the original space or the new spaces to the revised spaces\n    if ( newSpaces ) {\n      revisedSpaces.push.apply( revisedSpaces, newSpaces );\n    } else {\n      revisedSpaces.push( space );\n    }\n  }\n\n  this.spaces = revisedSpaces;\n\n  this.mergeSortSpaces();\n};\n\nPacker.prototype.mergeSortSpaces = function() {\n  // remove redundant spaces\n  Packer.mergeRects( this.spaces );\n  this.spaces.sort( this.sorter );\n};\n\n// add a space back\nPacker.prototype.addSpace = function( rect ) {\n  this.spaces.push( rect );\n  this.mergeSortSpaces();\n};\n\n// -------------------------- utility functions -------------------------- //\n\n/**\n * Remove redundant rectangle from array of rectangles\n * @param {Array} rects: an array of Rects\n * @returns {Array} rects: an array of Rects\n**/\nPacker.mergeRects = function( rects ) {\n  for ( var i=0, len = rects.length; i < len; i++ ) {\n    var rect = rects[i];\n    // skip over this rect if it was already removed\n    if ( !rect ) {\n      continue;\n    }\n    // clone rects we're testing, remove this rect\n    var compareRects = rects.slice(0);\n    // do not compare with self\n    compareRects.splice( i, 1 );\n    // compare this rect with others\n    var removedCount = 0;\n    for ( var j=0, jLen = compareRects.length; j < jLen; j++ ) {\n      var compareRect = compareRects[j];\n      // if this rect contains another,\n      // remove that rect from test collection\n      var indexAdjust = i > j ? 0 : 1;\n      if ( rect.contains( compareRect ) ) {\n        // console.log( 'current test rects:' + testRects.length, testRects );\n        // console.log( i, j, indexAdjust, rect, compareRect );\n        rects.splice( j + indexAdjust - removedCount, 1 );\n        removedCount++;\n      }\n    }\n  }\n\n  return rects;\n};\n\n\n// -------------------------- sorters -------------------------- //\n\n// functions for sorting rects in order\nvar sorters = {\n  // top down, then left to right\n  downwardLeftToRight: function( a, b ) {\n    return a.y - b.y || a.x - b.x;\n  },\n  // left to right, then top down\n  rightwardTopToBottom: function( a, b ) {\n    return a.x - b.x || a.y - b.y;\n  }\n};\n\n\n// --------------------------  -------------------------- //\n\nreturn Packer;\n\n}));\n/**\n * Packery Item Element\n**/\n\n( function( window, factory ) {\n  \n  // universal module definition\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'packery/js/item',[\n        'get-style-property/get-style-property',\n        'outlayer/outlayer',\n        './rect'\n      ],\n      factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      require('desandro-get-style-property'),\n      require('outlayer'),\n      require('./rect')\n    );\n  } else {\n    // browser global\n    window.Packery.Item = factory(\n      window.getStyleProperty,\n      window.Outlayer,\n      window.Packery.Rect\n    );\n  }\n\n}( window, function factory( getStyleProperty, Outlayer, Rect ) {\n\n\n// -------------------------- Item -------------------------- //\n\nvar transformProperty = getStyleProperty('transform');\n\n// sub-class Item\nvar Item = function PackeryItem() {\n  Outlayer.Item.apply( this, arguments );\n};\n\nItem.prototype = new Outlayer.Item();\n\nvar protoCreate = Item.prototype._create;\nItem.prototype._create = function() {\n  // call default _create logic\n  protoCreate.call( this );\n  this.rect = new Rect();\n  // rect used for placing, in drag or Packery.fit()\n  this.placeRect = new Rect();\n};\n\n// -------------------------- drag -------------------------- //\n\nItem.prototype.dragStart = function() {\n  this.getPosition();\n  this.removeTransitionStyles();\n  // remove transform property from transition\n  if ( this.isTransitioning && transformProperty ) {\n    this.element.style[ transformProperty ] = 'none';\n  }\n  this.getSize();\n  // create place rect, used for position when dragged then dropped\n  // or when positioning\n  this.isPlacing = true;\n  this.needsPositioning = false;\n  this.positionPlaceRect( this.position.x, this.position.y );\n  this.isTransitioning = false;\n  this.didDrag = false;\n};\n\n/**\n * handle item when it is dragged\n * @param {Number} x - horizontal position of dragged item\n * @param {Number} y - vertical position of dragged item\n */\nItem.prototype.dragMove = function( x, y ) {\n  this.didDrag = true;\n  var packerySize = this.layout.size;\n  x -= packerySize.paddingLeft;\n  y -= packerySize.paddingTop;\n  this.positionPlaceRect( x, y );\n};\n\nItem.prototype.dragStop = function() {\n  this.getPosition();\n  var isDiffX = this.position.x != this.placeRect.x;\n  var isDiffY = this.position.y != this.placeRect.y;\n  // set post-drag positioning flag\n  this.needsPositioning = isDiffX || isDiffY;\n  // reset flag\n  this.didDrag = false;\n};\n\n// -------------------------- placing -------------------------- //\n\n/**\n * position a rect that will occupy space in the packer\n * @param {Number} x\n * @param {Number} y\n * @param {Boolean} isMaxYContained\n */\nItem.prototype.positionPlaceRect = function( x, y, isMaxYOpen ) {\n  this.placeRect.x = this.getPlaceRectCoord( x, true );\n  this.placeRect.y = this.getPlaceRectCoord( y, false, isMaxYOpen );\n};\n\n/**\n * get x/y coordinate for place rect\n * @param {Number} coord - x or y\n * @param {Boolean} isX\n * @param {Boolean} isMaxOpen - does not limit value to outer bound\n * @returns {Number} coord - processed x or y\n */\nItem.prototype.getPlaceRectCoord = function( coord, isX, isMaxOpen ) {\n  var measure = isX ? 'Width' : 'Height';\n  var size = this.size[ 'outer' + measure ];\n  var segment = this.layout[ isX ? 'columnWidth' : 'rowHeight' ];\n  var parentSize = this.layout.size[ 'inner' + measure ];\n\n  // additional parentSize calculations for Y\n  if ( !isX ) {\n    parentSize = Math.max( parentSize, this.layout.maxY );\n    // prevent gutter from bumping up height when non-vertical grid\n    if ( !this.layout.rowHeight ) {\n      parentSize -= this.layout.gutter;\n    }\n  }\n\n  var max;\n\n  if ( segment ) {\n    segment += this.layout.gutter;\n    // allow for last column to reach the edge\n    parentSize += isX ? this.layout.gutter : 0;\n    // snap to closest segment\n    coord = Math.round( coord / segment );\n    // contain to outer bound\n    // contain non-growing bound, allow growing bound to grow\n    var mathMethod;\n    if ( this.layout.options.isHorizontal ) {\n      mathMethod = !isX ? 'floor' : 'ceil';\n    } else {\n      mathMethod = isX ? 'floor' : 'ceil';\n    }\n    var maxSegments = Math[ mathMethod ]( parentSize / segment );\n    maxSegments -= Math.ceil( size / segment );\n    max = maxSegments;\n  } else {\n    max = parentSize - size;\n  }\n\n  coord = isMaxOpen ? coord : Math.min( coord, max );\n  coord *= segment || 1;\n\n  return Math.max( 0, coord );\n};\n\nItem.prototype.copyPlaceRectPosition = function() {\n  this.rect.x = this.placeRect.x;\n  this.rect.y = this.placeRect.y;\n};\n\n// -----  ----- //\n\n// remove element from DOM\nItem.prototype.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // add space back to packer\n  this.layout.packer.addSpace( this.rect );\n  this.emitEvent( 'remove', [ this ] );\n};\n\n// -----  ----- //\n\nreturn Item;\n\n}));\n\n/*!\n * Packery v1.4.3\n * bin-packing layout library\n *\n * Licensed GPLv3 for open source use\n * or Flickity Commercial License for commercial use\n *\n * http://packery.metafizzy.co\n * Copyright 2015 Metafizzy\n */\n\n( function( window, factory ) {\n  \n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'classie/classie',\n        'get-size/get-size',\n        'outlayer/outlayer',\n        'packery/js/rect',\n        'packery/js/packer',\n        'packery/js/item'\n      ],\n      factory );\n  } else if ( typeof exports == 'object' ) {\n    // CommonJS\n    module.exports = factory(\n      require('desandro-classie'),\n      require('get-size'),\n      require('outlayer'),\n      require('./rect'),\n      require('./packer'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Packery = factory(\n      window.classie,\n      window.getSize,\n      window.Outlayer,\n      window.Packery.Rect,\n      window.Packery.Packer,\n      window.Packery.Item\n    );\n  }\n\n}( window, function factory( classie, getSize, Outlayer, Rect, Packer, Item ) {\n\n\n// ----- Rect ----- //\n\n// allow for pixel rounding errors IE8-IE11 & Firefox; #227\nRect.prototype.canFit = function( rect ) {\n  return this.width >= rect.width - 1 && this.height >= rect.height - 1;\n};\n\n// -------------------------- Packery -------------------------- //\n\n// create an Outlayer layout class\nvar Packery = Outlayer.create('packery');\nPackery.Item = Item;\n\nPackery.prototype._create = function() {\n  // call super\n  Outlayer.prototype._create.call( this );\n\n  // initial properties\n  this.packer = new Packer();\n\n  // Left over from v1.0\n  this.stamp( this.options.stamped );\n\n  // create drag handlers\n  var _this = this;\n  this.handleDraggabilly = {\n    dragStart: function() {\n      _this.itemDragStart( this.element );\n    },\n    dragMove: function() {\n      _this.itemDragMove( this.element, this.position.x, this.position.y );\n    },\n    dragEnd: function() {\n      _this.itemDragEnd( this.element );\n    }\n  };\n\n  this.handleUIDraggable = {\n    start: function handleUIDraggableStart( event, ui ) {\n      // HTML5 may trigger dragstart, dismiss HTML5 dragging\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragStart( event.currentTarget );\n    },\n    drag: function handleUIDraggableDrag( event, ui ) {\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragMove( event.currentTarget, ui.position.left, ui.position.top );\n    },\n    stop: function handleUIDraggableStop( event, ui ) {\n      if ( !ui ) {\n        return;\n      }\n      _this.itemDragEnd( event.currentTarget );\n    }\n  };\n\n};\n\n\n// ----- init & layout ----- //\n\n/**\n * logic before any new layout\n */\nPackery.prototype._resetLayout = function() {\n  this.getSize();\n\n  this._getMeasurements();\n\n  // reset packer\n  var packer = this.packer;\n  // packer settings, if horizontal or vertical\n  if ( this.options.isHorizontal ) {\n    packer.width = Number.POSITIVE_INFINITY;\n    packer.height = this.size.innerHeight + this.gutter;\n    packer.sortDirection = 'rightwardTopToBottom';\n  } else {\n    packer.width = this.size.innerWidth + this.gutter;\n    packer.height = Number.POSITIVE_INFINITY;\n    packer.sortDirection = 'downwardLeftToRight';\n  }\n\n  packer.reset();\n\n  // layout\n  this.maxY = 0;\n  this.maxX = 0;\n};\n\n/**\n * update columnWidth, rowHeight, & gutter\n * @private\n */\nPackery.prototype._getMeasurements = function() {\n  this._getMeasurement( 'columnWidth', 'width' );\n  this._getMeasurement( 'rowHeight', 'height' );\n  this._getMeasurement( 'gutter', 'width' );\n};\n\nPackery.prototype._getItemLayoutPosition = function( item ) {\n  this._packItem( item );\n  return item.rect;\n};\n\n\n/**\n * layout item in packer\n * @param {Packery.Item} item\n */\nPackery.prototype._packItem = function( item ) {\n  this._setRectSize( item.element, item.rect );\n  // pack the rect in the packer\n  this.packer.pack( item.rect );\n  this._setMaxXY( item.rect );\n};\n\n/**\n * set max X and Y value, for size of container\n * @param {Packery.Rect} rect\n * @private\n */\nPackery.prototype._setMaxXY = function( rect ) {\n  this.maxX = Math.max( rect.x + rect.width, this.maxX );\n  this.maxY = Math.max( rect.y + rect.height, this.maxY );\n};\n\n/**\n * set the width and height of a rect, applying columnWidth and rowHeight\n * @param {Element} elem\n * @param {Packery.Rect} rect\n */\nPackery.prototype._setRectSize = function( elem, rect ) {\n  var size = getSize( elem );\n  var w = size.outerWidth;\n  var h = size.outerHeight;\n  // size for columnWidth and rowHeight, if available\n  // only check if size is non-zero, #177\n  if ( w || h ) {\n    w = this._applyGridGutter( w, this.columnWidth );\n    h = this._applyGridGutter( h, this.rowHeight );\n  }\n  // rect must fit in packer\n  rect.width = Math.min( w, this.packer.width );\n  rect.height = Math.min( h, this.packer.height );\n};\n\n/**\n * fits item to columnWidth/rowHeight and adds gutter\n * @param {Number} measurement - item width or height\n * @param {Number} gridSize - columnWidth or rowHeight\n * @returns measurement\n */\nPackery.prototype._applyGridGutter = function( measurement, gridSize ) {\n  // just add gutter if no gridSize\n  if ( !gridSize ) {\n    return measurement + this.gutter;\n  }\n  gridSize += this.gutter;\n  // fit item to columnWidth/rowHeight\n  var remainder = measurement % gridSize;\n  var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n  measurement = Math[ mathMethod ]( measurement / gridSize ) * gridSize;\n  return measurement;\n};\n\nPackery.prototype._getContainerSize = function() {\n  if ( this.options.isHorizontal ) {\n    return {\n      width: this.maxX - this.gutter\n    };\n  } else {\n    return {\n      height: this.maxY - this.gutter\n    };\n  }\n};\n\n\n// -------------------------- stamp -------------------------- //\n\n/**\n * makes space for element\n * @param {Element} elem\n */\nPackery.prototype._manageStamp = function( elem ) {\n\n  var item = this.getItem( elem );\n  var rect;\n  if ( item && item.isPlacing ) {\n    rect = item.placeRect;\n  } else {\n    var offset = this._getElementOffset( elem );\n    rect = new Rect({\n      x: this.options.isOriginLeft ? offset.left : offset.right,\n      y: this.options.isOriginTop ? offset.top : offset.bottom\n    });\n  }\n\n  this._setRectSize( elem, rect );\n  // save its space in the packer\n  this.packer.placed( rect );\n  this._setMaxXY( rect );\n};\n\n// -------------------------- methods -------------------------- //\n\nfunction verticalSorter( a, b ) {\n  return a.position.y - b.position.y || a.position.x - b.position.x;\n}\n\nfunction horizontalSorter( a, b ) {\n  return a.position.x - b.position.x || a.position.y - b.position.y;\n}\n\nPackery.prototype.sortItemsByPosition = function() {\n  var sorter = this.options.isHorizontal ? horizontalSorter : verticalSorter;\n  this.items.sort( sorter );\n};\n\n/**\n * Fit item element in its current position\n * Packery will position elements around it\n * useful for expanding elements\n *\n * @param {Element} elem\n * @param {Number} x - horizontal destination position, optional\n * @param {Number} y - vertical destination position, optional\n */\nPackery.prototype.fit = function( elem, x, y ) {\n  var item = this.getItem( elem );\n  if ( !item ) {\n    return;\n  }\n\n  // prepare internal properties\n  this._getMeasurements();\n\n  // stamp item to get it out of layout\n  this.stamp( item.element );\n  // required for positionPlaceRect\n  item.getSize();\n  // set placing flag\n  item.isPlacing = true;\n  // fall back to current position for fitting\n  x = x === undefined ? item.rect.x: x;\n  y = y === undefined ? item.rect.y: y;\n\n  // position it best at its destination\n  item.positionPlaceRect( x, y, true );\n\n  this._bindFitEvents( item );\n  item.moveTo( item.placeRect.x, item.placeRect.y );\n  // layout everything else\n  this.layout();\n\n  // return back to regularly scheduled programming\n  this.unstamp( item.element );\n  this.sortItemsByPosition();\n  // un set placing flag, back to normal\n  item.isPlacing = false;\n  // copy place rect position\n  item.copyPlaceRectPosition();\n};\n\n/**\n * emit event when item is fit and other items are laid out\n * @param {Packery.Item} item\n * @private\n */\nPackery.prototype._bindFitEvents = function( item ) {\n  var _this = this;\n  var ticks = 0;\n  function tick() {\n    ticks++;\n    if ( ticks != 2 ) {\n      return;\n    }\n    _this.dispatchEvent( 'fitComplete', null, [ item ] );\n  }\n  // when item is laid out\n  item.on( 'layout', function() {\n    tick();\n    return true;\n  });\n  // when all items are laid out\n  this.on( 'layoutComplete', function() {\n    tick();\n    return true;\n  });\n};\n\n// -------------------------- resize -------------------------- //\n\n// debounced, layout on resize\nPackery.prototype.resize = function() {\n  // don't trigger if size did not change\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  var innerSize = this.options.isHorizontal ? 'innerHeight' : 'innerWidth';\n  if ( hasSizes && size[ innerSize ] == this.size[ innerSize ] ) {\n    return;\n  }\n\n  this.layout();\n};\n\n// -------------------------- drag -------------------------- //\n\n/**\n * handle an item drag start event\n * @param {Element} elem\n */\nPackery.prototype.itemDragStart = function( elem ) {\n  this.stamp( elem );\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.dragStart();\n  }\n};\n\n/**\n * handle an item drag move event\n * @param {Element} elem\n * @param {Number} x - horizontal change in position\n * @param {Number} y - vertical change in position\n */\nPackery.prototype.itemDragMove = function( elem, x, y ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.dragMove( x, y );\n  }\n\n  // debounce\n  var _this = this;\n  // debounce triggering layout\n  function delayed() {\n    _this.layout();\n    delete _this.dragTimeout;\n  }\n\n  this.clearDragTimeout();\n\n  this.dragTimeout = setTimeout( delayed, 40 );\n};\n\nPackery.prototype.clearDragTimeout = function() {\n  if ( this.dragTimeout ) {\n    clearTimeout( this.dragTimeout );\n  }\n};\n\n/**\n * handle an item drag end event\n * @param {Element} elem\n */\nPackery.prototype.itemDragEnd = function( elem ) {\n  var item = this.getItem( elem );\n  var itemDidDrag;\n  if ( item ) {\n    itemDidDrag = item.didDrag;\n    item.dragStop();\n  }\n  // if elem didn't move, or if it doesn't need positioning\n  // unignore and unstamp and call it a day\n  if ( !item || ( !itemDidDrag && !item.needsPositioning ) ) {\n    this.unstamp( elem );\n    return;\n  }\n  // procced with dragged item\n\n  classie.add( item.element, 'is-positioning-post-drag' );\n\n  // save this var, as it could get reset in dragStart\n  var onLayoutComplete = this._getDragEndLayoutComplete( elem, item );\n\n  if ( item.needsPositioning ) {\n    item.on( 'layout', onLayoutComplete );\n    item.moveTo( item.placeRect.x, item.placeRect.y );\n  } else if ( item ) {\n    // item didn't need placement\n    item.copyPlaceRectPosition();\n  }\n\n  this.clearDragTimeout();\n  this.on( 'layoutComplete', onLayoutComplete );\n  this.layout();\n\n};\n\n/**\n * get drag end callback\n * @param {Element} elem\n * @param {Packery.Item} item\n * @returns {Function} onLayoutComplete\n */\nPackery.prototype._getDragEndLayoutComplete = function( elem, item ) {\n  var itemNeedsPositioning = item && item.needsPositioning;\n  var completeCount = 0;\n  var asyncCount = itemNeedsPositioning ? 2 : 1;\n  var _this = this;\n\n  return function onLayoutComplete() {\n    completeCount++;\n    // don't proceed if not complete\n    if ( completeCount != asyncCount ) {\n      return true;\n    }\n    // reset item\n    if ( item ) {\n      classie.remove( item.element, 'is-positioning-post-drag' );\n      item.isPlacing = false;\n      item.copyPlaceRectPosition();\n    }\n\n    _this.unstamp( elem );\n    // only sort when item moved\n    _this.sortItemsByPosition();\n\n    // emit item drag event now that everything is done\n    if ( itemNeedsPositioning ) {\n      _this.dispatchEvent( 'dragItemPositioned', null, [ item ] );\n    }\n    // listen once\n    return true;\n  };\n};\n\n/**\n * binds Draggabilly events\n * @param {Draggabilly} draggie\n */\nPackery.prototype.bindDraggabillyEvents = function( draggie ) {\n  draggie.on( 'dragStart', this.handleDraggabilly.dragStart );\n  draggie.on( 'dragMove', this.handleDraggabilly.dragMove );\n  draggie.on( 'dragEnd', this.handleDraggabilly.dragEnd );\n};\n\n/**\n * binds jQuery UI Draggable events\n * @param {jQuery} $elems\n */\nPackery.prototype.bindUIDraggableEvents = function( $elems ) {\n  $elems\n    .on( 'dragstart', this.handleUIDraggable.start )\n    .on( 'drag', this.handleUIDraggable.drag )\n    .on( 'dragstop', this.handleUIDraggable.stop );\n};\n\nPackery.Rect = Rect;\nPackery.Packer = Packer;\n\nreturn Packery;\n\n}));\n\n","Smartwave_Porto/js/ev-emitter.js":"/**\n * EvEmitter v1.0.1\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n    global.EvEmitter = factory();\n  }\n\n}( this, function() {\n\n\"use strict\";\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners array\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || [];\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var i = 0;\n  var listener = listeners[i];\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  while ( listener ) {\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n    // get next listener\n    i += isOnce ? 0 : 1;\n    listener = listeners[i];\n  }\n\n  return this;\n};\n\nreturn EvEmitter;\n\n}));\n","Smartwave_Megamenu/js/sw_megamenu.js":";(function($, window, document, undefined) {\n    $.fn.swMegamenu = function() {\n        $(\".navigation.sw-megamenu li.classic .submenu, .navigation.sw-megamenu li.staticwidth .submenu, .navigation.sw-megamenu li.classic .subchildmenu .subchildmenu\").each(function(){\n            $(this).css(\"right\",\"-9999px\");\n            $(this).css(\"left\",\"auto\");\n        });\n        $(this).find(\"li.classic .subchildmenu > li.parent\").mouseover(function(){\n            var popup = $(this).children(\"ul.subchildmenu\");\n            var w_width = $(window).innerWidth();\n            \n            if(popup) {\n                var pos = $(this).offset();\n                var c_width = $(popup).outerWidth();\n                if(w_width <= pos.left + $(this).outerWidth() + c_width) {\n                    $(popup).css(\"left\",\"auto\");\n                    $(popup).css(\"right\",\"100%\");\n                    $(popup).css(\"border-radius\",\"0 6px 6px 6px\");\n                } else {\n                    $(popup).css(\"right\",\"100%\");\n                    $(popup).css(\"left\",\"auto\");\n                    $(popup).css(\"border-radius\",\"6px 0 6px 6px\");\n                }\n            }\n        });\n        $(this).find(\"li.staticwidth.parent,li.classic.parent\").mouseover(function(){\n            var popup = $(this).children(\".submenu\");\n            var w_width = $(window).innerWidth();\n            \n            if(popup) {\n                var pos = $(this).offset();\n                var c_width = $(popup).outerWidth();\n                if(0 > pos.right - $(this).outerWidth() - c_width) {\n                    $(popup).css(\"left\",\"0\");\n                    $(popup).css(\"right\",\"auto\");\n                    $(popup).css(\"border-radius\",\"0 6px 6px 6px\");\n                } else {\n                    $(popup).css(\"left\",\"auto\");\n                    $(popup).css(\"right\",\"0\");\n                    $(popup).css(\"border-radius\",\"6px 0 6px 6px\");\n                }\n            }\n        });\n        $(window).resize(function(){\n            $(\".navigation.sw-megamenu li.classic .submenu, .navigation.sw-megamenu li.staticwidth .submenu, .navigation.sw-megamenu li.classic .subchildmenu .subchildmenu\").each(function(){\n                $(this).css(\"right\",\"-9999px\");\n                $(this).css(\"left\",\"auto\");\n            });\n        });\n        $(\".nav-toggle\").off('click').on('click',function(e){\n            if(!$(\"html\").hasClass(\"nav-open\")) {\n                $(\"html\").addClass(\"nav-before-open\");\n                setTimeout(function(){\n                    $(\"html\").addClass(\"nav-open\");\n                }, 300);\n            }\n            else {\n                $(\"html\").removeClass(\"nav-open\");\n                setTimeout(function(){\n                    $(\"html\").removeClass(\"nav-before-open\");\n                }, 300);\n            }\n        });\n        $(\"li.ui-menu-item > .open-children-toggle\").click(function(){\n            if(!$(this).parent().children(\".submenu\").hasClass(\"opened\")) {\n                $(this).parent().children(\".submenu\").addClass(\"opened\");\n                $(this).parent().children(\"a\").addClass(\"ui-state-active\");\n            }\n            else {\n                $(this).parent().children(\".submenu\").removeClass(\"opened\");\n                $(this).parent().children(\"a\").removeClass(\"ui-state-active\");\n            }\n        });\n    };\n})(window.Zepto || window.jQuery, window, document);","js/navigation-menu.js":"/**\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint jquery:true*/\n\ndefine([\n    \"jquery\",\n    \"matchMedia\",\n    \"mage/template\",\n    \"mage/dropdowns\",\n    \"mage/terms\"\n],function($, mediaCheck, mageTemplate) {\n    'use strict';\n\n    $.widget('mage.navigationMenu', {\n        options: {\n            itemsContainer: '> ul',\n            topLevel: 'li.level0',\n            topLevelSubmenu: '> .submenu',\n            topLevelHoverClass: 'hover',\n            expandedTopLevel: '.more',\n            hoverInTimeout: 300,\n            hoverOutTimeout: 500,\n            submenuAnimationSpeed: 200,\n            collapsable: true,\n            collapsableDropdownTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<li class=\"level0 level-top more parent\">' +\n                        '<div class=\"submenu\">' +\n                            '<ul><%= elems %></ul>' +\n                        '</div>' +\n                    '</li>' +\n                '</script>'\n        },\n\n        _create: function() {\n            this.itemsContainer = $(this.options.itemsContainer, this.element);\n            this.topLevel = $(this.options.topLevel, this.element);\n            this.topLevelSubmenu = $(this.options.topLevelSubmenu, this.topLevel);\n\n            this._bind();\n        },\n\n        _init: function() {\n            if (this.options.collapsable) {\n                setTimeout($.proxy(function() {\n                    this._checkToCollapseOrExpand();\n                }, this), 100);\n            }\n        },\n\n        _bind: function() {\n            this._on({\n                'mouseenter > ul > li.level0': function(e) {\n                    if (!this.entered) { // fix IE bug with 'mouseenter' event\n                        this.timeoutId && clearTimeout(this.timeoutId);\n                        this.timeoutId = setTimeout($.proxy(function() {\n                            this._openSubmenu(e);\n                        }, this), this.options.hoverInTimeout);\n                        this.entered = true;\n                    }\n                },\n                'mouseleave > ul > li.level0': function(e) {\n                    this.entered = null;\n\n                    this.timeoutId && clearTimeout(this.timeoutId);\n                    this.timeoutId = setTimeout($.proxy(function() {\n                        this._closeSubmenu(e.currentTarget);\n                    }, this), this.options.hoverOutTimeout);\n                },\n                'click': function(e) {\n                    e.stopPropagation();\n                }\n            });\n\n            $(document)\n                .on('click.hideMenu', $.proxy(function(e) {\n                    var isOpened = this.topLevel.filter(function() {\n                        return $(this).data('opened');\n                    });\n\n                    if (isOpened) {\n                        this._closeSubmenu(null, false);\n                    }\n                }, this));\n\n            $(window)\n                .on('resize', $.proxy(function() {\n                    this.timeoutOnResize && clearTimeout(this.timeoutOnResize);\n                    this.timeoutOnResize = setTimeout($.proxy(function() {\n                        if (this.options.collapsable) {\n                            if ($(this.options.expandedTopLevel, this.element).length) {\n                                this._expandMenu();\n                            }\n                            this._checkToCollapseOrExpand();\n                        }\n                    }, this), 300);\n                }, this));\n        },\n\n        _openSubmenu: function(e) {\n            var menuItem = e.currentTarget;\n\n            if (!$(menuItem).data('opened')) {\n                this._closeSubmenu(menuItem, true, true);\n\n                $(this.options.topLevelSubmenu, menuItem)\n                    .slideDown(this.options.submenuAnimationSpeed, $.proxy(function() {\n                        $(menuItem).addClass(this.options.topLevelHoverClass);\n                        $(menuItem).data('opened', true);\n                    }, this));\n            } else if ($(e.target).closest(this.options.topLevel)) {\n                $(e.target)\n                    .addClass(this.options.topLevelHoverClass)\n                    .siblings(this.options.topLevel)\n                        .removeClass(this.options.topLevelHoverClass);\n            }\n        },\n\n        _closeSubmenu: function(menuItem, excludeCurrent, fast) {\n            var topLevel = $(this.options.topLevel, this.element),\n                activeSubmenu = $(this.options.topLevelSubmenu, menuItem || null);\n\n            $(this.options.topLevelSubmenu, topLevel)\n                .filter(function() {\n                    return excludeCurrent ? $(this).not(activeSubmenu) : true;\n                })\n                .slideUp(fast ? 0 : this.options.submenuAnimationSpeed);\n\n            topLevel\n                .removeClass(this.options.topLevelHoverClass)\n                .data('opened', false);\n        },\n\n        _checkToCollapseOrExpand: function() {\n            if ($(\"html\").hasClass(\"lt-640\") || $(\"html\").hasClass(\"w-640\")) {\n                return;\n            }\n\n            var navWidth = this.itemsContainer.width(),\n                totalWidth = 0,\n                startCollapseIndex = 0;\n\n            $.each($(this.options.topLevel, this.element), function(index, item) {\n                totalWidth = totalWidth + $(item).outerWidth(true);\n\n                if (totalWidth > navWidth && !startCollapseIndex) {\n                    startCollapseIndex = index - 2;\n                }\n            });\n\n            this[startCollapseIndex ? '_collapseMenu' : '_expandMenu'](startCollapseIndex);\n        },\n\n        _collapseMenu: function(startCollapseIndex) {\n            this.elemsToCollapse = this.topLevel.filter(function(index) {\n                return index > startCollapseIndex;\n            });\n            this.elemsToCollapseClone = $('<div></div>').append(this.elemsToCollapse.clone()).html();\n\n            this.collapsableDropdown = $(\n                mageTemplate(\n                    this.options.collapsableDropdownTemplate,\n                    {elems: this.elemsToCollapseClone}\n                )\n            );\n\n            this.itemsContainer.append(this.collapsableDropdown);\n            this.elemsToCollapse.detach();\n        },\n\n        _expandMenu: function() {\n            this.elemsToCollapse && this.elemsToCollapse.appendTo(this.itemsContainer);\n            this.collapsableDropdown && this.collapsableDropdown.remove();\n        },\n\n        _destroy: function() {\n            this._expandMenu();\n        }\n    });\n\n    /*\n     * Provides \"Continium\" effect for submenu\n     * */\n    $.widget('mage.navigationMenu', $.mage.navigationMenu, {\n        options: {\n            parentLevel: '> ul > li.level0',\n            submenuAnimationSpeed: 150,\n            submenuContiniumEffect: false\n        },\n\n        _init: function() {\n            this._super();\n            this._applySubmenuStyles();\n        },\n\n        _applySubmenuStyles: function() {\n            $(this.options.topLevelSubmenu, $(this.options.topLevel, this.element))\n                .removeAttr('style');\n\n            $(this.options.topLevelSubmenu, $(this.options.parentLevel, this.element))\n                .css({\n                    display: 'block',\n                    height: 0,\n                    overflow: 'hidden'\n                });\n        },\n\n        _openSubmenu: function(e) {\n            var menuItem = e.currentTarget,\n                submenu = $(this.options.topLevelSubmenu, menuItem),\n                openedItems = $(this.options.topLevel, this.element).filter(function() {\n                    return $(this).data('opened');\n                });\n\n            if (submenu.length) {\n                this.heightToAnimate = $(this.options.itemsContainer, submenu).outerHeight(true);\n\n                if (openedItems.length) {\n                    this._closeSubmenu(menuItem, true, this.heightToAnimate, $.proxy(function() {\n                        submenu.css({\n                            height: 'auto'\n                        });\n                        $(menuItem)\n                            .addClass(this.options.topLevelHoverClass);\n                    }, this), e);\n                } else {\n                    submenu.animate({\n                        height: this.heightToAnimate\n                    }, this.options.submenuAnimationSpeed, $.proxy(function() {\n                        $(menuItem)\n                            .addClass(this.options.topLevelHoverClass);\n                    }, this));\n                }\n\n                $(menuItem)\n                    .data('opened', true);\n            } else {\n                this._closeSubmenu(menuItem);\n            }\n        },\n\n        _closeSubmenu: function(menuItem, excludeCurrent, heightToAnimate, callback, e) {\n            var topLevel = $(this.options.topLevel, this.itemsContainer),\n                expandedTopLevel = e && $(e.target).closest(this.options.expandedTopLevel);\n\n            if (!excludeCurrent) {\n                $(this.options.topLevelSubmenu, $(this.options.parentLevel, this.element))\n                    .animate({\n                        height: 0\n                    });\n\n                topLevel\n                    .data('opened', false)\n                    .removeClass(this.options.topLevelHoverClass);\n            } else {\n                var prevOpenedItem = topLevel.filter(function() {\n                        return $(this).data('opened');\n                    }),\n                    prevOpenedSubmenu = $(this.options.topLevelSubmenu, prevOpenedItem);\n\n                prevOpenedSubmenu.animate({\n                    height: heightToAnimate\n                }, this.options.submenuAnimationSpeed, 'linear', function() {\n                    $(this).css({\n                        height: 0\n                    });\n                    callback && callback();\n                });\n\n                prevOpenedItem\n                    .data('opened', false)\n                    .removeClass(this.options.topLevelHoverClass);\n            }\n        },\n\n        _collapseMenu: function() {\n            this._superApply(arguments);\n            this._applySubmenuStyles();\n        }\n    });\n\n    //  Responsive menu\n    $.widget('mage.navigationMenu', $.mage.navigationMenu, {\n        options: {\n            responsive: false,\n            origNavPlaceholder: '.page-header',\n            mainContainer: 'body',\n            pageWrapper: '.page-wrapper',\n            openedMenuClass: 'opened',\n            toggleActionPlaceholder: '.block-search',\n            itemWithSubmenu: 'li.parent',\n            titleWithSubmenu: 'li.parent > a',\n            submenu: 'li.parent > .submenu',\n            toggleActionTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<span data-action=\"toggle-nav\" class=\"action toggle nav\">Toggle Nav</span>' +\n                '</script>',\n            submenuActionsTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<li class=\"action all\">' +\n                        '<a href=\"<%= categoryURL %>\"><span>All <%= category %></span></a>' +\n                    '</li>' +\n                '</script>',\n            navigationSectionsWrapperTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<dl class=\"navigation-tabs\" data-sections=\"tabs\">' +\n                    '</dl>' +\n                '</script>',\n            navigationItemWrapperTemplate:\n                '<script type=\"text/x-magento-template\">' +\n                    '<dt class=\"item title <% if (active) { %>active<% } %>\" data-section=\"title\">' +\n                        '<a class=\"switch\" data-toggle=\"switch\" href=\"#TODO\"><%= title %></a>' +\n                    '</dt>' +\n                    '<dd class=\"item content <% if (active) { %>active<%}%>\" data-section=\"content\">' +\n                    '</dd>' +\n                '</script>'\n        },\n\n        _init: function() {\n            this._super();\n\n            this.mainContainer = $(this.options.mainContainer);\n            this.pageWrapper = $(this.options.pageWrapper);\n            this.toggleAction = $(mageTemplate(this.options.toggleActionTemplate, {}));\n\n            if (this.options.responsive) {\n                mediaCheck({\n                    media: '(min-width: 768px)',\n                    entry: $.proxy(function() {\n                        this._toggleDesktopMode();\n                    }, this),\n                    exit: $.proxy(function() {\n                        this._toggleMobileMode();\n                    }, this)\n                });\n            }\n        },\n\n        _bind: function() {\n            this._super();\n            this._bindDocumentEvents();\n        },\n\n        _bindDocumentEvents: function() {\n            if (!this.eventsBound) {\n                $(document)\n                    .on('click.toggleMenu', '.action.toggle.nav', $.proxy(function(e) {\n                        if ($(this.element).data('opened')) {\n                            this._hideMenu();\n                        } else {\n                            this._showMenu();\n                        }\n                        e.stopPropagation();\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this))\n                    .on('click.hideMenu', this.options.pageWrapper, $.proxy(function() {\n                        if ($(this.element).data('opened')) {\n                            this._hideMenu();\n                            this.mobileNav.scrollTop(0);\n                            this._fixedBackLink();\n                        }\n                    }, this))\n                    .on('click.showSubmenu', this.options.titleWithSubmenu, $.proxy(function(e) {\n                        this._showSubmenu(e);\n\n                        e.preventDefault();\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this))\n                    .on('click.hideSubmenu', '.action.back', $.proxy(function(e) {\n                        this._hideSubmenu(e);\n                        this.mobileNav.scrollTop(0);\n                        this._fixedBackLink();\n                    }, this));\n\n                this.eventsBound = true;\n            }\n        },\n\n        _showMenu: function() {\n            $(this.element).data('opened', true);\n            this.mainContainer.add( \"html\" ).addClass(this.options.openedMenuClass);\n        },\n\n        _hideMenu: function() {\n            $(this.element).data('opened', false);\n            this.mainContainer.add( \"html\" ).removeClass(this.options.openedMenuClass);\n        },\n\n        _showSubmenu: function(e) {\n            $(e.currentTarget).addClass('action back');\n            var submenu = $(e.currentTarget).siblings('.submenu');\n\n            submenu.addClass('opened');\n        },\n\n        _hideSubmenu: function(e) {\n            var submenuSelector = '.submenu',\n                submenu = $(e.currentTarget).next(submenuSelector);\n            $(e.currentTarget).removeClass('action back');\n            submenu.removeClass('opened');\n        },\n\n        _renderSubmenuActions: function() {\n            $.each(\n                $(this.options.itemWithSubmenu),\n                $.proxy(\n                    function(index, item) {\n                        var actions = $(\n                            mageTemplate(\n                                this.options.submenuActionsTemplate,\n                                {\n                                    category: $('> a > span', item).text(),\n                                    categoryURL: $('> a', item).attr('href')\n                                }\n                            )\n                            ),\n                            submenu = $('> .submenu', item),\n                            items = $('> ul', submenu);\n                            items.prepend(actions);\n                    },\n                    this\n                )\n            );\n        },\n\n        _toggleMobileMode: function() {\n            this._expandMenu();\n\n            $(this.options.topLevelSubmenu, $(this.options.topLevel, this.element))\n                .removeAttr('style');\n\n            this.toggleAction.insertBefore(this.options.toggleActionPlaceholder);\n            this.mobileNav = $(this.element).detach().clone();\n            this.mainContainer.prepend(this.mobileNav);\n            this.mobileNav.find('> ul').addClass('nav');\n            this._insertExtraItems();\n            this._wrapItemsInSections();\n            this.mobileNav.scroll($.proxy(\n                function() {\n                    this._fixedBackLink();\n                }, this\n            ));\n\n            this._renderSubmenuActions();\n            this._bindDocumentEvents();\n        },\n\n        _toggleDesktopMode: function() {\n            this.mobileNav && this.mobileNav.remove();\n            this.toggleAction.detach();\n            $(this.element).insertAfter(this.options.origNavPlaceholder);\n\n            $(document)\n                .off('click.toggleMenu', '.action.toggle.nav')\n                .off('click.hideMenu', this.options.pageWrapper)\n                .off('click.showSubmenu', this.options.titleWithSubmenu)\n                .off('click.hideSubmenu', '.action.back');\n\n            this.eventsBound = false;\n\n            this._applySubmenuStyles();\n        },\n\n        _insertExtraItems: function() {\n            if ($('.header.panel .switcher').length) {\n                var settings = $('.header.panel .switcher')\n                    .clone()\n                    .addClass('settings');\n\n                this.mobileNav.prepend(settings);\n            }\n\n            if ($('.footer .switcher').length) {\n                var footerSettings = $('.footer .switcher')\n                    .clone()\n                    .addClass('settings');\n\n                this.mobileNav.prepend(footerSettings);\n            }\n\n\n            if ($('.header.panel .header.links li').length) {\n                var account = $('.header.panel > .header.links')\n                    .clone()\n                    .addClass('account');\n\n                this.mobileNav.prepend(account);\n            }\n        },\n\n        _wrapItemsInSections: function() {\n            var account = $('> .account', this.mobileNav),\n                settings = $('> .settings', this.mobileNav),\n                nav = $('> .nav', this.mobileNav),\n                navigationSectionsWrapper = $(mageTemplate(this.options.navigationSectionsWrapperTemplate, {})),\n                navigationItemWrapper;\n\n            this.mobileNav.append(navigationSectionsWrapper);\n\n            if (nav.length) {\n                navigationItemWrapper = $(mageTemplate(this.options.navigationItemWrapperTemplate, {title: 'Menu'}));\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(nav);\n            }\n\n            if (account.length) {\n                navigationItemWrapper = $(mageTemplate(this.options.navigationItemWrapperTemplate, {title: 'Account'}));\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(account);\n            }\n\n            if (settings.length) {\n                navigationItemWrapper = $(\n                    mageTemplate(this.options.navigationItemWrapperTemplate, {title: 'Settings'})\n                );\n                navigationSectionsWrapper.append(navigationItemWrapper);\n                navigationItemWrapper.eq(1).append(settings);\n            }\n\n            navigationSectionsWrapper.addClass(\"navigation-tabs-\" + navigationSectionsWrapper.find('[data-section=\"title\"]').length);\n            navigationSectionsWrapper.terms();\n        },\n\n        _fixedBackLink: function() {\n            var linksBack = this.mobileNav.find('.submenu .action.back');\n            var linkBack = this.mobileNav.find('.submenu.opened > ul > .action.back').last();\n\n            linksBack.removeClass('fixed');\n\n            if(linkBack.length) {\n                var subMenu = linkBack.parent(),\n                    navOffset = this.mobileNav.find('.nav').position().top,\n                    linkBackHeight = linkBack.height();\n\n                if (navOffset <= 0) {\n                    linkBack.addClass('fixed');\n                    subMenu.css({\n                        paddingTop: linkBackHeight\n                    })\n                } else {\n                    linkBack.removeClass('fixed');\n                    subMenu.css({\n                        paddingTop: 0\n                    })\n                }\n            }\n        }\n    });\n\n    return $.mage.navigationMenu;\n});\n","js/theme.js":"/**\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\nrequire([\n    'jquery',\n    'mage/smart-keyboard-handler',\n    'mage/mage',\n    'mage/ie-class-fixer',\n    'domReady!'\n], function ($, keyboardHandler) {\n    'use strict';\n    $(document).ready(function(){\n        $('.cart-summary').mage('sticky', {\n            container: '#maincontent'\n        });\n\n        $('.panel.header .header.links').clone().appendTo('#store\\\\.links');\n    });\n    keyboardHandler.apply();\n});\n/******************** Init Parallax ***********************/\nrequire([\n    'jquery',\n    'js/jquery.stellar.min'\n], function ($) {\n    $(document).ready(function(){\n        $(window).stellar({\n            responsive: true,\n            scrollProperty: 'scroll',\n            parallaxElements: false,\n            horizontalScrolling: false,\n            horizontalOffset: 0,\n            verticalOffset: 0\n        });\n    });\n});\n\nrequire([\n    'jquery'\n], function ($) {\n    (function() {\n        var ev = new $.Event('classadded'),\n            orig = $.fn.addClass;\n        $.fn.addClass = function() {\n            $(this).trigger(ev, arguments);\n            return orig.apply(this, arguments);\n        }\n    })();\n    $(document).ready(function(){\n        var windowScroll_t;\n        $(window).scroll(function(){\n            clearTimeout(windowScroll_t);\n            windowScroll_t = setTimeout(function(){\n                if(jQuery(this).scrollTop() > 100){\n                    $('#totop').fadeIn();\n                }else{\n                    $('#totop').fadeOut();\n                }\n            }, 500);\n        });\n        $('#totop').off(\"click\").on(\"click\",function(){\n            $('html, body').animate({scrollTop: 0}, 600);\n        });\n        if ($('body').hasClass('checkout-cart-index')) {\n            if ($('#co-shipping-method-form .fieldset.rates').length > 0 && $('#co-shipping-method-form .fieldset.rates :checked').length === 0) {\n                $('#block-shipping').on('collapsiblecreate', function () {\n                    $('#block-shipping').collapsible('forceActivate');\n                });\n            }\n        }\n        $(\".word-rotate\").each(function() {\n\n            var $this = $(this),\n                itemsWrapper = $(this).find(\".word-rotate-items\"),\n                items = itemsWrapper.find(\"> span\"),\n                firstItem = items.eq(0),\n                firstItemClone = firstItem.clone(),\n                itemHeight = 0,\n                currentItem = 1,\n                currentTop = 0;\n\n            itemHeight = firstItem.height();\n\n            itemsWrapper.append(firstItemClone);\n\n            $this\n                .height(itemHeight)\n                .addClass(\"active\");\n\n            setInterval(function() {\n                currentTop = (currentItem * itemHeight);\n                \n                itemsWrapper.animate({\n                    top: -(currentTop) + \"px\"\n                }, 300, function() {\n                    currentItem++;\n                    if(currentItem > items.length) {\n                        itemsWrapper.css(\"top\", 0);\n                        currentItem = 1;\n                    }\n                });\n                \n            }, 2000);\n\n        });\n        \n        $(\".search-toggle-icon\").click(function(e){\n            if($(this).parent().children(\".block-search\").hasClass(\"show\")) {\n                $(this).parent().children(\".block-search\").removeClass(\"show\");\n            } else {\n                $(this).parent().children(\".block-search\").addClass(\"show\");\n            }\n            e.stopPropagation();\n        });\n        $(\".search-toggle-icon\").parent().click(function(e){\n            e.stopPropagation();\n        });\n        $(\"html,body\").click(function(){\n            $(\".search-toggle-icon\").parent().children(\".block-search\").removeClass(\"show\");\n        });\n        \n        /********************* Qty Holder **************************/\n        $(\".qty-inc\").unbind('click').click(function(){\n            if($(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").is(':enabled')){\n                $(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").val((+$(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").val() + 1) || 0);\n                $(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").trigger('change');\n                $(this).focus();\n            }\n        });\n        $(\".qty-dec\").unbind('click').click(function(){\n            if($(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").is(':enabled')){\n                $(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").val(($(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").val() - 1 > 0) ? ($(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").val() - 1) : 0);\n                $(this).parent().parent().children(\".control\").children(\"input.input-text.qty\").trigger('change');\n                $(this).focus();\n            }\n        });\n        \n        /********** Fullscreen Slider ************/\n        var s_width = $(window).innerWidth();\n        var s_height = $(window).innerHeight();\n        var s_ratio = s_width/s_height;\n        var v_width=320;\n        var v_height=240;\n        var v_ratio = v_width/v_height;\n        $(\".full-screen-slider div.item\").css(\"position\",\"relative\");\n        $(\".full-screen-slider div.item\").css(\"overflow\",\"hidden\");\n        $(\".full-screen-slider div.item\").width(s_width);\n        $(\".full-screen-slider div.item\").height(s_height);\n        $(\".full-screen-slider div.item > video\").css(\"position\",\"absolute\");\n        $(\".full-screen-slider div.item > video\").bind(\"loadedmetadata\",function(){\n            v_width = this.videoWidth;\n            v_height = this.videoHeight;\n            v_ratio = v_width/v_height;\n            if(s_ratio>=v_ratio){\n                $(this).width(s_width);\n                $(this).height(\"\");\n                $(this).css(\"left\",\"0px\");\n                $(this).css(\"top\",(s_height-s_width/v_width*v_height)/2+\"px\");\n            }else{\n                $(this).width(\"\");\n                $(this).height(s_height);\n                $(this).css(\"left\",(s_width-s_height/v_height*v_width)/2+\"px\");\n                $(this).css(\"top\",\"0px\");\n            }\n            $(this).get(0).play();\n        });\n        if($(\".page-header\").hasClass(\"type10\")) {\n            if(s_width >= 992){\n                $(\".navigation\").addClass(\"side-megamenu\")\n            } else {\n                $(\".navigation\").removeClass(\"side-megamenu\")\n            }\n        }\n        \n        $(window).resize(function(){\n            s_width = $(window).innerWidth();\n            s_height = $(window).innerHeight();\n            s_ratio = s_width/s_height;\n            $(\".full-screen-slider div.item\").width(s_width);\n            $(\".full-screen-slider div.item\").height(s_height);\n            $(\".full-screen-slider div.item > video\").each(function(){\n                if(s_ratio>=v_ratio){\n                    $(this).width(s_width);\n                    $(this).height(\"\");\n                    $(this).css(\"left\",\"0px\");\n                    $(this).css(\"top\",(s_height-s_width/v_width*v_height)/2+\"px\");\n                }else{\n                    $(this).width(\"\");\n                    $(this).height(s_height);\n                    $(this).css(\"left\",(s_width-s_height/v_height*v_width)/2+\"px\");\n                    $(this).css(\"top\",\"0px\");\n                }\n            });\n            if($(\".page-header\").hasClass(\"type10\")) {\n                if(s_width >= 992){\n                    $(\".navigation\").addClass(\"side-megamenu\")\n                } else {\n                    $(\".navigation\").removeClass(\"side-megamenu\")\n                }\n            }\n        });\n        var breadcrumb_pos_top = 0;\n        $(window).scroll(function(){\n            if(!$(\"body\").hasClass(\"cms-index-index\")){\n                var side_header_height = $(\".page-header.type10\").innerHeight();\n                var window_height = $(window).height();\n                if(side_header_height-window_height<$(window).scrollTop()){\n                    if(!$(\".page-header.type10\").hasClass(\"fixed-bottom\"))\n                        $(\".page-header.type10\").addClass(\"fixed-bottom\");\n                }\n                if(side_header_height-window_height>=$(window).scrollTop()){\n                    if($(\".page-header.type10\").hasClass(\"fixed-bottom\"))\n                        $(\".page-header.type10\").removeClass(\"fixed-bottom\");\n                }\n            }\n            if($(\"body.side-header .page-wrapper > .breadcrumbs\").length){\n                if(!$(\"body.side-header .page-wrapper > .breadcrumbs\").hasClass(\"fixed-position\")){\n                    breadcrumb_pos_top = $(\"body.side-header .page-wrapper > .breadcrumbs\").offset().top;\n                    if($(\"body.side-header .page-wrapper > .breadcrumbs\").offset().top<$(window).scrollTop()){\n                        $(\"body.side-header .page-wrapper > .breadcrumbs\").addClass(\"fixed-position\");\n                    }\n                }else{\n                    if($(window).scrollTop()<=1){\n                        $(\"body.side-header .page-wrapper > .breadcrumbs\").removeClass(\"fixed-position\");\n                    }\n                }\n            }\n        });\n    });\n});","js/responsive.js":"/**\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n\ndefine([\n    'jquery',\n    'matchMedia',\n    'mage/tabs',\n    'domReady!'\n], function ($, mediaCheck) {\n    'use strict';\n\n    mediaCheck({\n        media: '(min-width: 768px)',\n        // Switch to Desktop Version\n        entry: function () {\n            (function () {\n\n                var productInfoMain = $('.product-info-main'),\n                    productInfoAdditional = $('#product-info-additional');\n\n                if (productInfoAdditional.length) {\n                    productInfoAdditional.addClass('hidden');\n                    productInfoMain.removeClass('responsive');\n                }\n\n            })();\n\n            var galleryElement = $('[data-role=media-gallery]');\n\n            if (galleryElement.length && galleryElement.data('mageZoom')) {\n                galleryElement.zoom('enable');\n            }\n\n            if (galleryElement.length && galleryElement.data('mageGallery')) {\n                galleryElement.gallery('option', 'disableLinks', true);\n                galleryElement.gallery('option', 'showNav', false);\n                galleryElement.gallery('option', 'showThumbs', true);\n            }\n\n            setTimeout(function () {\n                $('.product.data.items').tabs('option', 'openOnFocus', true);\n            }, 500);\n        },\n        // Switch to Mobile Version\n        exit: function () {\n            $('.action.toggle.checkout.progress')\n                .on('click.gotoCheckoutProgress', function () {\n                    var myWrapper = '#checkout-progress-wrapper';\n                    scrollTo(myWrapper + ' .title');\n                    $(myWrapper + ' .title').addClass('active');\n                    $(myWrapper + ' .content').show();\n                });\n\n            $('body')\n                .on('click.checkoutProgress', '#checkout-progress-wrapper .title', function () {\n                    $(this).toggleClass('active');\n                    $('#checkout-progress-wrapper .content').toggle();\n                });\n\n            var galleryElement = $('[data-role=media-gallery]');\n\n            setTimeout(function () {\n                if (galleryElement.length && galleryElement.data('mageZoom')) {\n                    galleryElement.zoom('disable');\n                }\n\n                if (galleryElement.length && galleryElement.data('mageGallery')) {\n                    galleryElement.gallery('option', 'disableLinks', false);\n                    galleryElement.gallery('option', 'showNav', true);\n                    galleryElement.gallery('option', 'showThumbs', false);\n                }\n            }, 2000);\n\n            setTimeout(function () {\n                $('.product.data.items').tabs('option', 'openOnFocus', false);\n            }, 500);\n        }\n    });\n});\n","owl.carousel/owl.carousel.js":"/**\n * Owl carousel\n * @version 2.0.0\n * @author Bartosz Wojciechowski\n * @license The MIT License (MIT)\n * @todo Lazy Load Icon\n * @todo prevent animationend bubling\n * @todo itemsScaleUp\n * @todo Test Zepto\n * @todo stagePadding calculate wrong active classes\n */\n;(function($, window, document, undefined) {\n\n\tvar drag, state, e;\n\n\t/**\n\t * Template for status information about drag and touch events.\n\t * @private\n\t */\n\tdrag = {\n\t\tstart: 0,\n\t\tstartX: 0,\n\t\tstartY: 0,\n\t\tcurrent: 0,\n\t\tcurrentX: 0,\n\t\tcurrentY: 0,\n\t\toffsetX: 0,\n\t\toffsetY: 0,\n\t\tdistance: null,\n\t\tstartTime: 0,\n\t\tendTime: 0,\n\t\tupdatedX: 0,\n\t\ttargetEl: null\n\t};\n\n\t/**\n\t * Template for some status informations.\n\t * @private\n\t */\n\tstate = {\n\t\tisTouch: false,\n\t\tisScrolling: false,\n\t\tisSwiping: false,\n\t\tdirection: false,\n\t\tinMotion: false\n\t};\n\n\t/**\n\t * Event functions references.\n\t * @private\n\t */\n\te = {\n\t\t_onDragStart: null,\n\t\t_onDragMove: null,\n\t\t_onDragEnd: null,\n\t\t_transitionEnd: null,\n\t\t_resizer: null,\n\t\t_responsiveCall: null,\n\t\t_goToLoop: null,\n\t\t_checkVisibile: null\n\t};\n\n\t/**\n\t * Creates a carousel.\n\t * @class The Owl Carousel.\n\t * @public\n\t * @param {HTMLElement|jQuery} element - The element to create the carousel for.\n\t * @param {Object} [options] - The options\n\t */\n\tfunction Owl(element, options) {\n\n\t\t/**\n\t\t * Current settings for the carousel.\n\t\t * @public\n\t\t */\n\t\tthis.settings = null;\n\n\t\t/**\n\t\t * Current options set by the caller including defaults.\n\t\t * @public\n\t\t */\n\t\tthis.options = $.extend({}, Owl.Defaults, options);\n\n\t\t/**\n\t\t * Plugin element.\n\t\t * @public\n\t\t */\n\t\tthis.$element = $(element);\n\n\t\t/**\n\t\t * Caches informations about drag and touch events.\n\t\t */\n\t\tthis.drag = $.extend({}, drag);\n\n\t\t/**\n\t\t * Caches some status informations.\n\t\t * @protected\n\t\t */\n\t\tthis.state = $.extend({}, state);\n\n\t\t/**\n\t\t * @protected\n\t\t * @todo Must be documented\n\t\t */\n\t\tthis.e = $.extend({}, e);\n\n\t\t/**\n\t\t * References to the running plugins of this carousel.\n\t\t * @protected\n\t\t */\n\t\tthis._plugins = {};\n\n\t\t/**\n\t\t * Currently suppressed events to prevent them from beeing retriggered.\n\t\t * @protected\n\t\t */\n\t\tthis._supress = {};\n\n\t\t/**\n\t\t * Absolute current position.\n\t\t * @protected\n\t\t */\n\t\tthis._current = null;\n\n\t\t/**\n\t\t * Animation speed in milliseconds.\n\t\t * @protected\n\t\t */\n\t\tthis._speed = null;\n\n\t\t/**\n\t\t * Coordinates of all items in pixel.\n\t\t * @todo The name of this member is missleading.\n\t\t * @protected\n\t\t */\n\t\tthis._coordinates = [];\n\n\t\t/**\n\t\t * Current breakpoint.\n\t\t * @todo Real media queries would be nice.\n\t\t * @protected\n\t\t */\n\t\tthis._breakpoint = null;\n\n\t\t/**\n\t\t * Current width of the plugin element.\n\t\t */\n\t\tthis._width = null;\n\n\t\t/**\n\t\t * All real items.\n\t\t * @protected\n\t\t */\n\t\tthis._items = [];\n\n\t\t/**\n\t\t * All cloned items.\n\t\t * @protected\n\t\t */\n\t\tthis._clones = [];\n\n\t\t/**\n\t\t * Merge values of all items.\n\t\t * @todo Maybe this could be part of a plugin.\n\t\t * @protected\n\t\t */\n\t\tthis._mergers = [];\n\n\t\t/**\n\t\t * Invalidated parts within the update process.\n\t\t * @protected\n\t\t */\n\t\tthis._invalidated = {};\n\n\t\t/**\n\t\t * Ordered list of workers for the update process.\n\t\t * @protected\n\t\t */\n\t\tthis._pipe = [];\n\n\t\t$.each(Owl.Plugins, $.proxy(function(key, plugin) {\n\t\t\tthis._plugins[key[0].toLowerCase() + key.slice(1)]\n\t\t\t\t= new plugin(this);\n\t\t}, this));\n\n\t\t$.each(Owl.Pipe, $.proxy(function(priority, worker) {\n\t\t\tthis._pipe.push({\n\t\t\t\t'filter': worker.filter,\n\t\t\t\t'run': $.proxy(worker.run, this)\n\t\t\t});\n\t\t}, this));\n\n\t\tthis.setup();\n\t\tthis.initialize();\n\t}\n\n\t/**\n\t * Default options for the carousel.\n\t * @public\n\t */\n\tOwl.Defaults = {\n\t\titems: 3,\n\t\tloop: false,\n\t\tcenter: false,\n\n\t\tmouseDrag: true,\n\t\ttouchDrag: true,\n\t\tpullDrag: true,\n\t\tfreeDrag: false,\n\n\t\tmargin: 0,\n\t\tstagePadding: 0,\n\n\t\tmerge: false,\n\t\tmergeFit: true,\n\t\tautoWidth: false,\n\n\t\tstartPosition: 0,\n\t\trtl: true,\n\n\t\tsmartSpeed: 250,\n\t\tfluidSpeed: false,\n\t\tdragEndSpeed: false,\n\n\t\tresponsive: {},\n\t\tresponsiveRefreshRate: 200,\n\t\tresponsiveBaseElement: window,\n\t\tresponsiveClass: false,\n\n\t\tfallbackEasing: 'swing',\n\n\t\tinfo: false,\n\n\t\tnestedItemSelector: false,\n\t\titemElement: 'div',\n\t\tstageElement: 'div',\n\n\t\t// Classes and Names\n\t\tthemeClass: 'owl-theme',\n\t\tbaseClass: 'owl-carousel',\n\t\titemClass: 'owl-item',\n\t\tcenterClass: 'center',\n\t\tactiveClass: 'active'\n\t};\n\n\t/**\n\t * Enumeration for width.\n\t * @public\n\t * @readonly\n\t * @enum {String}\n\t */\n\tOwl.Width = {\n\t\tDefault: 'default',\n\t\tInner: 'inner',\n\t\tOuter: 'outer'\n\t};\n\n\t/**\n\t * Contains all registered plugins.\n\t * @public\n\t */\n\tOwl.Plugins = {};\n\n\t/**\n\t * Update pipe.\n\t */\n\tOwl.Pipe = [ {\n\t\tfilter: [ 'width', 'items', 'settings' ],\n\t\trun: function(cache) {\n\t\t\tcache.current = this._items && this._items[this.relative(this._current)];\n\t\t}\n\t}, {\n\t\tfilter: [ 'items', 'settings' ],\n\t\trun: function() {\n\t\t\tvar cached = this._clones,\n\t\t\t\tclones = this.$stage.children('.cloned');\n\n\t\t\tif (clones.length !== cached.length || (!this.settings.loop && cached.length > 0)) {\n\t\t\t\tthis.$stage.children('.cloned').remove();\n\t\t\t\tthis._clones = [];\n\t\t\t}\n\t\t}\n\t}, {\n\t\tfilter: [ 'items', 'settings' ],\n\t\trun: function() {\n\t\t\tvar i, n,\n\t\t\t\tclones = this._clones,\n\t\t\t\titems = this._items,\n\t\t\t\tdelta = this.settings.loop ? clones.length - Math.max(this.settings.items * 2, 4) : 0;\n\n\t\t\tfor (i = 0, n = Math.abs(delta / 2); i < n; i++) {\n\t\t\t\tif (delta > 0) {\n\t\t\t\t\tthis.$stage.children().eq(items.length + clones.length - 1).remove();\n\t\t\t\t\tclones.pop();\n\t\t\t\t\tthis.$stage.children().eq(0).remove();\n\t\t\t\t\tclones.pop();\n\t\t\t\t} else {\n\t\t\t\t\tclones.push(clones.length / 2);\n\t\t\t\t\tthis.$stage.append(items[clones[clones.length - 1]].clone().addClass('cloned'));\n\t\t\t\t\tclones.push(items.length - 1 - (clones.length - 1) / 2);\n\t\t\t\t\tthis.$stage.prepend(items[clones[clones.length - 1]].clone().addClass('cloned'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tfilter: [ 'width', 'items', 'settings' ],\n\t\trun: function() {\n\t\t\tvar rtl = (this.settings.rtl ? 1 : -1),\n\t\t\t\twidth = (this.width() / this.settings.items).toFixed(3),\n\t\t\t\tcoordinate = 0, merge, i, n;\n\n\t\t\tthis._coordinates = [];\n\t\t\tfor (i = 0, n = this._clones.length + this._items.length; i < n; i++) {\n\t\t\t\tmerge = this._mergers[this.relative(i)];\n\t\t\t\tmerge = (this.settings.mergeFit && Math.min(merge, this.settings.items)) || merge;\n\t\t\t\tcoordinate += (this.settings.autoWidth ? this._items[this.relative(i)].width() + this.settings.margin : width * merge) * rtl;\n\n\t\t\t\tthis._coordinates.push(coordinate);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tfilter: [ 'width', 'items', 'settings' ],\n\t\trun: function() {\n\t\t\tvar i, n, width = (this.width() / this.settings.items).toFixed(3), css = {\n\t\t\t\t'width': Math.abs(this._coordinates[this._coordinates.length - 1]) + this.settings.stagePadding * 2,\n\t\t\t\t'padding-left': this.settings.stagePadding || '',\n\t\t\t\t'padding-right': this.settings.stagePadding || ''\n\t\t\t};\n\n\t\t\tthis.$stage.css(css);\n\n\t\t\tcss = { 'width': this.settings.autoWidth ? 'auto' : width - this.settings.margin };\n\t\t\tcss[this.settings.rtl ? 'margin-left' : 'margin-right'] = this.settings.margin;\n\n\t\t\tif (!this.settings.autoWidth && $.grep(this._mergers, function(v) { return v > 1 }).length > 0) {\n\t\t\t\tfor (i = 0, n = this._coordinates.length; i < n; i++) {\n\t\t\t\t\tcss.width = Math.abs(this._coordinates[i]) - Math.abs(this._coordinates[i - 1] || 0) - this.settings.margin;\n\t\t\t\t\tthis.$stage.children().eq(i).css(css);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.$stage.children().css(css);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tfilter: [ 'width', 'items', 'settings' ],\n\t\trun: function(cache) {\n\t\t\tcache.current && this.reset(this.$stage.children().index(cache.current));\n\t\t}\n\t}, {\n\t\tfilter: [ 'position' ],\n\t\trun: function() {\n\t\t\tthis.animate(this.coordinates(this._current));\n\t\t}\n\t}, {\n\t\tfilter: [ 'width', 'position', 'items', 'settings' ],\n\t\trun: function() {\n\t\t\tvar rtl = this.settings.rtl ? 1 : -1,\n\t\t\t\tpadding = this.settings.stagePadding * 2,\n\t\t\t\tbegin = this.coordinates(this.current()) + padding,\n\t\t\t\tend = begin + this.width() * rtl,\n\t\t\t\tinner, outer, matches = [], i, n;\n\n\t\t\tfor (i = 0, n = this._coordinates.length; i < n; i++) {\n\t\t\t\tinner = this._coordinates[i - 1] || 0;\n\t\t\t\touter = Math.abs(this._coordinates[i]) + padding * rtl;\n\n\t\t\t\tif ((this.op(inner, '<=', begin) && (this.op(inner, '>', end)))\n\t\t\t\t\t|| (this.op(outer, '<', begin) && this.op(outer, '>', end))) {\n\t\t\t\t\tmatches.push(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.$stage.children('.' + this.settings.activeClass).removeClass(this.settings.activeClass);\n\t\t\tthis.$stage.children(':eq(' + matches.join('), :eq(') + ')').addClass(this.settings.activeClass);\n\n\t\t\tif (this.settings.center) {\n\t\t\t\tthis.$stage.children('.' + this.settings.centerClass).removeClass(this.settings.centerClass);\n\t\t\t\tthis.$stage.children().eq(this.current()).addClass(this.settings.centerClass);\n\t\t\t}\n\t\t}\n\t} ];\n\n\t/**\n\t * Initializes the carousel.\n\t * @protected\n\t */\n\tOwl.prototype.initialize = function() {\n\t\tthis.trigger('initialize');\n\n\t\tthis.$element\n\t\t\t.addClass(this.settings.baseClass)\n\t\t\t.addClass(this.settings.themeClass)\n\t\t\t.toggleClass('owl-rtl', this.settings.rtl);\n\n\t\t// check support\n\t\tthis.browserSupport();\n\n\t\tif (this.settings.autoWidth && this.state.imagesLoaded !== true) {\n\t\t\tvar imgs, nestedSelector, width;\n\t\t\timgs = this.$element.find('img');\n\t\t\tnestedSelector = this.settings.nestedItemSelector ? '.' + this.settings.nestedItemSelector : undefined;\n\t\t\twidth = this.$element.children(nestedSelector).width();\n\n\t\t\tif (imgs.length && width <= 0) {\n\t\t\t\tthis.preloadAutoWidthImages(imgs);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.$element.addClass('owl-loading');\n\n\t\t// create stage\n\t\tthis.$stage = $('<' + this.settings.stageElement + ' class=\"owl-stage\"/>')\n\t\t\t.wrap('<div class=\"owl-stage-outer\">');\n\n\t\t// append stage\n\t\tthis.$element.append(this.$stage.parent());\n\n\t\t// append content\n\t\tthis.replace(this.$element.children().not(this.$stage.parent()));\n\n\t\t// set view width\n\t\tthis._width = this.$element.width();\n\n\t\t// update view\n\t\tthis.refresh();\n\n\t\tthis.$element.removeClass('owl-loading').addClass('owl-loaded');\n\n\t\t// attach generic events\n\t\tthis.eventsCall();\n\n\t\t// attach generic events\n\t\tthis.internalEvents();\n\n\t\t// attach custom control events\n\t\tthis.addTriggerableEvents();\n\n\t\tthis.trigger('initialized');\n\t};\n\n\t/**\n\t * Setups the current settings.\n\t * @todo Remove responsive classes. Why should adaptive designs be brought into IE8?\n\t * @todo Support for media queries by using `matchMedia` would be nice.\n\t * @public\n\t */\n\tOwl.prototype.setup = function() {\n\t\tvar viewport = this.viewport(),\n\t\t\toverwrites = this.options.responsive,\n\t\t\tmatch = -1,\n\t\t\tsettings = null;\n\n\t\tif (!overwrites) {\n\t\t\tsettings = $.extend({}, this.options);\n\t\t} else {\n\t\t\t$.each(overwrites, function(breakpoint) {\n\t\t\t\tif (breakpoint <= viewport && breakpoint > match) {\n\t\t\t\t\tmatch = Number(breakpoint);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsettings = $.extend({}, this.options, overwrites[match]);\n\t\t\tdelete settings.responsive;\n\n\t\t\t// responsive class\n\t\t\tif (settings.responsiveClass) {\n\t\t\t\tthis.$element.attr('class', function(i, c) {\n\t\t\t\t\treturn c.replace(/\\b owl-responsive-\\S+/g, '');\n\t\t\t\t}).addClass('owl-responsive-' + match);\n\t\t\t}\n\t\t}\n\n\t\tif (this.settings === null || this._breakpoint !== match) {\n\t\t\tthis.trigger('change', { property: { name: 'settings', value: settings } });\n\t\t\tthis._breakpoint = match;\n\t\t\tthis.settings = settings;\n\t\t\tthis.invalidate('settings');\n\t\t\tthis.trigger('changed', { property: { name: 'settings', value: this.settings } });\n\t\t}\n\t};\n\n\t/**\n\t * Updates option logic if necessery.\n\t * @protected\n\t */\n\tOwl.prototype.optionsLogic = function() {\n\t\t// Toggle Center class\n\t\tthis.$element.toggleClass('owl-center', this.settings.center);\n\n\t\t// if items number is less than in body\n\t\tif (this.settings.loop && this._items.length < this.settings.items) {\n\t\t\tthis.settings.loop = false;\n\t\t}\n\n\t\tif (this.settings.autoWidth) {\n\t\t\tthis.settings.stagePadding = false;\n\t\t\tthis.settings.merge = false;\n\t\t}\n\t};\n\n\t/**\n\t * Prepares an item before add.\n\t * @todo Rename event parameter `content` to `item`.\n\t * @protected\n\t * @returns {jQuery|HTMLElement} - The item container.\n\t */\n\tOwl.prototype.prepare = function(item) {\n\t\tvar event = this.trigger('prepare', { content: item });\n\n\t\tif (!event.data) {\n\t\t\tevent.data = $('<' + this.settings.itemElement + '/>')\n\t\t\t\t.addClass(this.settings.itemClass).append(item)\n\t\t}\n\n\t\tthis.trigger('prepared', { content: event.data });\n\n\t\treturn event.data;\n\t};\n\n\t/**\n\t * Updates the view.\n\t * @public\n\t */\n\tOwl.prototype.update = function() {\n\t\tvar i = 0,\n\t\t\tn = this._pipe.length,\n\t\t\tfilter = $.proxy(function(p) { return this[p] }, this._invalidated),\n\t\t\tcache = {};\n\n\t\twhile (i < n) {\n\t\t\tif (this._invalidated.all || $.grep(this._pipe[i].filter, filter).length > 0) {\n\t\t\t\tthis._pipe[i].run(cache);\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\n\t\tthis._invalidated = {};\n\t};\n\n\t/**\n\t * Gets the width of the view.\n\t * @public\n\t * @param {Owl.Width} [dimension=Owl.Width.Default] - The dimension to return.\n\t * @returns {Number} - The width of the view in pixel.\n\t */\n\tOwl.prototype.width = function(dimension) {\n\t\tdimension = dimension || Owl.Width.Default;\n\t\tswitch (dimension) {\n\t\t\tcase Owl.Width.Inner:\n\t\t\tcase Owl.Width.Outer:\n\t\t\t\treturn this._width;\n\t\t\tdefault:\n\t\t\t\treturn this._width - this.settings.stagePadding * 2 + this.settings.margin;\n\t\t}\n\t};\n\n\t/**\n\t * Refreshes the carousel primarily for adaptive purposes.\n\t * @public\n\t */\n\tOwl.prototype.refresh = function() {\n\t\tif (this._items.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar start = new Date().getTime();\n\n\t\tthis.trigger('refresh');\n\n\t\tthis.setup();\n\n\t\tthis.optionsLogic();\n\n\t\t// hide and show methods helps here to set a proper widths,\n\t\t// this prevents scrollbar to be calculated in stage width\n\t\tthis.$stage.addClass('owl-refresh');\n\n\t\tthis.update();\n\n\t\tthis.$stage.removeClass('owl-refresh');\n\n\t\tthis.state.orientation = window.orientation;\n\n\t\tthis.watchVisibility();\n\n\t\tthis.trigger('refreshed');\n\t};\n\n\t/**\n\t * Save internal event references and add event based functions.\n\t * @protected\n\t */\n\tOwl.prototype.eventsCall = function() {\n\t\t// Save events references\n\t\tthis.e._onDragStart = $.proxy(function(e) {\n\t\t\tthis.onDragStart(e);\n\t\t}, this);\n\t\tthis.e._onDragMove = $.proxy(function(e) {\n\t\t\tthis.onDragMove(e);\n\t\t}, this);\n\t\tthis.e._onDragEnd = $.proxy(function(e) {\n\t\t\tthis.onDragEnd(e);\n\t\t}, this);\n\t\tthis.e._onResize = $.proxy(function(e) {\n\t\t\tthis.onResize(e);\n\t\t}, this);\n\t\tthis.e._transitionEnd = $.proxy(function(e) {\n\t\t\tthis.transitionEnd(e);\n\t\t}, this);\n\t\tthis.e._preventClick = $.proxy(function(e) {\n\t\t\tthis.preventClick(e);\n\t\t}, this);\n\t};\n\n\t/**\n\t * Checks window `resize` event.\n\t * @protected\n\t */\n\tOwl.prototype.onThrottledResize = function() {\n\t\twindow.clearTimeout(this.resizeTimer);\n\t\tthis.resizeTimer = window.setTimeout(this.e._onResize, this.settings.responsiveRefreshRate);\n\t};\n\n\t/**\n\t * Checks window `resize` event.\n\t * @protected\n\t */\n\tOwl.prototype.onResize = function() {\n\t\tif (!this._items.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this._width === this.$element.width()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.trigger('resize').isDefaultPrevented()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._width = this.$element.width();\n\n\t\tthis.invalidate('width');\n\n\t\tthis.refresh();\n\n\t\tthis.trigger('resized');\n\t};\n\n\t/**\n\t * Checks for touch/mouse drag event type and add run event handlers.\n\t * @protected\n\t */\n\tOwl.prototype.eventsRouter = function(event) {\n\t\tvar type = event.type;\n\n\t\tif (type === \"mousedown\" || type === \"touchstart\") {\n\t\t\tthis.onDragStart(event);\n\t\t} else if (type === \"mousemove\" || type === \"touchmove\") {\n\t\t\tthis.onDragMove(event);\n\t\t} else if (type === \"mouseup\" || type === \"touchend\") {\n\t\t\tthis.onDragEnd(event);\n\t\t} else if (type === \"touchcancel\") {\n\t\t\tthis.onDragEnd(event);\n\t\t}\n\t};\n\n\t/**\n\t * Checks for touch/mouse drag options and add necessery event handlers.\n\t * @protected\n\t */\n\tOwl.prototype.internalEvents = function() {\n\t\tvar isTouch = isTouchSupport(),\n\t\t\tisTouchIE = isTouchSupportIE();\n\n\t\tif (this.settings.mouseDrag){\n\t\t\tthis.$stage.on('mousedown', $.proxy(function(event) { this.eventsRouter(event) }, this));\n\t\t\tthis.$stage.on('dragstart', function() { return false });\n\t\t\tthis.$stage.get(0).onselectstart = function() { return false };\n\t\t} else {\n\t\t\tthis.$element.addClass('owl-text-select-on');\n\t\t}\n\n\t\tif (this.settings.touchDrag && !isTouchIE){\n\t\t\tthis.$stage.on('touchstart touchcancel', $.proxy(function(event) { this.eventsRouter(event) }, this));\n\t\t}\n\n\t\t// catch transitionEnd event\n\t\tif (this.transitionEndVendor) {\n\t\t\tthis.on(this.$stage.get(0), this.transitionEndVendor, this.e._transitionEnd, false);\n\t\t}\n\n\t\t// responsive\n\t\tif (this.settings.responsive !== false) {\n\t\t\tthis.on(window, 'resize', $.proxy(this.onThrottledResize, this));\n\t\t}\n\t};\n\n\t/**\n\t * Handles touchstart/mousedown event.\n\t * @protected\n\t * @param {Event} event - The event arguments.\n\t */\n\tOwl.prototype.onDragStart = function(event) {\n\t\tvar ev, isTouchEvent, pageX, pageY, animatedPos;\n\n\t\tev = event.originalEvent || event || window.event;\n\n\t\t// prevent right click\n\t\tif (ev.which === 3 || this.state.isTouch) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (ev.type === 'mousedown') {\n\t\t\tthis.$stage.addClass('owl-grab');\n\t\t}\n\n\t\tthis.trigger('drag');\n\t\tthis.drag.startTime = new Date().getTime();\n\t\tthis.speed(0);\n\t\tthis.state.isTouch = true;\n\t\tthis.state.isScrolling = false;\n\t\tthis.state.isSwiping = false;\n\t\tthis.drag.distance = 0;\n\n\t\tpageX = getTouches(ev).x;\n\t\tpageY = getTouches(ev).y;\n\n\t\t// get stage position left\n\t\tthis.drag.offsetX = this.$stage.position().left;\n\t\tthis.drag.offsetY = this.$stage.position().top;\n\n\t\tif (this.settings.rtl) {\n\t\t\tthis.drag.offsetX = this.$stage.position().left + this.$stage.width() - this.width()\n\t\t\t\t+ this.settings.margin;\n\t\t}\n\n\t\t// catch position // ie to fix\n\t\tif (this.state.inMotion && this.support3d) {\n\t\t\tanimatedPos = this.getTransformProperty();\n\t\t\tthis.drag.offsetX = animatedPos;\n\t\t\tthis.animate(animatedPos);\n\t\t\tthis.state.inMotion = true;\n\t\t} else if (this.state.inMotion && !this.support3d) {\n\t\t\tthis.state.inMotion = false;\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.drag.startX = pageX - this.drag.offsetX;\n\t\tthis.drag.startY = pageY - this.drag.offsetY;\n\n\t\tthis.drag.start = pageX - this.drag.startX;\n\t\tthis.drag.targetEl = ev.target || ev.srcElement;\n\t\tthis.drag.updatedX = this.drag.start;\n\n\t\t// to do/check\n\t\t// prevent links and images dragging;\n\t\tif (this.drag.targetEl.tagName === \"IMG\" || this.drag.targetEl.tagName === \"A\") {\n\t\t\tthis.drag.targetEl.draggable = false;\n\t\t}\n\n\t\t$(document).on('mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents', $.proxy(function(event) {this.eventsRouter(event)},this));\n\t};\n\n\t/**\n\t * Handles the touchmove/mousemove events.\n\t * @todo Simplify\n\t * @protected\n\t * @param {Event} event - The event arguments.\n\t */\n\tOwl.prototype.onDragMove = function(event) {\n\t\tvar ev, isTouchEvent, pageX, pageY, minValue, maxValue, pull;\n\n\t\tif (!this.state.isTouch) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.state.isScrolling) {\n\t\t\treturn;\n\t\t}\n\n\t\tev = event.originalEvent || event || window.event;\n\n\t\tpageX = getTouches(ev).x;\n\t\tpageY = getTouches(ev).y;\n\n\t\t// Drag Direction\n\t\tthis.drag.currentX = pageX - this.drag.startX;\n\t\tthis.drag.currentY = pageY - this.drag.startY;\n\t\tthis.drag.distance = this.drag.currentX - this.drag.offsetX;\n\n\t\t// Check move direction\n\t\tif (this.drag.distance < 0) {\n\t\t\tthis.state.direction = this.settings.rtl ? 'right' : 'left';\n\t\t} else if (this.drag.distance > 0) {\n\t\t\tthis.state.direction = this.settings.rtl ? 'left' : 'right';\n\t\t}\n\t\t// Loop\n\t\tif (this.settings.loop) {\n\t\t\tif (this.op(this.drag.currentX, '>', this.coordinates(this.minimum())) && this.state.direction === 'right') {\n\t\t\t\tthis.drag.currentX -= (this.settings.center && this.coordinates(0)) - this.coordinates(this._items.length);\n\t\t\t} else if (this.op(this.drag.currentX, '<', this.coordinates(this.maximum())) && this.state.direction === 'left') {\n\t\t\t\tthis.drag.currentX += (this.settings.center && this.coordinates(0)) - this.coordinates(this._items.length);\n\t\t\t}\n\t\t} else {\n\t\t\t// pull\n\t\t\tminValue = this.settings.rtl ? this.coordinates(this.maximum()) : this.coordinates(this.minimum());\n\t\t\tmaxValue = this.settings.rtl ? this.coordinates(this.minimum()) : this.coordinates(this.maximum());\n\t\t\tpull = this.settings.pullDrag ? this.drag.distance / 5 : 0;\n\t\t\tthis.drag.currentX = Math.max(Math.min(this.drag.currentX, minValue + pull), maxValue + pull);\n\t\t}\n\n\t\t// Lock browser if swiping horizontal\n\n\t\tif ((this.drag.distance > 8 || this.drag.distance < -8)) {\n\t\t\tif (ev.preventDefault !== undefined) {\n\t\t\t\tev.preventDefault();\n\t\t\t} else {\n\t\t\t\tev.returnValue = false;\n\t\t\t}\n\t\t\tthis.state.isSwiping = true;\n\t\t}\n\n\t\tthis.drag.updatedX = this.drag.currentX;\n\n\t\t// Lock Owl if scrolling\n\t\tif ((this.drag.currentY > 16 || this.drag.currentY < -16) && this.state.isSwiping === false) {\n\t\t\tthis.state.isScrolling = true;\n\t\t\tthis.drag.updatedX = this.drag.start;\n\t\t}\n\n\t\tthis.animate(this.drag.updatedX);\n\t};\n\n\t/**\n\t * Handles the touchend/mouseup events.\n\t * @protected\n\t */\n\tOwl.prototype.onDragEnd = function(event) {\n\t\tvar compareTimes, distanceAbs, closest;\n\n\t\tif (!this.state.isTouch) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.type === 'mouseup') {\n\t\t\tthis.$stage.removeClass('owl-grab');\n\t\t}\n\n\t\tthis.trigger('dragged');\n\n\t\t// prevent links and images dragging;\n\t\tthis.drag.targetEl.removeAttribute(\"draggable\");\n\n\t\t// remove drag event listeners\n\n\t\tthis.state.isTouch = false;\n\t\tthis.state.isScrolling = false;\n\t\tthis.state.isSwiping = false;\n\n\t\t// to check\n\t\tif (this.drag.distance === 0 && this.state.inMotion !== true) {\n\t\t\tthis.state.inMotion = false;\n\t\t\treturn false;\n\t\t}\n\n\t\t// prevent clicks while scrolling\n\n\t\tthis.drag.endTime = new Date().getTime();\n\t\tcompareTimes = this.drag.endTime - this.drag.startTime;\n\t\tdistanceAbs = Math.abs(this.drag.distance);\n\n\t\t// to test\n\t\tif (distanceAbs > 3 || compareTimes > 300) {\n\t\t\tthis.removeClick(this.drag.targetEl);\n\t\t}\n\n\t\tclosest = this.closest(this.drag.updatedX);\n\n\t\tthis.speed(this.settings.dragEndSpeed || this.settings.smartSpeed);\n\t\tthis.current(closest);\n\t\tthis.invalidate('position');\n\t\tthis.update();\n\n\t\t// if pullDrag is off then fire transitionEnd event manually when stick\n\t\t// to border\n\t\tif (!this.settings.pullDrag && this.drag.updatedX === this.coordinates(closest)) {\n\t\t\tthis.transitionEnd();\n\t\t}\n\n\t\tthis.drag.distance = 0;\n\n\t\t$(document).off('.owl.dragEvents');\n\t};\n\n\t/**\n\t * Attaches `preventClick` to disable link while swipping.\n\t * @protected\n\t * @param {HTMLElement} [target] - The target of the `click` event.\n\t */\n\tOwl.prototype.removeClick = function(target) {\n\t\tthis.drag.targetEl = target;\n\t\t$(target).on('click.preventClick', this.e._preventClick);\n\t\t// to make sure click is removed:\n\t\twindow.setTimeout(function() {\n\t\t\t$(target).off('click.preventClick');\n\t\t}, 300);\n\t};\n\n\t/**\n\t * Suppresses click event.\n\t * @protected\n\t * @param {Event} ev - The event arguments.\n\t */\n\tOwl.prototype.preventClick = function(ev) {\n\t\tif (ev.preventDefault) {\n\t\t\tev.preventDefault();\n\t\t} else {\n\t\t\tev.returnValue = false;\n\t\t}\n\t\tif (ev.stopPropagation) {\n\t\t\tev.stopPropagation();\n\t\t}\n\t\t$(ev.target).off('click.preventClick');\n\t};\n\n\t/**\n\t * Catches stage position while animate (only CSS3).\n\t * @protected\n\t * @returns\n\t */\n\tOwl.prototype.getTransformProperty = function() {\n\t\tvar transform, matrix3d;\n\n\t\ttransform = window.getComputedStyle(this.$stage.get(0), null).getPropertyValue(this.vendorName + 'transform');\n\t\t// var transform = this.$stage.css(this.vendorName + 'transform')\n\t\ttransform = transform.replace(/matrix(3d)?\\(|\\)/g, '').split(',');\n\t\tmatrix3d = transform.length === 16;\n\n\t\treturn matrix3d !== true ? transform[4] : transform[12];\n\t};\n\n\t/**\n\t * Gets absolute position of the closest item for a coordinate.\n\t * @todo Setting `freeDrag` makes `closest` not reusable. See #165.\n\t * @protected\n\t * @param {Number} coordinate - The coordinate in pixel.\n\t * @return {Number} - The absolute position of the closest item.\n\t */\n\tOwl.prototype.closest = function(coordinate) {\n\t\tvar position = -1, pull = 30, width = this.width(), coordinates = this.coordinates();\n\n\t\tif (!this.settings.freeDrag) {\n\t\t\t// check closest item\n\t\t\t$.each(coordinates, $.proxy(function(index, value) {\n\t\t\t\tif (coordinate > value - pull && coordinate < value + pull) {\n\t\t\t\t\tposition = index;\n\t\t\t\t} else if (this.op(coordinate, '<', value)\n\t\t\t\t\t&& this.op(coordinate, '>', coordinates[index + 1] || value - width)) {\n\t\t\t\t\tposition = this.state.direction === 'left' ? index + 1 : index;\n\t\t\t\t}\n\t\t\t\treturn position === -1;\n\t\t\t}, this));\n\t\t}\n\n\t\tif (!this.settings.loop) {\n\t\t\t// non loop boundries\n\t\t\tif (this.op(coordinate, '>', coordinates[this.minimum()])) {\n\t\t\t\tposition = coordinate = this.minimum();\n\t\t\t} else if (this.op(coordinate, '<', coordinates[this.maximum()])) {\n\t\t\t\tposition = coordinate = this.maximum();\n\t\t\t}\n\t\t}\n\n\t\treturn position;\n\t};\n\n\t/**\n\t * Animates the stage.\n\t * @public\n\t * @param {Number} coordinate - The coordinate in pixels.\n\t */\n\tOwl.prototype.animate = function(coordinate) {\n\t\tthis.trigger('translate');\n\t\tthis.state.inMotion = this.speed() > 0;\n\n\t\tif (this.support3d) {\n\t\t\tthis.$stage.css({\n\t\t\t\ttransform: 'translate3d(' + coordinate + 'px' + ',0px, 0px)',\n\t\t\t\ttransition: (this.speed() / 1000) + 's'\n\t\t\t});\n\t\t} else if (this.state.isTouch) {\n\t\t\tthis.$stage.css({\n\t\t\t\tleft: coordinate + 'px'\n\t\t\t});\n\t\t} else {\n\t\t\tthis.$stage.animate({\n\t\t\t\tleft: coordinate\n\t\t\t}, this.speed() / 1000, this.settings.fallbackEasing, $.proxy(function() {\n\t\t\t\tif (this.state.inMotion) {\n\t\t\t\t\tthis.transitionEnd();\n\t\t\t\t}\n\t\t\t}, this));\n\t\t}\n\t};\n\n\t/**\n\t * Sets the absolute position of the current item.\n\t * @public\n\t * @param {Number} [position] - The new absolute position or nothing to leave it unchanged.\n\t * @returns {Number} - The absolute position of the current item.\n\t */\n\tOwl.prototype.current = function(position) {\n\t\tif (position === undefined) {\n\t\t\treturn this._current;\n\t\t}\n\n\t\tif (this._items.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tposition = this.normalize(position);\n\n\t\tif (this._current !== position) {\n\t\t\tvar event = this.trigger('change', { property: { name: 'position', value: position } });\n\n\t\t\tif (event.data !== undefined) {\n\t\t\t\tposition = this.normalize(event.data);\n\t\t\t}\n\n\t\t\tthis._current = position;\n\n\t\t\tthis.invalidate('position');\n\n\t\t\tthis.trigger('changed', { property: { name: 'position', value: this._current } });\n\t\t}\n\n\t\treturn this._current;\n\t};\n\n\t/**\n\t * Invalidates the given part of the update routine.\n\t * @param {String} part - The part to invalidate.\n\t */\n\tOwl.prototype.invalidate = function(part) {\n\t\tthis._invalidated[part] = true;\n\t}\n\n\t/**\n\t * Resets the absolute position of the current item.\n\t * @public\n\t * @param {Number} position - The absolute position of the new item.\n\t */\n\tOwl.prototype.reset = function(position) {\n\t\tposition = this.normalize(position);\n\n\t\tif (position === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._speed = 0;\n\t\tthis._current = position;\n\n\t\tthis.suppress([ 'translate', 'translated' ]);\n\n\t\tthis.animate(this.coordinates(position));\n\n\t\tthis.release([ 'translate', 'translated' ]);\n\t};\n\n\t/**\n\t * Normalizes an absolute or a relative position for an item.\n\t * @public\n\t * @param {Number} position - The absolute or relative position to normalize.\n\t * @param {Boolean} [relative=false] - Whether the given position is relative or not.\n\t * @returns {Number} - The normalized position.\n\t */\n\tOwl.prototype.normalize = function(position, relative) {\n\t\tvar n = (relative ? this._items.length : this._items.length + this._clones.length);\n\n\t\tif (!$.isNumeric(position) || n < 1) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (this._clones.length) {\n\t\t\tposition = ((position % n) + n) % n;\n\t\t} else {\n\t\t\tposition = Math.max(this.minimum(relative), Math.min(this.maximum(relative), position));\n\t\t}\n\n\t\treturn position;\n\t};\n\n\t/**\n\t * Converts an absolute position for an item into a relative position.\n\t * @public\n\t * @param {Number} position - The absolute position to convert.\n\t * @returns {Number} - The converted position.\n\t */\n\tOwl.prototype.relative = function(position) {\n\t\tposition = this.normalize(position);\n\t\tposition = position - this._clones.length / 2;\n\t\treturn this.normalize(position, true);\n\t};\n\n\t/**\n\t * Gets the maximum position for an item.\n\t * @public\n\t * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.\n\t * @returns {Number}\n\t */\n\tOwl.prototype.maximum = function(relative) {\n\t\tvar maximum, width, i = 0, coordinate,\n\t\t\tsettings = this.settings;\n\n\t\tif (relative) {\n\t\t\treturn this._items.length - 1;\n\t\t}\n\n\t\tif (!settings.loop && settings.center) {\n\t\t\tmaximum = this._items.length - 1;\n\t\t} else if (!settings.loop && !settings.center) {\n\t\t\tmaximum = this._items.length - settings.items;\n\t\t} else if (settings.loop || settings.center) {\n\t\t\tmaximum = this._items.length + settings.items;\n\t\t} else if (settings.autoWidth || settings.merge) {\n\t\t\trevert = settings.rtl ? 1 : -1;\n\t\t\twidth = this.$stage.width() - this.$element.width();\n\t\t\twhile (coordinate = this.coordinates(i)) {\n\t\t\t\tif (coordinate * revert >= width) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tmaximum = ++i;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow 'Can not detect maximum absolute position.'\n\t\t}\n\n\t\treturn maximum;\n\t};\n\n\t/**\n\t * Gets the minimum position for an item.\n\t * @public\n\t * @param {Boolean} [relative=false] - Whether to return an absolute position or a relative position.\n\t * @returns {Number}\n\t */\n\tOwl.prototype.minimum = function(relative) {\n\t\tif (relative) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this._clones.length / 2;\n\t};\n\n\t/**\n\t * Gets an item at the specified relative position.\n\t * @public\n\t * @param {Number} [position] - The relative position of the item.\n\t * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.\n\t */\n\tOwl.prototype.items = function(position) {\n\t\tif (position === undefined) {\n\t\t\treturn this._items.slice();\n\t\t}\n\n\t\tposition = this.normalize(position, true);\n\t\treturn this._items[position];\n\t};\n\n\t/**\n\t * Gets an item at the specified relative position.\n\t * @public\n\t * @param {Number} [position] - The relative position of the item.\n\t * @return {jQuery|Array.<jQuery>} - The item at the given position or all items if no position was given.\n\t */\n\tOwl.prototype.mergers = function(position) {\n\t\tif (position === undefined) {\n\t\t\treturn this._mergers.slice();\n\t\t}\n\n\t\tposition = this.normalize(position, true);\n\t\treturn this._mergers[position];\n\t};\n\n\t/**\n\t * Gets the absolute positions of clones for an item.\n\t * @public\n\t * @param {Number} [position] - The relative position of the item.\n\t * @returns {Array.<Number>} - The absolute positions of clones for the item or all if no position was given.\n\t */\n\tOwl.prototype.clones = function(position) {\n\t\tvar odd = this._clones.length / 2,\n\t\t\teven = odd + this._items.length,\n\t\t\tmap = function(index) { return index % 2 === 0 ? even + index / 2 : odd - (index + 1) / 2 };\n\n\t\tif (position === undefined) {\n\t\t\treturn $.map(this._clones, function(v, i) { return map(i) });\n\t\t}\n\n\t\treturn $.map(this._clones, function(v, i) { return v === position ? map(i) : null });\n\t};\n\n\t/**\n\t * Sets the current animation speed.\n\t * @public\n\t * @param {Number} [speed] - The animation speed in milliseconds or nothing to leave it unchanged.\n\t * @returns {Number} - The current animation speed in milliseconds.\n\t */\n\tOwl.prototype.speed = function(speed) {\n\t\tif (speed !== undefined) {\n\t\t\tthis._speed = speed;\n\t\t}\n\n\t\treturn this._speed;\n\t};\n\n\t/**\n\t * Gets the coordinate of an item.\n\t * @todo The name of this method is missleanding.\n\t * @public\n\t * @param {Number} position - The absolute position of the item within `minimum()` and `maximum()`.\n\t * @returns {Number|Array.<Number>} - The coordinate of the item in pixel or all coordinates.\n\t */\n\tOwl.prototype.coordinates = function(position) {\n\t\tvar coordinate = null;\n\n\t\tif (position === undefined) {\n\t\t\treturn $.map(this._coordinates, $.proxy(function(coordinate, index) {\n\t\t\t\treturn this.coordinates(index);\n\t\t\t}, this));\n\t\t}\n\n\t\tif (this.settings.center) {\n\t\t\tcoordinate = this._coordinates[position];\n\t\t\tcoordinate += (this.width() - coordinate + (this._coordinates[position - 1] || 0)) / 2 * (this.settings.rtl ? -1 : 1);\n\t\t} else {\n\t\t\tcoordinate = this._coordinates[position - 1] || 0;\n\t\t}\n\n\t\treturn coordinate;\n\t};\n\n\t/**\n\t * Calculates the speed for a translation.\n\t * @protected\n\t * @param {Number} from - The absolute position of the start item.\n\t * @param {Number} to - The absolute position of the target item.\n\t * @param {Number} [factor=undefined] - The time factor in milliseconds.\n\t * @returns {Number} - The time in milliseconds for the translation.\n\t */\n\tOwl.prototype.duration = function(from, to, factor) {\n\t\treturn Math.min(Math.max(Math.abs(to - from), 1), 6) * Math.abs((factor || this.settings.smartSpeed));\n\t};\n\n\t/**\n\t * Slides to the specified item.\n\t * @public\n\t * @param {Number} position - The position of the item.\n\t * @param {Number} [speed] - The time in milliseconds for the transition.\n\t */\n\tOwl.prototype.to = function(position, speed) {\n\t\tif (this.settings.loop) {\n\t\t\tvar distance = position - this.relative(this.current()),\n\t\t\t\trevert = this.current(),\n\t\t\t\tbefore = this.current(),\n\t\t\t\tafter = this.current() + distance,\n\t\t\t\tdirection = before - after < 0 ? true : false,\n\t\t\t\titems = this._clones.length + this._items.length;\n\n\t\t\tif (after < this.settings.items && direction === false) {\n\t\t\t\trevert = before + this._items.length;\n\t\t\t\tthis.reset(revert);\n\t\t\t} else if (after >= items - this.settings.items && direction === true) {\n\t\t\t\trevert = before - this._items.length;\n\t\t\t\tthis.reset(revert);\n\t\t\t}\n\t\t\twindow.clearTimeout(this.e._goToLoop);\n\t\t\tthis.e._goToLoop = window.setTimeout($.proxy(function() {\n\t\t\t\tthis.speed(this.duration(this.current(), revert + distance, speed));\n\t\t\t\tthis.current(revert + distance);\n\t\t\t\tthis.update();\n\t\t\t}, this), 30);\n\t\t} else {\n\t\t\tthis.speed(this.duration(this.current(), position, speed));\n\t\t\tthis.current(position);\n\t\t\tthis.update();\n\t\t}\n\t};\n\n\t/**\n\t * Slides to the next item.\n\t * @public\n\t * @param {Number} [speed] - The time in milliseconds for the transition.\n\t */\n\tOwl.prototype.next = function(speed) {\n\t\tspeed = speed || false;\n\t\tthis.to(this.relative(this.current()) + 1, speed);\n\t};\n\n\t/**\n\t * Slides to the previous item.\n\t * @public\n\t * @param {Number} [speed] - The time in milliseconds for the transition.\n\t */\n\tOwl.prototype.prev = function(speed) {\n\t\tspeed = speed || false;\n\t\tthis.to(this.relative(this.current()) - 1, speed);\n\t};\n\n\t/**\n\t * Handles the end of an animation.\n\t * @protected\n\t * @param {Event} event - The event arguments.\n\t */\n\tOwl.prototype.transitionEnd = function(event) {\n\n\t\t// if css2 animation then event object is undefined\n\t\tif (event !== undefined) {\n\t\t\tevent.stopPropagation();\n\n\t\t\t// Catch only owl-stage transitionEnd event\n\t\t\tif ((event.target || event.srcElement || event.originalTarget) !== this.$stage.get(0)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.state.inMotion = false;\n\t\tthis.trigger('translated');\n\t};\n\n\t/**\n\t * Gets viewport width.\n\t * @protected\n\t * @return {Number} - The width in pixel.\n\t */\n\tOwl.prototype.viewport = function() {\n\t\tvar width;\n\t\tif (this.options.responsiveBaseElement !== window) {\n\t\t\twidth = $(this.options.responsiveBaseElement).width();\n\t\t} else if (window.innerWidth) {\n\t\t\twidth = window.innerWidth;\n\t\t} else if (document.documentElement && document.documentElement.clientWidth) {\n\t\t\twidth = document.documentElement.clientWidth;\n\t\t} else {\n\t\t\tthrow 'Can not detect viewport width.';\n\t\t}\n\t\treturn width;\n\t};\n\n\t/**\n\t * Replaces the current content.\n\t * @public\n\t * @param {HTMLElement|jQuery|String} content - The new content.\n\t */\n\tOwl.prototype.replace = function(content) {\n\t\tthis.$stage.empty();\n\t\tthis._items = [];\n\n\t\tif (content) {\n\t\t\tcontent = (content instanceof jQuery) ? content : $(content);\n\t\t}\n\n\t\tif (this.settings.nestedItemSelector) {\n\t\t\tcontent = content.find('.' + this.settings.nestedItemSelector);\n\t\t}\n\n\t\tcontent.filter(function() {\n\t\t\treturn this.nodeType === 1;\n\t\t}).each($.proxy(function(index, item) {\n\t\t\titem = this.prepare(item);\n\t\t\tthis.$stage.append(item);\n\t\t\tthis._items.push(item);\n\t\t\tthis._mergers.push(item.find('[data-merge]').andSelf('[data-merge]').attr('data-merge') * 1 || 1);\n\t\t}, this));\n\n\t\tthis.reset($.isNumeric(this.settings.startPosition) ? this.settings.startPosition : 0);\n\n\t\tthis.invalidate('items');\n\t};\n\n\t/**\n\t * Adds an item.\n\t * @todo Use `item` instead of `content` for the event arguments.\n\t * @public\n\t * @param {HTMLElement|jQuery|String} content - The item content to add.\n\t * @param {Number} [position] - The relative position at which to insert the item otherwise the item will be added to the end.\n\t */\n\tOwl.prototype.add = function(content, position) {\n\t\tposition = position === undefined ? this._items.length : this.normalize(position, true);\n\n\t\tthis.trigger('add', { content: content, position: position });\n\n\t\tif (this._items.length === 0 || position === this._items.length) {\n\t\t\tthis.$stage.append(content);\n\t\t\tthis._items.push(content);\n\t\t\tthis._mergers.push(content.find('[data-merge]').andSelf('[data-merge]').attr('data-merge') * 1 || 1);\n\t\t} else {\n\t\t\tthis._items[position].before(content);\n\t\t\tthis._items.splice(position, 0, content);\n\t\t\tthis._mergers.splice(position, 0, content.find('[data-merge]').andSelf('[data-merge]').attr('data-merge') * 1 || 1);\n\t\t}\n\n\t\tthis.invalidate('items');\n\n\t\tthis.trigger('added', { content: content, position: position });\n\t};\n\n\t/**\n\t * Removes an item by its position.\n\t * @todo Use `item` instead of `content` for the event arguments.\n\t * @public\n\t * @param {Number} position - The relative position of the item to remove.\n\t */\n\tOwl.prototype.remove = function(position) {\n\t\tposition = this.normalize(position, true);\n\n\t\tif (position === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.trigger('remove', { content: this._items[position], position: position });\n\n\t\tthis._items[position].remove();\n\t\tthis._items.splice(position, 1);\n\t\tthis._mergers.splice(position, 1);\n\n\t\tthis.invalidate('items');\n\n\t\tthis.trigger('removed', { content: null, position: position });\n\t};\n\n\t/**\n\t * Adds triggerable events.\n\t * @protected\n\t */\n\tOwl.prototype.addTriggerableEvents = function() {\n\t\tvar handler = $.proxy(function(callback, event) {\n\t\t\treturn $.proxy(function(e) {\n\t\t\t\tif (e.relatedTarget !== this) {\n\t\t\t\t\tthis.suppress([ event ]);\n\t\t\t\t\tcallback.apply(this, [].slice.call(arguments, 1));\n\t\t\t\t\tthis.release([ event ]);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}, this);\n\n\t\t$.each({\n\t\t\t'next': this.next,\n\t\t\t'prev': this.prev,\n\t\t\t'to': this.to,\n\t\t\t'destroy': this.destroy,\n\t\t\t'refresh': this.refresh,\n\t\t\t'replace': this.replace,\n\t\t\t'add': this.add,\n\t\t\t'remove': this.remove\n\t\t}, $.proxy(function(event, callback) {\n\t\t\tthis.$element.on(event + '.owl.carousel', handler(callback, event + '.owl.carousel'));\n\t\t}, this));\n\n\t};\n\n\t/**\n\t * Watches the visibility of the carousel element.\n\t * @protected\n\t */\n\tOwl.prototype.watchVisibility = function() {\n\n\t\t// test on zepto\n\t\tif (!isElVisible(this.$element.get(0))) {\n\t\t\tthis.$element.addClass('owl-hidden');\n\t\t\twindow.clearInterval(this.e._checkVisibile);\n\t\t\tthis.e._checkVisibile = window.setInterval($.proxy(checkVisible, this), 500);\n\t\t}\n\n\t\tfunction isElVisible(el) {\n\t\t\treturn el.offsetWidth > 0 && el.offsetHeight > 0;\n\t\t}\n\n\t\tfunction checkVisible() {\n\t\t\tif (isElVisible(this.$element.get(0))) {\n\t\t\t\tthis.$element.removeClass('owl-hidden');\n\t\t\t\tthis.refresh();\n\t\t\t\twindow.clearInterval(this.e._checkVisibile);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Preloads images with auto width.\n\t * @protected\n\t * @todo Still to test\n\t */\n\tOwl.prototype.preloadAutoWidthImages = function(imgs) {\n\t\tvar loaded, that, $el, img;\n\n\t\tloaded = 0;\n\t\tthat = this;\n\t\timgs.each(function(i, el) {\n\t\t\t$el = $(el);\n\t\t\timg = new Image();\n\n\t\t\timg.onload = function() {\n\t\t\t\tloaded++;\n\t\t\t\t$el.attr('src', img.src);\n\t\t\t\t$el.css('opacity', 1);\n\t\t\t\tif (loaded >= imgs.length) {\n\t\t\t\t\tthat.state.imagesLoaded = true;\n\t\t\t\t\tthat.initialize();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\timg.src = $el.attr('src') || $el.attr('data-src') || $el.attr('data-src-retina');\n\t\t});\n\t};\n\n\t/**\n\t * Destroys the carousel.\n\t * @public\n\t */\n\tOwl.prototype.destroy = function() {\n\n\t\tif (this.$element.hasClass(this.settings.themeClass)) {\n\t\t\tthis.$element.removeClass(this.settings.themeClass);\n\t\t}\n\n\t\tif (this.settings.responsive !== false) {\n\t\t\t$(window).off('resize.owl.carousel');\n\t\t}\n\n\t\tif (this.transitionEndVendor) {\n\t\t\tthis.off(this.$stage.get(0), this.transitionEndVendor, this.e._transitionEnd);\n\t\t}\n\n\t\tfor ( var i in this._plugins) {\n\t\t\tthis._plugins[i].destroy();\n\t\t}\n\n\t\tif (this.settings.mouseDrag || this.settings.touchDrag) {\n\t\t\tthis.$stage.off('mousedown touchstart touchcancel');\n\t\t\t$(document).off('.owl.dragEvents');\n\t\t\tthis.$stage.get(0).onselectstart = function() {};\n\t\t\tthis.$stage.off('dragstart', function() { return false });\n\t\t}\n\n\t\t// remove event handlers in the \".owl.carousel\" namespace\n\t\tthis.$element.off('.owl');\n\n\t\tthis.$stage.children('.cloned').remove();\n\t\tthis.e = null;\n\t\tthis.$element.removeData('owlCarousel');\n\n\t\tthis.$stage.children().contents().unwrap();\n\t\tthis.$stage.children().unwrap();\n\t\tthis.$stage.unwrap();\n\t};\n\n\t/**\n\t * Operators to calculate right-to-left and left-to-right.\n\t * @protected\n\t * @param {Number} [a] - The left side operand.\n\t * @param {String} [o] - The operator.\n\t * @param {Number} [b] - The right side operand.\n\t */\n\tOwl.prototype.op = function(a, o, b) {\n\t\tvar rtl = this.settings.rtl;\n\t\tswitch (o) {\n\t\t\tcase '<':\n\t\t\t\treturn rtl ? a > b : a < b;\n\t\t\tcase '>':\n\t\t\t\treturn rtl ? a < b : a > b;\n\t\t\tcase '>=':\n\t\t\t\treturn rtl ? a <= b : a >= b;\n\t\t\tcase '<=':\n\t\t\t\treturn rtl ? a >= b : a <= b;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * Attaches to an internal event.\n\t * @protected\n\t * @param {HTMLElement} element - The event source.\n\t * @param {String} event - The event name.\n\t * @param {Function} listener - The event handler to attach.\n\t * @param {Boolean} capture - Wether the event should be handled at the capturing phase or not.\n\t */\n\tOwl.prototype.on = function(element, event, listener, capture) {\n\t\tif (element.addEventListener) {\n\t\t\telement.addEventListener(event, listener, capture);\n\t\t} else if (element.attachEvent) {\n\t\t\telement.attachEvent('on' + event, listener);\n\t\t}\n\t};\n\n\t/**\n\t * Detaches from an internal event.\n\t * @protected\n\t * @param {HTMLElement} element - The event source.\n\t * @param {String} event - The event name.\n\t * @param {Function} listener - The attached event handler to detach.\n\t * @param {Boolean} capture - Wether the attached event handler was registered as a capturing listener or not.\n\t */\n\tOwl.prototype.off = function(element, event, listener, capture) {\n\t\tif (element.removeEventListener) {\n\t\t\telement.removeEventListener(event, listener, capture);\n\t\t} else if (element.detachEvent) {\n\t\t\telement.detachEvent('on' + event, listener);\n\t\t}\n\t};\n\n\t/**\n\t * Triggers an public event.\n\t * @protected\n\t * @param {String} name - The event name.\n\t * @param {*} [data=null] - The event data.\n\t * @param {String} [namespace=.owl.carousel] - The event namespace.\n\t * @returns {Event} - The event arguments.\n\t */\n\tOwl.prototype.trigger = function(name, data, namespace) {\n\t\tvar status = {\n\t\t\titem: { count: this._items.length, index: this.current() }\n\t\t}, handler = $.camelCase(\n\t\t\t$.grep([ 'on', name, namespace ], function(v) { return v })\n\t\t\t\t.join('-').toLowerCase()\n\t\t), event = $.Event(\n\t\t\t[ name, 'owl', namespace || 'carousel' ].join('.').toLowerCase(),\n\t\t\t$.extend({ relatedTarget: this }, status, data)\n\t\t);\n\n\t\tif (!this._supress[name]) {\n\t\t\t$.each(this._plugins, function(name, plugin) {\n\t\t\t\tif (plugin.onTrigger) {\n\t\t\t\t\tplugin.onTrigger(event);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.$element.trigger(event);\n\n\t\t\tif (this.settings && typeof this.settings[handler] === 'function') {\n\t\t\t\tthis.settings[handler].apply(this, event);\n\t\t\t}\n\t\t}\n\n\t\treturn event;\n\t};\n\n\t/**\n\t * Suppresses events.\n\t * @protected\n\t * @param {Array.<String>} events - The events to suppress.\n\t */\n\tOwl.prototype.suppress = function(events) {\n\t\t$.each(events, $.proxy(function(index, event) {\n\t\t\tthis._supress[event] = true;\n\t\t}, this));\n\t}\n\n\t/**\n\t * Releases suppressed events.\n\t * @protected\n\t * @param {Array.<String>} events - The events to release.\n\t */\n\tOwl.prototype.release = function(events) {\n\t\t$.each(events, $.proxy(function(index, event) {\n\t\t\tdelete this._supress[event];\n\t\t}, this));\n\t}\n\n\t/**\n\t * Checks the availability of some browser features.\n\t * @protected\n\t */\n\tOwl.prototype.browserSupport = function() {\n\t\tthis.support3d = isPerspective();\n\n\t\tif (this.support3d) {\n\t\t\tthis.transformVendor = isTransform();\n\n\t\t\t// take transitionend event name by detecting transition\n\t\t\tvar endVendors = [ 'transitionend', 'webkitTransitionEnd', 'transitionend', 'oTransitionEnd' ];\n\t\t\tthis.transitionEndVendor = endVendors[isTransition()];\n\n\t\t\t// take vendor name from transform name\n\t\t\tthis.vendorName = this.transformVendor.replace(/Transform/i, '');\n\t\t\tthis.vendorName = this.vendorName !== '' ? '-' + this.vendorName.toLowerCase() + '-' : '';\n\t\t}\n\n\t\tthis.state.orientation = window.orientation;\n\t};\n\n\t/**\n\t * Get touch/drag coordinats.\n\t * @private\n\t * @param {event} - mousedown/touchstart event\n\t * @returns {object} - Contains X and Y of current mouse/touch position\n\t */\n\n\tfunction getTouches(event) {\n\t\tif (event.touches !== undefined) {\n\t\t\treturn {\n\t\t\t\tx: event.touches[0].pageX,\n\t\t\t\ty: event.touches[0].pageY\n\t\t\t};\n\t\t}\n\n\t\tif (event.touches === undefined) {\n\t\t\tif (event.pageX !== undefined) {\n\t\t\t\treturn {\n\t\t\t\t\tx: event.pageX,\n\t\t\t\t\ty: event.pageY\n\t\t\t\t};\n\t\t\t}\n\n\t\tif (event.pageX === undefined) {\n\t\t\treturn {\n\t\t\t\t\tx: event.clientX,\n\t\t\t\t\ty: event.clientY\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks for CSS support.\n\t * @private\n\t * @param {Array} array - The CSS properties to check for.\n\t * @returns {Array} - Contains the supported CSS property name and its index or `false`.\n\t */\n\tfunction isStyleSupported(array) {\n\t\tvar p, s, fake = document.createElement('div'), list = array;\n\t\tfor (p in list) {\n\t\t\ts = list[p];\n\t\t\tif (typeof fake.style[s] !== 'undefined') {\n\t\t\t\tfake = null;\n\t\t\t\treturn [ s, p ];\n\t\t\t}\n\t\t}\n\t\treturn [ false ];\n\t}\n\n\t/**\n\t * Checks for CSS transition support.\n\t * @private\n\t * @todo Realy bad design\n\t * @returns {Number}\n\t */\n\tfunction isTransition() {\n\t\treturn isStyleSupported([ 'transition', 'WebkitTransition', 'MozTransition', 'OTransition' ])[1];\n\t}\n\n\t/**\n\t * Checks for CSS transform support.\n\t * @private\n\t * @returns {String} The supported property name or false.\n\t */\n\tfunction isTransform() {\n\t\treturn isStyleSupported([ 'transform', 'WebkitTransform', 'MozTransform', 'OTransform', 'msTransform' ])[0];\n\t}\n\n\t/**\n\t * Checks for CSS perspective support.\n\t * @private\n\t * @returns {String} The supported property name or false.\n\t */\n\tfunction isPerspective() {\n\t\treturn isStyleSupported([ 'perspective', 'webkitPerspective', 'MozPerspective', 'OPerspective', 'MsPerspective' ])[0];\n\t}\n\n\t/**\n\t * Checks wether touch is supported or not.\n\t * @private\n\t * @returns {Boolean}\n\t */\n\tfunction isTouchSupport() {\n\t\treturn 'ontouchstart' in window || !!(navigator.msMaxTouchPoints);\n\t}\n\n\t/**\n\t * Checks wether touch is supported or not for IE.\n\t * @private\n\t * @returns {Boolean}\n\t */\n\tfunction isTouchSupportIE() {\n\t\treturn window.navigator.msPointerEnabled;\n\t}\n\n\t/**\n\t * The jQuery Plugin for the Owl Carousel\n\t * @public\n\t */\n\t$.fn.owlCarousel = function(options) {\n\t\treturn this.each(function() {\n\t\t\tif (!$(this).data('owlCarousel')) {\n\t\t\t\t$(this).data('owlCarousel', new Owl(this, options));\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * The constructor for the jQuery Plugin\n\t * @public\n\t */\n\t$.fn.owlCarousel.Constructor = Owl;\n\n})(window.Zepto || window.jQuery, window, document);\n\n/**\n * Lazy Plugin\n * @version 2.0.0\n * @author Bartosz Wojciechowski\n * @license The MIT License (MIT)\n */\n;(function($, window, document, undefined) {\n\n\t/**\n\t * Creates the lazy plugin.\n\t * @class The Lazy Plugin\n\t * @param {Owl} carousel - The Owl Carousel\n\t */\n\tvar Lazy = function(carousel) {\n\n\t\t/**\n\t\t * Reference to the core.\n\t\t * @protected\n\t\t * @type {Owl}\n\t\t */\n\t\tthis._core = carousel;\n\n\t\t/**\n\t\t * Already loaded items.\n\t\t * @protected\n\t\t * @type {Array.<jQuery>}\n\t\t */\n\t\tthis._loaded = [];\n\n\t\t/**\n\t\t * Event handlers.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._handlers = {\n\t\t\t'initialized.owl.carousel change.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (!e.namespace) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this._core.settings || !this._core.settings.lazyLoad) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ((e.property && e.property.name == 'position') || e.type == 'initialized') {\n\t\t\t\t\tvar settings = this._core.settings,\n\t\t\t\t\t\tn = (settings.center && Math.ceil(settings.items / 2) || settings.items),\n\t\t\t\t\t\ti = ((settings.center && n * -1) || 0),\n\t\t\t\t\t\tposition = ((e.property && e.property.value) || this._core.current()) + i,\n\t\t\t\t\t\tclones = this._core.clones().length,\n\t\t\t\t\t\tload = $.proxy(function(i, v) { this.load(v) }, this);\n\n\t\t\t\t\twhile (i++ < n) {\n\t\t\t\t\t\tthis.load(clones / 2 + this._core.relative(position));\n\t\t\t\t\t\tclones && $.each(this._core.clones(this._core.relative(position++)), load);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this)\n\t\t};\n\n\t\t// set the default options\n\t\tthis._core.options = $.extend({}, Lazy.Defaults, this._core.options);\n\n\t\t// register event handler\n\t\tthis._core.$element.on(this._handlers);\n\t}\n\n\t/**\n\t * Default options.\n\t * @public\n\t */\n\tLazy.Defaults = {\n\t\tlazyLoad: false\n\t}\n\n\t/**\n\t * Loads all resources of an item at the specified position.\n\t * @param {Number} position - The absolute position of the item.\n\t * @protected\n\t */\n\tLazy.prototype.load = function(position) {\n\t\tvar $item = this._core.$stage.children().eq(position),\n\t\t\t$elements = $item && $item.find('.owl-lazy');\n\n\t\tif (!$elements || $.inArray($item.get(0), this._loaded) > -1) {\n\t\t\treturn;\n\t\t}\n\n\t\t$elements.each($.proxy(function(index, element) {\n\t\t\tvar $element = $(element), image,\n\t\t\t\turl = (window.devicePixelRatio > 1 && $element.attr('data-src-retina')) || $element.attr('data-src');\n\n\t\t\tthis._core.trigger('load', { element: $element, url: url }, 'lazy');\n\n\t\t\tif ($element.is('img')) {\n\t\t\t\t$element.one('load.owl.lazy', $.proxy(function() {\n\t\t\t\t\t$element.css('opacity', 1);\n\t\t\t\t\tthis._core.trigger('loaded', { element: $element, url: url }, 'lazy');\n\t\t\t\t}, this)).attr('src', url);\n\t\t\t} else {\n\t\t\t\timage = new Image();\n\t\t\t\timage.onload = $.proxy(function() {\n\t\t\t\t\t$element.css({\n\t\t\t\t\t\t'background-image': 'url(' + url + ')',\n\t\t\t\t\t\t'opacity': '1'\n\t\t\t\t\t});\n\t\t\t\t\tthis._core.trigger('loaded', { element: $element, url: url }, 'lazy');\n\t\t\t\t}, this);\n\t\t\t\timage.src = url;\n\t\t\t}\n\t\t}, this));\n\n\t\tthis._loaded.push($item.get(0));\n\t}\n\n\t/**\n\t * Destroys the plugin.\n\t * @public\n\t */\n\tLazy.prototype.destroy = function() {\n\t\tvar handler, property;\n\n\t\tfor (handler in this.handlers) {\n\t\t\tthis._core.$element.off(handler, this.handlers[handler]);\n\t\t}\n\t\tfor (property in Object.getOwnPropertyNames(this)) {\n\t\t\ttypeof this[property] != 'function' && (this[property] = null);\n\t\t}\n\t}\n\n\t$.fn.owlCarousel.Constructor.Plugins.Lazy = Lazy;\n\n})(window.Zepto || window.jQuery, window, document);\n\n/**\n * AutoHeight Plugin\n * @version 2.0.0\n * @author Bartosz Wojciechowski\n * @license The MIT License (MIT)\n */\n;(function($, window, document, undefined) {\n\n\t/**\n\t * Creates the auto height plugin.\n\t * @class The Auto Height Plugin\n\t * @param {Owl} carousel - The Owl Carousel\n\t */\n\tvar AutoHeight = function(carousel) {\n\t\t/**\n\t\t * Reference to the core.\n\t\t * @protected\n\t\t * @type {Owl}\n\t\t */\n\t\tthis._core = carousel;\n\n\t\t/**\n\t\t * All event handlers.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._handlers = {\n\t\t\t'initialized.owl.carousel': $.proxy(function() {\n\t\t\t\tif (this._core.settings.autoHeight) {\n\t\t\t\t\tthis.update();\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'changed.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (this._core.settings.autoHeight && e.property.name == 'position'){\n\t\t\t\t\tthis.update();\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'loaded.owl.lazy': $.proxy(function(e) {\n\t\t\t\tif (this._core.settings.autoHeight && e.element.closest('.' + this._core.settings.itemClass)\n\t\t\t\t\t=== this._core.$stage.children().eq(this._core.current())) {\n\t\t\t\t\tthis.update();\n\t\t\t\t}\n\t\t\t}, this)\n\t\t};\n\n\t\t// set default options\n\t\tthis._core.options = $.extend({}, AutoHeight.Defaults, this._core.options);\n\n\t\t// register event handlers\n\t\tthis._core.$element.on(this._handlers);\n\t};\n\n\t/**\n\t * Default options.\n\t * @public\n\t */\n\tAutoHeight.Defaults = {\n\t\tautoHeight: false,\n\t\tautoHeightClass: 'owl-height'\n\t};\n\n\t/**\n\t * Updates the view.\n\t */\n\tAutoHeight.prototype.update = function() {\n\t\tthis._core.$stage.parent()\n\t\t\t.height(this._core.$stage.children().eq(this._core.current()).height())\n\t\t\t.addClass(this._core.settings.autoHeightClass);\n\t};\n\n\tAutoHeight.prototype.destroy = function() {\n\t\tvar handler, property;\n\n\t\tfor (handler in this._handlers) {\n\t\t\tthis._core.$element.off(handler, this._handlers[handler]);\n\t\t}\n\t\tfor (property in Object.getOwnPropertyNames(this)) {\n\t\t\ttypeof this[property] != 'function' && (this[property] = null);\n\t\t}\n\t};\n\n\t$.fn.owlCarousel.Constructor.Plugins.AutoHeight = AutoHeight;\n\n})(window.Zepto || window.jQuery, window, document);\n\n/**\n * Video Plugin\n * @version 2.0.0\n * @author Bartosz Wojciechowski\n * @license The MIT License (MIT)\n */\n;(function($, window, document, undefined) {\n\n\t/**\n\t * Creates the video plugin.\n\t * @class The Video Plugin\n\t * @param {Owl} carousel - The Owl Carousel\n\t */\n\tvar Video = function(carousel) {\n\t\t/**\n\t\t * Reference to the core.\n\t\t * @protected\n\t\t * @type {Owl}\n\t\t */\n\t\tthis._core = carousel;\n\n\t\t/**\n\t\t * Cache all video URLs.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._videos = {};\n\n\t\t/**\n\t\t * Current playing item.\n\t\t * @protected\n\t\t * @type {jQuery}\n\t\t */\n\t\tthis._playing = null;\n\n\t\t/**\n\t\t * Whether this is in fullscreen or not.\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._fullscreen = false;\n\n\t\t/**\n\t\t * All event handlers.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._handlers = {\n\t\t\t'resize.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (this._core.settings.video && !this.isInFullScreen()) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'refresh.owl.carousel changed.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (this._playing) {\n\t\t\t\t\tthis.stop();\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'prepared.owl.carousel': $.proxy(function(e) {\n\t\t\t\tvar $element = $(e.content).find('.owl-video');\n\t\t\t\tif ($element.length) {\n\t\t\t\t\t$element.css('display', 'none');\n\t\t\t\t\tthis.fetch($element, $(e.content));\n\t\t\t\t}\n\t\t\t}, this)\n\t\t};\n\n\t\t// set default options\n\t\tthis._core.options = $.extend({}, Video.Defaults, this._core.options);\n\n\t\t// register event handlers\n\t\tthis._core.$element.on(this._handlers);\n\n\t\tthis._core.$element.on('click.owl.video', '.owl-video-play-icon', $.proxy(function(e) {\n\t\t\tthis.play(e);\n\t\t}, this));\n\t};\n\n\t/**\n\t * Default options.\n\t * @public\n\t */\n\tVideo.Defaults = {\n\t\tvideo: false,\n\t\tvideoHeight: false,\n\t\tvideoWidth: false\n\t};\n\n\t/**\n\t * Gets the video ID and the type (YouTube/Vimeo only).\n\t * @protected\n\t * @param {jQuery} target - The target containing the video data.\n\t * @param {jQuery} item - The item containing the video.\n\t */\n\tVideo.prototype.fetch = function(target, item) {\n\n\t\tvar type = target.attr('data-vimeo-id') ? 'vimeo' : 'youtube',\n\t\t\tid = target.attr('data-vimeo-id') || target.attr('data-youtube-id'),\n\t\t\twidth = target.attr('data-width') || this._core.settings.videoWidth,\n\t\t\theight = target.attr('data-height') || this._core.settings.videoHeight,\n\t\t\turl = target.attr('href');\n\n\t\tif (url) {\n\t\t\tid = url.match(/(http:|https:|)\\/\\/(player.|www.)?(vimeo\\.com|youtu(be\\.com|\\.be|be\\.googleapis\\.com))\\/(video\\/|embed\\/|watch\\?v=|v\\/)?([A-Za-z0-9._%-]*)(\\&\\S+)?/);\n\n\t\t\tif (id[3].indexOf('youtu') > -1) {\n\t\t\t\ttype = 'youtube';\n\t\t\t} else if (id[3].indexOf('vimeo') > -1) {\n\t\t\t\ttype = 'vimeo';\n\t\t\t} else {\n\t\t\t\tthrow new Error('Video URL not supported.');\n\t\t\t}\n\t\t\tid = id[6];\n\t\t} else {\n\t\t\tthrow new Error('Missing video URL.');\n\t\t}\n\n\t\tthis._videos[url] = {\n\t\t\ttype: type,\n\t\t\tid: id,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\n\t\titem.attr('data-video', url);\n\n\t\tthis.thumbnail(target, this._videos[url]);\n\t};\n\n\t/**\n\t * Creates video thumbnail.\n\t * @protected\n\t * @param {jQuery} target - The target containing the video data.\n\t * @param {Object} info - The video info object.\n\t * @see `fetch`\n\t */\n\tVideo.prototype.thumbnail = function(target, video) {\n\n\t\tvar tnLink,\n\t\t\ticon,\n\t\t\tpath,\n\t\t\tdimensions = video.width && video.height ? 'style=\"width:' + video.width + 'px;height:' + video.height + 'px;\"' : '',\n\t\t\tcustomTn = target.find('img'),\n\t\t\tsrcType = 'src',\n\t\t\tlazyClass = '',\n\t\t\tsettings = this._core.settings,\n\t\t\tcreate = function(path) {\n\t\t\t\ticon = '<div class=\"owl-video-play-icon\"></div>';\n\n\t\t\t\tif (settings.lazyLoad) {\n\t\t\t\t\ttnLink = '<div class=\"owl-video-tn ' + lazyClass + '\" ' + srcType + '=\"' + path + '\"></div>';\n\t\t\t\t} else {\n\t\t\t\t\ttnLink = '<div class=\"owl-video-tn\" style=\"opacity:1;background-image:url(' + path + ')\"></div>';\n\t\t\t\t}\n\t\t\t\ttarget.after(tnLink);\n\t\t\t\ttarget.after(icon);\n\t\t\t};\n\n\t\t// wrap video content into owl-video-wrapper div\n\t\ttarget.wrap('<div class=\"owl-video-wrapper\"' + dimensions + '></div>');\n\n\t\tif (this._core.settings.lazyLoad) {\n\t\t\tsrcType = 'data-src';\n\t\t\tlazyClass = 'owl-lazy';\n\t\t}\n\n\t\t// custom thumbnail\n\t\tif (customTn.length) {\n\t\t\tcreate(customTn.attr(srcType));\n\t\t\tcustomTn.remove();\n\t\t\treturn false;\n\t\t}\n\n\t\tif (video.type === 'youtube') {\n\t\t\tpath = \"http://img.youtube.com/vi/\" + video.id + \"/hqdefault.jpg\";\n\t\t\tcreate(path);\n\t\t} else if (video.type === 'vimeo') {\n\t\t\t$.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: 'http://vimeo.com/api/v2/video/' + video.id + '.json',\n\t\t\t\tjsonp: 'callback',\n\t\t\t\tdataType: 'jsonp',\n\t\t\t\tsuccess: function(data) {\n\t\t\t\t\tpath = data[0].thumbnail_large;\n\t\t\t\t\tcreate(path);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n\t * Stops the current video.\n\t * @public\n\t */\n\tVideo.prototype.stop = function() {\n\t\tthis._core.trigger('stop', null, 'video');\n\t\tthis._playing.find('.owl-video-frame').remove();\n\t\tthis._playing.removeClass('owl-video-playing');\n\t\tthis._playing = null;\n\t};\n\n\t/**\n\t * Starts the current video.\n\t * @public\n\t * @param {Event} ev - The event arguments.\n\t */\n\tVideo.prototype.play = function(ev) {\n\t\tthis._core.trigger('play', null, 'video');\n\n\t\tif (this._playing) {\n\t\t\tthis.stop();\n\t\t}\n\n\t\tvar target = $(ev.target || ev.srcElement),\n\t\t\titem = target.closest('.' + this._core.settings.itemClass),\n\t\t\tvideo = this._videos[item.attr('data-video')],\n\t\t\twidth = video.width || '100%',\n\t\t\theight = video.height || this._core.$stage.height(),\n\t\t\thtml, wrap;\n\n\t\tif (video.type === 'youtube') {\n\t\t\thtml = '<iframe width=\"' + width + '\" height=\"' + height + '\" src=\"http://www.youtube.com/embed/'\n\t\t\t\t+ video.id + '?autoplay=1&v=' + video.id + '\" frameborder=\"0\" allowfullscreen></iframe>';\n\t\t} else if (video.type === 'vimeo') {\n\t\t\thtml = '<iframe src=\"http://player.vimeo.com/video/' + video.id + '?autoplay=1\" width=\"' + width\n\t\t\t\t+ '\" height=\"' + height\n\t\t\t\t+ '\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';\n\t\t}\n\n\t\titem.addClass('owl-video-playing');\n\t\tthis._playing = item;\n\n\t\twrap = $('<div style=\"height:' + height + 'px; width:' + width + 'px\" class=\"owl-video-frame\">'\n\t\t\t+ html + '</div>');\n\t\ttarget.after(wrap);\n\t};\n\n\t/**\n\t * Checks whether an video is currently in full screen mode or not.\n\t * @todo Bad style because looks like a readonly method but changes members.\n\t * @protected\n\t * @returns {Boolean}\n\t */\n\tVideo.prototype.isInFullScreen = function() {\n\n\t\t// if Vimeo Fullscreen mode\n\t\tvar element = document.fullscreenElement || document.mozFullScreenElement\n\t\t\t|| document.webkitFullscreenElement;\n\n\t\tif (element && $(element).parent().hasClass('owl-video-frame')) {\n\t\t\tthis._core.speed(0);\n\t\t\tthis._fullscreen = true;\n\t\t}\n\n\t\tif (element && this._fullscreen && this._playing) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// comming back from fullscreen\n\t\tif (this._fullscreen) {\n\t\t\tthis._fullscreen = false;\n\t\t\treturn false;\n\t\t}\n\n\t\t// check full screen mode and window orientation\n\t\tif (this._playing) {\n\t\t\tif (this._core.state.orientation !== window.orientation) {\n\t\t\t\tthis._core.state.orientation = window.orientation;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * Destroys the plugin.\n\t */\n\tVideo.prototype.destroy = function() {\n\t\tvar handler, property;\n\n\t\tthis._core.$element.off('click.owl.video');\n\n\t\tfor (handler in this._handlers) {\n\t\t\tthis._core.$element.off(handler, this._handlers[handler]);\n\t\t}\n\t\tfor (property in Object.getOwnPropertyNames(this)) {\n\t\t\ttypeof this[property] != 'function' && (this[property] = null);\n\t\t}\n\t};\n\n\t$.fn.owlCarousel.Constructor.Plugins.Video = Video;\n\n})(window.Zepto || window.jQuery, window, document);\n\n/**\n * Animate Plugin\n * @version 2.0.0\n * @author Bartosz Wojciechowski\n * @license The MIT License (MIT)\n */\n;(function($, window, document, undefined) {\n\n\t/**\n\t * Creates the animate plugin.\n\t * @class The Navigation Plugin\n\t * @param {Owl} scope - The Owl Carousel\n\t */\n\tvar Animate = function(scope) {\n\t\tthis.core = scope;\n\t\tthis.core.options = $.extend({}, Animate.Defaults, this.core.options);\n\t\tthis.swapping = true;\n\t\tthis.previous = undefined;\n\t\tthis.next = undefined;\n\n\t\tthis.handlers = {\n\t\t\t'change.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (e.property.name == 'position') {\n\t\t\t\t\tthis.previous = this.core.current();\n\t\t\t\t\tthis.next = e.property.value;\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'drag.owl.carousel dragged.owl.carousel translated.owl.carousel': $.proxy(function(e) {\n\t\t\t\tthis.swapping = e.type == 'translated';\n\t\t\t}, this),\n\t\t\t'translate.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (this.swapping && (this.core.options.animateOut || this.core.options.animateIn)) {\n\t\t\t\t\tthis.swap();\n\t\t\t\t}\n\t\t\t}, this)\n\t\t};\n\n\t\tthis.core.$element.on(this.handlers);\n\t};\n\n\t/**\n\t * Default options.\n\t * @public\n\t */\n\tAnimate.Defaults = {\n\t\tanimateOut: false,\n\t\tanimateIn: false\n\t};\n\n\t/**\n\t * Toggles the animation classes whenever an translations starts.\n\t * @protected\n\t * @returns {Boolean|undefined}\n\t */\n\tAnimate.prototype.swap = function() {\n\n\t\tif (this.core.settings.items !== 1 || !this.core.support3d) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.core.speed(0);\n\n\t\tvar left,\n\t\t\tclear = $.proxy(this.clear, this),\n\t\t\tprevious = this.core.$stage.children().eq(this.previous),\n\t\t\tnext = this.core.$stage.children().eq(this.next),\n\t\t\tincoming = this.core.settings.animateIn,\n\t\t\toutgoing = this.core.settings.animateOut;\n\n\t\tif (this.core.current() === this.previous) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (outgoing) {\n\t\t\tleft = this.core.coordinates(this.previous) - this.core.coordinates(this.next);\n\t\t\tprevious.css( { 'left': left + 'px' } )\n\t\t\t\t.addClass('animated owl-animated-out')\n\t\t\t\t.addClass(outgoing)\n\t\t\t\t.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', clear);\n\t\t}\n\n\t\tif (incoming) {\n\t\t\tnext.addClass('animated owl-animated-in')\n\t\t\t\t.addClass(incoming)\n\t\t\t\t.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', clear);\n\t\t}\n\t};\n\n\tAnimate.prototype.clear = function(e) {\n\t\t$(e.target).css( { 'left': '' } )\n\t\t\t.removeClass('animated owl-animated-out owl-animated-in')\n\t\t\t.removeClass(this.core.settings.animateIn)\n\t\t\t.removeClass(this.core.settings.animateOut);\n\t\tthis.core.transitionEnd();\n\t}\n\n\t/**\n\t * Destroys the plugin.\n\t * @public\n\t */\n\tAnimate.prototype.destroy = function() {\n\t\tvar handler, property;\n\n\t\tfor (handler in this.handlers) {\n\t\t\tthis.core.$element.off(handler, this.handlers[handler]);\n\t\t}\n\t\tfor (property in Object.getOwnPropertyNames(this)) {\n\t\t\ttypeof this[property] != 'function' && (this[property] = null);\n\t\t}\n\t};\n\n\t$.fn.owlCarousel.Constructor.Plugins.Animate = Animate;\n\n})(window.Zepto || window.jQuery, window, document);\n\n/**\n * Autoplay Plugin\n * @version 2.0.0\n * @author Bartosz Wojciechowski\n * @license The MIT License (MIT)\n */\n;(function($, window, document, undefined) {\n\n\t/**\n\t * Creates the autoplay plugin.\n\t * @class The Autoplay Plugin\n\t * @param {Owl} scope - The Owl Carousel\n\t */\n\tvar Autoplay = function(scope) {\n\t\tthis.core = scope;\n\t\tthis.core.options = $.extend({}, Autoplay.Defaults, this.core.options);\n\n\t\tthis.handlers = {\n\t\t\t'translated.owl.carousel refreshed.owl.carousel': $.proxy(function() {\n\t\t\t\tthis.autoplay();\n\t\t\t}, this),\n\t\t\t'play.owl.autoplay': $.proxy(function(e, t, s) {\n\t\t\t\tthis.play(t, s);\n\t\t\t}, this),\n\t\t\t'stop.owl.autoplay': $.proxy(function() {\n\t\t\t\tthis.stop();\n\t\t\t}, this),\n\t\t\t'mouseover.owl.autoplay': $.proxy(function() {\n\t\t\t\tif (this.core.settings.autoplayHoverPause) {\n\t\t\t\t\tthis.pause();\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'mouseleave.owl.autoplay': $.proxy(function() {\n\t\t\t\tif (this.core.settings.autoplayHoverPause) {\n\t\t\t\t\tthis.autoplay();\n\t\t\t\t}\n\t\t\t}, this)\n\t\t};\n\n\t\tthis.core.$element.on(this.handlers);\n\t};\n\n\t/**\n\t * Default options.\n\t * @public\n\t */\n\tAutoplay.Defaults = {\n\t\tautoplay: false,\n\t\tautoplayTimeout: 5000,\n\t\tautoplayHoverPause: false,\n\t\tautoplaySpeed: false\n\t};\n\n\t/**\n\t * @protected\n\t * @todo Must be documented.\n\t */\n\tAutoplay.prototype.autoplay = function() {\n\t\tif (this.core.settings.autoplay && !this.core.state.videoPlay) {\n\t\t\twindow.clearInterval(this.interval);\n\n\t\t\tthis.interval = window.setInterval($.proxy(function() {\n\t\t\t\tthis.play();\n\t\t\t}, this), this.core.settings.autoplayTimeout);\n\t\t} else {\n\t\t\twindow.clearInterval(this.interval);\n\t\t}\n\t};\n\n\t/**\n\t * Starts the autoplay.\n\t * @public\n\t * @param {Number} [timeout] - ...\n\t * @param {Number} [speed] - ...\n\t * @returns {Boolean|undefined} - ...\n\t * @todo Must be documented.\n\t */\n\tAutoplay.prototype.play = function(timeout, speed) {\n\t\t// if tab is inactive - doesnt work in <IE10\n\t\tif (document.hidden === true) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.core.state.isTouch || this.core.state.isScrolling\n\t\t\t|| this.core.state.isSwiping || this.core.state.inMotion) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.core.settings.autoplay === false) {\n\t\t\twindow.clearInterval(this.interval);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.core.next(this.core.settings.autoplaySpeed);\n\t};\n\n\t/**\n\t * Stops the autoplay.\n\t * @public\n\t */\n\tAutoplay.prototype.stop = function() {\n\t\twindow.clearInterval(this.interval);\n\t};\n\n\t/**\n\t * Pauses the autoplay.\n\t * @public\n\t */\n\tAutoplay.prototype.pause = function() {\n\t\twindow.clearInterval(this.interval);\n\t};\n\n\t/**\n\t * Destroys the plugin.\n\t */\n\tAutoplay.prototype.destroy = function() {\n\t\tvar handler, property;\n\n\t\twindow.clearInterval(this.interval);\n\n\t\tfor (handler in this.handlers) {\n\t\t\tthis.core.$element.off(handler, this.handlers[handler]);\n\t\t}\n\t\tfor (property in Object.getOwnPropertyNames(this)) {\n\t\t\ttypeof this[property] != 'function' && (this[property] = null);\n\t\t}\n\t};\n\n\t$.fn.owlCarousel.Constructor.Plugins.autoplay = Autoplay;\n\n})(window.Zepto || window.jQuery, window, document);\n\n/**\n * Navigation Plugin\n * @version 2.0.0\n * @author Artus Kolanowski\n * @license The MIT License (MIT)\n */\n;(function($, window, document, undefined) {\n\t'use strict';\n\n\t/**\n\t * Creates the navigation plugin.\n\t * @class The Navigation Plugin\n\t * @param {Owl} carousel - The Owl Carousel.\n\t */\n\tvar Navigation = function(carousel) {\n\t\t/**\n\t\t * Reference to the core.\n\t\t * @protected\n\t\t * @type {Owl}\n\t\t */\n\t\tthis._core = carousel;\n\n\t\t/**\n\t\t * Indicates whether the plugin is initialized or not.\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis._initialized = false;\n\n\t\t/**\n\t\t * The current paging indexes.\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._pages = [];\n\n\t\t/**\n\t\t * All DOM elements of the user interface.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._controls = {};\n\n\t\t/**\n\t\t * Markup for an indicator.\n\t\t * @protected\n\t\t * @type {Array.<String>}\n\t\t */\n\t\tthis._templates = [];\n\n\t\t/**\n\t\t * The carousel element.\n\t\t * @type {jQuery}\n\t\t */\n\t\tthis.$element = this._core.$element;\n\n\t\t/**\n\t\t * Overridden methods of the carousel.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._overrides = {\n\t\t\tnext: this._core.next,\n\t\t\tprev: this._core.prev,\n\t\t\tto: this._core.to\n\t\t};\n\n\t\t/**\n\t\t * All event handlers.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._handlers = {\n\t\t\t'prepared.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (this._core.settings.dotsData) {\n\t\t\t\t\tthis._templates.push($(e.content).find('[data-dot]').andSelf('[data-dot]').attr('data-dot'));\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'add.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (this._core.settings.dotsData) {\n\t\t\t\t\tthis._templates.splice(e.position, 0, $(e.content).find('[data-dot]').andSelf('[data-dot]').attr('data-dot'));\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'remove.owl.carousel prepared.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (this._core.settings.dotsData) {\n\t\t\t\t\tthis._templates.splice(e.position, 1);\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'change.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (e.property.name == 'position') {\n\t\t\t\t\tif (!this._core.state.revert && !this._core.settings.loop && this._core.settings.navRewind) {\n\t\t\t\t\t\tvar current = this._core.current(),\n\t\t\t\t\t\t\tmaximum = this._core.maximum(),\n\t\t\t\t\t\t\tminimum = this._core.minimum();\n\t\t\t\t\t\te.data = e.property.value > maximum\n\t\t\t\t\t\t\t? current >= maximum ? minimum : maximum\n\t\t\t\t\t\t\t: e.property.value < minimum ? maximum : e.property.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'changed.owl.carousel': $.proxy(function(e) {\n\t\t\t\tif (e.property.name == 'position') {\n\t\t\t\t\tthis.draw();\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'refreshed.owl.carousel': $.proxy(function() {\n\t\t\t\tif (!this._initialized) {\n\t\t\t\t\tthis.initialize();\n\t\t\t\t\tthis._initialized = true;\n\t\t\t\t}\n\t\t\t\tthis._core.trigger('refresh', null, 'navigation');\n\t\t\t\tthis.update();\n\t\t\t\tthis.draw();\n\t\t\t\tthis._core.trigger('refreshed', null, 'navigation');\n\t\t\t}, this)\n\t\t};\n\n\t\t// set default options\n\t\tthis._core.options = $.extend({}, Navigation.Defaults, this._core.options);\n\n\t\t// register event handlers\n\t\tthis.$element.on(this._handlers);\n\t}\n\n\t/**\n\t * Default options.\n\t * @public\n\t * @todo Rename `slideBy` to `navBy`\n\t */\n\tNavigation.Defaults = {\n\t\tnav: false,\n\t\tnavRewind: true,\n\t\tnavText: [ 'prev', 'next' ],\n\t\tnavSpeed: false,\n\t\tnavElement: 'div',\n\t\tnavContainer: false,\n\t\tnavContainerClass: 'owl-nav',\n\t\tnavClass: [ 'owl-prev', 'owl-next' ],\n\t\tslideBy: 1,\n\t\tdotClass: 'owl-dot',\n\t\tdotsClass: 'owl-dots',\n\t\tdots: true,\n\t\tdotsEach: false,\n\t\tdotData: false,\n\t\tdotsSpeed: false,\n\t\tdotsContainer: false,\n\t\tcontrolsClass: 'owl-controls'\n\t}\n\n\t/**\n\t * Initializes the layout of the plugin and extends the carousel.\n\t * @protected\n\t */\n\tNavigation.prototype.initialize = function() {\n\t\tvar $container, override,\n\t\t\toptions = this._core.settings;\n\n\t\t// create the indicator template\n\t\tif (!options.dotsData) {\n\t\t\tthis._templates = [ $('<div>')\n\t\t\t\t.addClass(options.dotClass)\n\t\t\t\t.append($('<span>'))\n\t\t\t\t.prop('outerHTML') ];\n\t\t}\n\n\t\t// create controls container if needed\n\t\tif (!options.navContainer || !options.dotsContainer) {\n\t\t\tthis._controls.$container = $('<div>')\n\t\t\t\t.addClass(options.controlsClass)\n\t\t\t\t.appendTo(this.$element);\n\t\t}\n\n\t\t// create DOM structure for absolute navigation\n\t\tthis._controls.$indicators = options.dotsContainer ? $(options.dotsContainer)\n\t\t\t: $('<div>').hide().addClass(options.dotsClass).appendTo(this._controls.$container);\n\n\t\tthis._controls.$indicators.on('click', 'div', $.proxy(function(e) {\n\t\t\tvar index = $(e.target).parent().is(this._controls.$indicators)\n\t\t\t\t? $(e.target).index() : $(e.target).parent().index();\n\n\t\t\te.preventDefault();\n\n\t\t\tthis.to(index, options.dotsSpeed);\n\t\t}, this));\n\n\t\t// create DOM structure for relative navigation\n\t\t$container = options.navContainer ? $(options.navContainer)\n\t\t\t: $('<div>').addClass(options.navContainerClass).prependTo(this._controls.$container);\n\n\t\tthis._controls.$next = $('<' + options.navElement + '>');\n\t\tthis._controls.$previous = this._controls.$next.clone();\n\n\t\tthis._controls.$previous\n\t\t\t.addClass(options.navClass[0])\n\t\t\t.html(options.navText[0])\n\t\t\t.hide()\n\t\t\t.prependTo($container)\n\t\t\t.on('click', $.proxy(function(e) {\n\t\t\t\tthis.prev(options.navSpeed);\n\t\t\t}, this));\n\t\tthis._controls.$next\n\t\t\t.addClass(options.navClass[1])\n\t\t\t.html(options.navText[1])\n\t\t\t.hide()\n\t\t\t.appendTo($container)\n\t\t\t.on('click', $.proxy(function(e) {\n\t\t\t\tthis.next(options.navSpeed);\n\t\t\t}, this));\n\n\t\t// override public methods of the carousel\n\t\tfor (override in this._overrides) {\n\t\t\tthis._core[override] = $.proxy(this[override], this);\n\t\t}\n\t}\n\n\t/**\n\t * Destroys the plugin.\n\t * @protected\n\t */\n\tNavigation.prototype.destroy = function() {\n\t\tvar handler, control, property, override;\n\n\t\tfor (handler in this._handlers) {\n\t\t\tthis.$element.off(handler, this._handlers[handler]);\n\t\t}\n\t\tfor (control in this._controls) {\n\t\t\tthis._controls[control].remove();\n\t\t}\n\t\tfor (override in this.overides) {\n\t\t\tthis._core[override] = this._overrides[override];\n\t\t}\n\t\tfor (property in Object.getOwnPropertyNames(this)) {\n\t\t\ttypeof this[property] != 'function' && (this[property] = null);\n\t\t}\n\t}\n\n\t/**\n\t * Updates the internal state.\n\t * @protected\n\t */\n\tNavigation.prototype.update = function() {\n\t\tvar i, j, k,\n\t\t\toptions = this._core.settings,\n\t\t\tlower = this._core.clones().length / 2,\n\t\t\tupper = lower + this._core.items().length,\n\t\t\tsize = options.center || options.autoWidth || options.dotData\n\t\t\t\t? 1 : options.dotsEach || options.items;\n\n\t\tif (options.slideBy !== 'page') {\n\t\t\toptions.slideBy = Math.min(options.slideBy, options.items);\n\t\t}\n\n\t\tif (options.dots || options.slideBy == 'page') {\n\t\t\tthis._pages = [];\n\n\t\t\tfor (i = lower, j = 0, k = 0; i < upper; i++) {\n\t\t\t\tif (j >= size || j === 0) {\n\t\t\t\t\tthis._pages.push({\n\t\t\t\t\t\tstart: i - lower,\n\t\t\t\t\t\tend: i - lower + size - 1\n\t\t\t\t\t});\n\t\t\t\t\tj = 0, ++k;\n\t\t\t\t}\n\t\t\t\tj += this._core.mergers(this._core.relative(i));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Draws the user interface.\n\t * @todo The option `dotData` wont work.\n\t * @protected\n\t */\n\tNavigation.prototype.draw = function() {\n\t\tvar difference, i, html = '',\n\t\t\toptions = this._core.settings,\n\t\t\t$items = this._core.$stage.children(),\n\t\t\tindex = this._core.relative(this._core.current());\n\n\t\tif (options.nav && !options.loop && !options.navRewind) {\n\t\t\tthis._controls.$previous.toggleClass('disabled', index <= 0);\n\t\t\tthis._controls.$next.toggleClass('disabled', index >= this._core.maximum());\n\t\t}\n\n\t\tthis._controls.$previous.toggle(options.nav);\n\t\tthis._controls.$next.toggle(options.nav);\n\n\t\tif (options.dots) {\n\t\t\tdifference = this._pages.length - this._controls.$indicators.children().length;\n\n\t\t\tif (options.dotData && difference !== 0) {\n\t\t\t\tfor (i = 0; i < this._controls.$indicators.children().length; i++) {\n\t\t\t\t\thtml += this._templates[this._core.relative(i)];\n\t\t\t\t}\n\t\t\t\tthis._controls.$indicators.html(html);\n\t\t\t} else if (difference > 0) {\n\t\t\t\thtml = new Array(difference + 1).join(this._templates[0]);\n\t\t\t\tthis._controls.$indicators.append(html);\n\t\t\t} else if (difference < 0) {\n\t\t\t\tthis._controls.$indicators.children().slice(difference).remove();\n\t\t\t}\n\n\t\t\tthis._controls.$indicators.find('.active').removeClass('active');\n\t\t\tthis._controls.$indicators.children().eq($.inArray(this.current(), this._pages)).addClass('active');\n\t\t}\n\n\t\tthis._controls.$indicators.toggle(options.dots);\n\t}\n\n\t/**\n\t * Extends event data.\n\t * @protected\n\t * @param {Event} event - The event object which gets thrown.\n\t */\n\tNavigation.prototype.onTrigger = function(event) {\n\t\tvar settings = this._core.settings;\n\n\t\tevent.page = {\n\t\t\tindex: $.inArray(this.current(), this._pages),\n\t\t\tcount: this._pages.length,\n\t\t\tsize: settings && (settings.center || settings.autoWidth || settings.dotData\n\t\t\t\t? 1 : settings.dotsEach || settings.items)\n\t\t};\n\t}\n\n\t/**\n\t * Gets the current page position of the carousel.\n\t * @protected\n\t * @returns {Number}\n\t */\n\tNavigation.prototype.current = function() {\n\t\tvar index = this._core.relative(this._core.current());\n\t\treturn $.grep(this._pages, function(o) {\n\t\t\treturn o.start <= index && o.end >= index;\n\t\t}).pop();\n\t}\n\n\t/**\n\t * Gets the current succesor/predecessor position.\n\t * @protected\n\t * @returns {Number}\n\t */\n\tNavigation.prototype.getPosition = function(successor) {\n\t\tvar position, length,\n\t\t\toptions = this._core.settings;\n\n\t\tif (options.slideBy == 'page') {\n\t\t\tposition = $.inArray(this.current(), this._pages);\n\t\t\tlength = this._pages.length;\n\t\t\tsuccessor ? ++position : --position;\n\t\t\tposition = this._pages[((position % length) + length) % length].start;\n\t\t} else {\n\t\t\tposition = this._core.relative(this._core.current());\n\t\t\tlength = this._core.items().length;\n\t\t\tsuccessor ? position += options.slideBy : position -= options.slideBy;\n\t\t}\n\t\treturn position;\n\t}\n\n\t/**\n\t * Slides to the next item or page.\n\t * @public\n\t * @param {Number} [speed=false] - The time in milliseconds for the transition.\n\t */\n\tNavigation.prototype.next = function(speed) {\n\t\t$.proxy(this._overrides.to, this._core)(this.getPosition(true), speed);\n\t}\n\n\t/**\n\t * Slides to the previous item or page.\n\t * @public\n\t * @param {Number} [speed=false] - The time in milliseconds for the transition.\n\t */\n\tNavigation.prototype.prev = function(speed) {\n\t\t$.proxy(this._overrides.to, this._core)(this.getPosition(false), speed);\n\t}\n\n\t/**\n\t * Slides to the specified item or page.\n\t * @public\n\t * @param {Number} position - The position of the item or page.\n\t * @param {Number} [speed] - The time in milliseconds for the transition.\n\t * @param {Boolean} [standard=false] - Whether to use the standard behaviour or not.\n\t */\n\tNavigation.prototype.to = function(position, speed, standard) {\n\t\tvar length;\n\n\t\tif (!standard) {\n\t\t\tlength = this._pages.length;\n\t\t\t$.proxy(this._overrides.to, this._core)(this._pages[((position % length) + length) % length].start, speed);\n\t\t} else {\n\t\t\t$.proxy(this._overrides.to, this._core)(position, speed);\n\t\t}\n\t}\n\n\t$.fn.owlCarousel.Constructor.Plugins.Navigation = Navigation;\n\n})(window.Zepto || window.jQuery, window, document);\n\n/**\n * Hash Plugin\n * @version 2.0.0\n * @author Artus Kolanowski\n * @license The MIT License (MIT)\n */\n;(function($, window, document, undefined) {\n\t'use strict';\n\n\t/**\n\t * Creates the hash plugin.\n\t * @class The Hash Plugin\n\t * @param {Owl} carousel - The Owl Carousel\n\t */\n\tvar Hash = function(carousel) {\n\t\t/**\n\t\t * Reference to the core.\n\t\t * @protected\n\t\t * @type {Owl}\n\t\t */\n\t\tthis._core = carousel;\n\n\t\t/**\n\t\t * Hash table for the hashes.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._hashes = {};\n\n\t\t/**\n\t\t * The carousel element.\n\t\t * @type {jQuery}\n\t\t */\n\t\tthis.$element = this._core.$element;\n\n\t\t/**\n\t\t * All event handlers.\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._handlers = {\n\t\t\t'initialized.owl.carousel': $.proxy(function() {\n\t\t\t\tif (this._core.settings.startPosition == 'URLHash') {\n\t\t\t\t\t$(window).trigger('hashchange.owl.navigation');\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\t'prepared.owl.carousel': $.proxy(function(e) {\n\t\t\t\tvar hash = $(e.content).find('[data-hash]').andSelf('[data-hash]').attr('data-hash');\n\t\t\t\tthis._hashes[hash] = e.content;\n\t\t\t}, this)\n\t\t};\n\n\t\t// set default options\n\t\tthis._core.options = $.extend({}, Hash.Defaults, this._core.options);\n\n\t\t// register the event handlers\n\t\tthis.$element.on(this._handlers);\n\n\t\t// register event listener for hash navigation\n\t\t$(window).on('hashchange.owl.navigation', $.proxy(function() {\n\t\t\tvar hash = window.location.hash.substring(1),\n\t\t\t\titems = this._core.$stage.children(),\n\t\t\t\tposition = this._hashes[hash] && items.index(this._hashes[hash]) || 0;\n\n\t\t\tif (!hash) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._core.to(position, false, true);\n\t\t}, this));\n\t}\n\n\t/**\n\t * Default options.\n\t * @public\n\t */\n\tHash.Defaults = {\n\t\tURLhashListener: false\n\t}\n\n\t/**\n\t * Destroys the plugin.\n\t * @public\n\t */\n\tHash.prototype.destroy = function() {\n\t\tvar handler, property;\n\n\t\t$(window).off('hashchange.owl.navigation');\n\n\t\tfor (handler in this._handlers) {\n\t\t\tthis._core.$element.off(handler, this._handlers[handler]);\n\t\t}\n\t\tfor (property in Object.getOwnPropertyNames(this)) {\n\t\t\ttypeof this[property] != 'function' && (this[property] = null);\n\t\t}\n\t}\n\n\t$.fn.owlCarousel.Constructor.Plugins.Hash = Hash;\n\n})(window.Zepto || window.jQuery, window, document);\n","owl.carousel/owl.carousel.min.js":"!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this.drag=a.extend({},m),this.state=a.extend({},n),this.e=a.extend({},o),this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._invalidated={},this._pipe=[],a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a[0].toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Pipe,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}function f(a){if(a.touches!==d)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(a.touches===d){if(a.pageX!==d)return{x:a.pageX,y:a.pageY};if(a.pageX===d)return{x:a.clientX,y:a.clientY}}}function g(a){var b,d,e=c.createElement(\"div\"),f=a;for(b in f)if(d=f[b],\"undefined\"!=typeof e.style[d])return e=null,[d,b];return[!1]}function h(){return g([\"transition\",\"WebkitTransition\",\"MozTransition\",\"OTransition\"])[1]}function i(){return g([\"transform\",\"WebkitTransform\",\"MozTransform\",\"OTransform\",\"msTransform\"])[0]}function j(){return g([\"perspective\",\"webkitPerspective\",\"MozPerspective\",\"OPerspective\",\"MsPerspective\"])[0]}function k(){return\"ontouchstart\"in b||!!navigator.msMaxTouchPoints}function l(){return b.navigator.msPointerEnabled}var m,n,o;m={start:0,startX:0,startY:0,current:0,currentX:0,currentY:0,offsetX:0,offsetY:0,distance:null,startTime:0,endTime:0,updatedX:0,targetEl:null},n={isTouch:!1,isScrolling:!1,isSwiping:!1,direction:!1,inMotion:!1},o={_onDragStart:null,_onDragMove:null,_onDragEnd:null,_transitionEnd:null,_resizer:null,_responsiveCall:null,_goToLoop:null,_checkVisibile:null},e.Defaults={items:3,loop:!1,center:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,responsiveClass:!1,fallbackEasing:\"swing\",info:!1,nestedItemSelector:!1,itemElement:\"div\",stageElement:\"div\",themeClass:\"owl-theme\",baseClass:\"owl-carousel\",itemClass:\"owl-item\",centerClass:\"center\",activeClass:\"active\"},e.Width={Default:\"default\",Inner:\"inner\",Outer:\"outer\"},e.Plugins={},e.Pipe=[{filter:[\"width\",\"items\",\"settings\"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:[\"items\",\"settings\"],run:function(){var a=this._clones,b=this.$stage.children(\".cloned\");(b.length!==a.length||!this.settings.loop&&a.length>0)&&(this.$stage.children(\".cloned\").remove(),this._clones=[])}},{filter:[\"items\",\"settings\"],run:function(){var a,b,c=this._clones,d=this._items,e=this.settings.loop?c.length-Math.max(2*this.settings.items,4):0;for(a=0,b=Math.abs(e/2);b>a;a++)e>0?(this.$stage.children().eq(d.length+c.length-1).remove(),c.pop(),this.$stage.children().eq(0).remove(),c.pop()):(c.push(c.length/2),this.$stage.append(d[c[c.length-1]].clone().addClass(\"cloned\")),c.push(d.length-1-(c.length-1)/2),this.$stage.prepend(d[c[c.length-1]].clone().addClass(\"cloned\")))}},{filter:[\"width\",\"items\",\"settings\"],run:function(){var a,b,c,d=this.settings.rtl?1:-1,e=(this.width()/this.settings.items).toFixed(3),f=0;for(this._coordinates=[],b=0,c=this._clones.length+this._items.length;c>b;b++)a=this._mergers[this.relative(b)],a=this.settings.mergeFit&&Math.min(a,this.settings.items)||a,f+=(this.settings.autoWidth?this._items[this.relative(b)].width()+this.settings.margin:e*a)*d,this._coordinates.push(f)}},{filter:[\"width\",\"items\",\"settings\"],run:function(){var b,c,d=(this.width()/this.settings.items).toFixed(3),e={width:Math.abs(this._coordinates[this._coordinates.length-1])+2*this.settings.stagePadding,\"padding-left\":this.settings.stagePadding||\"\",\"padding-right\":this.settings.stagePadding||\"\"};if(this.$stage.css(e),e={width:this.settings.autoWidth?\"auto\":d-this.settings.margin},e[this.settings.rtl?\"margin-left\":\"margin-right\"]=this.settings.margin,!this.settings.autoWidth&&a.grep(this._mergers,function(a){return a>1}).length>0)for(b=0,c=this._coordinates.length;c>b;b++)e.width=Math.abs(this._coordinates[b])-Math.abs(this._coordinates[b-1]||0)-this.settings.margin,this.$stage.children().eq(b).css(e);else this.$stage.children().css(e)}},{filter:[\"width\",\"items\",\"settings\"],run:function(a){a.current&&this.reset(this.$stage.children().index(a.current))}},{filter:[\"position\"],run:function(){this.animate(this.coordinates(this._current))}},{filter:[\"width\",\"position\",\"items\",\"settings\"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,\"<=\",g)&&this.op(a,\">\",h)||this.op(b,\"<\",g)&&this.op(b,\">\",h))&&i.push(c);this.$stage.children(\".\"+this.settings.activeClass).removeClass(this.settings.activeClass),this.$stage.children(\":eq(\"+i.join(\"), :eq(\")+\")\").addClass(this.settings.activeClass),this.settings.center&&(this.$stage.children(\".\"+this.settings.centerClass).removeClass(this.settings.centerClass),this.$stage.children().eq(this.current()).addClass(this.settings.centerClass))}}],e.prototype.initialize=function(){if(this.trigger(\"initialize\"),this.$element.addClass(this.settings.baseClass).addClass(this.settings.themeClass).toggleClass(\"owl-rtl\",this.settings.rtl),this.browserSupport(),this.settings.autoWidth&&this.state.imagesLoaded!==!0){var b,c,e;if(b=this.$element.find(\"img\"),c=this.settings.nestedItemSelector?\".\"+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e)return this.preloadAutoWidthImages(b),!1}this.$element.addClass(\"owl-loading\"),this.$stage=a(\"<\"+this.settings.stageElement+' class=\"owl-stage\"/>').wrap('<div class=\"owl-stage-outer\">'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this._width=this.$element.width(),this.refresh(),this.$element.removeClass(\"owl-loading\").addClass(\"owl-loaded\"),this.eventsCall(),this.internalEvents(),this.addTriggerableEvents(),this.trigger(\"initialized\")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),delete e.responsive,e.responsiveClass&&this.$element.attr(\"class\",function(a,b){return b.replace(/\\b owl-responsive-\\S+/g,\"\")}).addClass(\"owl-responsive-\"+d)):e=a.extend({},this.options),(null===this.settings||this._breakpoint!==d)&&(this.trigger(\"change\",{property:{name:\"settings\",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate(\"settings\"),this.trigger(\"changed\",{property:{name:\"settings\",value:this.settings}}))},e.prototype.optionsLogic=function(){this.$element.toggleClass(\"owl-center\",this.settings.center),this.settings.loop&&this._items.length<this.settings.items&&(this.settings.loop=!1),this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger(\"prepare\",{content:b});return c.data||(c.data=a(\"<\"+this.settings.itemElement+\"/>\").addClass(this.settings.itemClass).append(b)),this.trigger(\"prepared\",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={}},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){if(0===this._items.length)return!1;(new Date).getTime();this.trigger(\"refresh\"),this.setup(),this.optionsLogic(),this.$stage.addClass(\"owl-refresh\"),this.update(),this.$stage.removeClass(\"owl-refresh\"),this.state.orientation=b.orientation,this.watchVisibility(),this.trigger(\"refreshed\")},e.prototype.eventsCall=function(){this.e._onDragStart=a.proxy(function(a){this.onDragStart(a)},this),this.e._onDragMove=a.proxy(function(a){this.onDragMove(a)},this),this.e._onDragEnd=a.proxy(function(a){this.onDragEnd(a)},this),this.e._onResize=a.proxy(function(a){this.onResize(a)},this),this.e._transitionEnd=a.proxy(function(a){this.transitionEnd(a)},this),this.e._preventClick=a.proxy(function(a){this.preventClick(a)},this)},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this.e._onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.trigger(\"resize\").isDefaultPrevented()?!1:(this._width=this.$element.width(),this.invalidate(\"width\"),this.refresh(),void this.trigger(\"resized\")):!1},e.prototype.eventsRouter=function(a){var b=a.type;\"mousedown\"===b||\"touchstart\"===b?this.onDragStart(a):\"mousemove\"===b||\"touchmove\"===b?this.onDragMove(a):\"mouseup\"===b||\"touchend\"===b?this.onDragEnd(a):\"touchcancel\"===b&&this.onDragEnd(a)},e.prototype.internalEvents=function(){var c=(k(),l());this.settings.mouseDrag?(this.$stage.on(\"mousedown\",a.proxy(function(a){this.eventsRouter(a)},this)),this.$stage.on(\"dragstart\",function(){return!1}),this.$stage.get(0).onselectstart=function(){return!1}):this.$element.addClass(\"owl-text-select-on\"),this.settings.touchDrag&&!c&&this.$stage.on(\"touchstart touchcancel\",a.proxy(function(a){this.eventsRouter(a)},this)),this.transitionEndVendor&&this.on(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd,!1),this.settings.responsive!==!1&&this.on(b,\"resize\",a.proxy(this.onThrottledResize,this))},e.prototype.onDragStart=function(d){var e,g,h,i;if(e=d.originalEvent||d||b.event,3===e.which||this.state.isTouch)return!1;if(\"mousedown\"===e.type&&this.$stage.addClass(\"owl-grab\"),this.trigger(\"drag\"),this.drag.startTime=(new Date).getTime(),this.speed(0),this.state.isTouch=!0,this.state.isScrolling=!1,this.state.isSwiping=!1,this.drag.distance=0,g=f(e).x,h=f(e).y,this.drag.offsetX=this.$stage.position().left,this.drag.offsetY=this.$stage.position().top,this.settings.rtl&&(this.drag.offsetX=this.$stage.position().left+this.$stage.width()-this.width()+this.settings.margin),this.state.inMotion&&this.support3d)i=this.getTransformProperty(),this.drag.offsetX=i,this.animate(i),this.state.inMotion=!0;else if(this.state.inMotion&&!this.support3d)return this.state.inMotion=!1,!1;this.drag.startX=g-this.drag.offsetX,this.drag.startY=h-this.drag.offsetY,this.drag.start=g-this.drag.startX,this.drag.targetEl=e.target||e.srcElement,this.drag.updatedX=this.drag.start,(\"IMG\"===this.drag.targetEl.tagName||\"A\"===this.drag.targetEl.tagName)&&(this.drag.targetEl.draggable=!1),a(c).on(\"mousemove.owl.dragEvents mouseup.owl.dragEvents touchmove.owl.dragEvents touchend.owl.dragEvents\",a.proxy(function(a){this.eventsRouter(a)},this))},e.prototype.onDragMove=function(a){var c,e,g,h,i,j;this.state.isTouch&&(this.state.isScrolling||(c=a.originalEvent||a||b.event,e=f(c).x,g=f(c).y,this.drag.currentX=e-this.drag.startX,this.drag.currentY=g-this.drag.startY,this.drag.distance=this.drag.currentX-this.drag.offsetX,this.drag.distance<0?this.state.direction=this.settings.rtl?\"right\":\"left\":this.drag.distance>0&&(this.state.direction=this.settings.rtl?\"left\":\"right\"),this.settings.loop?this.op(this.drag.currentX,\">\",this.coordinates(this.minimum()))&&\"right\"===this.state.direction?this.drag.currentX-=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length):this.op(this.drag.currentX,\"<\",this.coordinates(this.maximum()))&&\"left\"===this.state.direction&&(this.drag.currentX+=(this.settings.center&&this.coordinates(0))-this.coordinates(this._items.length)):(h=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),i=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),j=this.settings.pullDrag?this.drag.distance/5:0,this.drag.currentX=Math.max(Math.min(this.drag.currentX,h+j),i+j)),(this.drag.distance>8||this.drag.distance<-8)&&(c.preventDefault!==d?c.preventDefault():c.returnValue=!1,this.state.isSwiping=!0),this.drag.updatedX=this.drag.currentX,(this.drag.currentY>16||this.drag.currentY<-16)&&this.state.isSwiping===!1&&(this.state.isScrolling=!0,this.drag.updatedX=this.drag.start),this.animate(this.drag.updatedX)))},e.prototype.onDragEnd=function(b){var d,e,f;if(this.state.isTouch){if(\"mouseup\"===b.type&&this.$stage.removeClass(\"owl-grab\"),this.trigger(\"dragged\"),this.drag.targetEl.removeAttribute(\"draggable\"),this.state.isTouch=!1,this.state.isScrolling=!1,this.state.isSwiping=!1,0===this.drag.distance&&this.state.inMotion!==!0)return this.state.inMotion=!1,!1;this.drag.endTime=(new Date).getTime(),d=this.drag.endTime-this.drag.startTime,e=Math.abs(this.drag.distance),(e>3||d>300)&&this.removeClick(this.drag.targetEl),f=this.closest(this.drag.updatedX),this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(f),this.invalidate(\"position\"),this.update(),this.settings.pullDrag||this.drag.updatedX!==this.coordinates(f)||this.transitionEnd(),this.drag.distance=0,a(c).off(\".owl.dragEvents\")}},e.prototype.removeClick=function(c){this.drag.targetEl=c,a(c).on(\"click.preventClick\",this.e._preventClick),b.setTimeout(function(){a(c).off(\"click.preventClick\")},300)},e.prototype.preventClick=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation&&b.stopPropagation(),a(b.target).off(\"click.preventClick\")},e.prototype.getTransformProperty=function(){var a,c;return a=b.getComputedStyle(this.$stage.get(0),null).getPropertyValue(this.vendorName+\"transform\"),a=a.replace(/matrix(3d)?\\(|\\)/g,\"\").split(\",\"),c=16===a.length,c!==!0?a[4]:a[12]},e.prototype.closest=function(b){var c=-1,d=30,e=this.width(),f=this.coordinates();return this.settings.freeDrag||a.each(f,a.proxy(function(a,g){return b>g-d&&g+d>b?c=a:this.op(b,\"<\",g)&&this.op(b,\">\",f[a+1]||g-e)&&(c=\"left\"===this.state.direction?a+1:a),-1===c},this)),this.settings.loop||(this.op(b,\">\",f[this.minimum()])?c=b=this.minimum():this.op(b,\"<\",f[this.maximum()])&&(c=b=this.maximum())),c},e.prototype.animate=function(b){this.trigger(\"translate\"),this.state.inMotion=this.speed()>0,this.support3d?this.$stage.css({transform:\"translate3d(\"+b+\"px,0px, 0px)\",transition:this.speed()/1e3+\"s\"}):this.state.isTouch?this.$stage.css({left:b+\"px\"}):this.$stage.animate({left:b},this.speed()/1e3,this.settings.fallbackEasing,a.proxy(function(){this.state.inMotion&&this.transitionEnd()},this))},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger(\"change\",{property:{name:\"position\",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate(\"position\"),this.trigger(\"changed\",{property:{name:\"position\",value:this._current}})}return this._current},e.prototype.invalidate=function(a){this._invalidated[a]=!0},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress([\"translate\",\"translated\"]),this.animate(this.coordinates(a)),this.release([\"translate\",\"translated\"]))},e.prototype.normalize=function(b,c){var e=c?this._items.length:this._items.length+this._clones.length;return!a.isNumeric(b)||1>e?d:b=this._clones.length?(b%e+e)%e:Math.max(this.minimum(c),Math.min(this.maximum(c),b))},e.prototype.relative=function(a){return a=this.normalize(a),a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=0,f=this.settings;if(a)return this._items.length-1;if(!f.loop&&f.center)b=this._items.length-1;else if(f.loop||f.center)if(f.loop||f.center)b=this._items.length+f.items;else{if(!f.autoWidth&&!f.merge)throw\"Can not detect maximum absolute position.\";for(revert=f.rtl?1:-1,c=this.$stage.width()-this.$element.width();(d=this.coordinates(e))&&!(d*revert>=c);)b=++e}else b=this._items.length-f.items;return b},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c=null;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[b-1]||0))/2*(this.settings.rtl?-1:1)):c=this._coordinates[b-1]||0,c)},e.prototype.duration=function(a,b,c){return Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(c,d){if(this.settings.loop){var e=c-this.relative(this.current()),f=this.current(),g=this.current(),h=this.current()+e,i=0>g-h?!0:!1,j=this._clones.length+this._items.length;h<this.settings.items&&i===!1?(f=g+this._items.length,this.reset(f)):h>=j-this.settings.items&&i===!0&&(f=g-this._items.length,this.reset(f)),b.clearTimeout(this.e._goToLoop),this.e._goToLoop=b.setTimeout(a.proxy(function(){this.speed(this.duration(this.current(),f+e,d)),this.current(f+e),this.update()},this),30)}else this.speed(this.duration(this.current(),c,d)),this.current(c),this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.transitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.state.inMotion=!1,void this.trigger(\"translated\"))},e.prototype.viewport=function(){var d;if(this.options.responsiveBaseElement!==b)d=a(this.options.responsiveBaseElement).width();else if(b.innerWidth)d=b.innerWidth;else{if(!c.documentElement||!c.documentElement.clientWidth)throw\"Can not detect viewport width.\";d=c.documentElement.clientWidth}return d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find(\".\"+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find(\"[data-merge]\").andSelf(\"[data-merge]\").attr(\"data-merge\")||1)},this)),this.reset(a.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate(\"items\")},e.prototype.add=function(a,b){b=b===d?this._items.length:this.normalize(b,!0),this.trigger(\"add\",{content:a,position:b}),0===this._items.length||b===this._items.length?(this.$stage.append(a),this._items.push(a),this._mergers.push(1*a.find(\"[data-merge]\").andSelf(\"[data-merge]\").attr(\"data-merge\")||1)):(this._items[b].before(a),this._items.splice(b,0,a),this._mergers.splice(b,0,1*a.find(\"[data-merge]\").andSelf(\"[data-merge]\").attr(\"data-merge\")||1)),this.invalidate(\"items\"),this.trigger(\"added\",{content:a,position:b})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger(\"remove\",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate(\"items\"),this.trigger(\"removed\",{content:null,position:a}))},e.prototype.addTriggerableEvents=function(){var b=a.proxy(function(b,c){return a.proxy(function(a){a.relatedTarget!==this&&(this.suppress([c]),b.apply(this,[].slice.call(arguments,1)),this.release([c]))},this)},this);a.each({next:this.next,prev:this.prev,to:this.to,destroy:this.destroy,refresh:this.refresh,replace:this.replace,add:this.add,remove:this.remove},a.proxy(function(a,c){this.$element.on(a+\".owl.carousel\",b(c,a+\".owl.carousel\"))},this))},e.prototype.watchVisibility=function(){function c(a){return a.offsetWidth>0&&a.offsetHeight>0}function d(){c(this.$element.get(0))&&(this.$element.removeClass(\"owl-hidden\"),this.refresh(),b.clearInterval(this.e._checkVisibile))}c(this.$element.get(0))||(this.$element.addClass(\"owl-hidden\"),b.clearInterval(this.e._checkVisibile),this.e._checkVisibile=b.setInterval(a.proxy(d,this),500))},e.prototype.preloadAutoWidthImages=function(b){var c,d,e,f;c=0,d=this,b.each(function(g,h){e=a(h),f=new Image,f.onload=function(){c++,e.attr(\"src\",f.src),e.css(\"opacity\",1),c>=b.length&&(d.state.imagesLoaded=!0,d.initialize())},f.src=e.attr(\"src\")||e.attr(\"data-src\")||e.attr(\"data-src-retina\")})},e.prototype.destroy=function(){this.$element.hasClass(this.settings.themeClass)&&this.$element.removeClass(this.settings.themeClass),this.settings.responsive!==!1&&a(b).off(\"resize.owl.carousel\"),this.transitionEndVendor&&this.off(this.$stage.get(0),this.transitionEndVendor,this.e._transitionEnd);for(var d in this._plugins)this._plugins[d].destroy();(this.settings.mouseDrag||this.settings.touchDrag)&&(this.$stage.off(\"mousedown touchstart touchcancel\"),a(c).off(\".owl.dragEvents\"),this.$stage.get(0).onselectstart=function(){},this.$stage.off(\"dragstart\",function(){return!1})),this.$element.off(\".owl\"),this.$stage.children(\".cloned\").remove(),this.e=null,this.$element.removeData(\"owlCarousel\"),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$stage.unwrap()},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case\"<\":return d?a>c:c>a;case\">\":return d?c>a:a>c;case\">=\":return d?c>=a:a>=c;case\"<=\":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent(\"on\"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent(\"on\"+b,c)},e.prototype.trigger=function(b,c,d){var e={item:{count:this._items.length,index:this.current()}},f=a.camelCase(a.grep([\"on\",b,d],function(a){return a}).join(\"-\").toLowerCase()),g=a.Event([b,\"owl\",d||\"carousel\"].join(\".\").toLowerCase(),a.extend({relatedTarget:this},e,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(g)}),this.$element.trigger(g),this.settings&&\"function\"==typeof this.settings[f]&&this.settings[f].apply(this,g)),g},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.browserSupport=function(){if(this.support3d=j(),this.support3d){this.transformVendor=i();var a=[\"transitionend\",\"webkitTransitionEnd\",\"transitionend\",\"oTransitionEnd\"];this.transitionEndVendor=a[h()],this.vendorName=this.transformVendor.replace(/Transform/i,\"\"),this.vendorName=\"\"!==this.vendorName?\"-\"+this.vendorName.toLowerCase()+\"-\":\"\"}this.state.orientation=b.orientation},a.fn.owlCarousel=function(b){return this.each(function(){a(this).data(\"owlCarousel\")||a(this).data(\"owlCarousel\",new e(this,b))})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b){var c=function(b){this._core=b,this._loaded=[],this._handlers={\"initialized.owl.carousel change.owl.carousel\":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&\"position\"==b.property.name||\"initialized\"==b.type))for(var c=this._core.settings,d=c.center&&Math.ceil(c.items/2)||c.items,e=c.center&&-1*d||0,f=(b.property&&b.property.value||this._core.current())+e,g=this._core.clones().length,h=a.proxy(function(a,b){this.load(b)},this);e++<d;)this.load(g/2+this._core.relative(f)),g&&a.each(this._core.clones(this._core.relative(f++)),h)},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this._core.$element.on(this._handlers)};c.Defaults={lazyLoad:!1},c.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(\".owl-lazy\");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr(\"data-src-retina\")||f.attr(\"data-src\");this._core.trigger(\"load\",{element:f,url:g},\"lazy\"),f.is(\"img\")?f.one(\"load.owl.lazy\",a.proxy(function(){f.css(\"opacity\",1),this._core.trigger(\"loaded\",{element:f,url:g},\"lazy\")},this)).attr(\"src\",g):(e=new Image,e.onload=a.proxy(function(){f.css({\"background-image\":\"url(\"+g+\")\",opacity:\"1\"}),this._core.trigger(\"loaded\",{element:f,url:g},\"lazy\")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},c.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=c}(window.Zepto||window.jQuery,window,document),function(a){var b=function(c){this._core=c,this._handlers={\"initialized.owl.carousel\":a.proxy(function(){this._core.settings.autoHeight&&this.update()},this),\"changed.owl.carousel\":a.proxy(function(a){this._core.settings.autoHeight&&\"position\"==a.property.name&&this.update()},this),\"loaded.owl.lazy\":a.proxy(function(a){this._core.settings.autoHeight&&a.element.closest(\".\"+this._core.settings.itemClass)===this._core.$stage.children().eq(this._core.current())&&this.update()},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this._core.$element.on(this._handlers)};b.Defaults={autoHeight:!1,autoHeightClass:\"owl-height\"},b.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},b.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=b}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this._core=b,this._videos={},this._playing=null,this._fullscreen=!1,this._handlers={\"resize.owl.carousel\":a.proxy(function(a){this._core.settings.video&&!this.isInFullScreen()&&a.preventDefault()},this),\"refresh.owl.carousel changed.owl.carousel\":a.proxy(function(){this._playing&&this.stop()},this),\"prepared.owl.carousel\":a.proxy(function(b){var c=a(b.content).find(\".owl-video\");c.length&&(c.css(\"display\",\"none\"),this.fetch(c,a(b.content)))},this)},this._core.options=a.extend({},d.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on(\"click.owl.video\",\".owl-video-play-icon\",a.proxy(function(a){this.play(a)},this))};d.Defaults={video:!1,videoHeight:!1,videoWidth:!1},d.prototype.fetch=function(a,b){var c=a.attr(\"data-vimeo-id\")?\"vimeo\":\"youtube\",d=a.attr(\"data-vimeo-id\")||a.attr(\"data-youtube-id\"),e=a.attr(\"data-width\")||this._core.settings.videoWidth,f=a.attr(\"data-height\")||this._core.settings.videoHeight,g=a.attr(\"href\");if(!g)throw new Error(\"Missing video URL.\");if(d=g.match(/(http:|https:|)\\/\\/(player.|www.)?(vimeo\\.com|youtu(be\\.com|\\.be|be\\.googleapis\\.com))\\/(video\\/|embed\\/|watch\\?v=|v\\/)?([A-Za-z0-9._%-]*)(\\&\\S+)?/),d[3].indexOf(\"youtu\")>-1)c=\"youtube\";else{if(!(d[3].indexOf(\"vimeo\")>-1))throw new Error(\"Video URL not supported.\");c=\"vimeo\"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr(\"data-video\",g),this.thumbnail(a,this._videos[g])},d.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style=\"width:'+c.width+\"px;height:\"+c.height+'px;\"':\"\",h=b.find(\"img\"),i=\"src\",j=\"\",k=this._core.settings,l=function(a){e='<div class=\"owl-video-play-icon\"></div>',d=k.lazyLoad?'<div class=\"owl-video-tn '+j+'\" '+i+'=\"'+a+'\"></div>':'<div class=\"owl-video-tn\" style=\"opacity:1;background-image:url('+a+')\"></div>',b.after(d),b.after(e)};return b.wrap('<div class=\"owl-video-wrapper\"'+g+\"></div>\"),this._core.settings.lazyLoad&&(i=\"data-src\",j=\"owl-lazy\"),h.length?(l(h.attr(i)),h.remove(),!1):void(\"youtube\"===c.type?(f=\"http://img.youtube.com/vi/\"+c.id+\"/hqdefault.jpg\",l(f)):\"vimeo\"===c.type&&a.ajax({type:\"GET\",url:\"http://vimeo.com/api/v2/video/\"+c.id+\".json\",jsonp:\"callback\",dataType:\"jsonp\",success:function(a){f=a[0].thumbnail_large,l(f)}}))},d.prototype.stop=function(){this._core.trigger(\"stop\",null,\"video\"),this._playing.find(\".owl-video-frame\").remove(),this._playing.removeClass(\"owl-video-playing\"),this._playing=null},d.prototype.play=function(b){this._core.trigger(\"play\",null,\"video\"),this._playing&&this.stop();var c,d,e=a(b.target||b.srcElement),f=e.closest(\".\"+this._core.settings.itemClass),g=this._videos[f.attr(\"data-video\")],h=g.width||\"100%\",i=g.height||this._core.$stage.height();\"youtube\"===g.type?c='<iframe width=\"'+h+'\" height=\"'+i+'\" src=\"http://www.youtube.com/embed/'+g.id+\"?autoplay=1&v=\"+g.id+'\" frameborder=\"0\" allowfullscreen></iframe>':\"vimeo\"===g.type&&(c='<iframe src=\"http://player.vimeo.com/video/'+g.id+'?autoplay=1\" width=\"'+h+'\" height=\"'+i+'\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),f.addClass(\"owl-video-playing\"),this._playing=f,d=a('<div style=\"height:'+i+\"px; width:\"+h+'px\" class=\"owl-video-frame\">'+c+\"</div>\"),e.after(d)},d.prototype.isInFullScreen=function(){var d=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return d&&a(d).parent().hasClass(\"owl-video-frame\")&&(this._core.speed(0),this._fullscreen=!0),d&&this._fullscreen&&this._playing?!1:this._fullscreen?(this._fullscreen=!1,!1):this._playing&&this._core.state.orientation!==b.orientation?(this._core.state.orientation=b.orientation,!1):!0},d.prototype.destroy=function(){var a,b;this._core.$element.off(\"click.owl.video\");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=d}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={\"change.owl.carousel\":a.proxy(function(a){\"position\"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),\"drag.owl.carousel dragged.owl.carousel translated.owl.carousel\":a.proxy(function(a){this.swapping=\"translated\"==a.type},this),\"translate.owl.carousel\":a.proxy(function(){this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&this.core.support3d){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.css({left:b+\"px\"}).addClass(\"animated owl-animated-out\").addClass(g).one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\",c)),f&&e.addClass(\"animated owl-animated-in\").addClass(f).one(\"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend\",c))}},e.prototype.clear=function(b){a(b.target).css({left:\"\"}).removeClass(\"animated owl-animated-out owl-animated-in\").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.transitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))\"function\"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c){var d=function(b){this.core=b,this.core.options=a.extend({},d.Defaults,this.core.options),this.handlers={\"translated.owl.carousel refreshed.owl.carousel\":a.proxy(function(){this.autoplay()\n},this),\"play.owl.autoplay\":a.proxy(function(a,b,c){this.play(b,c)},this),\"stop.owl.autoplay\":a.proxy(function(){this.stop()},this),\"mouseover.owl.autoplay\":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.pause()},this),\"mouseleave.owl.autoplay\":a.proxy(function(){this.core.settings.autoplayHoverPause&&this.autoplay()},this)},this.core.$element.on(this.handlers)};d.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},d.prototype.autoplay=function(){this.core.settings.autoplay&&!this.core.state.videoPlay?(b.clearInterval(this.interval),this.interval=b.setInterval(a.proxy(function(){this.play()},this),this.core.settings.autoplayTimeout)):b.clearInterval(this.interval)},d.prototype.play=function(){return c.hidden===!0||this.core.state.isTouch||this.core.state.isScrolling||this.core.state.isSwiping||this.core.state.inMotion?void 0:this.core.settings.autoplay===!1?void b.clearInterval(this.interval):void this.core.next(this.core.settings.autoplaySpeed)},d.prototype.stop=function(){b.clearInterval(this.interval)},d.prototype.pause=function(){b.clearInterval(this.interval)},d.prototype.destroy=function(){var a,c;b.clearInterval(this.interval);for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(c in Object.getOwnPropertyNames(this))\"function\"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=d}(window.Zepto||window.jQuery,window,document),function(a){\"use strict\";var b=function(c){this._core=c,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={\"prepared.owl.carousel\":a.proxy(function(b){this._core.settings.dotsData&&this._templates.push(a(b.content).find(\"[data-dot]\").andSelf(\"[data-dot]\").attr(\"data-dot\"))},this),\"add.owl.carousel\":a.proxy(function(b){this._core.settings.dotsData&&this._templates.splice(b.position,0,a(b.content).find(\"[data-dot]\").andSelf(\"[data-dot]\").attr(\"data-dot\"))},this),\"remove.owl.carousel prepared.owl.carousel\":a.proxy(function(a){this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),\"change.owl.carousel\":a.proxy(function(a){if(\"position\"==a.property.name&&!this._core.state.revert&&!this._core.settings.loop&&this._core.settings.navRewind){var b=this._core.current(),c=this._core.maximum(),d=this._core.minimum();a.data=a.property.value>c?b>=c?d:c:a.property.value<d?c:a.property.value}},this),\"changed.owl.carousel\":a.proxy(function(a){\"position\"==a.property.name&&this.draw()},this),\"refreshed.owl.carousel\":a.proxy(function(){this._initialized||(this.initialize(),this._initialized=!0),this._core.trigger(\"refresh\",null,\"navigation\"),this.update(),this.draw(),this._core.trigger(\"refreshed\",null,\"navigation\")},this)},this._core.options=a.extend({},b.Defaults,this._core.options),this.$element.on(this._handlers)};b.Defaults={nav:!1,navRewind:!0,navText:[\"prev\",\"next\"],navSpeed:!1,navElement:\"div\",navContainer:!1,navContainerClass:\"owl-nav\",navClass:[\"owl-prev\",\"owl-next\"],slideBy:1,dotClass:\"owl-dot\",dotsClass:\"owl-dots\",dots:!0,dotsEach:!1,dotData:!1,dotsSpeed:!1,dotsContainer:!1,controlsClass:\"owl-controls\"},b.prototype.initialize=function(){var b,c,d=this._core.settings;d.dotsData||(this._templates=[a(\"<div>\").addClass(d.dotClass).append(a(\"<span>\")).prop(\"outerHTML\")]),d.navContainer&&d.dotsContainer||(this._controls.$container=a(\"<div>\").addClass(d.controlsClass).appendTo(this.$element)),this._controls.$indicators=d.dotsContainer?a(d.dotsContainer):a(\"<div>\").hide().addClass(d.dotsClass).appendTo(this._controls.$container),this._controls.$indicators.on(\"click\",\"div\",a.proxy(function(b){var c=a(b.target).parent().is(this._controls.$indicators)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(c,d.dotsSpeed)},this)),b=d.navContainer?a(d.navContainer):a(\"<div>\").addClass(d.navContainerClass).prependTo(this._controls.$container),this._controls.$next=a(\"<\"+d.navElement+\">\"),this._controls.$previous=this._controls.$next.clone(),this._controls.$previous.addClass(d.navClass[0]).html(d.navText[0]).hide().prependTo(b).on(\"click\",a.proxy(function(){this.prev(d.navSpeed)},this)),this._controls.$next.addClass(d.navClass[1]).html(d.navText[1]).hide().appendTo(b).on(\"click\",a.proxy(function(){this.next(d.navSpeed)},this));for(c in this._overrides)this._core[c]=a.proxy(this[c],this)},b.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))\"function\"!=typeof this[c]&&(this[c]=null)},b.prototype.update=function(){var a,b,c,d=this._core.settings,e=this._core.clones().length/2,f=e+this._core.items().length,g=d.center||d.autoWidth||d.dotData?1:d.dotsEach||d.items;if(\"page\"!==d.slideBy&&(d.slideBy=Math.min(d.slideBy,d.items)),d.dots||\"page\"==d.slideBy)for(this._pages=[],a=e,b=0,c=0;f>a;a++)(b>=g||0===b)&&(this._pages.push({start:a-e,end:a-e+g-1}),b=0,++c),b+=this._core.mergers(this._core.relative(a))},b.prototype.draw=function(){var b,c,d=\"\",e=this._core.settings,f=(this._core.$stage.children(),this._core.relative(this._core.current()));if(!e.nav||e.loop||e.navRewind||(this._controls.$previous.toggleClass(\"disabled\",0>=f),this._controls.$next.toggleClass(\"disabled\",f>=this._core.maximum())),this._controls.$previous.toggle(e.nav),this._controls.$next.toggle(e.nav),e.dots){if(b=this._pages.length-this._controls.$indicators.children().length,e.dotData&&0!==b){for(c=0;c<this._controls.$indicators.children().length;c++)d+=this._templates[this._core.relative(c)];this._controls.$indicators.html(d)}else b>0?(d=new Array(b+1).join(this._templates[0]),this._controls.$indicators.append(d)):0>b&&this._controls.$indicators.children().slice(b).remove();this._controls.$indicators.find(\".active\").removeClass(\"active\"),this._controls.$indicators.children().eq(a.inArray(this.current(),this._pages)).addClass(\"active\")}this._controls.$indicators.toggle(e.dots)},b.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotData?1:c.dotsEach||c.items)}},b.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,function(a){return a.start<=b&&a.end>=b}).pop()},b.prototype.getPosition=function(b){var c,d,e=this._core.settings;return\"page\"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},b.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},b.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},b.prototype.to=function(b,c,d){var e;d?a.proxy(this._overrides.to,this._core)(b,c):(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c))},a.fn.owlCarousel.Constructor.Plugins.Navigation=b}(window.Zepto||window.jQuery,window,document),function(a,b){\"use strict\";var c=function(d){this._core=d,this._hashes={},this.$element=this._core.$element,this._handlers={\"initialized.owl.carousel\":a.proxy(function(){\"URLHash\"==this._core.settings.startPosition&&a(b).trigger(\"hashchange.owl.navigation\")},this),\"prepared.owl.carousel\":a.proxy(function(b){var c=a(b.content).find(\"[data-hash]\").andSelf(\"[data-hash]\").attr(\"data-hash\");this._hashes[c]=b.content},this)},this._core.options=a.extend({},c.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on(\"hashchange.owl.navigation\",a.proxy(function(){var a=b.location.hash.substring(1),c=this._core.$stage.children(),d=this._hashes[a]&&c.index(this._hashes[a])||0;return a?void this._core.to(d,!1,!0):!1},this))};c.Defaults={URLhashListener:!1},c.prototype.destroy=function(){var c,d;a(b).off(\"hashchange.owl.navigation\");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))\"function\"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=c}(window.Zepto||window.jQuery,window,document);","js/jquery.stellar.min.js":"/*! Stellar.js v0.6.2 | Copyright 2014, Mark Dalgleish | http://markdalgleish.com/projects/stellar.js | http://markdalgleish.mit-license.org */\n!function(a,b,c,d){function e(b,c){this.element=b,this.options=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f=\"stellar\",g={scrollProperty:\"scroll\",positionProperty:\"position\",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(a){a.hide()},showElement:function(a){a.show()}},h={scroll:{getLeft:function(a){return a.scrollLeft()},setLeft:function(a,b){a.scrollLeft(b)},getTop:function(a){return a.scrollTop()},setTop:function(a,b){a.scrollTop(b)}},position:{getLeft:function(a){return-1*parseInt(a.css(\"left\"),10)},getTop:function(a){return-1*parseInt(a.css(\"top\"),10)}},margin:{getLeft:function(a){return-1*parseInt(a.css(\"margin-left\"),10)},getTop:function(a){return-1*parseInt(a.css(\"margin-top\"),10)}},transform:{getLeft:function(a){var b=getComputedStyle(a[0])[k];return\"none\"!==b?-1*parseInt(b.match(/(-?[0-9]+)/g)[4],10):0},getTop:function(a){var b=getComputedStyle(a[0])[k];return\"none\"!==b?-1*parseInt(b.match(/(-?[0-9]+)/g)[5],10):0}}},i={position:{setLeft:function(a,b){a.css(\"left\",b)},setTop:function(a,b){a.css(\"top\",b)}},transform:{setPosition:function(a,b,c,d,e){a[0].style[k]=\"translate3d(\"+(b-c)+\"px, \"+(d-e)+\"px, 0)\"}}},j=function(){var b,c=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,d=a(\"script\")[0].style,e=\"\";for(b in d)if(c.test(b)){e=b.match(c)[0];break}return\"WebkitOpacity\"in d&&(e=\"Webkit\"),\"KhtmlOpacity\"in d&&(e=\"Khtml\"),function(a){return e+(e.length>0?a.charAt(0).toUpperCase()+a.slice(1):a)}}(),k=j(\"transform\"),l=a(\"<div />\",{style:\"background:#fff\"}).css(\"background-position-x\")!==d,m=l?function(a,b,c){a.css({\"background-position-x\":b,\"background-position-y\":c})}:function(a,b,c){a.css(\"background-position\",b+\" \"+c)},n=l?function(a){return[a.css(\"background-position-x\"),a.css(\"background-position-y\")]}:function(a){return a.css(\"background-position\").split(\" \")},o=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)};e.prototype={init:function(){this.options.name=f+\"_\"+Math.floor(1e9*Math.random()),this._defineElements(),this._defineGetters(),this._defineSetters(),this._handleWindowLoadAndResize(),this._detectViewport(),this.refresh({firstLoad:!0}),\"scroll\"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===c.body&&(this.element=b),this.$scrollElement=a(this.element),this.$element=this.element===b?a(\"body\"):this.$scrollElement,this.$viewportElement=this.options.viewportElement!==d?a(this.options.viewportElement):this.$scrollElement[0]===b||\"scroll\"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var a=this,b=h[a.options.scrollProperty];this._getScrollLeft=function(){return b.getLeft(a.$scrollElement)},this._getScrollTop=function(){return b.getTop(a.$scrollElement)}},_defineSetters:function(){var b=this,c=h[b.options.scrollProperty],d=i[b.options.positionProperty],e=c.setLeft,f=c.setTop;this._setScrollLeft=\"function\"==typeof e?function(a){e(b.$scrollElement,a)}:a.noop,this._setScrollTop=\"function\"==typeof f?function(a){f(b.$scrollElement,a)}:a.noop,this._setPosition=d.setPosition||function(a,c,e,f,g){b.options.horizontalScrolling&&d.setLeft(a,c,e),b.options.verticalScrolling&&d.setTop(a,f,g)}},_handleWindowLoadAndResize:function(){var c=this,d=a(b);c.options.responsive&&d.bind(\"load.\"+this.name,function(){c.refresh()}),d.bind(\"resize.\"+this.name,function(){c._detectViewport(),c.options.responsive&&c.refresh()})},refresh:function(c){var d=this,e=d._getScrollLeft(),f=d._getScrollTop();c&&c.firstLoad||this._reset(),this._setScrollLeft(0),this._setScrollTop(0),this._setOffsets(),this._findParticles(),this._findBackgrounds(),c&&c.firstLoad&&/WebKit/.test(navigator.userAgent)&&a(b).load(function(){var a=d._getScrollLeft(),b=d._getScrollTop();d._setScrollLeft(a+1),d._setScrollTop(b+1),d._setScrollLeft(a),d._setScrollTop(b)}),this._setScrollLeft(e),this._setScrollTop(f)},_detectViewport:function(){var a=this.$viewportElement.offset(),b=null!==a&&a!==d;this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.viewportOffsetTop=b?a.top:0,this.viewportOffsetLeft=b?a.left:0},_findParticles:function(){{var b=this;this._getScrollLeft(),this._getScrollTop()}if(this.particles!==d)for(var c=this.particles.length-1;c>=0;c--)this.particles[c].$element.data(\"stellar-elementIsActive\",d);this.particles=[],this.options.parallaxElements&&this.$element.find(\"[data-stellar-ratio]\").each(function(){var c,e,f,g,h,i,j,k,l,m=a(this),n=0,o=0,p=0,q=0;if(m.data(\"stellar-elementIsActive\")){if(m.data(\"stellar-elementIsActive\")!==this)return}else m.data(\"stellar-elementIsActive\",this);b.options.showElement(m),m.data(\"stellar-startingLeft\")?(m.css(\"left\",m.data(\"stellar-startingLeft\")),m.css(\"top\",m.data(\"stellar-startingTop\"))):(m.data(\"stellar-startingLeft\",m.css(\"left\")),m.data(\"stellar-startingTop\",m.css(\"top\"))),f=m.position().left,g=m.position().top,h=\"auto\"===m.css(\"margin-left\")?0:parseInt(m.css(\"margin-left\"),10),i=\"auto\"===m.css(\"margin-top\")?0:parseInt(m.css(\"margin-top\"),10),k=m.offset().left-h,l=m.offset().top-i,m.parents().each(function(){var b=a(this);return b.data(\"stellar-offset-parent\")===!0?(n=p,o=q,j=b,!1):(p+=b.position().left,void(q+=b.position().top))}),c=m.data(\"stellar-horizontal-offset\")!==d?m.data(\"stellar-horizontal-offset\"):j!==d&&j.data(\"stellar-horizontal-offset\")!==d?j.data(\"stellar-horizontal-offset\"):b.horizontalOffset,e=m.data(\"stellar-vertical-offset\")!==d?m.data(\"stellar-vertical-offset\"):j!==d&&j.data(\"stellar-vertical-offset\")!==d?j.data(\"stellar-vertical-offset\"):b.verticalOffset,b.particles.push({$element:m,$offsetParent:j,isFixed:\"fixed\"===m.css(\"position\"),horizontalOffset:c,verticalOffset:e,startingPositionLeft:f,startingPositionTop:g,startingOffsetLeft:k,startingOffsetTop:l,parentOffsetLeft:n,parentOffsetTop:o,stellarRatio:m.data(\"stellar-ratio\")!==d?m.data(\"stellar-ratio\"):1,width:m.outerWidth(!0),height:m.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var b,c=this,e=this._getScrollLeft(),f=this._getScrollTop();this.backgrounds=[],this.options.parallaxBackgrounds&&(b=this.$element.find(\"[data-stellar-background-ratio]\"),this.$element.data(\"stellar-background-ratio\")&&(b=b.add(this.$element)),b.each(function(){var b,g,h,i,j,k,l,o=a(this),p=n(o),q=0,r=0,s=0,t=0;if(o.data(\"stellar-backgroundIsActive\")){if(o.data(\"stellar-backgroundIsActive\")!==this)return}else o.data(\"stellar-backgroundIsActive\",this);o.data(\"stellar-backgroundStartingLeft\")?m(o,o.data(\"stellar-backgroundStartingLeft\"),o.data(\"stellar-backgroundStartingTop\")):(o.data(\"stellar-backgroundStartingLeft\",p[0]),o.data(\"stellar-backgroundStartingTop\",p[1])),h=\"auto\"===o.css(\"margin-left\")?0:parseInt(o.css(\"margin-left\"),10),i=\"auto\"===o.css(\"margin-top\")?0:parseInt(o.css(\"margin-top\"),10),j=o.offset().left-h-e,k=o.offset().top-i-f,o.parents().each(function(){var b=a(this);return b.data(\"stellar-offset-parent\")===!0?(q=s,r=t,l=b,!1):(s+=b.position().left,void(t+=b.position().top))}),b=o.data(\"stellar-horizontal-offset\")!==d?o.data(\"stellar-horizontal-offset\"):l!==d&&l.data(\"stellar-horizontal-offset\")!==d?l.data(\"stellar-horizontal-offset\"):c.horizontalOffset,g=o.data(\"stellar-vertical-offset\")!==d?o.data(\"stellar-vertical-offset\"):l!==d&&l.data(\"stellar-vertical-offset\")!==d?l.data(\"stellar-vertical-offset\"):c.verticalOffset,c.backgrounds.push({$element:o,$offsetParent:l,isFixed:\"fixed\"===o.css(\"background-attachment\"),horizontalOffset:b,verticalOffset:g,startingValueLeft:p[0],startingValueTop:p[1],startingBackgroundPositionLeft:isNaN(parseInt(p[0],10))?0:parseInt(p[0],10),startingBackgroundPositionTop:isNaN(parseInt(p[1],10))?0:parseInt(p[1],10),startingPositionLeft:o.position().left,startingPositionTop:o.position().top,startingOffsetLeft:j,startingOffsetTop:k,parentOffsetLeft:q,parentOffsetTop:r,stellarRatio:o.data(\"stellar-background-ratio\")===d?1:o.data(\"stellar-background-ratio\")})}))},_reset:function(){var a,b,c,d,e;for(e=this.particles.length-1;e>=0;e--)a=this.particles[e],b=a.$element.data(\"stellar-startingLeft\"),c=a.$element.data(\"stellar-startingTop\"),this._setPosition(a.$element,b,b,c,c),this.options.showElement(a.$element),a.$element.data(\"stellar-startingLeft\",null).data(\"stellar-elementIsActive\",null).data(\"stellar-backgroundIsActive\",null);for(e=this.backgrounds.length-1;e>=0;e--)d=this.backgrounds[e],d.$element.data(\"stellar-backgroundStartingLeft\",null).data(\"stellar-backgroundStartingTop\",null),m(d.$element,d.startingValueLeft,d.startingValueTop)},destroy:function(){this._reset(),this.$scrollElement.unbind(\"resize.\"+this.name).unbind(\"scroll.\"+this.name),this._animationLoop=a.noop,a(b).unbind(\"load.\"+this.name).unbind(\"resize.\"+this.name)},_setOffsets:function(){var c=this,d=a(b);d.unbind(\"resize.horizontal-\"+this.name).unbind(\"resize.vertical-\"+this.name),\"function\"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(),d.bind(\"resize.horizontal-\"+this.name,function(){c.horizontalOffset=c.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset,\"function\"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(),d.bind(\"resize.vertical-\"+this.name,function(){c.verticalOffset=c.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var a,b,c,d,e,f,g,h,i,j,k=this._getScrollLeft(),l=this._getScrollTop(),n=!0,o=!0;if(this.currentScrollLeft!==k||this.currentScrollTop!==l||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=k,this.currentScrollTop=l,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,j=this.particles.length-1;j>=0;j--)a=this.particles[j],b=a.isFixed?1:0,this.options.horizontalScrolling?(f=(k+a.horizontalOffset+this.viewportOffsetLeft+a.startingPositionLeft-a.startingOffsetLeft+a.parentOffsetLeft)*-(a.stellarRatio+b-1)+a.startingPositionLeft,h=f-a.startingPositionLeft+a.startingOffsetLeft):(f=a.startingPositionLeft,h=a.startingOffsetLeft),this.options.verticalScrolling?(g=(l+a.verticalOffset+this.viewportOffsetTop+a.startingPositionTop-a.startingOffsetTop+a.parentOffsetTop)*-(a.stellarRatio+b-1)+a.startingPositionTop,i=g-a.startingPositionTop+a.startingOffsetTop):(g=a.startingPositionTop,i=a.startingOffsetTop),this.options.hideDistantElements&&(o=!this.options.horizontalScrolling||h+a.width>(a.isFixed?0:k)&&h<(a.isFixed?0:k)+this.viewportWidth+this.viewportOffsetLeft,n=!this.options.verticalScrolling||i+a.height>(a.isFixed?0:l)&&i<(a.isFixed?0:l)+this.viewportHeight+this.viewportOffsetTop),o&&n?(a.isHidden&&(this.options.showElement(a.$element),a.isHidden=!1),this._setPosition(a.$element,f,a.startingPositionLeft,g,a.startingPositionTop)):a.isHidden||(this.options.hideElement(a.$element),a.isHidden=!0);for(j=this.backgrounds.length-1;j>=0;j--)c=this.backgrounds[j],b=c.isFixed?0:1,d=this.options.horizontalScrolling?(k+c.horizontalOffset-this.viewportOffsetLeft-c.startingOffsetLeft+c.parentOffsetLeft-c.startingBackgroundPositionLeft)*(b-c.stellarRatio)+\"px\":c.startingValueLeft,e=this.options.verticalScrolling?(l+c.verticalOffset-this.viewportOffsetTop-c.startingOffsetTop+c.parentOffsetTop-c.startingBackgroundPositionTop)*(b-c.stellarRatio)+\"px\":c.startingValueTop,m(c.$element,d,e)}},_handleScrollEvent:function(){var a=this,b=!1,c=function(){a._repositionElements(),b=!1},d=function(){b||(o(c),b=!0)};this.$scrollElement.bind(\"scroll.\"+this.name,d),d()},_startAnimationLoop:function(){var a=this;this._animationLoop=function(){o(a._animationLoop),a._repositionElements()},this._animationLoop()}},a.fn[f]=function(b){var c=arguments;return b===d||\"object\"==typeof b?this.each(function(){a.data(this,\"plugin_\"+f)||a.data(this,\"plugin_\"+f,new e(this,b))}):\"string\"==typeof b&&\"_\"!==b[0]&&\"init\"!==b?this.each(function(){var d=a.data(this,\"plugin_\"+f);d instanceof e&&\"function\"==typeof d[b]&&d[b].apply(d,Array.prototype.slice.call(c,1)),\"destroy\"===b&&a.data(this,\"plugin_\"+f,null)}):void 0},a[f]=function(){var c=a(b);return c.stellar.apply(c,Array.prototype.slice.call(arguments,0))},a[f].scrollProperty=h,a[f].positionProperty=i,b.Stellar=e}(jQuery,this,document);","fancybox/js/jquery.fancybox.js":"/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */\n(function(r,G,f,v){var J=f(\"html\"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&\"string\"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf(\"%\")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+\"px\"};f.extend(b,{version:\"2.1.5\",defaults:{padding:15,margin:20,\nwidth:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:\"auto\",wrapCSS:\"\",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:\"html\",headers:{\"X-fancyBox\":!0}},iframe:{scrolling:\"auto\",preload:!0},swf:{wmode:\"transparent\",allowfullscreen:\"true\",allowscriptaccess:\"always\"},\nkeys:{next:{13:\"left\",34:\"up\",39:\"left\",40:\"up\"},prev:{8:\"right\",33:\"down\",37:\"right\",38:\"down\"},close:[27],play:[32],toggle:[70]},direction:{next:\"left\",prev:\"right\"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class=\"fancybox-wrap\" tabIndex=\"-1\"><div class=\"fancybox-skin\"><div class=\"fancybox-outer\"><div class=\"fancybox-inner\"></div></div></div></div>',image:'<img class=\"fancybox-image\" src=\"{href}\" alt=\"\" />',iframe:'<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+\n(I?' allowtransparency=\"true\"':\"\")+\"></iframe>\",error:'<p class=\"fancybox-error\">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title=\"Close\" class=\"fancybox-item fancybox-close\" href=\"javascript:;\"></a>',next:'<a title=\"Next\" class=\"fancybox-nav fancybox-next\" href=\"javascript:;\"><span></span></a>',prev:'<a title=\"Previous\" class=\"fancybox-nav fancybox-prev\" href=\"javascript:;\"><span></span></a>'},openEffect:\"fade\",openSpeed:250,openEasing:\"swing\",openOpacity:!0,\nopenMethod:\"zoomIn\",closeEffect:\"fade\",closeSpeed:250,closeEasing:\"swing\",closeOpacity:!0,closeMethod:\"zoomOut\",nextEffect:\"elastic\",nextSpeed:250,nextEasing:\"swing\",nextMethod:\"changeIn\",prevEffect:\"elastic\",prevSpeed:250,prevEasing:\"swing\",prevMethod:\"changeOut\",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,\nisOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;\"object\"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data(\"fancybox-href\")||c.attr(\"href\"),title:c.data(\"fancybox-title\")||c.attr(\"title\"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,\nc.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||\"\";m=(j=d.content||k.content)?\"html\":d.type||k.type;!m&&k.isDom&&(m=c.data(\"fancybox-type\"),m||(m=(m=c.prop(\"class\").match(/fancybox\\.(\\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m=\"image\":b.isSWF(g)?m=\"swf\":\"#\"===g.charAt(0)?m=\"inline\":q(c)&&(m=\"html\",j=c)),\"ajax\"===m&&(l=g.split(/\\s+/,2),g=l.shift(),l=l.shift()));j||(\"inline\"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\\s]+$)/,\"\"):g):k.isDom&&(j=c):\"html\"===m?j=g:!m&&(!g&&\nk.isDom)&&(m=\"inline\",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger(\"onCancel\")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger(\"onReset\").remove(),b.coming=null,b.current||\nb._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger(\"beforeClose\")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(\".fancybox-wrap\").stop(!0).trigger(\"onReset\").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(\".fancybox-item, .fancybox-nav\").remove(),b.wrap.stop(!0,!0).removeClass(\"fancybox-opened\"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=\nsetTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(\".player\");b.player.isActive=!1;b.trigger(\"onPlayEnd\")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({\"onCancel.player beforeClose.player\":c,\"onUpdate.player\":e,\"beforeLoad.player\":d}),e(),b.trigger(\"onPlayStart\")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,\"next\"))},prev:function(a){var d=b.current;\nd&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,\"prev\"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?\"next\":\"prev\"],b.router=e||\"jumpto\",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&\"scroll\"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=\na&&a.type,e=!d||\"orientationchange\"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass(\"fancybox-tmp\"),(e||\"load\"===d||\"resize\"===d&&c.autoResize)&&b._setDimension(),\"scroll\"===d&&c.canShrink||b.reposition(a),b.trigger(\"onUpdate\"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView=\"boolean\"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr(\"style\").addClass(\"fancybox-tmp\"),b.trigger(\"onUpdate\")),\nb.update())},hideLoading:function(){p.unbind(\".loading\");f(\"#fancybox-loading\").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id=\"fancybox-loading\"><i class=\"ajax-loader large animate-spin\"></i></div>').click(b.cancel).appendTo(\"body\");p.bind(\"keydown.loading\",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:\"absolute\",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),\ny:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(\".fb\");p.unbind(\".fb\");n.unbind(\".fb\")},bindEvents:function(){var a=b.current,d;a&&(n.bind(\"orientationchange.fb\"+(s?\"\":\" resize.fb\")+(a.autoCenter&&!a.locked?\" scroll.fb\":\"\"),b.update),(d=a.keys)&&p.bind(\"keydown.fb\",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;\nif(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is(\"[contenteditable]\")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind(\"mousewheel.fb\",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(\".fancybox-skin\")&&!h.is(\".fancybox-wrap\");)j=h[0]&&!(h[0].style.overflow&&\"hidden\"===h[0].style.overflow)&&\n(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?\"down\":\"left\");else if(0>g||0>k)b.next(0>g?\"up\":\"right\");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,\n{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\\/.*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\\.(swf)((\\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;\"number\"===f.type(e)&&(d.margin=[e,e,e,e]);\"number\"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,\nmouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);\"auto\"===d.width&&(d.autoWidth=!0);\"auto\"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger(\"beforeLoad\"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&\"jumpto\"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if(\"image\"===c||\"swf\"===c)d.autoHeight=d.autoWidth=!1,d.scrolling=\"visible\";\"image\"===c&&(d.aspectRatio=\n!0);\"iframe\"===c&&s&&(d.scrolling=\"scroll\");d.wrap=f(d.tpl.wrap).addClass(\"fancybox-\"+(s?\"mobile\":\"desktop\")+\" fancybox-type-\"+c+\" fancybox-tmp \"+d.wrapCSS).appendTo(d.parent||\"body\");f.extend(d,{skin:f(\".fancybox-skin\",d.wrap),outer:f(\".fancybox-outer\",d.wrap),inner:f(\".fancybox-inner\",d.wrap)});f.each([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(a,b){d.skin.css(\"padding\"+b,w(d.padding[a]))});b.trigger(\"onReady\");if(\"inline\"===c||\"html\"===c){if(!d.content||!d.content.length)return b._error(\"content\")}else if(!e)return b._error(\"href\");\n\"image\"===c?b._loadImage():\"ajax\"===c?b._loadAjax():\"iframe\"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:\"html\",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:\"no\",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=\nthis.onerror=null;b._error(\"image\")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&\"abort\"!==e?b._error(\"ajax\",a):b.hideLoading()},success:function(d,e){\"success\"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\\{rnd\\}/g,(new Date).getTime())).attr(\"scrolling\",s?\"auto\":a.iframe.scrolling).attr(\"src\",a.href);\nf(a.wrap).bind(\"onReset\",function(){try{f(this).find(\"iframe\").hide().attr(\"src\",\"//about:blank\").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one(\"load\",function(){f(this).data(\"ready\",1);s||f(this).bind(\"load.fb\",b.update);f(this).parents(\".fancybox-wrap\").width(\"100%\").removeClass(\"fancybox-tmp\").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,\ne-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],\"image\"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger(\"afterLoad\",a,d))a.wrap.stop(!0).trigger(\"onReset\").remove(),b.coming=null;else{d&&(b.trigger(\"beforeChange\",d),d.wrap.stop(!0).removeClass(\"fancybox-opened\").find(\".fancybox-item, .fancybox-nav\").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,\nouter:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case \"inline\":case \"ajax\":case \"html\":a.selector?e=f(\"<div>\").html(e).find(a.selector):t(e)&&(e.data(\"fancybox-placeholder\")||e.data(\"fancybox-placeholder\",f('<div class=\"fancybox-placeholder\"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind(\"onReset\",function(){f(this).find(e).length&&e.hide().replaceAll(e.data(\"fancybox-placeholder\")).data(\"fancybox-placeholder\",!1)}));break;case \"image\":e=a.tpl.image.replace(\"{href}\",\ng);break;case \"swf\":e='<object id=\"fancybox-swf\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\"100%\" height=\"100%\"><param name=\"movie\" value=\"'+g+'\"></param>',h=\"\",f.each(a.swf,function(a,b){e+='<param name=\"'+a+'\" value=\"'+b+'\"></param>';h+=\" \"+a+'=\"'+b+'\"'}),e+='<embed src=\"'+g+'\" type=\"application/x-shockwave-flash\" width=\"100%\" height=\"100%\"'+h+\"></embed></object>\"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger(\"beforeShow\");a.inner.css(\"overflow\",\"yes\"===k?\"scroll\":\n\"no\"===k?\"hidden\":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(\".fancybox-wrap\").not(a.wrap).stop(!0).trigger(\"onReset\").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?\nh.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width(\"auto\").height(\"auto\").removeClass(\"fancybox-tmp\");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if(\"iframe\"===h.type){if(H=h.content,h.autoHeight&&1===H.data(\"ready\"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find(\"body\"),q&&F.css(\"overflow-x\",\"hidden\"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||\nh.autoHeight)g.addClass(\"fancybox-tmp\"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass(\"fancybox-tmp\");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,\"w\")-z:m);n=l(E(n)?l(n,\"w\")-z:n);u=l(E(u)?l(u,\"h\")-t:u);p=l(E(p)?l(p,\"h\")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&\n\"iframe\"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&(\"auto\"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();\ny=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height(\"auto\")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:\"absolute\",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&\n!a&&g<=e.h&&f<=e.w?c.position=\"fixed\":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css(\"overflow\",\"visible\").addClass(\"fancybox-opened\"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css(\"cursor\",\"pointer\").bind(\"click.fb\",function(d){!f(d.target).is(\"a\")&&!f(d.target).parent().is(\"a\")&&(d.preventDefault(),\nb[a.closeClick?\"close\":\"next\"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind(\"click.fb\",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind(\"click.fb\",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind(\"click.fb\",b.next)),b.trigger(\"afterShow\"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=\na||b.current;f(\".fancybox-wrap\").trigger(\"onReset\").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger(\"afterClose\",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(\":visible\"))&&(e=d.find(\"img:first\"),e.length||(e=d));t(e)?(c=e.offset(),e.is(\"img\")&&(f=e.outerWidth(),g=e.outerHeight())):\n(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if(\"fixed\"===b.wrap.css(\"position\")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if(\"width\"===f||\"height\"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c=\"width\"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l(\"width\"===f?c:c-g*e)),b.inner[f](l(\"width\"===\nf?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c=\"elastic\"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):\"fade\"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:\"none\"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e=\"elastic\"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,\n{duration:\"none\"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;\"elastic\"===d&&(g=\"down\"===f||\"up\"===f?\"top\":\"left\",\"down\"===f||\"right\"===f?(e[g]=w(l(e[g])-200),c[g]=\"+=200px\"):(e[g]=w(l(e[g])+200),c[g]=\"-=200px\"));\"none\"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=\nb.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;\"elastic\"===d&&(e[\"down\"===c||\"up\"===c?\"top\":\"left\"]=(\"up\"===c||\"left\"===c?\"-\":\"+\")+\"=200px\");a.wrap.animate(e,{duration:\"none\"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger(\"onReset\").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f(\"html\"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=\nf('<div class=\"fancybox-overlay\"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass(\"fancybox-overlay-fixed\"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(\".overlay\").width(\"auto\").height(\"auto\"):this.create(a);this.fixed||(n.bind(\"resize.overlay\",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind(\"click.overlay\",function(a){if(f(a.target).hasClass(\"fancybox-overlay\"))return b.isActive?\nb.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind(\"resize.overlay\");this.el.hasClass(\"fancybox-lock\")&&(f(\".fancybox-margin\").removeClass(\"fancybox-margin\"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass(\"fancybox-lock\"),n.scrollTop(a).scrollLeft(b));f(\".fancybox-overlay\").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a=\"100%\",b;this.overlay.width(a).height(\"100%\");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),\np.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(\".fancybox-overlay\").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f(\"html\").css(\"margin-right\").replace(\"px\",\"\"):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f(\"*\").filter(function(){return\"fixed\"===\nf(this).css(\"position\")&&!f(this).hasClass(\"fancybox-overlay\")&&!f(this).hasClass(\"fancybox-wrap\")}).addClass(\"fancybox-margin\"),this.el.addClass(\"fancybox-margin\")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass(\"fancybox-lock\"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:\"float\",position:\"bottom\"},beforeShow:function(a){var d=\nb.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&\"\"!==f.trim(e)){d=f('<div class=\"fancybox-title fancybox-title-'+c+'-wrap\">'+e+\"</div>\");switch(c){case \"inside\":c=b.skin;break;case \"outside\":c=b.wrap;break;case \"over\":c=b.inner;break;default:c=b.skin,d.appendTo(\"body\"),I&&d.width(d.width()),d.wrapInner('<span class=\"child\"></span>'),b.current.margin[2]+=Math.abs(l(d.css(\"margin-bottom\")))}d[\"top\"===a.position?\"prependTo\":\"appendTo\"](c)}}};f.fn.fancybox=function(a){var d,\ne=f(this),c=this.selector||\"\",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(\".fancybox-wrap\")&&(k=a.groupAttr||\"data-fancybox-group\",l=h.attr(k),l||(k=\"rel\",l=h.get(0)[k]),l&&(\"\"!==l&&\"nofollow\"!==l)&&(h=c.length?f(c):e,h=h.filter(\"[\"+k+'=\"'+l+'\"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind(\"click.fb-start\").bind(\"click.fb-start\",k):p.undelegate(c,\"click.fb-start\").delegate(c+\n\":not('.fancybox-item, .fancybox-nav')\",\"click.fb-start\",k);this.filter(\"[data-fancybox-start=1]\").trigger(\"click\");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style=\"width:50px;height:50px;overflow:auto\"><div/></div>').appendTo(\"body\"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style=\"position:fixed;top:20px;\"></div>').appendTo(\"body\");var e=20===\nd[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f(\"body\")});a=f(r).width();J.addClass(\"fancybox-lock-test\");d=f(r).width();J.removeClass(\"fancybox-lock-test\");f(\"<style type='text/css'>.fancybox-margin{margin-right:\"+(d-a)+\"px;}</style>\").appendTo(\"head\")})})(window,document,jQuery);","fancybox/js/jquery.mousewheel-3.0.6.pack.js":"/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)\n * Licensed under the MIT License (LICENSE.txt).\n *\n * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.\n * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.\n * Thanks to: Seamus Leahy for adding deltaX and deltaY\n *\n * Version: 3.0.6\n * \n * Requires: 1.2.2+\n */\n(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0,a=d.event.fix(b);a.type=\"mousewheel\";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;b.axis!==void 0&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);b.wheelDeltaY!==void 0&&(g=b.wheelDeltaY/120);b.wheelDeltaX!==void 0&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=[\"DOMMouseScroll\",\"mousewheel\"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]=\nd.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,false);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}})})(jQuery);","bootstrap/js/bootstrap.min.js":"/*!\n * Bootstrap v3.3.5 (http://getbootstrap.com)\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under the MIT license\n */\nif(\"undefined\"==typeof jQuery)throw new Error(\"Bootstrap's JavaScript requires jQuery\");+function(a){\"use strict\";var b=a.fn.jquery.split(\" \")[0].split(\".\");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error(\"Bootstrap's JavaScript requires jQuery version 1.9.1 or higher\")}(jQuery),+function(a){\"use strict\";function b(){var a=document.createElement(\"bootstrap\"),b={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(\"bsTransitionEnd\",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var c=a(this),e=c.data(\"bs.alert\");e||c.data(\"bs.alert\",e=new d(this)),\"string\"==typeof b&&e[b].call(c)})}var c='[data-dismiss=\"alert\"]',d=function(b){a(b).on(\"click\",c,this.close)};d.VERSION=\"3.3.5\",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger(\"closed.bs.alert\").remove()}var e=a(this),f=e.attr(\"data-target\");f||(f=e.attr(\"href\"),f=f&&f.replace(/.*(?=#[^\\s]*$)/,\"\"));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(\".alert\")),g.trigger(b=a.Event(\"close.bs.alert\")),b.isDefaultPrevented()||(g.removeClass(\"in\"),a.support.transition&&g.hasClass(\"fade\")?g.one(\"bsTransitionEnd\",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on(\"click.bs.alert.data-api\",c,d.prototype.close)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.button\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.button\",e=new c(this,f)),\"toggle\"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION=\"3.3.5\",c.DEFAULTS={loadingText:\"loading...\"},c.prototype.setState=function(b){var c=\"disabled\",d=this.$element,e=d.is(\"input\")?\"val\":\"html\",f=d.data();b+=\"Text\",null==f.resetText&&d.data(\"resetText\",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),\"loadingText\"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle=\"buttons\"]');if(b.length){var c=this.$element.find(\"input\");\"radio\"==c.prop(\"type\")?(c.prop(\"checked\")&&(a=!1),b.find(\".active\").removeClass(\"active\"),this.$element.addClass(\"active\")):\"checkbox\"==c.prop(\"type\")&&(c.prop(\"checked\")!==this.$element.hasClass(\"active\")&&(a=!1),this.$element.toggleClass(\"active\")),c.prop(\"checked\",this.$element.hasClass(\"active\")),a&&c.trigger(\"change\")}else this.$element.attr(\"aria-pressed\",!this.$element.hasClass(\"active\")),this.$element.toggleClass(\"active\")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on(\"click.bs.button.data-api\",'[data-toggle^=\"button\"]',function(c){var d=a(c.target);d.hasClass(\"btn\")||(d=d.closest(\".btn\")),b.call(d,\"toggle\"),a(c.target).is('input[type=\"radio\"]')||a(c.target).is('input[type=\"checkbox\"]')||c.preventDefault()}).on(\"focus.bs.button.data-api blur.bs.button.data-api\",'[data-toggle^=\"button\"]',function(b){a(b.target).closest(\".btn\").toggleClass(\"focus\",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.carousel\"),f=a.extend({},c.DEFAULTS,d.data(),\"object\"==typeof b&&b),g=\"string\"==typeof b?b:f.slide;e||d.data(\"bs.carousel\",e=new c(this,f)),\"number\"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(\".carousel-indicators\"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on(\"keydown.bs.carousel\",a.proxy(this.keydown,this)),\"hover\"==this.options.pause&&!(\"ontouchstart\"in document.documentElement)&&this.$element.on(\"mouseenter.bs.carousel\",a.proxy(this.pause,this)).on(\"mouseleave.bs.carousel\",a.proxy(this.cycle,this))};c.VERSION=\"3.3.5\",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:\"hover\",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(\".item\"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d=\"prev\"==a&&0===c||\"next\"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e=\"prev\"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(\".item.active\"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one(\"slid.bs.carousel\",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?\"next\":\"prev\",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(\".next, .prev\").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide(\"next\")},c.prototype.prev=function(){return this.sliding?void 0:this.slide(\"prev\")},c.prototype.slide=function(b,d){var e=this.$element.find(\".item.active\"),f=d||this.getItemForDirection(b,e),g=this.interval,h=\"next\"==b?\"left\":\"right\",i=this;if(f.hasClass(\"active\"))return this.sliding=!1;var j=f[0],k=a.Event(\"slide.bs.carousel\",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(\".active\").removeClass(\"active\");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass(\"active\")}var m=a.Event(\"slid.bs.carousel\",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass(\"slide\")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one(\"bsTransitionEnd\",function(){f.removeClass([b,h].join(\" \")).addClass(\"active\"),e.removeClass([\"active\",h].join(\" \")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass(\"active\"),f.addClass(\"active\"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr(\"data-target\")||(d=e.attr(\"href\"))&&d.replace(/.*(?=#[^\\s]+$)/,\"\"));if(f.hasClass(\"carousel\")){var g=a.extend({},f.data(),e.data()),h=e.attr(\"data-slide-to\");h&&(g.interval=!1),b.call(f,g),h&&f.data(\"bs.carousel\").to(h),c.preventDefault()}};a(document).on(\"click.bs.carousel.data-api\",\"[data-slide]\",e).on(\"click.bs.carousel.data-api\",\"[data-slide-to]\",e),a(window).on(\"load\",function(){a('[data-ride=\"carousel\"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){\"use strict\";function b(b){var c,d=b.attr(\"data-target\")||(c=b.attr(\"href\"))&&c.replace(/.*(?=#[^\\s]+$)/,\"\");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data(\"bs.collapse\"),f=a.extend({},d.DEFAULTS,c.data(),\"object\"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data(\"bs.collapse\",e=new d(this,f)),\"string\"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle=\"collapse\"][href=\"#'+b.id+'\"],[data-toggle=\"collapse\"][data-target=\"#'+b.id+'\"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION=\"3.3.5\",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass(\"width\");return a?\"width\":\"height\"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass(\"in\")){var b,e=this.$parent&&this.$parent.children(\".panel\").children(\".in, .collapsing\");if(!(e&&e.length&&(b=e.data(\"bs.collapse\"),b&&b.transitioning))){var f=a.Event(\"show.bs.collapse\");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,\"hide\"),b||e.data(\"bs.collapse\",null));var g=this.dimension();this.$element.removeClass(\"collapse\").addClass(\"collapsing\")[g](0).attr(\"aria-expanded\",!0),this.$trigger.removeClass(\"collapsed\").attr(\"aria-expanded\",!0),this.transitioning=1;var h=function(){this.$element.removeClass(\"collapsing\").addClass(\"collapse in\")[g](\"\"),this.transitioning=0,this.$element.trigger(\"shown.bs.collapse\")};if(!a.support.transition)return h.call(this);var i=a.camelCase([\"scroll\",g].join(\"-\"));this.$element.one(\"bsTransitionEnd\",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass(\"in\")){var b=a.Event(\"hide.bs.collapse\");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass(\"collapsing\").removeClass(\"collapse in\").attr(\"aria-expanded\",!1),this.$trigger.addClass(\"collapsed\").attr(\"aria-expanded\",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass(\"collapsing\").addClass(\"collapse\").trigger(\"hidden.bs.collapse\")};return a.support.transition?void this.$element[c](0).one(\"bsTransitionEnd\",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass(\"in\")?\"hide\":\"show\"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle=\"collapse\"][data-parent=\"'+this.options.parent+'\"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass(\"in\");a.attr(\"aria-expanded\",c),b.toggleClass(\"collapsed\",!c).attr(\"aria-expanded\",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on(\"click.bs.collapse.data-api\",'[data-toggle=\"collapse\"]',function(d){var e=a(this);e.attr(\"data-target\")||d.preventDefault();var f=b(e),g=f.data(\"bs.collapse\"),h=g?\"toggle\":e.data();c.call(f,h)})}(jQuery),+function(a){\"use strict\";function b(b){var c=b.attr(\"data-target\");c||(c=b.attr(\"href\"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\\s]*$)/,\"\"));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass(\"open\")&&(c&&\"click\"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event(\"hide.bs.dropdown\",f)),c.isDefaultPrevented()||(d.attr(\"aria-expanded\",\"false\"),e.removeClass(\"open\").trigger(\"hidden.bs.dropdown\",f))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data(\"bs.dropdown\");d||c.data(\"bs.dropdown\",d=new g(this)),\"string\"==typeof b&&d[b].call(c)})}var e=\".dropdown-backdrop\",f='[data-toggle=\"dropdown\"]',g=function(b){a(b).on(\"click.bs.dropdown\",this.toggle)};g.VERSION=\"3.3.5\",g.prototype.toggle=function(d){var e=a(this);if(!e.is(\".disabled, :disabled\")){var f=b(e),g=f.hasClass(\"open\");if(c(),!g){\"ontouchstart\"in document.documentElement&&!f.closest(\".navbar-nav\").length&&a(document.createElement(\"div\")).addClass(\"dropdown-backdrop\").insertAfter(a(this)).on(\"click\",c);var h={relatedTarget:this};if(f.trigger(d=a.Event(\"show.bs.dropdown\",h)),d.isDefaultPrevented())return;e.trigger(\"focus\").attr(\"aria-expanded\",\"true\"),f.toggleClass(\"open\").trigger(\"shown.bs.dropdown\",h)}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(\".disabled, :disabled\")){var e=b(d),g=e.hasClass(\"open\");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger(\"focus\"),d.trigger(\"click\");var h=\" li:not(.disabled):visible a\",i=e.find(\".dropdown-menu\"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger(\"focus\")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on(\"click.bs.dropdown.data-api\",c).on(\"click.bs.dropdown.data-api\",\".dropdown form\",function(a){a.stopPropagation()}).on(\"click.bs.dropdown.data-api\",f,g.prototype.toggle).on(\"keydown.bs.dropdown.data-api\",f,g.prototype.keydown).on(\"keydown.bs.dropdown.data-api\",\".dropdown-menu\",g.prototype.keydown)}(jQuery),+function(a){\"use strict\";function b(b,d){return this.each(function(){var e=a(this),f=e.data(\"bs.modal\"),g=a.extend({},c.DEFAULTS,e.data(),\"object\"==typeof b&&b);f||e.data(\"bs.modal\",f=new c(this,g)),\"string\"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(\".modal-dialog\"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(\".modal-content\").load(this.options.remote,a.proxy(function(){this.$element.trigger(\"loaded.bs.modal\")},this))};c.VERSION=\"3.3.5\",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event(\"show.bs.modal\",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass(\"modal-open\"),this.escape(),this.resize(),this.$element.on(\"click.dismiss.bs.modal\",'[data-dismiss=\"modal\"]',a.proxy(this.hide,this)),this.$dialog.on(\"mousedown.dismiss.bs.modal\",function(){d.$element.one(\"mouseup.dismiss.bs.modal\",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass(\"fade\");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass(\"in\"),d.enforceFocus();var f=a.Event(\"shown.bs.modal\",{relatedTarget:b});e?d.$dialog.one(\"bsTransitionEnd\",function(){d.$element.trigger(\"focus\").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger(\"focus\").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event(\"hide.bs.modal\"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off(\"focusin.bs.modal\"),this.$element.removeClass(\"in\").off(\"click.dismiss.bs.modal\").off(\"mouseup.dismiss.bs.modal\"),this.$dialog.off(\"mousedown.dismiss.bs.modal\"),a.support.transition&&this.$element.hasClass(\"fade\")?this.$element.one(\"bsTransitionEnd\",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off(\"focusin.bs.modal\").on(\"focusin.bs.modal\",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger(\"focus\")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on(\"keydown.dismiss.bs.modal\",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off(\"keydown.dismiss.bs.modal\")},c.prototype.resize=function(){this.isShown?a(window).on(\"resize.bs.modal\",a.proxy(this.handleUpdate,this)):a(window).off(\"resize.bs.modal\")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass(\"modal-open\"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger(\"hidden.bs.modal\")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass(\"fade\")?\"fade\":\"\";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement(\"div\")).addClass(\"modal-backdrop \"+e).appendTo(this.$body),this.$element.on(\"click.dismiss.bs.modal\",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&(\"static\"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass(\"in\"),!b)return;f?this.$backdrop.one(\"bsTransitionEnd\",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass(\"in\");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass(\"fade\")?this.$backdrop.one(\"bsTransitionEnd\",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:\"\",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:\"\"})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:\"\",paddingRight:\"\"})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css(\"padding-right\")||0,10);this.originalBodyPad=document.body.style.paddingRight||\"\",this.bodyIsOverflowing&&this.$body.css(\"padding-right\",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css(\"padding-right\",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement(\"div\");a.className=\"modal-scrollbar-measure\",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on(\"click.bs.modal.data-api\",'[data-toggle=\"modal\"]',function(c){var d=a(this),e=d.attr(\"href\"),f=a(d.attr(\"data-target\")||e&&e.replace(/.*(?=#[^\\s]+$)/,\"\")),g=f.data(\"bs.modal\")?\"toggle\":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is(\"a\")&&c.preventDefault(),f.one(\"show.bs.modal\",function(a){a.isDefaultPrevented()||f.one(\"hidden.bs.modal\",function(){d.is(\":visible\")&&d.trigger(\"focus\")})}),b.call(f,g,this)})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tooltip\"),f=\"object\"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data(\"bs.tooltip\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init(\"tooltip\",a,b)};c.VERSION=\"3.3.5\",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:\"top\",selector:!1,template:'<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',trigger:\"hover focus\",title:\"\",delay:0,html:!1,container:!1,viewport:{selector:\"body\",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error(\"`selector` option must be specified when initializing \"+this.type+\" on the window.document object!\");for(var e=this.options.trigger.split(\" \"),f=e.length;f--;){var g=e[f];if(\"click\"==g)this.$element.on(\"click.\"+this.type,this.options.selector,a.proxy(this.toggle,this));else if(\"manual\"!=g){var h=\"hover\"==g?\"mouseenter\":\"focusin\",i=\"hover\"==g?\"mouseleave\":\"focusout\";this.$element.on(h+\".\"+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+\".\"+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:\"manual\",selector:\"\"}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&\"number\"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusin\"==b.type?\"focus\":\"hover\"]=!0),c.tip().hasClass(\"in\")||\"in\"==c.hoverState?void(c.hoverState=\"in\"):(clearTimeout(c.timeout),c.hoverState=\"in\",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){\"in\"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusout\"==b.type?\"focus\":\"hover\"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState=\"out\",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){\"out\"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event(\"show.bs.\"+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr(\"id\",g),this.$element.attr(\"aria-describedby\",g),this.options.animation&&f.addClass(\"fade\");var h=\"function\"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\\s?auto?\\s?/i,j=i.test(h);j&&(h=h.replace(i,\"\")||\"top\"),f.detach().css({top:0,left:0,display:\"block\"}).addClass(h).data(\"bs.\"+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger(\"inserted.bs.\"+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h=\"bottom\"==h&&k.bottom+m>o.bottom?\"top\":\"top\"==h&&k.top-m<o.top?\"bottom\":\"right\"==h&&k.right+l>o.width?\"left\":\"left\"==h&&k.left-l<o.left?\"right\":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger(\"shown.bs.\"+e.type),e.hoverState=null,\"out\"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css(\"margin-top\"),10),h=parseInt(d.css(\"margin-left\"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass(\"in\");var i=d[0].offsetWidth,j=d[0].offsetHeight;\"top\"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?\"offsetWidth\":\"offsetHeight\";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?\"left\":\"top\",50*(1-a/b)+\"%\").css(c?\"top\":\"left\",\"\")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(\".tooltip-inner\")[this.options.html?\"html\":\"text\"](b),a.removeClass(\"fade in top bottom left right\")},c.prototype.hide=function(b){function d(){\"in\"!=e.hoverState&&f.detach(),e.$element.removeAttr(\"aria-describedby\").trigger(\"hidden.bs.\"+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event(\"hide.bs.\"+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass(\"in\"),a.support.transition&&f.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr(\"title\")||\"string\"!=typeof a.attr(\"data-original-title\"))&&a.attr(\"data-original-title\",a.attr(\"title\")||\"\").attr(\"title\",\"\")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d=\"BODY\"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return\"bottom\"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:\"top\"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:\"left\"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr(\"data-original-title\")||(\"function\"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+\" `template` option must consist of exactly 1 top-level element!\");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".tooltip-arrow\")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data(\"bs.\"+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass(\"in\")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off(\".\"+a.type).removeData(\"bs.\"+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.popover\"),f=\"object\"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data(\"bs.popover\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.init(\"popover\",a,b)};if(!a.fn.tooltip)throw new Error(\"Popover requires tooltip.js\");c.VERSION=\"3.3.5\",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:\"right\",trigger:\"click\",content:\"\",template:'<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(\".popover-title\")[this.options.html?\"html\":\"text\"](b),a.find(\".popover-content\").children().detach().end()[this.options.html?\"string\"==typeof c?\"html\":\"append\":\"text\"](c),a.removeClass(\"fade top bottom left right in\"),a.find(\".popover-title\").html()||a.find(\".popover-title\").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr(\"data-content\")||(\"function\"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".arrow\")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){\"use strict\";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||\"\")+\" .nav li > a\",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on(\"scroll.bs.scrollspy\",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data(\"bs.scrollspy\"),f=\"object\"==typeof c&&c;e||d.data(\"bs.scrollspy\",e=new b(this,f)),\"string\"==typeof c&&e[c]()})}b.VERSION=\"3.3.5\",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c=\"offset\",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c=\"position\",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data(\"target\")||b.attr(\"href\"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(\":visible\")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target=\"'+b+'\"],'+this.selector+'[href=\"'+b+'\"]',d=a(c).parents(\"li\").addClass(\"active\");d.parent(\".dropdown-menu\").length&&(d=d.closest(\"li.dropdown\").addClass(\"active\")),\nd.trigger(\"activate.bs.scrollspy\")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,\".active\").removeClass(\"active\")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on(\"load.bs.scrollspy.data-api\",function(){a('[data-spy=\"scroll\"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tab\");e||d.data(\"bs.tab\",e=new c(this)),\"string\"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION=\"3.3.5\",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest(\"ul:not(.dropdown-menu)\"),d=b.data(\"target\");if(d||(d=b.attr(\"href\"),d=d&&d.replace(/.*(?=#[^\\s]*$)/,\"\")),!b.parent(\"li\").hasClass(\"active\")){var e=c.find(\".active:last a\"),f=a.Event(\"hide.bs.tab\",{relatedTarget:b[0]}),g=a.Event(\"show.bs.tab\",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest(\"li\"),c),this.activate(h,h.parent(),function(){e.trigger({type:\"hidden.bs.tab\",relatedTarget:b[0]}),b.trigger({type:\"shown.bs.tab\",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass(\"active\").find(\"> .dropdown-menu > .active\").removeClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!1),b.addClass(\"active\").find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),h?(b[0].offsetWidth,b.addClass(\"in\")):b.removeClass(\"fade\"),b.parent(\".dropdown-menu\").length&&b.closest(\"li.dropdown\").addClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),e&&e()}var g=d.find(\"> .active\"),h=e&&a.support.transition&&(g.length&&g.hasClass(\"fade\")||!!d.find(\"> .fade\").length);g.length&&h?g.one(\"bsTransitionEnd\",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass(\"in\")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),\"show\")};a(document).on(\"click.bs.tab.data-api\",'[data-toggle=\"tab\"]',e).on(\"click.bs.tab.data-api\",'[data-toggle=\"pill\"]',e)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.affix\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.affix\",e=new c(this,f)),\"string\"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on(\"scroll.bs.affix.data-api\",a.proxy(this.checkPosition,this)).on(\"click.bs.affix.data-api\",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION=\"3.3.5\",c.RESET=\"affix affix-top affix-bottom\",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&\"top\"==this.affixed)return c>e?\"top\":!1;if(\"bottom\"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:\"bottom\":a-d>=e+g?!1:\"bottom\";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?\"top\":null!=d&&i+j>=a-d?\"bottom\":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass(\"affix\");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(\":visible\")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());\"object\"!=typeof d&&(f=e=d),\"function\"==typeof e&&(e=d.top(this.$element)),\"function\"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css(\"top\",\"\");var i=\"affix\"+(h?\"-\"+h:\"\"),j=a.Event(i+\".bs.affix\");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin=\"bottom\"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace(\"affix\",\"affixed\")+\".bs.affix\")}\"bottom\"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on(\"load\",function(){a('[data-spy=\"affix\"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);","bootstrap/js/npm.js":"// This file is autogenerated via the `commonjs` Grunt task. You can require() this file in a CommonJS environment.\nrequire('../../js/transition.js')\nrequire('../../js/alert.js')\nrequire('../../js/button.js')\nrequire('../../js/carousel.js')\nrequire('../../js/collapse.js')\nrequire('../../js/dropdown.js')\nrequire('../../js/modal.js')\nrequire('../../js/tooltip.js')\nrequire('../../js/popover.js')\nrequire('../../js/scrollspy.js')\nrequire('../../js/tab.js')\nrequire('../../js/affix.js')","bootstrap/js/bootstrap.js":"/*!\n * Bootstrap v3.3.5 (http://getbootstrap.com)\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under the MIT license\n */\n\nif (typeof jQuery === 'undefined') {\n  throw new Error('Bootstrap\\'s JavaScript requires jQuery')\n}\n\n+function ($) {\n  'use strict';\n  var version = $.fn.jquery.split(' ')[0].split('.')\n  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1)) {\n    throw new Error('Bootstrap\\'s JavaScript requires jQuery version 1.9.1 or higher')\n  }\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: transition.js v3.3.5\n * http://getbootstrap.com/javascript/#transitions\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)\n  // ============================================================\n\n  function transitionEnd() {\n    var el = document.createElement('bootstrap')\n\n    var transEndEventNames = {\n      WebkitTransition : 'webkitTransitionEnd',\n      MozTransition    : 'transitionend',\n      OTransition      : 'oTransitionEnd otransitionend',\n      transition       : 'transitionend'\n    }\n\n    for (var name in transEndEventNames) {\n      if (el.style[name] !== undefined) {\n        return { end: transEndEventNames[name] }\n      }\n    }\n\n    return false // explicit for ie8 (  ._.)\n  }\n\n  // http://blog.alexmaccaw.com/css-transitions\n  $.fn.emulateTransitionEnd = function (duration) {\n    var called = false\n    var $el = this\n    $(this).one('bsTransitionEnd', function () { called = true })\n    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }\n    setTimeout(callback, duration)\n    return this\n  }\n\n  $(function () {\n    $.support.transition = transitionEnd()\n\n    if (!$.support.transition) return\n\n    $.event.special.bsTransitionEnd = {\n      bindType: $.support.transition.end,\n      delegateType: $.support.transition.end,\n      handle: function (e) {\n        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)\n      }\n    }\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: alert.js v3.3.5\n * http://getbootstrap.com/javascript/#alerts\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // ALERT CLASS DEFINITION\n  // ======================\n\n  var dismiss = '[data-dismiss=\"alert\"]'\n  var Alert   = function (el) {\n    $(el).on('click', dismiss, this.close)\n  }\n\n  Alert.VERSION = '3.3.5'\n\n  Alert.TRANSITION_DURATION = 150\n\n  Alert.prototype.close = function (e) {\n    var $this    = $(this)\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = $(selector)\n\n    if (e) e.preventDefault()\n\n    if (!$parent.length) {\n      $parent = $this.closest('.alert')\n    }\n\n    $parent.trigger(e = $.Event('close.bs.alert'))\n\n    if (e.isDefaultPrevented()) return\n\n    $parent.removeClass('in')\n\n    function removeElement() {\n      // detach from parent, fire event then clean up data\n      $parent.detach().trigger('closed.bs.alert').remove()\n    }\n\n    $.support.transition && $parent.hasClass('fade') ?\n      $parent\n        .one('bsTransitionEnd', removeElement)\n        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :\n      removeElement()\n  }\n\n\n  // ALERT PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.alert')\n\n      if (!data) $this.data('bs.alert', (data = new Alert(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.alert\n\n  $.fn.alert             = Plugin\n  $.fn.alert.Constructor = Alert\n\n\n  // ALERT NO CONFLICT\n  // =================\n\n  $.fn.alert.noConflict = function () {\n    $.fn.alert = old\n    return this\n  }\n\n\n  // ALERT DATA-API\n  // ==============\n\n  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: button.js v3.3.5\n * http://getbootstrap.com/javascript/#buttons\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // BUTTON PUBLIC CLASS DEFINITION\n  // ==============================\n\n  var Button = function (element, options) {\n    this.$element  = $(element)\n    this.options   = $.extend({}, Button.DEFAULTS, options)\n    this.isLoading = false\n  }\n\n  Button.VERSION  = '3.3.5'\n\n  Button.DEFAULTS = {\n    loadingText: 'loading...'\n  }\n\n  Button.prototype.setState = function (state) {\n    var d    = 'disabled'\n    var $el  = this.$element\n    var val  = $el.is('input') ? 'val' : 'html'\n    var data = $el.data()\n\n    state += 'Text'\n\n    if (data.resetText == null) $el.data('resetText', $el[val]())\n\n    // push to event loop to allow forms to submit\n    setTimeout($.proxy(function () {\n      $el[val](data[state] == null ? this.options[state] : data[state])\n\n      if (state == 'loadingText') {\n        this.isLoading = true\n        $el.addClass(d).attr(d, d)\n      } else if (this.isLoading) {\n        this.isLoading = false\n        $el.removeClass(d).removeAttr(d)\n      }\n    }, this), 0)\n  }\n\n  Button.prototype.toggle = function () {\n    var changed = true\n    var $parent = this.$element.closest('[data-toggle=\"buttons\"]')\n\n    if ($parent.length) {\n      var $input = this.$element.find('input')\n      if ($input.prop('type') == 'radio') {\n        if ($input.prop('checked')) changed = false\n        $parent.find('.active').removeClass('active')\n        this.$element.addClass('active')\n      } else if ($input.prop('type') == 'checkbox') {\n        if (($input.prop('checked')) !== this.$element.hasClass('active')) changed = false\n        this.$element.toggleClass('active')\n      }\n      $input.prop('checked', this.$element.hasClass('active'))\n      if (changed) $input.trigger('change')\n    } else {\n      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))\n      this.$element.toggleClass('active')\n    }\n  }\n\n\n  // BUTTON PLUGIN DEFINITION\n  // ========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.button')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.button', (data = new Button(this, options)))\n\n      if (option == 'toggle') data.toggle()\n      else if (option) data.setState(option)\n    })\n  }\n\n  var old = $.fn.button\n\n  $.fn.button             = Plugin\n  $.fn.button.Constructor = Button\n\n\n  // BUTTON NO CONFLICT\n  // ==================\n\n  $.fn.button.noConflict = function () {\n    $.fn.button = old\n    return this\n  }\n\n\n  // BUTTON DATA-API\n  // ===============\n\n  $(document)\n    .on('click.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\n      var $btn = $(e.target)\n      if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')\n      Plugin.call($btn, 'toggle')\n      if (!($(e.target).is('input[type=\"radio\"]') || $(e.target).is('input[type=\"checkbox\"]'))) e.preventDefault()\n    })\n    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^=\"button\"]', function (e) {\n      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))\n    })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: carousel.js v3.3.5\n * http://getbootstrap.com/javascript/#carousel\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // CAROUSEL CLASS DEFINITION\n  // =========================\n\n  var Carousel = function (element, options) {\n    this.$element    = $(element)\n    this.$indicators = this.$element.find('.carousel-indicators')\n    this.options     = options\n    this.paused      = null\n    this.sliding     = null\n    this.interval    = null\n    this.$active     = null\n    this.$items      = null\n\n    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))\n\n    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element\n      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))\n      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))\n  }\n\n  Carousel.VERSION  = '3.3.5'\n\n  Carousel.TRANSITION_DURATION = 600\n\n  Carousel.DEFAULTS = {\n    interval: 5000,\n    pause: 'hover',\n    wrap: true,\n    keyboard: true\n  }\n\n  Carousel.prototype.keydown = function (e) {\n    if (/input|textarea/i.test(e.target.tagName)) return\n    switch (e.which) {\n      case 37: this.prev(); break\n      case 39: this.next(); break\n      default: return\n    }\n\n    e.preventDefault()\n  }\n\n  Carousel.prototype.cycle = function (e) {\n    e || (this.paused = false)\n\n    this.interval && clearInterval(this.interval)\n\n    this.options.interval\n      && !this.paused\n      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))\n\n    return this\n  }\n\n  Carousel.prototype.getItemIndex = function (item) {\n    this.$items = item.parent().children('.item')\n    return this.$items.index(item || this.$active)\n  }\n\n  Carousel.prototype.getItemForDirection = function (direction, active) {\n    var activeIndex = this.getItemIndex(active)\n    var willWrap = (direction == 'prev' && activeIndex === 0)\n                || (direction == 'next' && activeIndex == (this.$items.length - 1))\n    if (willWrap && !this.options.wrap) return active\n    var delta = direction == 'prev' ? -1 : 1\n    var itemIndex = (activeIndex + delta) % this.$items.length\n    return this.$items.eq(itemIndex)\n  }\n\n  Carousel.prototype.to = function (pos) {\n    var that        = this\n    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))\n\n    if (pos > (this.$items.length - 1) || pos < 0) return\n\n    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, \"slid\"\n    if (activeIndex == pos) return this.pause().cycle()\n\n    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))\n  }\n\n  Carousel.prototype.pause = function (e) {\n    e || (this.paused = true)\n\n    if (this.$element.find('.next, .prev').length && $.support.transition) {\n      this.$element.trigger($.support.transition.end)\n      this.cycle(true)\n    }\n\n    this.interval = clearInterval(this.interval)\n\n    return this\n  }\n\n  Carousel.prototype.next = function () {\n    if (this.sliding) return\n    return this.slide('next')\n  }\n\n  Carousel.prototype.prev = function () {\n    if (this.sliding) return\n    return this.slide('prev')\n  }\n\n  Carousel.prototype.slide = function (type, next) {\n    var $active   = this.$element.find('.item.active')\n    var $next     = next || this.getItemForDirection(type, $active)\n    var isCycling = this.interval\n    var direction = type == 'next' ? 'left' : 'right'\n    var that      = this\n\n    if ($next.hasClass('active')) return (this.sliding = false)\n\n    var relatedTarget = $next[0]\n    var slideEvent = $.Event('slide.bs.carousel', {\n      relatedTarget: relatedTarget,\n      direction: direction\n    })\n    this.$element.trigger(slideEvent)\n    if (slideEvent.isDefaultPrevented()) return\n\n    this.sliding = true\n\n    isCycling && this.pause()\n\n    if (this.$indicators.length) {\n      this.$indicators.find('.active').removeClass('active')\n      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])\n      $nextIndicator && $nextIndicator.addClass('active')\n    }\n\n    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, \"slid\"\n    if ($.support.transition && this.$element.hasClass('slide')) {\n      $next.addClass(type)\n      $next[0].offsetWidth // force reflow\n      $active.addClass(direction)\n      $next.addClass(direction)\n      $active\n        .one('bsTransitionEnd', function () {\n          $next.removeClass([type, direction].join(' ')).addClass('active')\n          $active.removeClass(['active', direction].join(' '))\n          that.sliding = false\n          setTimeout(function () {\n            that.$element.trigger(slidEvent)\n          }, 0)\n        })\n        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)\n    } else {\n      $active.removeClass('active')\n      $next.addClass('active')\n      this.sliding = false\n      this.$element.trigger(slidEvent)\n    }\n\n    isCycling && this.cycle()\n\n    return this\n  }\n\n\n  // CAROUSEL PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.carousel')\n      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)\n      var action  = typeof option == 'string' ? option : options.slide\n\n      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))\n      if (typeof option == 'number') data.to(option)\n      else if (action) data[action]()\n      else if (options.interval) data.pause().cycle()\n    })\n  }\n\n  var old = $.fn.carousel\n\n  $.fn.carousel             = Plugin\n  $.fn.carousel.Constructor = Carousel\n\n\n  // CAROUSEL NO CONFLICT\n  // ====================\n\n  $.fn.carousel.noConflict = function () {\n    $.fn.carousel = old\n    return this\n  }\n\n\n  // CAROUSEL DATA-API\n  // =================\n\n  var clickHandler = function (e) {\n    var href\n    var $this   = $(this)\n    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) // strip for ie7\n    if (!$target.hasClass('carousel')) return\n    var options = $.extend({}, $target.data(), $this.data())\n    var slideIndex = $this.attr('data-slide-to')\n    if (slideIndex) options.interval = false\n\n    Plugin.call($target, options)\n\n    if (slideIndex) {\n      $target.data('bs.carousel').to(slideIndex)\n    }\n\n    e.preventDefault()\n  }\n\n  $(document)\n    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)\n    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)\n\n  $(window).on('load', function () {\n    $('[data-ride=\"carousel\"]').each(function () {\n      var $carousel = $(this)\n      Plugin.call($carousel, $carousel.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: collapse.js v3.3.5\n * http://getbootstrap.com/javascript/#collapse\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // COLLAPSE PUBLIC CLASS DEFINITION\n  // ================================\n\n  var Collapse = function (element, options) {\n    this.$element      = $(element)\n    this.options       = $.extend({}, Collapse.DEFAULTS, options)\n    this.$trigger      = $('[data-toggle=\"collapse\"][href=\"#' + element.id + '\"],' +\n                           '[data-toggle=\"collapse\"][data-target=\"#' + element.id + '\"]')\n    this.transitioning = null\n\n    if (this.options.parent) {\n      this.$parent = this.getParent()\n    } else {\n      this.addAriaAndCollapsedClass(this.$element, this.$trigger)\n    }\n\n    if (this.options.toggle) this.toggle()\n  }\n\n  Collapse.VERSION  = '3.3.5'\n\n  Collapse.TRANSITION_DURATION = 350\n\n  Collapse.DEFAULTS = {\n    toggle: true\n  }\n\n  Collapse.prototype.dimension = function () {\n    var hasWidth = this.$element.hasClass('width')\n    return hasWidth ? 'width' : 'height'\n  }\n\n  Collapse.prototype.show = function () {\n    if (this.transitioning || this.$element.hasClass('in')) return\n\n    var activesData\n    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')\n\n    if (actives && actives.length) {\n      activesData = actives.data('bs.collapse')\n      if (activesData && activesData.transitioning) return\n    }\n\n    var startEvent = $.Event('show.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    if (actives && actives.length) {\n      Plugin.call(actives, 'hide')\n      activesData || actives.data('bs.collapse', null)\n    }\n\n    var dimension = this.dimension()\n\n    this.$element\n      .removeClass('collapse')\n      .addClass('collapsing')[dimension](0)\n      .attr('aria-expanded', true)\n\n    this.$trigger\n      .removeClass('collapsed')\n      .attr('aria-expanded', true)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse in')[dimension]('')\n      this.transitioning = 0\n      this.$element\n        .trigger('shown.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    var scrollSize = $.camelCase(['scroll', dimension].join('-'))\n\n    this.$element\n      .one('bsTransitionEnd', $.proxy(complete, this))\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])\n  }\n\n  Collapse.prototype.hide = function () {\n    if (this.transitioning || !this.$element.hasClass('in')) return\n\n    var startEvent = $.Event('hide.bs.collapse')\n    this.$element.trigger(startEvent)\n    if (startEvent.isDefaultPrevented()) return\n\n    var dimension = this.dimension()\n\n    this.$element[dimension](this.$element[dimension]())[0].offsetHeight\n\n    this.$element\n      .addClass('collapsing')\n      .removeClass('collapse in')\n      .attr('aria-expanded', false)\n\n    this.$trigger\n      .addClass('collapsed')\n      .attr('aria-expanded', false)\n\n    this.transitioning = 1\n\n    var complete = function () {\n      this.transitioning = 0\n      this.$element\n        .removeClass('collapsing')\n        .addClass('collapse')\n        .trigger('hidden.bs.collapse')\n    }\n\n    if (!$.support.transition) return complete.call(this)\n\n    this.$element\n      [dimension](0)\n      .one('bsTransitionEnd', $.proxy(complete, this))\n      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)\n  }\n\n  Collapse.prototype.toggle = function () {\n    this[this.$element.hasClass('in') ? 'hide' : 'show']()\n  }\n\n  Collapse.prototype.getParent = function () {\n    return $(this.options.parent)\n      .find('[data-toggle=\"collapse\"][data-parent=\"' + this.options.parent + '\"]')\n      .each($.proxy(function (i, element) {\n        var $element = $(element)\n        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)\n      }, this))\n      .end()\n  }\n\n  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {\n    var isOpen = $element.hasClass('in')\n\n    $element.attr('aria-expanded', isOpen)\n    $trigger\n      .toggleClass('collapsed', !isOpen)\n      .attr('aria-expanded', isOpen)\n  }\n\n  function getTargetFromTrigger($trigger) {\n    var href\n    var target = $trigger.attr('data-target')\n      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') // strip for ie7\n\n    return $(target)\n  }\n\n\n  // COLLAPSE PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.collapse')\n      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false\n      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.collapse\n\n  $.fn.collapse             = Plugin\n  $.fn.collapse.Constructor = Collapse\n\n\n  // COLLAPSE NO CONFLICT\n  // ====================\n\n  $.fn.collapse.noConflict = function () {\n    $.fn.collapse = old\n    return this\n  }\n\n\n  // COLLAPSE DATA-API\n  // =================\n\n  $(document).on('click.bs.collapse.data-api', '[data-toggle=\"collapse\"]', function (e) {\n    var $this   = $(this)\n\n    if (!$this.attr('data-target')) e.preventDefault()\n\n    var $target = getTargetFromTrigger($this)\n    var data    = $target.data('bs.collapse')\n    var option  = data ? 'toggle' : $this.data()\n\n    Plugin.call($target, option)\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: dropdown.js v3.3.5\n * http://getbootstrap.com/javascript/#dropdowns\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // DROPDOWN CLASS DEFINITION\n  // =========================\n\n  var backdrop = '.dropdown-backdrop'\n  var toggle   = '[data-toggle=\"dropdown\"]'\n  var Dropdown = function (element) {\n    $(element).on('click.bs.dropdown', this.toggle)\n  }\n\n  Dropdown.VERSION = '3.3.5'\n\n  function getParent($this) {\n    var selector = $this.attr('data-target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    var $parent = selector && $(selector)\n\n    return $parent && $parent.length ? $parent : $this.parent()\n  }\n\n  function clearMenus(e) {\n    if (e && e.which === 3) return\n    $(backdrop).remove()\n    $(toggle).each(function () {\n      var $this         = $(this)\n      var $parent       = getParent($this)\n      var relatedTarget = { relatedTarget: this }\n\n      if (!$parent.hasClass('open')) return\n\n      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return\n\n      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this.attr('aria-expanded', 'false')\n      $parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)\n    })\n  }\n\n  Dropdown.prototype.toggle = function (e) {\n    var $this = $(this)\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    clearMenus()\n\n    if (!isActive) {\n      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {\n        // if mobile we use a backdrop because click events don't delegate\n        $(document.createElement('div'))\n          .addClass('dropdown-backdrop')\n          .insertAfter($(this))\n          .on('click', clearMenus)\n      }\n\n      var relatedTarget = { relatedTarget: this }\n      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))\n\n      if (e.isDefaultPrevented()) return\n\n      $this\n        .trigger('focus')\n        .attr('aria-expanded', 'true')\n\n      $parent\n        .toggleClass('open')\n        .trigger('shown.bs.dropdown', relatedTarget)\n    }\n\n    return false\n  }\n\n  Dropdown.prototype.keydown = function (e) {\n    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return\n\n    var $this = $(this)\n\n    e.preventDefault()\n    e.stopPropagation()\n\n    if ($this.is('.disabled, :disabled')) return\n\n    var $parent  = getParent($this)\n    var isActive = $parent.hasClass('open')\n\n    if (!isActive && e.which != 27 || isActive && e.which == 27) {\n      if (e.which == 27) $parent.find(toggle).trigger('focus')\n      return $this.trigger('click')\n    }\n\n    var desc = ' li:not(.disabled):visible a'\n    var $items = $parent.find('.dropdown-menu' + desc)\n\n    if (!$items.length) return\n\n    var index = $items.index(e.target)\n\n    if (e.which == 38 && index > 0)                 index--         // up\n    if (e.which == 40 && index < $items.length - 1) index++         // down\n    if (!~index)                                    index = 0\n\n    $items.eq(index).trigger('focus')\n  }\n\n\n  // DROPDOWN PLUGIN DEFINITION\n  // ==========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.dropdown')\n\n      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))\n      if (typeof option == 'string') data[option].call($this)\n    })\n  }\n\n  var old = $.fn.dropdown\n\n  $.fn.dropdown             = Plugin\n  $.fn.dropdown.Constructor = Dropdown\n\n\n  // DROPDOWN NO CONFLICT\n  // ====================\n\n  $.fn.dropdown.noConflict = function () {\n    $.fn.dropdown = old\n    return this\n  }\n\n\n  // APPLY TO STANDARD DROPDOWN ELEMENTS\n  // ===================================\n\n  $(document)\n    .on('click.bs.dropdown.data-api', clearMenus)\n    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })\n    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)\n    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)\n    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: modal.js v3.3.5\n * http://getbootstrap.com/javascript/#modals\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // MODAL CLASS DEFINITION\n  // ======================\n\n  var Modal = function (element, options) {\n    this.options             = options\n    this.$body               = $(document.body)\n    this.$element            = $(element)\n    this.$dialog             = this.$element.find('.modal-dialog')\n    this.$backdrop           = null\n    this.isShown             = null\n    this.originalBodyPad     = null\n    this.scrollbarWidth      = 0\n    this.ignoreBackdropClick = false\n\n    if (this.options.remote) {\n      this.$element\n        .find('.modal-content')\n        .load(this.options.remote, $.proxy(function () {\n          this.$element.trigger('loaded.bs.modal')\n        }, this))\n    }\n  }\n\n  Modal.VERSION  = '3.3.5'\n\n  Modal.TRANSITION_DURATION = 300\n  Modal.BACKDROP_TRANSITION_DURATION = 150\n\n  Modal.DEFAULTS = {\n    backdrop: true,\n    keyboard: true,\n    show: true\n  }\n\n  Modal.prototype.toggle = function (_relatedTarget) {\n    return this.isShown ? this.hide() : this.show(_relatedTarget)\n  }\n\n  Modal.prototype.show = function (_relatedTarget) {\n    var that = this\n    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })\n\n    this.$element.trigger(e)\n\n    if (this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = true\n\n    this.checkScrollbar()\n    this.setScrollbar()\n    this.$body.addClass('modal-open')\n\n    this.escape()\n    this.resize()\n\n    this.$element.on('click.dismiss.bs.modal', '[data-dismiss=\"modal\"]', $.proxy(this.hide, this))\n\n    this.$dialog.on('mousedown.dismiss.bs.modal', function () {\n      that.$element.one('mouseup.dismiss.bs.modal', function (e) {\n        if ($(e.target).is(that.$element)) that.ignoreBackdropClick = true\n      })\n    })\n\n    this.backdrop(function () {\n      var transition = $.support.transition && that.$element.hasClass('fade')\n\n      if (!that.$element.parent().length) {\n        that.$element.appendTo(that.$body) // don't move modals dom position\n      }\n\n      that.$element\n        .show()\n        .scrollTop(0)\n\n      that.adjustDialog()\n\n      if (transition) {\n        that.$element[0].offsetWidth // force reflow\n      }\n\n      that.$element.addClass('in')\n\n      that.enforceFocus()\n\n      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })\n\n      transition ?\n        that.$dialog // wait for modal to slide in\n          .one('bsTransitionEnd', function () {\n            that.$element.trigger('focus').trigger(e)\n          })\n          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\n        that.$element.trigger('focus').trigger(e)\n    })\n  }\n\n  Modal.prototype.hide = function (e) {\n    if (e) e.preventDefault()\n\n    e = $.Event('hide.bs.modal')\n\n    this.$element.trigger(e)\n\n    if (!this.isShown || e.isDefaultPrevented()) return\n\n    this.isShown = false\n\n    this.escape()\n    this.resize()\n\n    $(document).off('focusin.bs.modal')\n\n    this.$element\n      .removeClass('in')\n      .off('click.dismiss.bs.modal')\n      .off('mouseup.dismiss.bs.modal')\n\n    this.$dialog.off('mousedown.dismiss.bs.modal')\n\n    $.support.transition && this.$element.hasClass('fade') ?\n      this.$element\n        .one('bsTransitionEnd', $.proxy(this.hideModal, this))\n        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :\n      this.hideModal()\n  }\n\n  Modal.prototype.enforceFocus = function () {\n    $(document)\n      .off('focusin.bs.modal') // guard against infinite focus loop\n      .on('focusin.bs.modal', $.proxy(function (e) {\n        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {\n          this.$element.trigger('focus')\n        }\n      }, this))\n  }\n\n  Modal.prototype.escape = function () {\n    if (this.isShown && this.options.keyboard) {\n      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {\n        e.which == 27 && this.hide()\n      }, this))\n    } else if (!this.isShown) {\n      this.$element.off('keydown.dismiss.bs.modal')\n    }\n  }\n\n  Modal.prototype.resize = function () {\n    if (this.isShown) {\n      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))\n    } else {\n      $(window).off('resize.bs.modal')\n    }\n  }\n\n  Modal.prototype.hideModal = function () {\n    var that = this\n    this.$element.hide()\n    this.backdrop(function () {\n      that.$body.removeClass('modal-open')\n      that.resetAdjustments()\n      that.resetScrollbar()\n      that.$element.trigger('hidden.bs.modal')\n    })\n  }\n\n  Modal.prototype.removeBackdrop = function () {\n    this.$backdrop && this.$backdrop.remove()\n    this.$backdrop = null\n  }\n\n  Modal.prototype.backdrop = function (callback) {\n    var that = this\n    var animate = this.$element.hasClass('fade') ? 'fade' : ''\n\n    if (this.isShown && this.options.backdrop) {\n      var doAnimate = $.support.transition && animate\n\n      this.$backdrop = $(document.createElement('div'))\n        .addClass('modal-backdrop ' + animate)\n        .appendTo(this.$body)\n\n      this.$element.on('click.dismiss.bs.modal', $.proxy(function (e) {\n        if (this.ignoreBackdropClick) {\n          this.ignoreBackdropClick = false\n          return\n        }\n        if (e.target !== e.currentTarget) return\n        this.options.backdrop == 'static'\n          ? this.$element[0].focus()\n          : this.hide()\n      }, this))\n\n      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow\n\n      this.$backdrop.addClass('in')\n\n      if (!callback) return\n\n      doAnimate ?\n        this.$backdrop\n          .one('bsTransitionEnd', callback)\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\n        callback()\n\n    } else if (!this.isShown && this.$backdrop) {\n      this.$backdrop.removeClass('in')\n\n      var callbackRemove = function () {\n        that.removeBackdrop()\n        callback && callback()\n      }\n      $.support.transition && this.$element.hasClass('fade') ?\n        this.$backdrop\n          .one('bsTransitionEnd', callbackRemove)\n          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :\n        callbackRemove()\n\n    } else if (callback) {\n      callback()\n    }\n  }\n\n  // these following methods are used to handle overflowing modals\n\n  Modal.prototype.handleUpdate = function () {\n    this.adjustDialog()\n  }\n\n  Modal.prototype.adjustDialog = function () {\n    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight\n\n    this.$element.css({\n      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',\n      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''\n    })\n  }\n\n  Modal.prototype.resetAdjustments = function () {\n    this.$element.css({\n      paddingLeft: '',\n      paddingRight: ''\n    })\n  }\n\n  Modal.prototype.checkScrollbar = function () {\n    var fullWindowWidth = window.innerWidth\n    if (!fullWindowWidth) { // workaround for missing window.innerWidth in IE8\n      var documentElementRect = document.documentElement.getBoundingClientRect()\n      fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left)\n    }\n    this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth\n    this.scrollbarWidth = this.measureScrollbar()\n  }\n\n  Modal.prototype.setScrollbar = function () {\n    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)\n    this.originalBodyPad = document.body.style.paddingRight || ''\n    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)\n  }\n\n  Modal.prototype.resetScrollbar = function () {\n    this.$body.css('padding-right', this.originalBodyPad)\n  }\n\n  Modal.prototype.measureScrollbar = function () { // thx walsh\n    var scrollDiv = document.createElement('div')\n    scrollDiv.className = 'modal-scrollbar-measure'\n    this.$body.append(scrollDiv)\n    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth\n    this.$body[0].removeChild(scrollDiv)\n    return scrollbarWidth\n  }\n\n\n  // MODAL PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option, _relatedTarget) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.modal')\n      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)\n\n      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))\n      if (typeof option == 'string') data[option](_relatedTarget)\n      else if (options.show) data.show(_relatedTarget)\n    })\n  }\n\n  var old = $.fn.modal\n\n  $.fn.modal             = Plugin\n  $.fn.modal.Constructor = Modal\n\n\n  // MODAL NO CONFLICT\n  // =================\n\n  $.fn.modal.noConflict = function () {\n    $.fn.modal = old\n    return this\n  }\n\n\n  // MODAL DATA-API\n  // ==============\n\n  $(document).on('click.bs.modal.data-api', '[data-toggle=\"modal\"]', function (e) {\n    var $this   = $(this)\n    var href    = $this.attr('href')\n    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\\s]+$)/, ''))) // strip for ie7\n    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())\n\n    if ($this.is('a')) e.preventDefault()\n\n    $target.one('show.bs.modal', function (showEvent) {\n      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown\n      $target.one('hidden.bs.modal', function () {\n        $this.is(':visible') && $this.trigger('focus')\n      })\n    })\n    Plugin.call($target, option, this)\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tooltip.js v3.3.5\n * http://getbootstrap.com/javascript/#tooltip\n * Inspired by the original jQuery.tipsy by Jason Frame\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TOOLTIP PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Tooltip = function (element, options) {\n    this.type       = null\n    this.options    = null\n    this.enabled    = null\n    this.timeout    = null\n    this.hoverState = null\n    this.$element   = null\n    this.inState    = null\n\n    this.init('tooltip', element, options)\n  }\n\n  Tooltip.VERSION  = '3.3.5'\n\n  Tooltip.TRANSITION_DURATION = 150\n\n  Tooltip.DEFAULTS = {\n    animation: true,\n    placement: 'top',\n    selector: false,\n    template: '<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',\n    trigger: 'hover focus',\n    title: '',\n    delay: 0,\n    html: false,\n    container: false,\n    viewport: {\n      selector: 'body',\n      padding: 0\n    }\n  }\n\n  Tooltip.prototype.init = function (type, element, options) {\n    this.enabled   = true\n    this.type      = type\n    this.$element  = $(element)\n    this.options   = this.getOptions(options)\n    this.$viewport = this.options.viewport && $($.isFunction(this.options.viewport) ? this.options.viewport.call(this, this.$element) : (this.options.viewport.selector || this.options.viewport))\n    this.inState   = { click: false, hover: false, focus: false }\n\n    if (this.$element[0] instanceof document.constructor && !this.options.selector) {\n      throw new Error('`selector` option must be specified when initializing ' + this.type + ' on the window.document object!')\n    }\n\n    var triggers = this.options.trigger.split(' ')\n\n    for (var i = triggers.length; i--;) {\n      var trigger = triggers[i]\n\n      if (trigger == 'click') {\n        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))\n      } else if (trigger != 'manual') {\n        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'\n        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'\n\n        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))\n        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))\n      }\n    }\n\n    this.options.selector ?\n      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :\n      this.fixTitle()\n  }\n\n  Tooltip.prototype.getDefaults = function () {\n    return Tooltip.DEFAULTS\n  }\n\n  Tooltip.prototype.getOptions = function (options) {\n    options = $.extend({}, this.getDefaults(), this.$element.data(), options)\n\n    if (options.delay && typeof options.delay == 'number') {\n      options.delay = {\n        show: options.delay,\n        hide: options.delay\n      }\n    }\n\n    return options\n  }\n\n  Tooltip.prototype.getDelegateOptions = function () {\n    var options  = {}\n    var defaults = this.getDefaults()\n\n    this._options && $.each(this._options, function (key, value) {\n      if (defaults[key] != value) options[key] = value\n    })\n\n    return options\n  }\n\n  Tooltip.prototype.enter = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget).data('bs.' + this.type)\n\n    if (!self) {\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n      $(obj.currentTarget).data('bs.' + this.type, self)\n    }\n\n    if (obj instanceof $.Event) {\n      self.inState[obj.type == 'focusin' ? 'focus' : 'hover'] = true\n    }\n\n    if (self.tip().hasClass('in') || self.hoverState == 'in') {\n      self.hoverState = 'in'\n      return\n    }\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'in'\n\n    if (!self.options.delay || !self.options.delay.show) return self.show()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'in') self.show()\n    }, self.options.delay.show)\n  }\n\n  Tooltip.prototype.isInStateTrue = function () {\n    for (var key in this.inState) {\n      if (this.inState[key]) return true\n    }\n\n    return false\n  }\n\n  Tooltip.prototype.leave = function (obj) {\n    var self = obj instanceof this.constructor ?\n      obj : $(obj.currentTarget).data('bs.' + this.type)\n\n    if (!self) {\n      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())\n      $(obj.currentTarget).data('bs.' + this.type, self)\n    }\n\n    if (obj instanceof $.Event) {\n      self.inState[obj.type == 'focusout' ? 'focus' : 'hover'] = false\n    }\n\n    if (self.isInStateTrue()) return\n\n    clearTimeout(self.timeout)\n\n    self.hoverState = 'out'\n\n    if (!self.options.delay || !self.options.delay.hide) return self.hide()\n\n    self.timeout = setTimeout(function () {\n      if (self.hoverState == 'out') self.hide()\n    }, self.options.delay.hide)\n  }\n\n  Tooltip.prototype.show = function () {\n    var e = $.Event('show.bs.' + this.type)\n\n    if (this.hasContent() && this.enabled) {\n      this.$element.trigger(e)\n\n      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])\n      if (e.isDefaultPrevented() || !inDom) return\n      var that = this\n\n      var $tip = this.tip()\n\n      var tipId = this.getUID(this.type)\n\n      this.setContent()\n      $tip.attr('id', tipId)\n      this.$element.attr('aria-describedby', tipId)\n\n      if (this.options.animation) $tip.addClass('fade')\n\n      var placement = typeof this.options.placement == 'function' ?\n        this.options.placement.call(this, $tip[0], this.$element[0]) :\n        this.options.placement\n\n      var autoToken = /\\s?auto?\\s?/i\n      var autoPlace = autoToken.test(placement)\n      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'\n\n      $tip\n        .detach()\n        .css({ top: 0, left: 0, display: 'block' })\n        .addClass(placement)\n        .data('bs.' + this.type, this)\n\n      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)\n      this.$element.trigger('inserted.bs.' + this.type)\n\n      var pos          = this.getPosition()\n      var actualWidth  = $tip[0].offsetWidth\n      var actualHeight = $tip[0].offsetHeight\n\n      if (autoPlace) {\n        var orgPlacement = placement\n        var viewportDim = this.getPosition(this.$viewport)\n\n        placement = placement == 'bottom' && pos.bottom + actualHeight > viewportDim.bottom ? 'top'    :\n                    placement == 'top'    && pos.top    - actualHeight < viewportDim.top    ? 'bottom' :\n                    placement == 'right'  && pos.right  + actualWidth  > viewportDim.width  ? 'left'   :\n                    placement == 'left'   && pos.left   - actualWidth  < viewportDim.left   ? 'right'  :\n                    placement\n\n        $tip\n          .removeClass(orgPlacement)\n          .addClass(placement)\n      }\n\n      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)\n\n      this.applyPlacement(calculatedOffset, placement)\n\n      var complete = function () {\n        var prevHoverState = that.hoverState\n        that.$element.trigger('shown.bs.' + that.type)\n        that.hoverState = null\n\n        if (prevHoverState == 'out') that.leave(that)\n      }\n\n      $.support.transition && this.$tip.hasClass('fade') ?\n        $tip\n          .one('bsTransitionEnd', complete)\n          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n        complete()\n    }\n  }\n\n  Tooltip.prototype.applyPlacement = function (offset, placement) {\n    var $tip   = this.tip()\n    var width  = $tip[0].offsetWidth\n    var height = $tip[0].offsetHeight\n\n    // manually read margins because getBoundingClientRect includes difference\n    var marginTop = parseInt($tip.css('margin-top'), 10)\n    var marginLeft = parseInt($tip.css('margin-left'), 10)\n\n    // we must check for NaN for ie 8/9\n    if (isNaN(marginTop))  marginTop  = 0\n    if (isNaN(marginLeft)) marginLeft = 0\n\n    offset.top  += marginTop\n    offset.left += marginLeft\n\n    // $.fn.offset doesn't round pixel values\n    // so we use setOffset directly with our own function B-0\n    $.offset.setOffset($tip[0], $.extend({\n      using: function (props) {\n        $tip.css({\n          top: Math.round(props.top),\n          left: Math.round(props.left)\n        })\n      }\n    }, offset), 0)\n\n    $tip.addClass('in')\n\n    // check to see if placing tip in new offset caused the tip to resize itself\n    var actualWidth  = $tip[0].offsetWidth\n    var actualHeight = $tip[0].offsetHeight\n\n    if (placement == 'top' && actualHeight != height) {\n      offset.top = offset.top + height - actualHeight\n    }\n\n    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)\n\n    if (delta.left) offset.left += delta.left\n    else offset.top += delta.top\n\n    var isVertical          = /top|bottom/.test(placement)\n    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight\n    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'\n\n    $tip.offset(offset)\n    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)\n  }\n\n  Tooltip.prototype.replaceArrow = function (delta, dimension, isVertical) {\n    this.arrow()\n      .css(isVertical ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')\n      .css(isVertical ? 'top' : 'left', '')\n  }\n\n  Tooltip.prototype.setContent = function () {\n    var $tip  = this.tip()\n    var title = this.getTitle()\n\n    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)\n    $tip.removeClass('fade in top bottom left right')\n  }\n\n  Tooltip.prototype.hide = function (callback) {\n    var that = this\n    var $tip = $(this.$tip)\n    var e    = $.Event('hide.bs.' + this.type)\n\n    function complete() {\n      if (that.hoverState != 'in') $tip.detach()\n      that.$element\n        .removeAttr('aria-describedby')\n        .trigger('hidden.bs.' + that.type)\n      callback && callback()\n    }\n\n    this.$element.trigger(e)\n\n    if (e.isDefaultPrevented()) return\n\n    $tip.removeClass('in')\n\n    $.support.transition && $tip.hasClass('fade') ?\n      $tip\n        .one('bsTransitionEnd', complete)\n        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :\n      complete()\n\n    this.hoverState = null\n\n    return this\n  }\n\n  Tooltip.prototype.fixTitle = function () {\n    var $e = this.$element\n    if ($e.attr('title') || typeof $e.attr('data-original-title') != 'string') {\n      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')\n    }\n  }\n\n  Tooltip.prototype.hasContent = function () {\n    return this.getTitle()\n  }\n\n  Tooltip.prototype.getPosition = function ($element) {\n    $element   = $element || this.$element\n\n    var el     = $element[0]\n    var isBody = el.tagName == 'BODY'\n\n    var elRect    = el.getBoundingClientRect()\n    if (elRect.width == null) {\n      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093\n      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })\n    }\n    var elOffset  = isBody ? { top: 0, left: 0 } : $element.offset()\n    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }\n    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null\n\n    return $.extend({}, elRect, scroll, outerDims, elOffset)\n  }\n\n  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {\n    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2 } :\n           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2 } :\n           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :\n        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width }\n\n  }\n\n  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {\n    var delta = { top: 0, left: 0 }\n    if (!this.$viewport) return delta\n\n    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0\n    var viewportDimensions = this.getPosition(this.$viewport)\n\n    if (/right|left/.test(placement)) {\n      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll\n      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight\n      if (topEdgeOffset < viewportDimensions.top) { // top overflow\n        delta.top = viewportDimensions.top - topEdgeOffset\n      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow\n        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset\n      }\n    } else {\n      var leftEdgeOffset  = pos.left - viewportPadding\n      var rightEdgeOffset = pos.left + viewportPadding + actualWidth\n      if (leftEdgeOffset < viewportDimensions.left) { // left overflow\n        delta.left = viewportDimensions.left - leftEdgeOffset\n      } else if (rightEdgeOffset > viewportDimensions.right) { // right overflow\n        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset\n      }\n    }\n\n    return delta\n  }\n\n  Tooltip.prototype.getTitle = function () {\n    var title\n    var $e = this.$element\n    var o  = this.options\n\n    title = $e.attr('data-original-title')\n      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)\n\n    return title\n  }\n\n  Tooltip.prototype.getUID = function (prefix) {\n    do prefix += ~~(Math.random() * 1000000)\n    while (document.getElementById(prefix))\n    return prefix\n  }\n\n  Tooltip.prototype.tip = function () {\n    if (!this.$tip) {\n      this.$tip = $(this.options.template)\n      if (this.$tip.length != 1) {\n        throw new Error(this.type + ' `template` option must consist of exactly 1 top-level element!')\n      }\n    }\n    return this.$tip\n  }\n\n  Tooltip.prototype.arrow = function () {\n    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))\n  }\n\n  Tooltip.prototype.enable = function () {\n    this.enabled = true\n  }\n\n  Tooltip.prototype.disable = function () {\n    this.enabled = false\n  }\n\n  Tooltip.prototype.toggleEnabled = function () {\n    this.enabled = !this.enabled\n  }\n\n  Tooltip.prototype.toggle = function (e) {\n    var self = this\n    if (e) {\n      self = $(e.currentTarget).data('bs.' + this.type)\n      if (!self) {\n        self = new this.constructor(e.currentTarget, this.getDelegateOptions())\n        $(e.currentTarget).data('bs.' + this.type, self)\n      }\n    }\n\n    if (e) {\n      self.inState.click = !self.inState.click\n      if (self.isInStateTrue()) self.enter(self)\n      else self.leave(self)\n    } else {\n      self.tip().hasClass('in') ? self.leave(self) : self.enter(self)\n    }\n  }\n\n  Tooltip.prototype.destroy = function () {\n    var that = this\n    clearTimeout(this.timeout)\n    this.hide(function () {\n      that.$element.off('.' + that.type).removeData('bs.' + that.type)\n      if (that.$tip) {\n        that.$tip.detach()\n      }\n      that.$tip = null\n      that.$arrow = null\n      that.$viewport = null\n    })\n  }\n\n\n  // TOOLTIP PLUGIN DEFINITION\n  // =========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.tooltip')\n      var options = typeof option == 'object' && option\n\n      if (!data && /destroy|hide/.test(option)) return\n      if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.tooltip\n\n  $.fn.tooltip             = Plugin\n  $.fn.tooltip.Constructor = Tooltip\n\n\n  // TOOLTIP NO CONFLICT\n  // ===================\n\n  $.fn.tooltip.noConflict = function () {\n    $.fn.tooltip = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: popover.js v3.3.5\n * http://getbootstrap.com/javascript/#popovers\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // POPOVER PUBLIC CLASS DEFINITION\n  // ===============================\n\n  var Popover = function (element, options) {\n    this.init('popover', element, options)\n  }\n\n  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')\n\n  Popover.VERSION  = '3.3.5'\n\n  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {\n    placement: 'right',\n    trigger: 'click',\n    content: '',\n    template: '<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'\n  })\n\n\n  // NOTE: POPOVER EXTENDS tooltip.js\n  // ================================\n\n  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)\n\n  Popover.prototype.constructor = Popover\n\n  Popover.prototype.getDefaults = function () {\n    return Popover.DEFAULTS\n  }\n\n  Popover.prototype.setContent = function () {\n    var $tip    = this.tip()\n    var title   = this.getTitle()\n    var content = this.getContent()\n\n    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)\n    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events\n      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'\n    ](content)\n\n    $tip.removeClass('fade top bottom left right in')\n\n    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do\n    // this manually by checking the contents.\n    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()\n  }\n\n  Popover.prototype.hasContent = function () {\n    return this.getTitle() || this.getContent()\n  }\n\n  Popover.prototype.getContent = function () {\n    var $e = this.$element\n    var o  = this.options\n\n    return $e.attr('data-content')\n      || (typeof o.content == 'function' ?\n            o.content.call($e[0]) :\n            o.content)\n  }\n\n  Popover.prototype.arrow = function () {\n    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))\n  }\n\n\n  // POPOVER PLUGIN DEFINITION\n  // =========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.popover')\n      var options = typeof option == 'object' && option\n\n      if (!data && /destroy|hide/.test(option)) return\n      if (!data) $this.data('bs.popover', (data = new Popover(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.popover\n\n  $.fn.popover             = Plugin\n  $.fn.popover.Constructor = Popover\n\n\n  // POPOVER NO CONFLICT\n  // ===================\n\n  $.fn.popover.noConflict = function () {\n    $.fn.popover = old\n    return this\n  }\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: scrollspy.js v3.3.5\n * http://getbootstrap.com/javascript/#scrollspy\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // SCROLLSPY CLASS DEFINITION\n  // ==========================\n\n  function ScrollSpy(element, options) {\n    this.$body          = $(document.body)\n    this.$scrollElement = $(element).is(document.body) ? $(window) : $(element)\n    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)\n    this.selector       = (this.options.target || '') + ' .nav li > a'\n    this.offsets        = []\n    this.targets        = []\n    this.activeTarget   = null\n    this.scrollHeight   = 0\n\n    this.$scrollElement.on('scroll.bs.scrollspy', $.proxy(this.process, this))\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.VERSION  = '3.3.5'\n\n  ScrollSpy.DEFAULTS = {\n    offset: 10\n  }\n\n  ScrollSpy.prototype.getScrollHeight = function () {\n    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)\n  }\n\n  ScrollSpy.prototype.refresh = function () {\n    var that          = this\n    var offsetMethod  = 'offset'\n    var offsetBase    = 0\n\n    this.offsets      = []\n    this.targets      = []\n    this.scrollHeight = this.getScrollHeight()\n\n    if (!$.isWindow(this.$scrollElement[0])) {\n      offsetMethod = 'position'\n      offsetBase   = this.$scrollElement.scrollTop()\n    }\n\n    this.$body\n      .find(this.selector)\n      .map(function () {\n        var $el   = $(this)\n        var href  = $el.data('target') || $el.attr('href')\n        var $href = /^#./.test(href) && $(href)\n\n        return ($href\n          && $href.length\n          && $href.is(':visible')\n          && [[$href[offsetMethod]().top + offsetBase, href]]) || null\n      })\n      .sort(function (a, b) { return a[0] - b[0] })\n      .each(function () {\n        that.offsets.push(this[0])\n        that.targets.push(this[1])\n      })\n  }\n\n  ScrollSpy.prototype.process = function () {\n    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset\n    var scrollHeight = this.getScrollHeight()\n    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()\n    var offsets      = this.offsets\n    var targets      = this.targets\n    var activeTarget = this.activeTarget\n    var i\n\n    if (this.scrollHeight != scrollHeight) {\n      this.refresh()\n    }\n\n    if (scrollTop >= maxScroll) {\n      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)\n    }\n\n    if (activeTarget && scrollTop < offsets[0]) {\n      this.activeTarget = null\n      return this.clear()\n    }\n\n    for (i = offsets.length; i--;) {\n      activeTarget != targets[i]\n        && scrollTop >= offsets[i]\n        && (offsets[i + 1] === undefined || scrollTop < offsets[i + 1])\n        && this.activate(targets[i])\n    }\n  }\n\n  ScrollSpy.prototype.activate = function (target) {\n    this.activeTarget = target\n\n    this.clear()\n\n    var selector = this.selector +\n      '[data-target=\"' + target + '\"],' +\n      this.selector + '[href=\"' + target + '\"]'\n\n    var active = $(selector)\n      .parents('li')\n      .addClass('active')\n\n    if (active.parent('.dropdown-menu').length) {\n      active = active\n        .closest('li.dropdown')\n        .addClass('active')\n    }\n\n    active.trigger('activate.bs.scrollspy')\n  }\n\n  ScrollSpy.prototype.clear = function () {\n    $(this.selector)\n      .parentsUntil(this.options.target, '.active')\n      .removeClass('active')\n  }\n\n\n  // SCROLLSPY PLUGIN DEFINITION\n  // ===========================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.scrollspy')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.scrollspy\n\n  $.fn.scrollspy             = Plugin\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n\n  // SCROLLSPY NO CONFLICT\n  // =====================\n\n  $.fn.scrollspy.noConflict = function () {\n    $.fn.scrollspy = old\n    return this\n  }\n\n\n  // SCROLLSPY DATA-API\n  // ==================\n\n  $(window).on('load.bs.scrollspy.data-api', function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      Plugin.call($spy, $spy.data())\n    })\n  })\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: tab.js v3.3.5\n * http://getbootstrap.com/javascript/#tabs\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // TAB CLASS DEFINITION\n  // ====================\n\n  var Tab = function (element) {\n    // jscs:disable requireDollarBeforejQueryAssignment\n    this.element = $(element)\n    // jscs:enable requireDollarBeforejQueryAssignment\n  }\n\n  Tab.VERSION = '3.3.5'\n\n  Tab.TRANSITION_DURATION = 150\n\n  Tab.prototype.show = function () {\n    var $this    = this.element\n    var $ul      = $this.closest('ul:not(.dropdown-menu)')\n    var selector = $this.data('target')\n\n    if (!selector) {\n      selector = $this.attr('href')\n      selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, '') // strip for ie7\n    }\n\n    if ($this.parent('li').hasClass('active')) return\n\n    var $previous = $ul.find('.active:last a')\n    var hideEvent = $.Event('hide.bs.tab', {\n      relatedTarget: $this[0]\n    })\n    var showEvent = $.Event('show.bs.tab', {\n      relatedTarget: $previous[0]\n    })\n\n    $previous.trigger(hideEvent)\n    $this.trigger(showEvent)\n\n    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return\n\n    var $target = $(selector)\n\n    this.activate($this.closest('li'), $ul)\n    this.activate($target, $target.parent(), function () {\n      $previous.trigger({\n        type: 'hidden.bs.tab',\n        relatedTarget: $this[0]\n      })\n      $this.trigger({\n        type: 'shown.bs.tab',\n        relatedTarget: $previous[0]\n      })\n    })\n  }\n\n  Tab.prototype.activate = function (element, container, callback) {\n    var $active    = container.find('> .active')\n    var transition = callback\n      && $.support.transition\n      && ($active.length && $active.hasClass('fade') || !!container.find('> .fade').length)\n\n    function next() {\n      $active\n        .removeClass('active')\n        .find('> .dropdown-menu > .active')\n          .removeClass('active')\n        .end()\n        .find('[data-toggle=\"tab\"]')\n          .attr('aria-expanded', false)\n\n      element\n        .addClass('active')\n        .find('[data-toggle=\"tab\"]')\n          .attr('aria-expanded', true)\n\n      if (transition) {\n        element[0].offsetWidth // reflow for transition\n        element.addClass('in')\n      } else {\n        element.removeClass('fade')\n      }\n\n      if (element.parent('.dropdown-menu').length) {\n        element\n          .closest('li.dropdown')\n            .addClass('active')\n          .end()\n          .find('[data-toggle=\"tab\"]')\n            .attr('aria-expanded', true)\n      }\n\n      callback && callback()\n    }\n\n    $active.length && transition ?\n      $active\n        .one('bsTransitionEnd', next)\n        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :\n      next()\n\n    $active.removeClass('in')\n  }\n\n\n  // TAB PLUGIN DEFINITION\n  // =====================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this = $(this)\n      var data  = $this.data('bs.tab')\n\n      if (!data) $this.data('bs.tab', (data = new Tab(this)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.tab\n\n  $.fn.tab             = Plugin\n  $.fn.tab.Constructor = Tab\n\n\n  // TAB NO CONFLICT\n  // ===============\n\n  $.fn.tab.noConflict = function () {\n    $.fn.tab = old\n    return this\n  }\n\n\n  // TAB DATA-API\n  // ============\n\n  var clickHandler = function (e) {\n    e.preventDefault()\n    Plugin.call($(this), 'show')\n  }\n\n  $(document)\n    .on('click.bs.tab.data-api', '[data-toggle=\"tab\"]', clickHandler)\n    .on('click.bs.tab.data-api', '[data-toggle=\"pill\"]', clickHandler)\n\n}(jQuery);\n\n/* ========================================================================\n * Bootstrap: affix.js v3.3.5\n * http://getbootstrap.com/javascript/#affix\n * ========================================================================\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * ======================================================================== */\n\n\n+function ($) {\n  'use strict';\n\n  // AFFIX CLASS DEFINITION\n  // ======================\n\n  var Affix = function (element, options) {\n    this.options = $.extend({}, Affix.DEFAULTS, options)\n\n    this.$target = $(this.options.target)\n      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))\n      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))\n\n    this.$element     = $(element)\n    this.affixed      = null\n    this.unpin        = null\n    this.pinnedOffset = null\n\n    this.checkPosition()\n  }\n\n  Affix.VERSION  = '3.3.5'\n\n  Affix.RESET    = 'affix affix-top affix-bottom'\n\n  Affix.DEFAULTS = {\n    offset: 0,\n    target: window\n  }\n\n  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {\n    var scrollTop    = this.$target.scrollTop()\n    var position     = this.$element.offset()\n    var targetHeight = this.$target.height()\n\n    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false\n\n    if (this.affixed == 'bottom') {\n      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'\n      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'\n    }\n\n    var initializing   = this.affixed == null\n    var colliderTop    = initializing ? scrollTop : position.top\n    var colliderHeight = initializing ? targetHeight : height\n\n    if (offsetTop != null && scrollTop <= offsetTop) return 'top'\n    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'\n\n    return false\n  }\n\n  Affix.prototype.getPinnedOffset = function () {\n    if (this.pinnedOffset) return this.pinnedOffset\n    this.$element.removeClass(Affix.RESET).addClass('affix')\n    var scrollTop = this.$target.scrollTop()\n    var position  = this.$element.offset()\n    return (this.pinnedOffset = position.top - scrollTop)\n  }\n\n  Affix.prototype.checkPositionWithEventLoop = function () {\n    setTimeout($.proxy(this.checkPosition, this), 1)\n  }\n\n  Affix.prototype.checkPosition = function () {\n    if (!this.$element.is(':visible')) return\n\n    var height       = this.$element.height()\n    var offset       = this.options.offset\n    var offsetTop    = offset.top\n    var offsetBottom = offset.bottom\n    var scrollHeight = Math.max($(document).height(), $(document.body).height())\n\n    if (typeof offset != 'object')         offsetBottom = offsetTop = offset\n    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)\n    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)\n\n    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)\n\n    if (this.affixed != affix) {\n      if (this.unpin != null) this.$element.css('top', '')\n\n      var affixType = 'affix' + (affix ? '-' + affix : '')\n      var e         = $.Event(affixType + '.bs.affix')\n\n      this.$element.trigger(e)\n\n      if (e.isDefaultPrevented()) return\n\n      this.affixed = affix\n      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null\n\n      this.$element\n        .removeClass(Affix.RESET)\n        .addClass(affixType)\n        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')\n    }\n\n    if (affix == 'bottom') {\n      this.$element.offset({\n        top: scrollHeight - height - offsetBottom\n      })\n    }\n  }\n\n\n  // AFFIX PLUGIN DEFINITION\n  // =======================\n\n  function Plugin(option) {\n    return this.each(function () {\n      var $this   = $(this)\n      var data    = $this.data('bs.affix')\n      var options = typeof option == 'object' && option\n\n      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  var old = $.fn.affix\n\n  $.fn.affix             = Plugin\n  $.fn.affix.Constructor = Affix\n\n\n  // AFFIX NO CONFLICT\n  // =================\n\n  $.fn.affix.noConflict = function () {\n    $.fn.affix = old\n    return this\n  }\n\n\n  // AFFIX DATA-API\n  // ==============\n\n  $(window).on('load', function () {\n    $('[data-spy=\"affix\"]').each(function () {\n      var $spy = $(this)\n      var data = $spy.data()\n\n      data.offset = data.offset || {}\n\n      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom\n      if (data.offsetTop    != null) data.offset.top    = data.offsetTop\n\n      Plugin.call($spy, data)\n    })\n  })\n\n}(jQuery);\n","Magento_Catalog/js/jquery.zoom.min.js":"/*!\n    Zoom 1.7.14\n    license: MIT\n    http://www.jacklmoore.com/zoom\n*/\n(function ($) {\n    var defaults = {\n        url: false,\n        callback: false,\n        target: false,\n        duration: 120,\n        on: 'mouseover', // other options: grab, click, toggle\n        touch: true, // enables a touch fallback\n        onZoomIn: false,\n        onZoomOut: false,\n        magnify: 1\n    };\n\n    // Core Zoom Logic, independent of event listeners.\n    $.zoom = function(target, source, img, magnify) {\n        var targetHeight,\n            targetWidth,\n            sourceHeight,\n            sourceWidth,\n            xRatio,\n            yRatio,\n            offset,\n            $target = $(target),\n            position = $target.css('position'),\n            $source = $(source);\n\n        // The parent element needs positioning so that the zoomed element can be correctly positioned within.\n        $target.css('position', /(absolute|fixed)/.test(position) ? position : 'relative');\n        $target.css('overflow', 'hidden');\n\n        img.style.width = img.style.height = '';\n\n        $(img)\n            .addClass('zoomImg')\n            .css({\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                opacity: 0,\n                width: img.width * magnify,\n                height: img.height * magnify,\n                border: 'none',\n                maxWidth: 'none',\n                maxHeight: 'none'\n            })\n            .appendTo(target);\n\n        return {\n            init: function() {\n                targetWidth = $target.outerWidth();\n                targetHeight = $target.outerHeight();\n\n                if (source === $target[0]) {\n                    sourceWidth = targetWidth;\n                    sourceHeight = targetHeight;\n                } else {\n                    sourceWidth = $source.outerWidth();\n                    sourceHeight = $source.outerHeight();\n                }\n\n                xRatio = (img.width - targetWidth) / sourceWidth;\n                yRatio = (img.height - targetHeight) / sourceHeight;\n\n                offset = $source.offset();\n            },\n            move: function (e) {\n                var left = (e.pageX - offset.left),\n                    top = (e.pageY - offset.top);\n\n                top = Math.max(Math.min(top, sourceHeight), 0);\n                left = Math.max(Math.min(left, sourceWidth), 0);\n\n                img.style.left = (left * -xRatio) + 'px';\n                img.style.top = (top * -yRatio) + 'px';\n            }\n        };\n    };\n\n    $.fn.zoom = function (options) {\n        return this.each(function () {\n            var\n            settings = $.extend({}, defaults, options || {}),\n            //target will display the zoomed image\n            target = settings.target || this,\n            //source will provide zoom location info (thumbnail)\n            source = this,\n            $source = $(source),\n            $target = $(target),\n            img = document.createElement('img'),\n            $img = $(img),\n            mousemove = 'mousemove.zoom',\n            clicked = false,\n            touched = false,\n            $urlElement;\n\n            // If a url wasn't specified, look for an image element.\n            if (!settings.url) {\n                $urlElement = $source.find('img');\n                if ($urlElement[0]) {\n                    settings.url = $urlElement.data('src') || $urlElement.attr('src');\n                }\n                if (!settings.url) {\n                    return;\n                }\n            }\n\n            (function(){\n                var position = $target.css('position');\n                var overflow = $target.css('overflow');\n\n                $source.one('zoom.destroy', function(){\n                    $source.off(\".zoom\");\n                    $target.css('position', position);\n                    $target.css('overflow', overflow);\n                    $img.remove();\n                });\n                \n            }());\n\n            img.onload = function () {\n                var zoom = $.zoom(target, source, img, settings.magnify);\n\n                function start(e) {\n                    zoom.init();\n                    zoom.move(e);\n\n                    // Skip the fade-in for IE8 and lower since it chokes on fading-in\n                    // and changing position based on mousemovement at the same time.\n                    $img.stop()\n                    .fadeTo($.support.opacity ? settings.duration : 0, 1, $.isFunction(settings.onZoomIn) ? settings.onZoomIn.call(img) : false);\n                }\n\n                function stop() {\n                    $img.stop()\n                    .fadeTo(settings.duration, 0, $.isFunction(settings.onZoomOut) ? settings.onZoomOut.call(img) : false);\n                }\n\n                // Mouse events\n                if (settings.on === 'grab') {\n                    $source\n                        .on('mousedown.zoom',\n                            function (e) {\n                                if (e.which === 1) {\n                                    $(document).one('mouseup.zoom',\n                                        function () {\n                                            stop();\n\n                                            $(document).off(mousemove, zoom.move);\n                                        }\n                                    );\n\n                                    start(e);\n\n                                    $(document).on(mousemove, zoom.move);\n\n                                    e.preventDefault();\n                                }\n                            }\n                        );\n                } else if (settings.on === 'click') {\n                    $source.on('click.zoom',\n                        function (e) {\n                            if (clicked) {\n                                // bubble the event up to the document to trigger the unbind.\n                                return;\n                            } else {\n                                clicked = true;\n                                start(e);\n                                $(document).on(mousemove, zoom.move);\n                                $(document).one('click.zoom',\n                                    function () {\n                                        stop();\n                                        clicked = false;\n                                        $(document).off(mousemove, zoom.move);\n                                    }\n                                );\n                                return false;\n                            }\n                        }\n                    );\n                } else if (settings.on === 'toggle') {\n                    $source.on('click.zoom',\n                        function (e) {\n                            if (clicked) {\n                                stop();\n                            } else {\n                                start(e);\n                            }\n                            clicked = !clicked;\n                        }\n                    );\n                } else if (settings.on === 'mouseover') {\n                    zoom.init(); // Preemptively call init because IE7 will fire the mousemove handler before the hover handler.\n\n                    $source\n                        .on('mouseenter.zoom', start)\n                        .on('mouseleave.zoom', stop)\n                        .on(mousemove, zoom.move);\n                }\n\n                // Touch fallback\n                if (settings.touch) {\n                    $source\n                        .on('touchstart.zoom', function (e) {\n                            e.preventDefault();\n                            if (touched) {\n                                touched = false;\n                                stop();\n                            } else {\n                                touched = true;\n                                start( e.originalEvent.touches[0] || e.originalEvent.changedTouches[0] );\n                            }\n                        })\n                        .on('touchmove.zoom', function (e) {\n                            e.preventDefault();\n                            zoom.move( e.originalEvent.touches[0] || e.originalEvent.changedTouches[0] );\n                        });\n                }\n                \n                if ($.isFunction(settings.callback)) {\n                    settings.callback.call(img);\n                }\n            };\n\n            img.src = settings.url;\n        });\n    };\n\n    $.fn.zoom.defaults = defaults;\n}(window.jQuery));\n","IWD_Opc/js/model/sidebar.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [],\r\n    function() {\r\n        'use strict';\r\n        return {\r\n            popUp: false,\r\n            setPopup: function(popUp) {\r\n                this.popUp = popUp;\r\n            },\r\n            show: function() {\r\n                if (this.popUp) {\r\n                    this.popUp.modal('openModal');\r\n                }\r\n            },\r\n            hide: function() {\r\n                if (this.popUp) {\r\n                    this.popUp.modal('closeModal');\r\n                }\r\n            }\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/model/shipping-rate-service.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true*/\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'Magento_Checkout/js/model/quote',\r\n        'IWD_Opc/js/model/shipping-rate-processor/new-address',\r\n        'IWD_Opc/js/model/shipping-rate-processor/customer-address'\r\n    ],\r\n    function(quote, defaultProcessor, customerAddressProcessor) {\r\n        \"use strict\";\r\n        var processors = [];\r\n        processors['default'] =  defaultProcessor;\r\n        processors['customer-address'] = customerAddressProcessor;\r\n\r\n        quote.shippingAddress.subscribe(function () {\r\n            var type = quote.shippingAddress().getType();\r\n            if (processors[type]) {\r\n                processors[type].getRates(quote.shippingAddress());\r\n            } else {\r\n                processors['default'].getRates(quote.shippingAddress());\r\n            }\r\n        });\r\n\r\n        return {\r\n            registerProcessor: function(type, processor) {\r\n                processors[type] = processor;\r\n            }\r\n        }\r\n    }\r\n);\r\n","IWD_Opc/js/model/resource-url-manager.js":"define(\r\n    [\r\n        'Magento_Customer/js/model/customer',\r\n        'Magento_Checkout/js/model/url-builder',\r\n        'mageUtils'\r\n    ],\r\n    function(customer, urlBuilder, utils) {\r\n        \"use strict\";\r\n        return {\r\n            getAdditionalInformationUrl: function(quote) {\r\n                var params = (this.getCheckoutMethod() == 'guest') ? {cartId: quote.getQuoteId()} : {};\r\n                var urls = {\r\n                    'guest': '/guest-carts/:cartId/additional-information',\r\n                    'customer': '/carts/mine/additional-information'\r\n                };\r\n                return this.getUrl(urls, params);\r\n            },\r\n\r\n            /** Get url for service */\r\n            getUrl: function(urls, urlParams) {\r\n                var url;\r\n\r\n                if (utils.isEmpty(urls)) {\r\n                    return 'Provided service call does not exist.';\r\n                }\r\n\r\n                if (!utils.isEmpty(urls['default'])) {\r\n                    url = urls['default'];\r\n                } else {\r\n                    url = urls[this.getCheckoutMethod()];\r\n                }\r\n                return urlBuilder.createUrl(url, urlParams);\r\n            },\r\n\r\n            getCheckoutMethod: function() {\r\n                return customer.isLoggedIn() ? 'customer' : 'guest';\r\n            }\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/model/shipping-rates-validator.js":"define(\r\n    [\r\n        'jquery',\r\n        'ko',\r\n        'Magento_Checkout/js/model/shipping-rates-validation-rules',\r\n        'Magento_Checkout/js/model/address-converter',\r\n        'Magento_Checkout/js/action/select-shipping-address',\r\n        'Magento_Checkout/js/model/postcode-validator',\r\n        'Magento_Checkout/js/model/shipping-rates-validator',\r\n        'Magento_Checkout/js/action/set-shipping-information',\r\n        'Magento_Checkout/js/model/quote',\r\n        'mage/translate'\r\n    ],\r\n    function ($, ko, shippingRatesValidationRules, addressConverter, selectShippingAddress, postcodeValidator, shippingRatesValidator, setShippingInformation, quote, $t) {\r\n        'use strict';\r\n\r\n        var checkoutConfig = window.checkoutConfig,\r\n            validators = [],\r\n            observedElements = [],\r\n            postcodeElement = null;\r\n\r\n        return {\r\n            validateAddressTimeout: 0,\r\n            validateDelay: 2000,\r\n\r\n            /**\r\n             * @param {String} carrier\r\n             * @param {Object} validator\r\n             */\r\n            registerValidator: function (carrier, validator) {\r\n                if (checkoutConfig.activeCarriers.indexOf(carrier) != -1) {\r\n                    validators.push(validator);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {Object} address\r\n             * @return {Boolean}\r\n             */\r\n            validateAddressData: function (address) {\r\n                return shippingRatesValidator.validateAddressData(address);\r\n            },\r\n\r\n            /**\r\n             * @param {*} elements\r\n             * @param {Boolean} force\r\n             * @param {Number} delay\r\n             */\r\n            bindChangeHandlers: function (elements, force, delay) {\r\n                var self = this,\r\n                    observableFields = shippingRatesValidationRules.getObservableFields();\r\n\r\n                $.each(elements, function (index, elem) {\r\n                    self.bindHandler(elem);\r\n\r\n                    if (elem.index === 'postcode') {\r\n                        postcodeElement = elem;\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             * @param {Object} element\r\n             * @param {Number} delay\r\n             */\r\n            bindHandler: function (element, delay) {\r\n                var self = this;\r\n\r\n                delay = typeof delay === \"undefined\" ? self.validateDelay : delay;\r\n\r\n                if (element.component.indexOf('/group') != -1) {\r\n                    $.each(element.elems(), function (index, elem) {\r\n                        self.bindHandler(elem);\r\n                    });\r\n                } else {\r\n                    element.on('value', function () {\r\n                        clearTimeout(self.validateAddressTimeout);\r\n                        self.validateAddressTimeout = setTimeout(function () {\r\n                            if (self.postcodeValidation()) {\r\n                                self.validateFields();\r\n                            }\r\n                        }, delay);\r\n                    });\r\n                    observedElements.push(element);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            postcodeValidation: function () {\r\n                var countryId = $('select[name=\"country_id\"]').val(),\r\n                    validationResult = postcodeValidator.validate(postcodeElement.value(), countryId),\r\n                    warnMessage;\r\n\r\n                if (postcodeElement == null || postcodeElement.value() == null) {\r\n                    return true;\r\n                }\r\n\r\n                postcodeElement.warn(null);\r\n\r\n                if (!validationResult) {\r\n                    warnMessage = $t('Provided Zip/Postal Code seems to be invalid.');\r\n                    if (postcodeValidator.validatedPostCodeExample.length) {\r\n                        warnMessage += $t(' Example: ') + postcodeValidator.validatedPostCodeExample.join('; ') + '. ';\r\n                    }\r\n                    warnMessage += $t('If you believe it is the right one you can ignore this notice.');\r\n                    postcodeElement.warn(warnMessage);\r\n                }\r\n\r\n                return validationResult;\r\n            },\r\n\r\n            /**\r\n             * Convert form data to quote address and validate fields for shipping rates\r\n             */\r\n            validateFields: function () {\r\n                var addressFlat = addressConverter.formDataProviderToFlatData(\r\n                        this.collectObservedData(),\r\n                        'shippingAddress'\r\n                    ),\r\n                    address;\r\n\r\n                if (this.validateAddressData(addressFlat)) {\r\n                    address = addressConverter.formAddressDataToQuoteAddress(addressFlat);\r\n                    selectShippingAddress(address);\r\n                    setShippingInformation();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Collect observed fields data to object\r\n             *\r\n             * @returns {*}\r\n             */\r\n            collectObservedData: function () {\r\n                var observedValues = {};\r\n\r\n                $.each(observedElements, function (index, field) {\r\n                    observedValues[field.dataScope] = field.value();\r\n                });\r\n\r\n                return observedValues;\r\n            }\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/model/totals.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'ko',\r\n        'Magento_Checkout/js/model/quote'\r\n    ],\r\n    function (ko, quote) {\r\n        'use strict';\r\n\r\n        var quoteItems = ko.observable(quote.totals().items);\r\n\r\n        quote.totals.subscribe(function (newValue) {\r\n            quoteItems(newValue.items);\r\n        });\r\n\r\n        return {\r\n            totals: quote.totals,\r\n            isLoading: ko.observable(false),\r\n\r\n            /**\r\n             * @return {Function}\r\n             */\r\n            getItems: function () {\r\n                return quoteItems;\r\n            },\r\n\r\n            /**\r\n             * @param code\r\n             * @return {*}\r\n             */\r\n            getSegment: function (code) {\r\n                if (!this.totals()) {\r\n                    return null;\r\n                }\r\n\r\n                for (var i in this.totals().total_segments) {\r\n                    var total = this.totals().total_segments[i];\r\n\r\n                    if (total.code == code) {\r\n                        return total;\r\n                    }\r\n                }\r\n\r\n                return null;\r\n            }\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/model/shipping-service.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'ko',\r\n        'underscore',\r\n        'Magento_Checkout/js/model/checkout-data-resolver'\r\n    ],\r\n    function (ko, _, checkoutDataResolver) {\r\n        \"use strict\";\r\n        var shippingRates = ko.observableArray([]);\r\n        var shippingCarriers = ko.observableArray([]);\r\n\r\n        return {\r\n            isLoading: ko.observable(false),\r\n            /**\r\n             * Set shipping rates\r\n             *\r\n             * @param ratesData\r\n             */\r\n            setShippingRates: function(ratesData) {\r\n\r\n                this.prepareShippingCarriers(ratesData);\r\n                shippingRates(ratesData);\r\n                shippingRates.valueHasMutated();\r\n                checkoutDataResolver.resolveShippingRates(ratesData);\r\n            },\r\n\r\n            /**\r\n             * Get shipping rates\r\n             *\r\n             * @returns {*}\r\n             */\r\n            getShippingRates: function() {\r\n                return shippingRates;\r\n            },\r\n\r\n            /**\r\n             * Get shipping rates\r\n             *\r\n             * @returns {*}\r\n             */\r\n            getShippingCarriers: function() {\r\n                return shippingCarriers;\r\n            },\r\n\r\n            prepareShippingCarriers:function(ratesData){\r\n                shippingCarriers([]);\r\n                var carriers = [];\r\n\r\n                _.each(ratesData, function (rate) {\r\n                    var carrierTitle = rate['carrier_title'];\r\n                    var carrierCode = rate['carrier_code'];\r\n                    if (carriers.indexOf(carrierCode) === -1) {\r\n                        shippingCarriers.push({carrier_title:carrierTitle, carrier_code:carrierCode});\r\n                        carriers.push(carrierCode);\r\n                    }\r\n                });\r\n\r\n                shippingCarriers.valueHasMutated();\r\n            }\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/model/agreements/place-order-mixin.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine([\r\n    'jquery',\r\n    'mage/utils/wrapper'\r\n], function ($, wrapper) {\r\n    'use strict';\r\n    var agreementsConfig = window.checkoutConfig.checkoutAgreements;\r\n\r\n    return function (placeOrderAction) {\r\n        /** Override default place order action and add agreement_ids to request */\r\n        return wrapper.wrap(placeOrderAction, function(originalAction, paymentData, redirectOnSuccess, messageContainer) {\r\n            if (!agreementsConfig.isEnabled) {\r\n                return originalAction(paymentData, redirectOnSuccess, messageContainer);\r\n            }\r\n\r\n            var agreementForm = $('.payment-method._active form[data-role=checkout-agreements]'),\r\n                agreementData = agreementForm.serializeArray(),\r\n                agreementIds = [];\r\n\r\n            agreementData.forEach(function(item) {\r\n                agreementIds.push(item.value);\r\n            });\r\n\r\n            paymentData.extension_attributes = {agreement_ids: agreementIds};\r\n            return originalAction(paymentData, redirectOnSuccess, messageContainer);\r\n        });\r\n    };\r\n});\r\n","IWD_Opc/js/model/agreements/agreements-modal.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Ui/js/modal/modal',\r\n        'mage/translate'\r\n    ],\r\n    function ($, modal, $t) {\r\n        'use strict';\r\n        return {\r\n            modalWindow: null,\r\n\r\n            /** Create popUp window for provided element */\r\n            createModal: function(element) {\r\n                this.modalWindow = element;\r\n                var options = {\r\n                    'type': 'popup',\r\n                    'modalClass': 'agreements-modal',\r\n                    'responsive': true,\r\n                    'innerScroll': true,\r\n                    'trigger': '.show-modal',\r\n                    'buttons': [\r\n                        {\r\n                            text: $t('Back to Checkout'),\r\n                            class: 'action secondary action-hide-popup iwd-close-terms-popup',\r\n                            click: function() {\r\n                                this.closeModal();\r\n                            }\r\n                        }\r\n                    ]\r\n                };\r\n                modal(options, $(this.modalWindow));\r\n            },\r\n\r\n            /** Show login popup window */\r\n            showModal: function() {\r\n                $(this.modalWindow).modal('openModal');\r\n            }\r\n        }\r\n    }\r\n);\r\n","IWD_Opc/js/model/agreements/agreement-validator.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'mage/validation'\r\n    ],\r\n    function ($) {\r\n        'use strict';\r\n        var agreementsConfig = window.checkoutConfig.checkoutAgreements;\r\n        return {\r\n            /**\r\n             * Validate checkout agreements\r\n             *\r\n             * @returns {boolean}\r\n             */\r\n            validate: function() {\r\n                if (!agreementsConfig.isEnabled) {\r\n                    return true;\r\n                }\r\n\r\n                var form = $('form#iwd-checkout-agreements-form');\r\n                form.validation();\r\n                return form.validation('isValid');\r\n            }\r\n        }\r\n    }\r\n);\r\n","IWD_Opc/js/model/payment/discount-messages.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'Magento_Ui/js/model/messages'\r\n    ],\r\n    function (Messages) {\r\n        'use strict';\r\n\r\n        return new Messages();\r\n    }\r\n);\r\n","IWD_Opc/js/model/shipping-rate-processor/new-address.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'Magento_Checkout/js/model/resource-url-manager',\r\n        'Magento_Checkout/js/model/quote',\r\n        'mage/storage',\r\n        'IWD_Opc/js/model/shipping-service',\r\n        'Magento_Checkout/js/model/shipping-rate-registry',\r\n        'Magento_Checkout/js/model/error-processor'\r\n    ],\r\n    function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n        'use strict';\r\n\r\n        return {\r\n            /**\r\n             * Get shipping rates for specified address.\r\n             * @param {Object} address\r\n             */\r\n            getRates: function (address) {\r\n                shippingService.isLoading(true);\r\n                var cache = rateRegistry.get(address.getCacheKey()),\r\n                    serviceUrl = resourceUrlManager.getUrlForEstimationShippingMethodsForNewAddress(quote),\r\n                    payload = JSON.stringify({\r\n                            address: {\r\n                                country_id: address.countryId,\r\n                                region_id: address.regionId,\r\n                                region: address.region,\r\n                                postcode: address.postcode\r\n                            }\r\n                        }\r\n                    );\r\n\r\n                if (cache) {\r\n                    shippingService.setShippingRates(cache);\r\n                    shippingService.isLoading(false);\r\n                } else {\r\n                    storage.post(\r\n                        serviceUrl, payload, false\r\n                    ).done(\r\n                        function (result) {\r\n                            rateRegistry.set(address.getCacheKey(), result);\r\n                            shippingService.setShippingRates(result);\r\n                        }\r\n                    ).fail(\r\n                        function (response) {\r\n                            shippingService.setShippingRates([]);\r\n                            errorProcessor.process(response);\r\n                        }\r\n                    ).always(\r\n                        function () {\r\n                            shippingService.isLoading(false);\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/model/shipping-rate-processor/customer-address.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'Magento_Checkout/js/model/resource-url-manager',\r\n        'Magento_Checkout/js/model/quote',\r\n        'mage/storage',\r\n        'IWD_Opc/js/model/shipping-service',\r\n        'Magento_Checkout/js/model/shipping-rate-registry',\r\n        'Magento_Checkout/js/model/error-processor'\r\n    ],\r\n    function (resourceUrlManager, quote, storage, shippingService, rateRegistry, errorProcessor) {\r\n        \"use strict\";\r\n        return {\r\n            getRates: function(address) {\r\n                shippingService.isLoading(true);\r\n                var cache = rateRegistry.get(address.getKey());\r\n                if (cache) {\r\n                    shippingService.setShippingRates(cache);\r\n                    shippingService.isLoading(false);\r\n                } else {\r\n                    storage.post(\r\n                        resourceUrlManager.getUrlForEstimationShippingMethodsByAddressId(),\r\n                        JSON.stringify({\r\n                            addressId: address.customerAddressId\r\n                        }),\r\n                        false\r\n                    ).done(\r\n                        function(result) {\r\n                            rateRegistry.set(address.getKey(), result);\r\n                            shippingService.setShippingRates(result);\r\n                        }\r\n\r\n                    ).fail(\r\n                        function(response) {\r\n                            shippingService.setShippingRates([]);\r\n                            errorProcessor.process(response);\r\n                        }\r\n                    ).always(\r\n                        function () {\r\n                            shippingService.isLoading(false);\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/action/set-coupon-code.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\n/*global define,alert*/\r\ndefine(\r\n    [\r\n        'ko',\r\n        'jquery',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/resource-url-manager',\r\n        'Magento_Checkout/js/model/payment-service',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'IWD_Opc/js/model/payment/discount-messages',\r\n        'mage/storage',\r\n        'Magento_Checkout/js/action/get-totals',\r\n        'mage/translate',\r\n        'Magento_Checkout/js/model/payment/method-list'\r\n    ],\r\n    function (\r\n        ko,\r\n        $,\r\n        quote,\r\n        urlManager,\r\n        paymentService,\r\n        errorProcessor,\r\n        messageContainer,\r\n        storage,\r\n        getTotalsAction,\r\n        $t,\r\n        paymentMethodList\r\n    ) {\r\n        'use strict';\r\n        return function (couponCode, isApplied, isLoading) {\r\n            var quoteId = quote.getQuoteId();\r\n            var url = urlManager.getApplyCouponUrl(couponCode, quoteId);\r\n            var message = $t('Your coupon was successfully applied');\r\n            return storage.put(\r\n                url,\r\n                {},\r\n                false\r\n            ).done(\r\n                function (response) {\r\n                    if (response) {\r\n                        var deferred = $.Deferred();\r\n                        isLoading(false);\r\n                        isApplied(true);\r\n                        getTotalsAction([], deferred);\r\n                        $.when(deferred).done(function() {\r\n                            paymentService.setPaymentMethods(\r\n                                paymentMethodList()\r\n                            );\r\n                        });\r\n                        messageContainer.addSuccessMessage({'message': message});\r\n                    }\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    isLoading(false);\r\n                    errorProcessor.process(response, messageContainer);\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/action/set-additional-informayion.js":"define(\r\n    [\r\n        'ko',\r\n        'jquery',\r\n        'Magento_Checkout/js/model/quote',\r\n        'IWD_Opc/js/model/resource-url-manager',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'Magento_SalesRule/js/model/payment/discount-messages',\r\n        'mage/storage',\r\n        'Magento_Checkout/js/action/get-totals',\r\n        'mage/translate',\r\n    ],\r\n    function (\r\n        ko,\r\n        $,\r\n        quote,\r\n        urlManager,\r\n        errorProcessor,\r\n        messageContainer,\r\n        storage,\r\n        getTotalsAction,\r\n        $t\r\n    ) {\r\n        'use strict';\r\n        return function (data, isLoading) {\r\n            var url = urlManager.getAdditionalInformationUrl(quote);\r\n            var message = $t('Your information was saved.');\r\n            return storage.post(\r\n                url, JSON.stringify(data)\r\n            ).done(\r\n                function (response) {\r\n                    if (response) {\r\n                        var deferred = $.Deferred();\r\n                        isLoading(false);\r\n                        getTotalsAction([], deferred);\r\n                        messageContainer.addSuccessMessage({'message': message});\r\n                    }\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    isLoading(false);\r\n                    errorProcessor.process(response, messageContainer);\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/action/cancel-coupon.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n\r\n/**\r\n * Customer store credit(balance) application\r\n */\r\n/*global define,alert*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/resource-url-manager',\r\n        'Magento_Checkout/js/model/error-processor',\r\n        'IWD_Opc/js/model/payment/discount-messages',\r\n        'mage/storage',\r\n        'Magento_Checkout/js/action/get-payment-information',\r\n        'Magento_Checkout/js/model/totals',\r\n        'mage/translate'\r\n    ],\r\n    function ($, quote, urlManager, errorProcessor, messageContainer, storage, getPaymentInformationAction, totals, $t) {\r\n        'use strict';\r\n\r\n        return function (isApplied, isLoading) {\r\n            var quoteId = quote.getQuoteId(),\r\n                url = urlManager.getCancelCouponUrl(quoteId),\r\n                message = $t('Your coupon was successfully removed');\r\n            messageContainer.clear();\r\n\r\n            return storage.delete(\r\n                url,\r\n                false\r\n            ).done(\r\n                function () {\r\n                    var deferred = $.Deferred();\r\n                    totals.isLoading(true);\r\n                    getPaymentInformationAction(deferred);\r\n                    $.when(deferred).done(function () {\r\n                        isApplied(false);\r\n                        totals.isLoading(false);\r\n                    });\r\n                    messageContainer.addSuccessMessage({\r\n                        'message': message\r\n                    });\r\n                }\r\n            ).fail(\r\n                function (response) {\r\n                    totals.isLoading(false);\r\n                    errorProcessor.process(response, messageContainer);\r\n                }\r\n            ).always(\r\n                function () {\r\n                    isLoading(false);\r\n                }\r\n            );\r\n        };\r\n    }\r\n);\r\n","IWD_Opc/js/iwd/iwd_opc.js":"define([\r\n        'jquery',\r\n        'Magento_Ui/js/modal/modal',\r\n        'jquery/ui',\r\n        'jquery/validate',\r\n        'IWD_Opc/js/iwd/plugins/jquery.nicescroll.min'\r\n    ],\r\n    function ($, modal) {\r\n        'use strict';\r\n        $.widget('mage.iwdOpc', {\r\n            popup: null,\r\n            init: function () {\r\n                this.showModal();\r\n                this.inputText();\r\n                this.cvvText();\r\n                //this.niceScrollOpc();\r\n            },\r\n\r\n            //niceScrollOpc: function(){\r\n            //    $(document).ready(\r\n            //        function() {\r\n            //            //$('.iwd-checkout-agreements-modal').closest('.modal-content').niceScroll();\r\n            //        }\r\n            //    );\r\n            //},\r\n\r\n            inputText: function () {\r\n                $(document).off('blur', '#authorizenet_directpost_cc_number');\r\n                $(document).on('blur', '#authorizenet_directpost_cc_number', function (e) {\r\n\r\n                    if ($('#authorizenet_directpost_cc_number').val() == 0) {\r\n                        $(this).closest('div.number').find('label').removeClass('focus');\r\n                    }\r\n                });\r\n\r\n                $(document).off('focus', '#authorizenet_directpost_cc_number');\r\n                $(document).on('focus', '#authorizenet_directpost_cc_number', function (e) {\r\n\r\n                    $(this).closest('div.number').find('label').addClass('focus');\r\n\r\n\r\n                });\r\n            },\r\n            cvvText: function () {\r\n                $(document).off('blur', '#authorizenet_directpost_cc_cid');\r\n                $(document).on('blur', '#authorizenet_directpost_cc_cid', function (e) {\r\n\r\n                    if ($('#authorizenet_directpost_cc_cid').val() == 0) {\r\n                        $(this).closest('div.cvv').find('label').removeClass('focus');\r\n                    }\r\n                });\r\n\r\n                $(document).off('focus', '#authorizenet_directpost_cc_cid');\r\n                $(document).on('focus', '#authorizenet_directpost_cc_cid', function (e) {\r\n\r\n                    $(this).closest('div.cvv').find('label').addClass('focus');\r\n\r\n\r\n                });\r\n            },\r\n            showModal: function () {\r\n                var _self = this;\r\n                $(document).off('click touchstart', '.actions-toolbar .remind');\r\n                $(document).on('click touchstart', '.actions-toolbar .remind', function (e) {\r\n                    e.preventDefault();\r\n                    console.log(\"tester1\");\r\n                    _self.displayModal();\r\n                });\r\n            },\r\n            displayModal: function () {\r\n                var modalContent = $(\".iwd-opc-forgotpassword\");\r\n                this.popup = modalContent.modal({\r\n                    autoOpen: true,\r\n                    type: 'popup',\r\n                    //content: modalContent,\r\n                    modalClass: 'iwd-opc-forgot-wrapper',\r\n                    title: '',\r\n                    buttons: [{\r\n                        class: \"iwd-hidden-button-for-popup\",\r\n                        text: 'Back to Login',\r\n                        click: function () {\r\n                            this.closeModal();\r\n                        }\r\n                    }]\r\n                });\r\n            }\r\n        });\r\n\r\n        return $.mage.iwdOpc;\r\n\r\n    });","IWD_Opc/js/iwd/components.js":"define(\r\n    [\r\n        'jquery',\r\n        'ko',\r\n        'Magento_Checkout/js/model/quote'\r\n    ],\r\n    function ($, ko, quote) {\r\n        'use strict';\r\n        ko.bindingHandlers.myTestHandler = {\r\n            init: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n                // This will be called when the binding is first applied to an element\r\n                // Set up any initial state, event handlers, etc. here\r\n                if(window.discountEnable == 0){\r\n                    $('.iwd-discount-code-wrapper').hide();\r\n                }\r\n            },\r\n            update: function (element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n\r\n                // This will be called once when the binding is first applied to an element,\r\n                // and again whenever any observables/computeds that are accessed change\r\n                // Update the DOM element based on the supplied values here.\r\n            }\r\n\r\n        }\r\n    });","IWD_Opc/js/iwd/plugins/jquery.nicescroll.min.js":"(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define([\r\n            \"jquery\",\r\n            \"jquery/jquery.metadata\"\r\n        ], factory);\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n}(function (jQueryIWD) {\r\n\r\n    \"use strict\";\r\n\r\n    // globals\r\n    var domfocus = false;\r\n    var mousefocus = false;\r\n    var tabindexcounter = 0;\r\n    var ascrailcounter = 2000;\r\n    var globalmaxzindex = 0;\r\n\r\n    var $ = jQueryIWD; // sandbox\r\n\r\n    // http://stackoverflow.com/questions/2161159/get-script-path\r\n    function getScriptPath() {\r\n        var scripts = document.getElementsByTagName('script');\r\n        var path = scripts[scripts.length - 1].src.split('?')[0];\r\n        return (path.split('/').length > 0) ? path.split('/').slice(0, -1).join('/') + '/' : '';\r\n    }\r\n\r\n    var vendors = ['webkit', 'ms', 'moz', 'o'];\r\n\r\n    var setAnimationFrame = window.requestAnimationFrame || false;\r\n    var clearAnimationFrame = window.cancelAnimationFrame || false;\r\n\r\n    if (!setAnimationFrame) {  // legacy detection\r\n        for (var vx in vendors) {\r\n            var v = vendors[vx];\r\n            if (!setAnimationFrame) setAnimationFrame = window[v + 'RequestAnimationFrame'];\r\n            if (!clearAnimationFrame) clearAnimationFrame = window[v + 'CancelAnimationFrame'] || window[v + 'CancelRequestAnimationFrame'];\r\n        }\r\n    }\r\n\r\n    var ClsMutationObserver = window.MutationObserver || window.WebKitMutationObserver || false;\r\n\r\n    var _globaloptions = {\r\n        zindex: \"auto\",\r\n        cursoropacitymin: 0,\r\n        cursoropacitymax: 1,\r\n        cursorcolor: \"#424242\",\r\n        cursorwidth: \"5px\",\r\n        cursorborder: \"1px solid #fff\",\r\n        cursorborderradius: \"5px\",\r\n        scrollspeed: 60,\r\n        mousescrollstep: 8 * 3,\r\n        touchbehavior: false,\r\n        hwacceleration: true,\r\n        usetransition: true,\r\n        boxzoom: false,\r\n        dblclickzoom: true,\r\n        gesturezoom: true,\r\n        grabcursorenabled: true,\r\n        autohidemode: true,\r\n        background: \"\",\r\n        iframeautoresize: true,\r\n        cursorminheight: 32,\r\n        preservenativescrolling: true,\r\n        railoffset: false,\r\n        railhoffset: false,\r\n        bouncescroll: true,\r\n        spacebarenabled: true,\r\n        railpadding: {\r\n            top: 0,\r\n            right: 0,\r\n            left: 0,\r\n            bottom: 0\r\n        },\r\n        disableoutline: true,\r\n        horizrailenabled: true,\r\n        railalign: \"right\",\r\n        railvalign: \"bottom\",\r\n        enabletranslate3d: true,\r\n        enablemousewheel: true,\r\n        enablekeyboard: true,\r\n        smoothscroll: true,\r\n        sensitiverail: true,\r\n        enablemouselockapi: true,\r\n        //      cursormaxheight:false,\r\n        cursorfixedheight: false,\r\n        directionlockdeadzone: 6,\r\n        hidecursordelay: 400,\r\n        nativeparentscrolling: true,\r\n        enablescrollonselection: true,\r\n        overflowx: true,\r\n        overflowy: true,\r\n        cursordragspeed: 0.3,\r\n        rtlmode: \"auto\",\r\n        cursordragontouch: false,\r\n        oneaxismousemode: \"auto\",\r\n        scriptpath: getScriptPath(),\r\n        preventmultitouchscrolling: true\r\n    };\r\n\r\n    var browserdetected = false;\r\n\r\n    var getBrowserDetection = function () {\r\n\r\n        if (browserdetected) return browserdetected;\r\n\r\n        var _el = document.createElement('DIV'),\r\n            _style = _el.style,\r\n            _agent = navigator.userAgent,\r\n            _platform = navigator.platform,\r\n            d = {};\r\n\r\n        d.haspointerlock = \"pointerLockElement\" in document || \"webkitPointerLockElement\" in document || \"mozPointerLockElement\" in document;\r\n\r\n        d.isopera = (\"opera\" in window); // 12-\r\n        d.isopera12 = (d.isopera && (\"getUserMedia\" in navigator));\r\n        d.isoperamini = (Object.prototype.toString.call(window.operamini) === \"[object OperaMini]\");\r\n\r\n        d.isie = ((\"all\" in document) && (\"attachEvent\" in _el) && !d.isopera); //IE10-\r\n        d.isieold = (d.isie && !(\"msInterpolationMode\" in _style)); // IE6 and older\r\n        d.isie7 = d.isie && !d.isieold && (!(\"documentMode\" in document) || (document.documentMode == 7));\r\n        d.isie8 = d.isie && (\"documentMode\" in document) && (document.documentMode == 8);\r\n        d.isie9 = d.isie && (\"performance\" in window) && (document.documentMode >= 9);\r\n        d.isie10 = d.isie && (\"performance\" in window) && (document.documentMode == 10);\r\n        d.isie11 = (\"msRequestFullscreen\" in _el) && (document.documentMode >= 11); // IE11+\r\n\r\n        d.isie9mobile = /iemobile.9/i.test(_agent); //wp 7.1 mango\r\n        if (d.isie9mobile) d.isie9 = false;\r\n        d.isie7mobile = (!d.isie9mobile && d.isie7) && /iemobile/i.test(_agent); //wp 7.0\r\n\r\n        d.ismozilla = (\"MozAppearance\" in _style);\r\n\r\n        d.iswebkit = (\"WebkitAppearance\" in _style);\r\n\r\n        d.ischrome = (\"chrome\" in window);\r\n        d.ischrome22 = (d.ischrome && d.haspointerlock);\r\n        d.ischrome26 = (d.ischrome && (\"transition\" in _style)); // issue with transform detection (maintain prefix)\r\n\r\n        d.cantouch = (\"ontouchstart\" in document.documentElement) || (\"ontouchstart\" in window); // detection for Chrome Touch Emulation\r\n        d.hasmstouch = (window.MSPointerEvent || false); // IE10 pointer events\r\n        d.hasw3ctouch = (window.PointerEvent || false); //IE11 pointer events, following W3C Pointer Events spec\r\n\r\n        d.ismac = /^mac$/i.test(_platform);\r\n\r\n        d.isios = (d.cantouch && /iphone|ipad|ipod/i.test(_platform));\r\n        d.isios4 = ((d.isios) && !(\"seal\" in Object));\r\n        d.isios7 = ((d.isios) && (\"webkitHidden\" in document));  //iOS 7+\r\n\r\n        d.isandroid = (/android/i.test(_agent));\r\n\r\n        d.haseventlistener = (\"addEventListener\" in _el);\r\n\r\n        d.trstyle = false;\r\n        d.hastransform = false;\r\n        d.hastranslate3d = false;\r\n        d.transitionstyle = false;\r\n        d.hastransition = false;\r\n        d.transitionend = false;\r\n\r\n        var a;\r\n        var check = ['transform', 'msTransform', 'webkitTransform', 'MozTransform', 'OTransform'];\r\n        for (a = 0; a < check.length; a++) {\r\n            if (typeof _style[check[a]] != \"undefined\") {\r\n                d.trstyle = check[a];\r\n                break;\r\n            }\r\n        }\r\n        d.hastransform = (!!d.trstyle);\r\n        if (d.hastransform) {\r\n            _style[d.trstyle] = \"translate3d(1px,2px,3px)\";\r\n            d.hastranslate3d = /translate3d/.test(_style[d.trstyle]);\r\n        }\r\n\r\n        d.transitionstyle = false;\r\n        d.prefixstyle = '';\r\n        d.transitionend = false;\r\n        check = ['transition', 'webkitTransition', 'msTransition', 'MozTransition', 'OTransition', 'OTransition', 'KhtmlTransition'];\r\n        var prefix = ['', '-webkit-', '-ms-', '-moz-', '-o-', '-o', '-khtml-'];\r\n        var evs = ['transitionend', 'webkitTransitionEnd', 'msTransitionEnd', 'transitionend', 'otransitionend', 'oTransitionEnd', 'KhtmlTransitionEnd'];\r\n        for (a = 0; a < check.length; a++) {\r\n            if (check[a] in _style) {\r\n                d.transitionstyle = check[a];\r\n                d.prefixstyle = prefix[a];\r\n                d.transitionend = evs[a];\r\n                break;\r\n            }\r\n        }\r\n        if (d.ischrome26) {  // always use prefix\r\n            d.prefixstyle = prefix[1];\r\n        }\r\n\r\n        d.hastransition = (d.transitionstyle);\r\n\r\n        function detectCursorGrab() {\r\n            var lst = ['-webkit-grab', '-moz-grab', 'grab'];\r\n            if ((d.ischrome && !d.ischrome22) || d.isie) lst = []; // force setting for IE returns false positive and chrome cursor bug\r\n            for (var a = 0; a < lst.length; a++) {\r\n                var p = lst[a];\r\n                _style.cursor = p;\r\n                if (_style.cursor == p) return p;\r\n            }\r\n            return 'url(//mail.google.com/mail/images/2/openhand.cur),n-resize'; // thank you google for custom cursor!\r\n        }\r\n\r\n        d.cursorgrabvalue = detectCursorGrab();\r\n\r\n        d.hasmousecapture = (\"setCapture\" in _el);\r\n\r\n        d.hasMutationObserver = (ClsMutationObserver !== false);\r\n\r\n        _el = null; //memory released\r\n\r\n        browserdetected = d;\r\n\r\n        return d;\r\n    };\r\n\r\n    var NiceScrollClass = function (myopt, me) {\r\n\r\n        var self = this;\r\n\r\n        this.version = '3.6.0';\r\n        this.name = 'nicescroll';\r\n\r\n        this.me = me;\r\n\r\n        this.opt = {\r\n            doc: $(\"body\"),\r\n            win: false\r\n        };\r\n\r\n        $.extend(this.opt, _globaloptions);  // clone opts\r\n\r\n        // Options for internal use\r\n        this.opt.snapbackspeed = 80;\r\n\r\n        if (myopt || false) {\r\n            for (var a in self.opt) {\r\n                if (typeof myopt[a] != \"undefined\") self.opt[a] = myopt[a];\r\n            }\r\n        }\r\n\r\n        this.doc = self.opt.doc;\r\n        this.iddoc = (this.doc && this.doc[0]) ? this.doc[0].id || '' : '';\r\n        this.ispage = /^BODY|HTML/.test((self.opt.win) ? self.opt.win[0].nodeName : this.doc[0].nodeName);\r\n        this.haswrapper = (self.opt.win !== false);\r\n        this.win = self.opt.win || (this.ispage ? $(window) : this.doc);\r\n        this.docscroll = (this.ispage && !this.haswrapper) ? $(window) : this.win;\r\n        this.body = $(\"body\");\r\n        this.viewport = false;\r\n\r\n        this.isfixed = false;\r\n\r\n        this.iframe = false;\r\n        this.isiframe = ((this.doc[0].nodeName == 'IFRAME') && (this.win[0].nodeName == 'IFRAME'));\r\n\r\n        this.istextarea = (this.win[0].nodeName == 'TEXTAREA');\r\n\r\n        this.forcescreen = false; //force to use screen position on events\r\n\r\n        this.canshowonmouseevent = (self.opt.autohidemode != \"scroll\");\r\n\r\n        // Events jump table    \r\n        this.onmousedown = false;\r\n        this.onmouseup = false;\r\n        this.onmousemove = false;\r\n        this.onmousewheel = false;\r\n        this.onkeypress = false;\r\n        this.ongesturezoom = false;\r\n        this.onclick = false;\r\n\r\n        // Nicescroll custom events\r\n        this.onscrollstart = false;\r\n        this.onscrollend = false;\r\n        this.onscrollcancel = false;\r\n\r\n        this.onzoomin = false;\r\n        this.onzoomout = false;\r\n\r\n        // Let's start!  \r\n        this.view = false;\r\n        this.page = false;\r\n\r\n        this.scroll = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        this.scrollratio = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        this.cursorheight = 20;\r\n        this.scrollvaluemax = 0;\r\n\r\n        this.isrtlmode = (this.opt.rtlmode == \"auto\") ? ((this.win[0] == window ? this.body : this.win).css(\"direction\") == \"rtl\") : (this.opt.rtlmode === true);\r\n        //    this.checkrtlmode = false;\r\n\r\n        this.scrollrunning = false;\r\n\r\n        this.scrollmom = false;\r\n\r\n        this.observer = false;  // observer div changes\r\n        this.observerremover = false;  // observer on parent for remove detection\r\n        this.observerbody = false;  // observer on body for position change\r\n\r\n        do {\r\n            this.id = \"ascrail\" + (ascrailcounter++);\r\n        } while (document.getElementById(this.id));\r\n\r\n        this.rail = false;\r\n        this.cursor = false;\r\n        this.cursorfreezed = false;\r\n        this.selectiondrag = false;\r\n\r\n        this.zoom = false;\r\n        this.zoomactive = false;\r\n\r\n        this.hasfocus = false;\r\n        this.hasmousefocus = false;\r\n\r\n        this.visibility = true;\r\n        this.railslocked = false;  // locked by resize\r\n        this.locked = false;  // prevent lost of locked status sets by user\r\n        this.hidden = false; // rails always hidden\r\n        this.cursoractive = true; // user can interact with cursors\r\n\r\n        this.wheelprevented = false; //prevent mousewheel event\r\n\r\n        this.overflowx = self.opt.overflowx;\r\n        this.overflowy = self.opt.overflowy;\r\n\r\n        this.nativescrollingarea = false;\r\n        this.checkarea = 0;\r\n\r\n        this.events = []; // event list for unbind\r\n\r\n        this.saved = {};  // style saved\r\n\r\n        this.delaylist = {};\r\n        this.synclist = {};\r\n\r\n        this.lastdeltax = 0;\r\n        this.lastdeltay = 0;\r\n\r\n        this.detected = getBrowserDetection();\r\n\r\n        var cap = $.extend({}, this.detected);\r\n\r\n        this.canhwscroll = (cap.hastransform && self.opt.hwacceleration);\r\n        this.ishwscroll = (this.canhwscroll && self.haswrapper);\r\n\r\n        this.hasreversehr = (this.isrtlmode && !cap.iswebkit);  //RTL mode with reverse horizontal axis\r\n\r\n        this.istouchcapable = false; // desktop devices with touch screen support\r\n\r\n        //## Check WebKit-based desktop with touch support\r\n        //## + Firefox 18 nightly build (desktop) false positive (or desktop with touch support)\r\n        if (cap.cantouch && !cap.isios && !cap.isandroid && (cap.iswebkit || cap.ismozilla)) {\r\n            this.istouchcapable = true;\r\n            cap.cantouch = false; // parse normal desktop events\r\n        }\r\n\r\n        //## disable MouseLock API on user request\r\n        if (!self.opt.enablemouselockapi) {\r\n            cap.hasmousecapture = false;\r\n            cap.haspointerlock = false;\r\n        }\r\n\r\n        /* deprecated\r\n         this.delayed = function(name, fn, tm, lazy) {\r\n         };\r\n         */\r\n\r\n        this.debounced = function (name, fn, tm) {\r\n            var dd = self.delaylist[name];\r\n            self.delaylist[name] = fn;\r\n            if (!dd) {\r\n                setTimeout(function () {\r\n                    try {\r\n                        var fn = self.delaylist[name];\r\n                        self.delaylist[name] = false;\r\n                        fn.call(self);\r\n                    } catch (e) {\r\n                    }\r\n                }, tm);\r\n            }\r\n        };\r\n\r\n        var _onsync = false;\r\n\r\n        this.synched = function (name, fn) {\r\n\r\n            function requestSync() {\r\n                if (_onsync) return;\r\n                setAnimationFrame(function () {\r\n                    _onsync = false;\r\n                    for (var nn in self.synclist) {\r\n                        var fn = self.synclist[nn];\r\n                        if (fn) fn.call(self);\r\n                        self.synclist[nn] = false;\r\n                    }\r\n                });\r\n                _onsync = true;\r\n            }\r\n\r\n            self.synclist[name] = fn;\r\n            requestSync();\r\n            return name;\r\n        };\r\n\r\n        this.unsynched = function (name) {\r\n            if (self.synclist[name]) self.synclist[name] = false;\r\n        };\r\n\r\n        this.css = function (el, pars) { // save & set\r\n            for (var n in pars) {\r\n                self.saved.css.push([el, n, el.css(n)]);\r\n                el.css(n, pars[n]);\r\n            }\r\n        };\r\n\r\n        this.scrollTop = function (val) {\r\n            return (typeof val == \"undefined\") ? self.getScrollTop() : self.setScrollTop(val);\r\n        };\r\n\r\n        this.scrollLeft = function (val) {\r\n            return (typeof val == \"undefined\") ? self.getScrollLeft() : self.setScrollLeft(val);\r\n        };\r\n\r\n        // derived by by Dan Pupius www.pupius.net\r\n        var BezierClass = function (st, ed, spd, p1, p2, p3, p4) {\r\n\r\n            this.st = st;\r\n            this.ed = ed;\r\n            this.spd = spd;\r\n\r\n            this.p1 = p1 || 0;\r\n            this.p2 = p2 || 1;\r\n            this.p3 = p3 || 0;\r\n            this.p4 = p4 || 1;\r\n\r\n            this.ts = (new Date()).getTime();\r\n            this.df = this.ed - this.st;\r\n        };\r\n        BezierClass.prototype = {\r\n            B2: function (t) {\r\n                return 3 * t * t * (1 - t);\r\n            },\r\n            B3: function (t) {\r\n                return 3 * t * (1 - t) * (1 - t);\r\n            },\r\n            B4: function (t) {\r\n                return (1 - t) * (1 - t) * (1 - t);\r\n            },\r\n            getNow: function () {\r\n                var nw = (new Date()).getTime();\r\n                var pc = 1 - ((nw - this.ts) / this.spd);\r\n                var bz = this.B2(pc) + this.B3(pc) + this.B4(pc);\r\n                return (pc < 0) ? this.ed : this.st + Math.round(this.df * bz);\r\n            },\r\n            update: function (ed, spd) {\r\n                this.st = this.getNow();\r\n                this.ed = ed;\r\n                this.spd = spd;\r\n                this.ts = (new Date()).getTime();\r\n                this.df = this.ed - this.st;\r\n                return this;\r\n            }\r\n        };\r\n\r\n        //derived from http://stackoverflow.com/questions/11236090/\r\n        function getMatrixValues() {\r\n            var tr = self.doc.css(cap.trstyle);\r\n            if (tr && (tr.substr(0, 6) == \"matrix\")) {\r\n                return tr.replace(/^.*\\((.*)\\)$/g, \"$1\").replace(/px/g, '').split(/, +/);\r\n            }\r\n            return false;\r\n        }\r\n\r\n        if (this.ishwscroll) {\r\n            // hw accelerated scroll\r\n            this.doc.translate = {\r\n                x: 0,\r\n                y: 0,\r\n                tx: \"0px\",\r\n                ty: \"0px\"\r\n            };\r\n\r\n            //this one can help to enable hw accel on ios6 http://indiegamr.com/ios6-html-hardware-acceleration-changes-and-how-to-fix-them/\r\n            if (cap.hastranslate3d && cap.isios) this.doc.css(\"-webkit-backface-visibility\", \"hidden\"); // prevent flickering http://stackoverflow.com/questions/3461441/      \r\n\r\n            this.getScrollTop = function (last) {\r\n                if (!last) {\r\n                    var mtx = getMatrixValues();\r\n                    if (mtx) return (mtx.length == 16) ? -mtx[13] : -mtx[5]; //matrix3d 16 on IE10\r\n                    if (self.timerscroll && self.timerscroll.bz) return self.timerscroll.bz.getNow();\r\n                }\r\n                return self.doc.translate.y;\r\n            };\r\n\r\n            this.getScrollLeft = function (last) {\r\n                if (!last) {\r\n                    var mtx = getMatrixValues();\r\n                    if (mtx) return (mtx.length == 16) ? -mtx[12] : -mtx[4]; //matrix3d 16 on IE10\r\n                    if (self.timerscroll && self.timerscroll.bh) return self.timerscroll.bh.getNow();\r\n                }\r\n                return self.doc.translate.x;\r\n            };\r\n\r\n            this.notifyScrollEvent = function (el) {\r\n                var e = document.createEvent(\"UIEvents\");\r\n                e.initUIEvent(\"scroll\", false, true, window, 1);\r\n                e.niceevent = true;\r\n                el.dispatchEvent(e);\r\n            };\r\n\r\n            var cxscrollleft = (this.isrtlmode) ? 1 : -1;\r\n\r\n            if (cap.hastranslate3d && self.opt.enabletranslate3d) {\r\n                this.setScrollTop = function (val, silent) {\r\n                    self.doc.translate.y = val;\r\n                    self.doc.translate.ty = (val * -1) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n                this.setScrollLeft = function (val, silent) {\r\n                    self.doc.translate.x = val;\r\n                    self.doc.translate.tx = (val * cxscrollleft) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate3d(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \",0px)\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n            } else {\r\n                this.setScrollTop = function (val, silent) {\r\n                    self.doc.translate.y = val;\r\n                    self.doc.translate.ty = (val * -1) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n                this.setScrollLeft = function (val, silent) {\r\n                    self.doc.translate.x = val;\r\n                    self.doc.translate.tx = (val * cxscrollleft) + \"px\";\r\n                    self.doc.css(cap.trstyle, \"translate(\" + self.doc.translate.tx + \",\" + self.doc.translate.ty + \")\");\r\n                    if (!silent) self.notifyScrollEvent(self.win[0]);\r\n                };\r\n            }\r\n        } else {\r\n            // native scroll\r\n            this.getScrollTop = function () {\r\n                return self.docscroll.scrollTop();\r\n            };\r\n            this.setScrollTop = function (val) {\r\n                return self.docscroll.scrollTop(val);\r\n            };\r\n            this.getScrollLeft = function () {\r\n                if (self.detected.ismozilla && self.isrtlmode)\r\n                    return Math.abs(self.docscroll.scrollLeft());\r\n                return self.docscroll.scrollLeft();\r\n            };\r\n            this.setScrollLeft = function (val) {\r\n                return self.docscroll.scrollLeft((self.detected.ismozilla && self.isrtlmode) ? -val : val);\r\n            };\r\n        }\r\n\r\n        this.getTarget = function (e) {\r\n            if (!e) return false;\r\n            if (e.target) return e.target;\r\n            if (e.srcElement) return e.srcElement;\r\n            return false;\r\n        };\r\n\r\n        this.hasParent = function (e, id) {\r\n            if (!e) return false;\r\n            var el = e.target || e.srcElement || e || false;\r\n            while (el && el.id != id) {\r\n                el = el.parentNode || false;\r\n            }\r\n            return (el !== false);\r\n        };\r\n\r\n        function getZIndex() {\r\n            var dom = self.win;\r\n            if (\"zIndex\" in dom) return dom.zIndex(); // use jQuery UI method when available\r\n            while (dom.length > 0) {\r\n                if (dom[0].nodeType == 9) return false;\r\n                var zi = dom.css('zIndex');\r\n                if (!isNaN(zi) && zi != 0) return parseInt(zi);\r\n                dom = dom.parent();\r\n            }\r\n            return false;\r\n        }\r\n\r\n        //inspired by http://forum.jquery.com/topic/width-includes-border-width-when-set-to-thin-medium-thick-in-ie\r\n        var _convertBorderWidth = {\r\n            \"thin\": 1,\r\n            \"medium\": 3,\r\n            \"thick\": 5\r\n        };\r\n\r\n        function getWidthToPixel(dom, prop, chkheight) {\r\n            var wd = dom.css(prop);\r\n            var px = parseFloat(wd);\r\n            if (isNaN(px)) {\r\n                px = _convertBorderWidth[wd] || 0;\r\n                var brd = (px == 3) ? ((chkheight) ? (self.win.outerHeight() - self.win.innerHeight()) : (self.win.outerWidth() - self.win.innerWidth())) : 1; //DON'T TRUST CSS\r\n                if (self.isie8 && px) px += 1;\r\n                return (brd) ? px : 0;\r\n            }\r\n            return px;\r\n        }\r\n\r\n        this.getDocumentScrollOffset = function () {\r\n            return {\r\n                top: window.pageYOffset || document.documentElement.scrollTop,\r\n                left: window.pageXOffset || document.documentElement.scrollLeft\r\n            };\r\n        }\r\n\r\n        this.getOffset = function () {\r\n            if (self.isfixed) {\r\n                var ofs = self.win.offset();  // fix Chrome auto issue (when right/bottom props only)\r\n                var scrl = self.getDocumentScrollOffset();\r\n                ofs.top -= scrl.top;\r\n                ofs.left -= scrl.left;\r\n                return ofs;\r\n            }\r\n            var ww = self.win.offset();\r\n            if (!self.viewport) return ww;\r\n            var vp = self.viewport.offset();\r\n            return {\r\n                top: ww.top - vp.top,// + self.viewport.scrollTop(),\r\n                left: ww.left - vp.left // + self.viewport.scrollLeft()\r\n            };\r\n        };\r\n\r\n        this.updateScrollBar = function (len) {\r\n            if (self.ishwscroll) {\r\n                self.rail.css({  //**\r\n                    height: self.win.innerHeight() - (self.opt.railpadding.top + self.opt.railpadding.bottom)\r\n                });\r\n                if (self.railh) self.railh.css({  //**\r\n                    width: self.win.innerWidth() - (self.opt.railpadding.left + self.opt.railpadding.right)\r\n                });\r\n\r\n            } else {\r\n                var wpos = self.getOffset();\r\n                var pos = {\r\n                    top: wpos.top,\r\n                    left: wpos.left - (self.opt.railpadding.left + self.opt.railpadding.right)\r\n                };\r\n                pos.top += getWidthToPixel(self.win, 'border-top-width', true);\r\n                pos.left += (self.rail.align) ? self.win.outerWidth() - getWidthToPixel(self.win, 'border-right-width') - self.rail.width : getWidthToPixel(self.win, 'border-left-width');\r\n\r\n                var off = self.opt.railoffset;\r\n                if (off) {\r\n                    if (off.top) pos.top += off.top;\r\n                    if (self.rail.align && off.left) pos.left += off.left;\r\n                }\r\n\r\n                if (!self.railslocked) self.rail.css({\r\n                    top: pos.top,\r\n                    left: pos.left,\r\n                    height: ((len) ? len.h : self.win.innerHeight()) - (self.opt.railpadding.top + self.opt.railpadding.bottom)\r\n                });\r\n\r\n                if (self.zoom) {\r\n                    self.zoom.css({\r\n                        top: pos.top + 1,\r\n                        left: (self.rail.align == 1) ? pos.left - 20 : pos.left + self.rail.width + 4\r\n                    });\r\n                }\r\n\r\n                if (self.railh && !self.railslocked) {\r\n                    var pos = {\r\n                        top: wpos.top,\r\n                        left: wpos.left\r\n                    };\r\n                    var off = self.opt.railhoffset;\r\n                    if (!!off) {\r\n                        if (!!off.top) pos.top += off.top;\r\n                        if (!!off.left) pos.left += off.left;\r\n                    }\r\n                    var y = (self.railh.align) ? pos.top + getWidthToPixel(self.win, 'border-top-width', true) + self.win.innerHeight() - self.railh.height : pos.top + getWidthToPixel(self.win, 'border-top-width', true);\r\n                    var x = pos.left + getWidthToPixel(self.win, 'border-left-width');\r\n                    self.railh.css({\r\n                        top: y - (self.opt.railpadding.top + self.opt.railpadding.bottom),\r\n                        left: x,\r\n                        width: self.railh.width\r\n                    });\r\n                }\r\n\r\n\r\n            }\r\n        };\r\n\r\n        this.doRailClick = function (e, dbl, hr) {\r\n            var fn, pg, cur, pos;\r\n\r\n            if (self.railslocked) return;\r\n            self.cancelEvent(e);\r\n\r\n            if (dbl) {\r\n                fn = (hr) ? self.doScrollLeft : self.doScrollTop;\r\n                cur = (hr) ? ((e.pageX - self.railh.offset().left - (self.cursorwidth / 2)) * self.scrollratio.x) : ((e.pageY - self.rail.offset().top - (self.cursorheight / 2)) * self.scrollratio.y);\r\n                fn(cur);\r\n            } else {\r\n                fn = (hr) ? self.doScrollLeftBy : self.doScrollBy;\r\n                cur = (hr) ? self.scroll.x : self.scroll.y;\r\n                pos = (hr) ? e.pageX - self.railh.offset().left : e.pageY - self.rail.offset().top;\r\n                pg = (hr) ? self.view.w : self.view.h;\r\n                fn((cur >= pos) ? pg : -pg);//   (cur >= pos) ? fn(pg): fn(-pg);\r\n            }\r\n\r\n        };\r\n\r\n        self.hasanimationframe = (setAnimationFrame);\r\n        self.hascancelanimationframe = (clearAnimationFrame);\r\n\r\n        if (!self.hasanimationframe) {\r\n            setAnimationFrame = function (fn) {\r\n                return setTimeout(fn, 15 - Math.floor((+new Date()) / 1000) % 16);\r\n            }; // 1000/60)};\r\n            clearAnimationFrame = clearInterval;\r\n        } else if (!self.hascancelanimationframe) clearAnimationFrame = function () {\r\n            self.cancelAnimationFrame = true;\r\n        };\r\n\r\n        this.init = function () {\r\n\r\n            self.saved.css = [];\r\n\r\n            if (cap.isie7mobile) return true; // SORRY, DO NOT WORK!\r\n            if (cap.isoperamini) return true; // SORRY, DO NOT WORK!\r\n\r\n            if (cap.hasmstouch) self.css((self.ispage) ? $(\"html\") : self.win, {\r\n                '-ms-touch-action': 'none'\r\n            });\r\n\r\n            self.zindex = \"auto\";\r\n            if (!self.ispage && self.opt.zindex == \"auto\") {\r\n                self.zindex = getZIndex() || \"auto\";\r\n            } else {\r\n                self.zindex = self.opt.zindex;\r\n            }\r\n\r\n            if (!self.ispage && self.zindex != \"auto\") {\r\n                if (self.zindex > globalmaxzindex) globalmaxzindex = self.zindex;\r\n            }\r\n\r\n            if (self.isie && self.zindex == 0 && self.opt.zindex == \"auto\") { // fix IE auto == 0\r\n                self.zindex = \"auto\";\r\n            }\r\n\r\n            if (!self.ispage || (!cap.cantouch && !cap.isieold && !cap.isie9mobile)) {\r\n\r\n                var cont = self.docscroll;\r\n                if (self.ispage) cont = (self.haswrapper) ? self.win : self.doc;\r\n\r\n                if (!cap.isie9mobile) self.css(cont, {\r\n                    'overflow-y': 'hidden'\r\n                });\r\n\r\n                if (self.ispage && cap.isie7) {\r\n                    if (self.doc[0].nodeName == 'BODY') self.css($(\"html\"), {\r\n                        'overflow-y': 'hidden'\r\n                    }); //IE7 double scrollbar issue\r\n                    else if (self.doc[0].nodeName == 'HTML') self.css($(\"body\"), {\r\n                        'overflow-y': 'hidden'\r\n                    }); //IE7 double scrollbar issue\r\n                }\r\n\r\n                if (cap.isios && !self.ispage && !self.haswrapper) self.css($(\"body\"), {\r\n                    \"-webkit-overflow-scrolling\": \"touch\"\r\n                }); //force hw acceleration\r\n\r\n                var cursor = $(document.createElement('div'));\r\n                cursor.css({\r\n                    position: \"relative\",\r\n                    top: 0,\r\n                    \"float\": \"right\",\r\n                    width: self.opt.cursorwidth,\r\n                    height: \"0px\",\r\n                    'background-color': self.opt.cursorcolor,\r\n                    border: self.opt.cursorborder,\r\n                    'background-clip': 'padding-box',\r\n                    '-webkit-border-radius': self.opt.cursorborderradius,\r\n                    '-moz-border-radius': self.opt.cursorborderradius,\r\n                    'border-radius': self.opt.cursorborderradius\r\n                });\r\n\r\n                cursor.hborder = parseFloat(cursor.outerHeight() - cursor.innerHeight());\r\n\r\n                cursor.addClass('nicescroll-cursors');\r\n\r\n                self.cursor = cursor;\r\n\r\n                var rail = $(document.createElement('div'));\r\n                rail.attr('id', self.id);\r\n                rail.addClass('nicescroll-rails nicescroll-rails-vr');\r\n\r\n                var v, a, kp = [\"left\", \"right\", \"top\", \"bottom\"];  //**\r\n                for (var n in kp) {\r\n                    a = kp[n];\r\n                    v = self.opt.railpadding[a];\r\n                    (v) ? rail.css(\"padding-\" + a, v + \"px\") : self.opt.railpadding[a] = 0;\r\n                }\r\n\r\n                rail.append(cursor);\r\n\r\n                rail.width = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerWidth());\r\n                rail.css({\r\n                    width: rail.width + \"px\",\r\n                    'zIndex': self.zindex,\r\n                    \"background\": self.opt.background,\r\n                    cursor: \"default\"\r\n                });\r\n\r\n                rail.visibility = true;\r\n                rail.scrollable = true;\r\n\r\n                rail.align = (self.opt.railalign == \"left\") ? 0 : 1;\r\n\r\n                self.rail = rail;\r\n\r\n                self.rail.drag = false;\r\n\r\n                var zoom = false;\r\n                if (self.opt.boxzoom && !self.ispage && !cap.isieold) {\r\n                    zoom = document.createElement('div');\r\n\r\n                    self.bind(zoom, \"click\", self.doZoom);\r\n                    self.bind(zoom, \"mouseenter\", function () {\r\n                        self.zoom.css('opacity', self.opt.cursoropacitymax);\r\n                    });\r\n                    self.bind(zoom, \"mouseleave\", function () {\r\n                        self.zoom.css('opacity', self.opt.cursoropacitymin);\r\n                    });\r\n\r\n                    self.zoom = $(zoom);\r\n                    self.zoom.css({\r\n                        \"cursor\": \"pointer\",\r\n                        'z-index': self.zindex,\r\n                        'backgroundImage': 'url(' + self.opt.scriptpath + 'zoomico.png)',\r\n                        'height': 18,\r\n                        'width': 18,\r\n                        'backgroundPosition': '0px 0px'\r\n                    });\r\n                    if (self.opt.dblclickzoom) self.bind(self.win, \"dblclick\", self.doZoom);\r\n                    if (cap.cantouch && self.opt.gesturezoom) {\r\n                        self.ongesturezoom = function (e) {\r\n                            if (e.scale > 1.5) self.doZoomIn(e);\r\n                            if (e.scale < 0.8) self.doZoomOut(e);\r\n                            return self.cancelEvent(e);\r\n                        };\r\n                        self.bind(self.win, \"gestureend\", self.ongesturezoom);\r\n                    }\r\n                }\r\n\r\n                // init HORIZ\r\n\r\n                self.railh = false;\r\n                var railh;\r\n\r\n                if (self.opt.horizrailenabled) {\r\n\r\n                    self.css(cont, {\r\n                        'overflow-x': 'hidden'\r\n                    });\r\n\r\n                    var cursor = $(document.createElement('div'));\r\n                    cursor.css({\r\n                        position: \"absolute\",\r\n                        top: 0,\r\n                        height: self.opt.cursorwidth,\r\n                        width: \"0px\",\r\n                        'background-color': self.opt.cursorcolor,\r\n                        border: self.opt.cursorborder,\r\n                        'background-clip': 'padding-box',\r\n                        '-webkit-border-radius': self.opt.cursorborderradius,\r\n                        '-moz-border-radius': self.opt.cursorborderradius,\r\n                        'border-radius': self.opt.cursorborderradius\r\n                    });\r\n\r\n                    if (cap.isieold) cursor.css({'overflow': 'hidden'});  //IE6 horiz scrollbar issue\r\n\r\n                    cursor.wborder = parseFloat(cursor.outerWidth() - cursor.innerWidth());\r\n\r\n                    cursor.addClass('nicescroll-cursors');\r\n\r\n                    self.cursorh = cursor;\r\n\r\n                    railh = $(document.createElement('div'));\r\n                    railh.attr('id', self.id + '-hr');\r\n                    railh.addClass('nicescroll-rails nicescroll-rails-hr');\r\n                    railh.height = Math.max(parseFloat(self.opt.cursorwidth), cursor.outerHeight());\r\n                    railh.css({\r\n                        height: railh.height + \"px\",\r\n                        'zIndex': self.zindex,\r\n                        \"background\": self.opt.background\r\n                    });\r\n\r\n                    railh.append(cursor);\r\n\r\n                    railh.visibility = true;\r\n                    railh.scrollable = true;\r\n\r\n                    railh.align = (self.opt.railvalign == \"top\") ? 0 : 1;\r\n\r\n                    self.railh = railh;\r\n\r\n                    self.railh.drag = false;\r\n\r\n                }\r\n\r\n                //        \r\n\r\n                if (self.ispage) {\r\n                    rail.css({\r\n                        position: \"fixed\",\r\n                        top: \"0px\",\r\n                        height: \"100%\"\r\n                    });\r\n                    (rail.align) ? rail.css({\r\n                        right: \"0px\"\r\n                    }) : rail.css({\r\n                        left: \"0px\"\r\n                    });\r\n                    self.body.append(rail);\r\n                    if (self.railh) {\r\n                        railh.css({\r\n                            position: \"fixed\",\r\n                            left: \"0px\",\r\n                            width: \"100%\"\r\n                        });\r\n                        (railh.align) ? railh.css({\r\n                            bottom: \"0px\"\r\n                        }) : railh.css({\r\n                            top: \"0px\"\r\n                        });\r\n                        self.body.append(railh);\r\n                    }\r\n                } else {\r\n                    if (self.ishwscroll) {\r\n                        if (self.win.css('position') == 'static') self.css(self.win, {\r\n                            'position': 'relative'\r\n                        });\r\n                        var bd = (self.win[0].nodeName == 'HTML') ? self.body : self.win;\r\n                        $(bd).scrollTop(0).scrollLeft(0);  // fix rail position if content already scrolled\r\n                        if (self.zoom) {\r\n                            self.zoom.css({\r\n                                position: \"absolute\",\r\n                                top: 1,\r\n                                right: 0,\r\n                                \"margin-right\": rail.width + 4\r\n                            });\r\n                            bd.append(self.zoom);\r\n                        }\r\n                        rail.css({\r\n                            position: \"absolute\",\r\n                            top: 0\r\n                        });\r\n                        (rail.align) ? rail.css({\r\n                            right: 0\r\n                        }) : rail.css({\r\n                            left: 0\r\n                        });\r\n                        bd.append(rail);\r\n                        if (railh) {\r\n                            railh.css({\r\n                                position: \"absolute\",\r\n                                left: 0,\r\n                                bottom: 0\r\n                            });\r\n                            (railh.align) ? railh.css({\r\n                                bottom: 0\r\n                            }) : railh.css({\r\n                                top: 0\r\n                            });\r\n                            bd.append(railh);\r\n                        }\r\n                    } else {\r\n                        self.isfixed = (self.win.css(\"position\") == \"fixed\");\r\n                        var rlpos = (self.isfixed) ? \"fixed\" : \"absolute\";\r\n\r\n                        if (!self.isfixed) self.viewport = self.getViewport(self.win[0]);\r\n                        if (self.viewport) {\r\n                            self.body = self.viewport;\r\n                            if ((/fixed|absolute/.test(self.viewport.css(\"position\"))) == false) self.css(self.viewport, {\r\n                                \"position\": \"relative\"\r\n                            });\r\n                        }\r\n\r\n                        rail.css({\r\n                            position: rlpos\r\n                        });\r\n                        if (self.zoom) self.zoom.css({\r\n                            position: rlpos\r\n                        });\r\n                        self.updateScrollBar();\r\n                        self.body.append(rail);\r\n                        if (self.zoom) self.body.append(self.zoom);\r\n                        if (self.railh) {\r\n                            railh.css({\r\n                                position: rlpos\r\n                            });\r\n                            self.body.append(railh);\r\n                        }\r\n                    }\r\n\r\n                    if (cap.isios) self.css(self.win, {\r\n                        '-webkit-tap-highlight-color': 'rgba(0,0,0,0)',\r\n                        '-webkit-touch-callout': 'none'\r\n                    }); // prevent grey layer on click\r\n\r\n                    if (cap.isie && self.opt.disableoutline) self.win.attr(\"hideFocus\", \"true\"); // IE, prevent dotted rectangle on focused div\r\n                    if (cap.iswebkit && self.opt.disableoutline) self.win.css({\"outline\": \"none\"});  // Webkit outline\r\n                    //if (cap.isopera&&self.opt.disableoutline) self.win.css({\"outline\":\"0\"});  // Opera 12- to test [TODO]\r\n\r\n                }\r\n\r\n                if (self.opt.autohidemode === false) {\r\n                    self.autohidedom = false;\r\n                    self.rail.css({\r\n                        opacity: self.opt.cursoropacitymax\r\n                    });\r\n                    if (self.railh) self.railh.css({\r\n                        opacity: self.opt.cursoropacitymax\r\n                    });\r\n                } else if ((self.opt.autohidemode === true) || (self.opt.autohidemode === \"leave\")) {\r\n                    self.autohidedom = $().add(self.rail);\r\n                    if (cap.isie8) self.autohidedom = self.autohidedom.add(self.cursor);\r\n                    if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\r\n                    if (self.railh && cap.isie8) self.autohidedom = self.autohidedom.add(self.cursorh);\r\n                } else if (self.opt.autohidemode == \"scroll\") {\r\n                    self.autohidedom = $().add(self.rail);\r\n                    if (self.railh) self.autohidedom = self.autohidedom.add(self.railh);\r\n                } else if (self.opt.autohidemode == \"cursor\") {\r\n                    self.autohidedom = $().add(self.cursor);\r\n                    if (self.railh) self.autohidedom = self.autohidedom.add(self.cursorh);\r\n                } else if (self.opt.autohidemode == \"hidden\") {\r\n                    self.autohidedom = false;\r\n                    self.hide();\r\n                    self.railslocked = false;\r\n                }\r\n\r\n                if (cap.isie9mobile) {\r\n\r\n                    self.scrollmom = new ScrollMomentumClass2D(self);\r\n\r\n                    self.onmangotouch = function () {\r\n                        var py = self.getScrollTop();\r\n                        var px = self.getScrollLeft();\r\n\r\n                        if ((py == self.scrollmom.lastscrolly) && (px == self.scrollmom.lastscrollx)) return true;\r\n\r\n                        var dfy = py - self.mangotouch.sy;\r\n                        var dfx = px - self.mangotouch.sx;\r\n                        var df = Math.round(Math.sqrt(Math.pow(dfx, 2) + Math.pow(dfy, 2)));\r\n                        if (df == 0) return;\r\n\r\n                        var dry = (dfy < 0) ? -1 : 1;\r\n                        var drx = (dfx < 0) ? -1 : 1;\r\n\r\n                        var tm = +new Date();\r\n                        if (self.mangotouch.lazy) clearTimeout(self.mangotouch.lazy);\r\n\r\n                        if (((tm - self.mangotouch.tm) > 80) || (self.mangotouch.dry != dry) || (self.mangotouch.drx != drx)) {\r\n                            self.scrollmom.stop();\r\n                            self.scrollmom.reset(px, py);\r\n                            self.mangotouch.sy = py;\r\n                            self.mangotouch.ly = py;\r\n                            self.mangotouch.sx = px;\r\n                            self.mangotouch.lx = px;\r\n                            self.mangotouch.dry = dry;\r\n                            self.mangotouch.drx = drx;\r\n                            self.mangotouch.tm = tm;\r\n                        } else {\r\n\r\n                            self.scrollmom.stop();\r\n                            self.scrollmom.update(self.mangotouch.sx - dfx, self.mangotouch.sy - dfy);\r\n                            self.mangotouch.tm = tm;\r\n\r\n                            var ds = Math.max(Math.abs(self.mangotouch.ly - py), Math.abs(self.mangotouch.lx - px));\r\n                            self.mangotouch.ly = py;\r\n                            self.mangotouch.lx = px;\r\n\r\n                            if (ds > 2) {\r\n                                self.mangotouch.lazy = setTimeout(function () {\r\n                                    self.mangotouch.lazy = false;\r\n                                    self.mangotouch.dry = 0;\r\n                                    self.mangotouch.drx = 0;\r\n                                    self.mangotouch.tm = 0;\r\n                                    self.scrollmom.doMomentum(30);\r\n                                }, 100);\r\n                            }\r\n                        }\r\n                    };\r\n\r\n                    var top = self.getScrollTop();\r\n                    var lef = self.getScrollLeft();\r\n                    self.mangotouch = {\r\n                        sy: top,\r\n                        ly: top,\r\n                        dry: 0,\r\n                        sx: lef,\r\n                        lx: lef,\r\n                        drx: 0,\r\n                        lazy: false,\r\n                        tm: 0\r\n                    };\r\n\r\n                    self.bind(self.docscroll, \"scroll\", self.onmangotouch);\r\n\r\n                } else {\r\n\r\n                    if (cap.cantouch || self.istouchcapable || self.opt.touchbehavior || cap.hasmstouch) {\r\n\r\n                        self.scrollmom = new ScrollMomentumClass2D(self);\r\n\r\n                        self.ontouchstart = function (e) {\r\n                            if (e.pointerType && e.pointerType != 2 && e.pointerType != \"touch\") return false;\r\n\r\n                            self.hasmoving = false;\r\n\r\n                            if (!self.railslocked) {\r\n\r\n                                var tg;\r\n                                if (cap.hasmstouch) {\r\n                                    tg = (e.target) ? e.target : false;\r\n                                    while (tg) {\r\n                                        var nc = $(tg).getNiceScroll();\r\n                                        if ((nc.length > 0) && (nc[0].me == self.me)) break;\r\n                                        if (nc.length > 0) return false;\r\n                                        if ((tg.nodeName == 'DIV') && (tg.id == self.id)) break;\r\n                                        tg = (tg.parentNode) ? tg.parentNode : false;\r\n                                    }\r\n                                }\r\n\r\n                                self.cancelScroll();\r\n\r\n                                tg = self.getTarget(e);\r\n\r\n                                if (tg) {\r\n                                    var skp = (/INPUT/i.test(tg.nodeName)) && (/range/i.test(tg.type));\r\n                                    if (skp) return self.stopPropagation(e);\r\n                                }\r\n\r\n                                if (!(\"clientX\" in e) && (\"changedTouches\" in e)) {\r\n                                    e.clientX = e.changedTouches[0].clientX;\r\n                                    e.clientY = e.changedTouches[0].clientY;\r\n                                }\r\n\r\n                                if (self.forcescreen) {\r\n                                    var le = e;\r\n                                    e = {\r\n                                        \"original\": (e.original) ? e.original : e\r\n                                    };\r\n                                    e.clientX = le.screenX;\r\n                                    e.clientY = le.screenY;\r\n                                }\r\n\r\n                                self.rail.drag = {\r\n                                    x: e.clientX,\r\n                                    y: e.clientY,\r\n                                    sx: self.scroll.x,\r\n                                    sy: self.scroll.y,\r\n                                    st: self.getScrollTop(),\r\n                                    sl: self.getScrollLeft(),\r\n                                    pt: 2,\r\n                                    dl: false\r\n                                };\r\n\r\n                                if (self.ispage || !self.opt.directionlockdeadzone) {\r\n                                    self.rail.drag.dl = \"f\";\r\n                                } else {\r\n\r\n                                    var view = {\r\n                                        w: $(window).width(),\r\n                                        h: $(window).height()\r\n                                    };\r\n\r\n                                    var page = {\r\n                                        w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\r\n                                        h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\r\n                                    };\r\n\r\n                                    var maxh = Math.max(0, page.h - view.h);\r\n                                    var maxw = Math.max(0, page.w - view.w);\r\n\r\n                                    if (!self.rail.scrollable && self.railh.scrollable) self.rail.drag.ck = (maxh > 0) ? \"v\" : false;\r\n                                    else if (self.rail.scrollable && !self.railh.scrollable) self.rail.drag.ck = (maxw > 0) ? \"h\" : false;\r\n                                    else self.rail.drag.ck = false;\r\n                                    if (!self.rail.drag.ck) self.rail.drag.dl = \"f\";\r\n                                }\r\n\r\n                                if (self.opt.touchbehavior && self.isiframe && cap.isie) {\r\n                                    var wp = self.win.position();\r\n                                    self.rail.drag.x += wp.left;\r\n                                    self.rail.drag.y += wp.top;\r\n                                }\r\n\r\n                                self.hasmoving = false;\r\n                                self.lastmouseup = false;\r\n                                self.scrollmom.reset(e.clientX, e.clientY);\r\n\r\n                                if (!cap.cantouch && !this.istouchcapable && !e.pointerType) {\r\n\r\n                                    var ip = (tg) ? /INPUT|SELECT|TEXTAREA/i.test(tg.nodeName) : false;\r\n                                    if (!ip) {\r\n                                        if (!self.ispage && cap.hasmousecapture) tg.setCapture();\r\n                                        if (self.opt.touchbehavior) {\r\n                                            if (tg.onclick && !(tg._onclick || false)) { // intercept DOM0 onclick event\r\n                                                tg._onclick = tg.onclick;\r\n                                                tg.onclick = function (e) {\r\n                                                    if (self.hasmoving) return false;\r\n                                                    tg._onclick.call(this, e);\r\n                                                };\r\n                                            }\r\n                                            return self.cancelEvent(e);\r\n                                        }\r\n                                        return self.stopPropagation(e);\r\n                                    }\r\n\r\n                                    if (/SUBMIT|CANCEL|BUTTON/i.test($(tg).attr('type'))) {\r\n                                        pc = {\r\n                                            \"tg\": tg,\r\n                                            \"click\": false\r\n                                        };\r\n                                        self.preventclick = pc;\r\n                                    }\r\n\r\n                                }\r\n                            }\r\n\r\n                        };\r\n\r\n                        self.ontouchend = function (e) {\r\n                            if (!self.rail.drag) return true;\r\n                            if (self.rail.drag.pt == 2) {\r\n                                if (e.pointerType && e.pointerType != 2 && e.pointerType != \"touch\") return false;\r\n                                self.scrollmom.doMomentum();\r\n                                self.rail.drag = false;\r\n                                if (self.hasmoving) {\r\n                                    self.lastmouseup = true;\r\n                                    self.hideCursor();\r\n                                    if (cap.hasmousecapture) document.releaseCapture();\r\n                                    if (!cap.cantouch) return self.cancelEvent(e);\r\n                                }\r\n                            }\r\n                            else if (self.rail.drag.pt == 1) {\r\n                                return self.onmouseup(e);\r\n                            }\r\n\r\n                        };\r\n\r\n                        var moveneedoffset = (self.opt.touchbehavior && self.isiframe && !cap.hasmousecapture);\r\n\r\n                        self.ontouchmove = function (e, byiframe) {\r\n\r\n                            if (!self.rail.drag) return false;\r\n\r\n                            if (e.targetTouches && self.opt.preventmultitouchscrolling) {\r\n                                if (e.targetTouches.length > 1) return false; // multitouch\r\n                            }\r\n\r\n                            if (e.pointerType && e.pointerType != 2 && e.pointerType != \"touch\") return false;\r\n\r\n                            if (self.rail.drag.pt == 2) {\r\n                                if (cap.cantouch && (cap.isios) && (typeof e.original == \"undefined\")) return true; // prevent ios \"ghost\" events by clickable elements\r\n\r\n                                self.hasmoving = true;\r\n\r\n                                if (self.preventclick && !self.preventclick.click) {\r\n                                    self.preventclick.click = self.preventclick.tg.onclick || false;\r\n                                    self.preventclick.tg.onclick = self.onpreventclick;\r\n                                }\r\n\r\n                                var ev = $.extend({\r\n                                    \"original\": e\r\n                                }, e);\r\n                                e = ev;\r\n\r\n                                if ((\"changedTouches\" in e)) {\r\n                                    e.clientX = e.changedTouches[0].clientX;\r\n                                    e.clientY = e.changedTouches[0].clientY;\r\n                                }\r\n\r\n                                if (self.forcescreen) {\r\n                                    var le = e;\r\n                                    e = {\r\n                                        \"original\": (e.original) ? e.original : e\r\n                                    };\r\n                                    e.clientX = le.screenX;\r\n                                    e.clientY = le.screenY;\r\n                                }\r\n\r\n                                var ofy, ofx;\r\n                                ofx = ofy = 0;\r\n\r\n                                if (moveneedoffset && !byiframe) {\r\n                                    var wp = self.win.position();\r\n                                    ofx = -wp.left;\r\n                                    ofy = -wp.top;\r\n                                }\r\n\r\n                                var fy = e.clientY + ofy;\r\n                                var my = (fy - self.rail.drag.y);\r\n                                var fx = e.clientX + ofx;\r\n                                var mx = (fx - self.rail.drag.x);\r\n\r\n                                var ny = self.rail.drag.st - my;\r\n\r\n                                if (self.ishwscroll && self.opt.bouncescroll) {\r\n                                    if (ny < 0) {\r\n                                        ny = Math.round(ny / 2);\r\n                                        //                    fy = 0;\r\n                                    } else if (ny > self.page.maxh) {\r\n                                        ny = self.page.maxh + Math.round((ny - self.page.maxh) / 2);\r\n                                        //                    fy = 0;\r\n                                    }\r\n                                } else {\r\n                                    if (ny < 0) {\r\n                                        ny = 0;\r\n                                        fy = 0;\r\n                                    }\r\n                                    if (ny > self.page.maxh) {\r\n                                        ny = self.page.maxh;\r\n                                        fy = 0;\r\n                                    }\r\n                                }\r\n\r\n                                var nx;\r\n                                if (self.railh && self.railh.scrollable) {\r\n                                    nx = (self.isrtlmode) ? mx - self.rail.drag.sl : self.rail.drag.sl - mx;\r\n\r\n                                    if (self.ishwscroll && self.opt.bouncescroll) {\r\n                                        if (nx < 0) {\r\n                                            nx = Math.round(nx / 2);\r\n                                            //                      fx = 0;\r\n                                        } else if (nx > self.page.maxw) {\r\n                                            nx = self.page.maxw + Math.round((nx - self.page.maxw) / 2);\r\n                                            //                      fx = 0;\r\n                                        }\r\n                                    } else {\r\n                                        if (nx < 0) {\r\n                                            nx = 0;\r\n                                            fx = 0;\r\n                                        }\r\n                                        if (nx > self.page.maxw) {\r\n                                            nx = self.page.maxw;\r\n                                            fx = 0;\r\n                                        }\r\n                                    }\r\n\r\n                                }\r\n\r\n                                var grabbed = false;\r\n                                if (self.rail.drag.dl) {\r\n                                    grabbed = true;\r\n                                    if (self.rail.drag.dl == \"v\") nx = self.rail.drag.sl;\r\n                                    else if (self.rail.drag.dl == \"h\") ny = self.rail.drag.st;\r\n                                } else {\r\n                                    var ay = Math.abs(my);\r\n                                    var ax = Math.abs(mx);\r\n                                    var dz = self.opt.directionlockdeadzone;\r\n                                    if (self.rail.drag.ck == \"v\") {\r\n                                        if (ay > dz && (ax <= (ay * 0.3))) {\r\n                                            self.rail.drag = false;\r\n                                            return true;\r\n                                        } else if (ax > dz) {\r\n                                            self.rail.drag.dl = \"f\";\r\n                                            $(\"body\").scrollTop($(\"body\").scrollTop()); // stop iOS native scrolling (when active javascript has blocked)\r\n                                        }\r\n                                    } else if (self.rail.drag.ck == \"h\") {\r\n                                        if (ax > dz && (ay <= (ax * 0.3))) {\r\n                                            self.rail.drag = false;\r\n                                            return true;\r\n                                        } else if (ay > dz) {\r\n                                            self.rail.drag.dl = \"f\";\r\n                                            $(\"body\").scrollLeft($(\"body\").scrollLeft()); // stop iOS native scrolling (when active javascript has blocked)\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                self.synched(\"touchmove\", function () {\r\n                                    if (self.rail.drag && (self.rail.drag.pt == 2)) {\r\n                                        if (self.prepareTransition) self.prepareTransition(0);\r\n                                        if (self.rail.scrollable) self.setScrollTop(ny);\r\n                                        self.scrollmom.update(fx, fy);\r\n                                        if (self.railh && self.railh.scrollable) {\r\n                                            self.setScrollLeft(nx);\r\n                                            self.showCursor(ny, nx);\r\n                                        } else {\r\n                                            self.showCursor(ny);\r\n                                        }\r\n                                        if (cap.isie10) document.selection.clear();\r\n                                    }\r\n                                });\r\n\r\n                                if (cap.ischrome && self.istouchcapable) grabbed = false; //chrome touch emulation doesn't like!\r\n                                if (grabbed) return self.cancelEvent(e);\r\n                            }\r\n                            else if (self.rail.drag.pt == 1) { // drag on cursor\r\n                                return self.onmousemove(e);\r\n                            }\r\n\r\n                        };\r\n\r\n                    }\r\n\r\n                    self.onmousedown = function (e, hronly) {\r\n                        if (self.rail.drag && self.rail.drag.pt != 1) return;\r\n                        if (self.railslocked) return self.cancelEvent(e);\r\n                        self.cancelScroll();\r\n                        self.rail.drag = {\r\n                            x: e.clientX,\r\n                            y: e.clientY,\r\n                            sx: self.scroll.x,\r\n                            sy: self.scroll.y,\r\n                            pt: 1,\r\n                            hr: (!!hronly)\r\n                        };\r\n                        var tg = self.getTarget(e);\r\n                        if (!self.ispage && cap.hasmousecapture) tg.setCapture();\r\n                        if (self.isiframe && !cap.hasmousecapture) {\r\n                            self.saved.csspointerevents = self.doc.css(\"pointer-events\");\r\n                            self.css(self.doc, {\r\n                                \"pointer-events\": \"none\"\r\n                            });\r\n                        }\r\n                        self.hasmoving = false;\r\n                        return self.cancelEvent(e);\r\n                    };\r\n\r\n                    self.onmouseup = function (e) {\r\n                        if (self.rail.drag) {\r\n                            if (self.rail.drag.pt != 1) return true;\r\n                            if (cap.hasmousecapture) document.releaseCapture();\r\n                            if (self.isiframe && !cap.hasmousecapture) self.doc.css(\"pointer-events\", self.saved.csspointerevents);\r\n                            self.rail.drag = false;\r\n                            //if (!self.rail.active) self.hideCursor();\r\n                            if (self.hasmoving) self.triggerScrollEnd(); // TODO - check &&!self.scrollrunning\r\n                            return self.cancelEvent(e);\r\n                        }\r\n                    };\r\n\r\n                    self.onmousemove = function (e) {\r\n                        if (self.rail.drag) {\r\n                            if (self.rail.drag.pt != 1) return;\r\n\r\n                            if (cap.ischrome && e.which == 0) return self.onmouseup(e);\r\n\r\n                            self.cursorfreezed = true;\r\n                            self.hasmoving = true;\r\n\r\n                            if (self.rail.drag.hr) {\r\n                                self.scroll.x = self.rail.drag.sx + (e.clientX - self.rail.drag.x);\r\n                                if (self.scroll.x < 0) self.scroll.x = 0;\r\n                                var mw = self.scrollvaluemaxw;\r\n                                if (self.scroll.x > mw) self.scroll.x = mw;\r\n                            } else {\r\n                                self.scroll.y = self.rail.drag.sy + (e.clientY - self.rail.drag.y);\r\n                                if (self.scroll.y < 0) self.scroll.y = 0;\r\n                                var my = self.scrollvaluemax;\r\n                                if (self.scroll.y > my) self.scroll.y = my;\r\n                            }\r\n\r\n                            self.synched('mousemove', function () {\r\n                                if (self.rail.drag && (self.rail.drag.pt == 1)) {\r\n                                    self.showCursor();\r\n                                    if (self.rail.drag.hr) {\r\n                                        if (self.hasreversehr) {\r\n                                            self.doScrollLeft(self.scrollvaluemaxw - Math.round(self.scroll.x * self.scrollratio.x), self.opt.cursordragspeed);\r\n                                        } else {\r\n                                            self.doScrollLeft(Math.round(self.scroll.x * self.scrollratio.x), self.opt.cursordragspeed);\r\n                                        }\r\n                                    }\r\n                                    else self.doScrollTop(Math.round(self.scroll.y * self.scrollratio.y), self.opt.cursordragspeed);\r\n                                }\r\n                            });\r\n\r\n                            return self.cancelEvent(e);\r\n                        }\r\n                        /*              \r\n                         else {\r\n                         self.checkarea = true;\r\n                         }\r\n                         */\r\n                    };\r\n\r\n                    if (cap.cantouch || self.opt.touchbehavior) {\r\n\r\n                        self.onpreventclick = function (e) {\r\n                            if (self.preventclick) {\r\n                                self.preventclick.tg.onclick = self.preventclick.click;\r\n                                self.preventclick = false;\r\n                                return self.cancelEvent(e);\r\n                            }\r\n                        }\r\n\r\n                        self.bind(self.win, \"mousedown\", self.ontouchstart); // control content dragging\r\n\r\n                        self.onclick = (cap.isios) ? false : function (e) {\r\n                            if (self.lastmouseup) {\r\n                                self.lastmouseup = false;\r\n                                return self.cancelEvent(e);\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        };\r\n\r\n                        if (self.opt.grabcursorenabled && cap.cursorgrabvalue) {\r\n                            self.css((self.ispage) ? self.doc : self.win, {\r\n                                'cursor': cap.cursorgrabvalue\r\n                            });\r\n                            self.css(self.rail, {\r\n                                'cursor': cap.cursorgrabvalue\r\n                            });\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        var checkSelectionScroll = function (e) {\r\n                            if (!self.selectiondrag) return;\r\n\r\n                            if (e) {\r\n                                var ww = self.win.outerHeight();\r\n                                var df = (e.pageY - self.selectiondrag.top);\r\n                                if (df > 0 && df < ww) df = 0;\r\n                                if (df >= ww) df -= ww;\r\n                                self.selectiondrag.df = df;\r\n                            }\r\n                            if (self.selectiondrag.df == 0) return;\r\n\r\n                            var rt = -Math.floor(self.selectiondrag.df / 6) * 2;\r\n                            self.doScrollBy(rt);\r\n\r\n                            self.debounced(\"doselectionscroll\", function () {\r\n                                checkSelectionScroll()\r\n                            }, 50);\r\n                        };\r\n\r\n                        if (\"getSelection\" in document) { // A grade - Major browsers\r\n                            self.hasTextSelected = function () {\r\n                                return (document.getSelection().rangeCount > 0);\r\n                            };\r\n                        } else if (\"selection\" in document) { //IE9-\r\n                            self.hasTextSelected = function () {\r\n                                return (document.selection.type != \"None\");\r\n                            };\r\n                        } else {\r\n                            self.hasTextSelected = function () { // no support\r\n                                return false;\r\n                            };\r\n                        }\r\n\r\n                        self.onselectionstart = function (e) {\r\n                            /*  More testing - severe chrome issues            \r\n                             if (!self.haswrapper&&(e.which&&e.which==2)) {  // fool browser to manage middle button scrolling\r\n                             self.win.css({'overflow':'auto'});\r\n                             setTimeout(function(){\r\n                             self.win.css({'overflow':''});\r\n                             },10);                \r\n                             return true;\r\n                             }            \r\n                             */\r\n                            if (self.ispage) return;\r\n                            self.selectiondrag = self.win.offset();\r\n                        };\r\n\r\n                        self.onselectionend = function (e) {\r\n                            self.selectiondrag = false;\r\n                        };\r\n                        self.onselectiondrag = function (e) {\r\n                            if (!self.selectiondrag) return;\r\n                            if (self.hasTextSelected()) self.debounced(\"selectionscroll\", function () {\r\n                                checkSelectionScroll(e)\r\n                            }, 250);\r\n                        };\r\n\r\n\r\n                    }\r\n\r\n                    if (cap.hasw3ctouch) { //IE11+\r\n                        self.css(self.rail, {\r\n                            'touch-action': 'none'\r\n                        });\r\n                        self.css(self.cursor, {\r\n                            'touch-action': 'none'\r\n                        });\r\n                        self.bind(self.win, \"pointerdown\", self.ontouchstart);\r\n                        self.bind(document, \"pointerup\", self.ontouchend);\r\n                        self.bind(document, \"pointermove\", self.ontouchmove);\r\n                    } else if (cap.hasmstouch) { //IE10\r\n                        self.css(self.rail, {\r\n                            '-ms-touch-action': 'none'\r\n                        });\r\n                        self.css(self.cursor, {\r\n                            '-ms-touch-action': 'none'\r\n                        });\r\n                        self.bind(self.win, \"MSPointerDown\", self.ontouchstart);\r\n                        self.bind(document, \"MSPointerUp\", self.ontouchend);\r\n                        self.bind(document, \"MSPointerMove\", self.ontouchmove);\r\n                        self.bind(self.cursor, \"MSGestureHold\", function (e) {\r\n                            e.preventDefault()\r\n                        });\r\n                        self.bind(self.cursor, \"contextmenu\", function (e) {\r\n                            e.preventDefault()\r\n                        });\r\n                    } else if (this.istouchcapable) { //desktop with screen touch enabled\r\n                        self.bind(self.win, \"touchstart\", self.ontouchstart);\r\n                        self.bind(document, \"touchend\", self.ontouchend);\r\n                        self.bind(document, \"touchcancel\", self.ontouchend);\r\n                        self.bind(document, \"touchmove\", self.ontouchmove);\r\n                    }\r\n\r\n\r\n                    if (self.opt.cursordragontouch || (!cap.cantouch && !self.opt.touchbehavior)) {\r\n\r\n                        self.rail.css({\r\n                            \"cursor\": \"default\"\r\n                        });\r\n                        self.railh && self.railh.css({\r\n                            \"cursor\": \"default\"\r\n                        });\r\n\r\n                        self.jqbind(self.rail, \"mouseenter\", function () {\r\n                            if (!self.ispage && !self.win.is(\":visible\")) return false;\r\n                            if (self.canshowonmouseevent) self.showCursor();\r\n                            self.rail.active = true;\r\n                        });\r\n                        self.jqbind(self.rail, \"mouseleave\", function () {\r\n                            self.rail.active = false;\r\n                            if (!self.rail.drag) self.hideCursor();\r\n                        });\r\n\r\n                        if (self.opt.sensitiverail) {\r\n                            self.bind(self.rail, \"click\", function (e) {\r\n                                self.doRailClick(e, false, false)\r\n                            });\r\n                            self.bind(self.rail, \"dblclick\", function (e) {\r\n                                self.doRailClick(e, true, false)\r\n                            });\r\n                            self.bind(self.cursor, \"click\", function (e) {\r\n                                self.cancelEvent(e)\r\n                            });\r\n                            self.bind(self.cursor, \"dblclick\", function (e) {\r\n                                self.cancelEvent(e)\r\n                            });\r\n                        }\r\n\r\n                        if (self.railh) {\r\n                            self.jqbind(self.railh, \"mouseenter\", function () {\r\n                                if (!self.ispage && !self.win.is(\":visible\")) return false;\r\n                                if (self.canshowonmouseevent) self.showCursor();\r\n                                self.rail.active = true;\r\n                            });\r\n                            self.jqbind(self.railh, \"mouseleave\", function () {\r\n                                self.rail.active = false;\r\n                                if (!self.rail.drag) self.hideCursor();\r\n                            });\r\n\r\n                            if (self.opt.sensitiverail) {\r\n                                self.bind(self.railh, \"click\", function (e) {\r\n                                    self.doRailClick(e, false, true)\r\n                                });\r\n                                self.bind(self.railh, \"dblclick\", function (e) {\r\n                                    self.doRailClick(e, true, true)\r\n                                });\r\n                                self.bind(self.cursorh, \"click\", function (e) {\r\n                                    self.cancelEvent(e)\r\n                                });\r\n                                self.bind(self.cursorh, \"dblclick\", function (e) {\r\n                                    self.cancelEvent(e)\r\n                                });\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if (!cap.cantouch && !self.opt.touchbehavior) {\r\n\r\n                        self.bind((cap.hasmousecapture) ? self.win : document, \"mouseup\", self.onmouseup);\r\n                        self.bind(document, \"mousemove\", self.onmousemove);\r\n                        if (self.onclick) self.bind(document, \"click\", self.onclick);\r\n\r\n                        self.bind(self.cursor, \"mousedown\", self.onmousedown);\r\n                        self.bind(self.cursor, \"mouseup\", self.onmouseup);\r\n\r\n                        if (self.railh) {\r\n                            self.bind(self.cursorh, \"mousedown\", function (e) {\r\n                                self.onmousedown(e, true)\r\n                            });\r\n                            self.bind(self.cursorh, \"mouseup\", self.onmouseup);\r\n                        }\r\n\r\n                        if (!self.ispage && self.opt.enablescrollonselection) {\r\n                            self.bind(self.win[0], \"mousedown\", self.onselectionstart);\r\n                            self.bind(document, \"mouseup\", self.onselectionend);\r\n                            self.bind(self.cursor, \"mouseup\", self.onselectionend);\r\n                            if (self.cursorh) self.bind(self.cursorh, \"mouseup\", self.onselectionend);\r\n                            self.bind(document, \"mousemove\", self.onselectiondrag);\r\n                        }\r\n\r\n                        if (self.zoom) {\r\n                            self.jqbind(self.zoom, \"mouseenter\", function () {\r\n                                if (self.canshowonmouseevent) self.showCursor();\r\n                                self.rail.active = true;\r\n                            });\r\n                            self.jqbind(self.zoom, \"mouseleave\", function () {\r\n                                self.rail.active = false;\r\n                                if (!self.rail.drag) self.hideCursor();\r\n                            });\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        self.bind((cap.hasmousecapture) ? self.win : document, \"mouseup\", self.ontouchend);\r\n                        self.bind(document, \"mousemove\", self.ontouchmove);\r\n                        if (self.onclick) self.bind(document, \"click\", self.onclick);\r\n\r\n                        if (self.opt.cursordragontouch) {\r\n                            self.bind(self.cursor, \"mousedown\", self.onmousedown);\r\n                            self.bind(self.cursor, \"mouseup\", self.onmouseup);\r\n                            //self.bind(self.cursor, \"mousemove\", self.onmousemove);\r\n                            self.cursorh && self.bind(self.cursorh, \"mousedown\", function (e) {\r\n                                self.onmousedown(e, true)\r\n                            });\r\n                            //self.cursorh && self.bind(self.cursorh, \"mousemove\", self.onmousemove);\r\n                            self.cursorh && self.bind(self.cursorh, \"mouseup\", self.onmouseup);\r\n                        }\r\n\r\n                    }\r\n\r\n                    if (self.opt.enablemousewheel) {\r\n                        if (!self.isiframe) self.bind((cap.isie && self.ispage) ? document : self.win /*self.docscroll*/, \"mousewheel\", self.onmousewheel);\r\n                        self.bind(self.rail, \"mousewheel\", self.onmousewheel);\r\n                        if (self.railh) self.bind(self.railh, \"mousewheel\", self.onmousewheelhr);\r\n                    }\r\n\r\n                    if (!self.ispage && !cap.cantouch && !(/HTML|^BODY/.test(self.win[0].nodeName))) {\r\n                        if (!self.win.attr(\"tabindex\")) self.win.attr({\r\n                            \"tabindex\": tabindexcounter++\r\n                        });\r\n\r\n                        self.jqbind(self.win, \"focus\", function (e) {\r\n                            domfocus = (self.getTarget(e)).id || true;\r\n                            self.hasfocus = true;\r\n                            if (self.canshowonmouseevent) self.noticeCursor();\r\n                        });\r\n                        self.jqbind(self.win, \"blur\", function (e) {\r\n                            domfocus = false;\r\n                            self.hasfocus = false;\r\n                        });\r\n\r\n                        self.jqbind(self.win, \"mouseenter\", function (e) {\r\n                            mousefocus = (self.getTarget(e)).id || true;\r\n                            self.hasmousefocus = true;\r\n                            if (self.canshowonmouseevent) self.noticeCursor();\r\n                        });\r\n                        self.jqbind(self.win, \"mouseleave\", function () {\r\n                            mousefocus = false;\r\n                            self.hasmousefocus = false;\r\n                            if (!self.rail.drag) self.hideCursor();\r\n                        });\r\n\r\n                    }\r\n\r\n                } // !ie9mobile\r\n\r\n                //Thanks to http://www.quirksmode.org !!\r\n                self.onkeypress = function (e) {\r\n                    if (self.railslocked && self.page.maxh == 0) return true;\r\n\r\n                    e = (e) ? e : window.e;\r\n                    var tg = self.getTarget(e);\r\n                    if (tg && /INPUT|TEXTAREA|SELECT|OPTION/.test(tg.nodeName)) {\r\n                        var tp = tg.getAttribute('type') || tg.type || false;\r\n                        if ((!tp) || !(/submit|button|cancel/i.tp)) return true;\r\n                    }\r\n\r\n                    if ($(tg).attr('contenteditable')) return true;\r\n\r\n                    if (self.hasfocus || (self.hasmousefocus && !domfocus) || (self.ispage && !domfocus && !mousefocus)) {\r\n                        var key = e.keyCode;\r\n\r\n                        if (self.railslocked && key != 27) return self.cancelEvent(e);\r\n\r\n                        var ctrl = e.ctrlKey || false;\r\n                        var shift = e.shiftKey || false;\r\n\r\n                        var ret = false;\r\n                        switch (key) {\r\n                            case 38:\r\n                            case 63233: //safari\r\n                                self.doScrollBy(24 * 3);\r\n                                ret = true;\r\n                                break;\r\n                            case 40:\r\n                            case 63235: //safari\r\n                                self.doScrollBy(-24 * 3);\r\n                                ret = true;\r\n                                break;\r\n                            case 37:\r\n                            case 63232: //safari\r\n                                if (self.railh) {\r\n                                    (ctrl) ? self.doScrollLeft(0) : self.doScrollLeftBy(24 * 3);\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                            case 39:\r\n                            case 63234: //safari\r\n                                if (self.railh) {\r\n                                    (ctrl) ? self.doScrollLeft(self.page.maxw) : self.doScrollLeftBy(-24 * 3);\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                            case 33:\r\n                            case 63276: // safari\r\n                                self.doScrollBy(self.view.h);\r\n                                ret = true;\r\n                                break;\r\n                            case 34:\r\n                            case 63277: // safari\r\n                                self.doScrollBy(-self.view.h);\r\n                                ret = true;\r\n                                break;\r\n                            case 36:\r\n                            case 63273: // safari                \r\n                                (self.railh && ctrl) ? self.doScrollPos(0, 0) : self.doScrollTo(0);\r\n                                ret = true;\r\n                                break;\r\n                            case 35:\r\n                            case 63275: // safari\r\n                                (self.railh && ctrl) ? self.doScrollPos(self.page.maxw, self.page.maxh) : self.doScrollTo(self.page.maxh);\r\n                                ret = true;\r\n                                break;\r\n                            case 32:\r\n                                if (self.opt.spacebarenabled) {\r\n                                    (shift) ? self.doScrollBy(self.view.h) : self.doScrollBy(-self.view.h);\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                            case 27: // ESC\r\n                                if (self.zoomactive) {\r\n                                    self.doZoom();\r\n                                    ret = true;\r\n                                }\r\n                                break;\r\n                        }\r\n                        if (ret) return self.cancelEvent(e);\r\n                    }\r\n                };\r\n\r\n                if (self.opt.enablekeyboard) self.bind(document, (cap.isopera && !cap.isopera12) ? \"keypress\" : \"keydown\", self.onkeypress);\r\n\r\n                self.bind(document, \"keydown\", function (e) {\r\n                    var ctrl = e.ctrlKey || false;\r\n                    if (ctrl) self.wheelprevented = true;\r\n                });\r\n                self.bind(document, \"keyup\", function (e) {\r\n                    var ctrl = e.ctrlKey || false;\r\n                    if (!ctrl) self.wheelprevented = false;\r\n                });\r\n                self.bind(window, \"blur\", function (e) {\r\n                    self.wheelprevented = false;\r\n                });\r\n\r\n                self.bind(window, 'resize', self.lazyResize);\r\n                self.bind(window, 'orientationchange', self.lazyResize);\r\n\r\n                self.bind(window, \"load\", self.lazyResize);\r\n\r\n                if (cap.ischrome && !self.ispage && !self.haswrapper) { //chrome void scrollbar bug - it persists in version 26\r\n                    var tmp = self.win.attr(\"style\");\r\n                    var ww = parseFloat(self.win.css(\"width\")) + 1;\r\n                    self.win.css('width', ww);\r\n                    self.synched(\"chromefix\", function () {\r\n                        self.win.attr(\"style\", tmp)\r\n                    });\r\n                }\r\n\r\n\r\n                // Trying a cross-browser implementation - good luck!\r\n\r\n                self.onAttributeChange = function (e) {\r\n                    self.lazyResize(self.isieold ? 250 : 30);\r\n                };\r\n\r\n                if (ClsMutationObserver !== false) {\r\n                    self.observerbody = new ClsMutationObserver(function (mutations) {\r\n                        mutations.forEach(function (mut) {\r\n                            if (mut.type == \"attributes\") {\r\n                                return ($(\"body\").hasClass(\"modal-open\")) ? self.hide() : self.show();  // Support for Bootstrap modal\r\n                            }\r\n                        });\r\n                        if (document.body.scrollHeight != self.page.maxh) return self.lazyResize(30);\r\n                    });\r\n                    self.observerbody.observe(document.body, {\r\n                        childList: true,\r\n                        subtree: true,\r\n                        characterData: false,\r\n                        attributes: true,\r\n                        attributeFilter: ['class']\r\n                    });\r\n                }\r\n\r\n                if (!self.ispage && !self.haswrapper) {\r\n                    // redesigned MutationObserver for Chrome18+/Firefox14+/iOS6+ with support for: remove div, add/remove content\r\n                    if (ClsMutationObserver !== false) {\r\n                        self.observer = new ClsMutationObserver(function (mutations) {\r\n                            mutations.forEach(self.onAttributeChange);\r\n                        });\r\n                        self.observer.observe(self.win[0], {\r\n                            childList: true,\r\n                            characterData: false,\r\n                            attributes: true,\r\n                            subtree: false\r\n                        });\r\n                        self.observerremover = new ClsMutationObserver(function (mutations) {\r\n                            mutations.forEach(function (mo) {\r\n                                if (mo.removedNodes.length > 0) {\r\n                                    for (var dd in mo.removedNodes) {\r\n                                        if (!!self && (mo.removedNodes[dd] == self.win[0])) return self.remove();\r\n                                    }\r\n                                }\r\n                            });\r\n                        });\r\n                        self.observerremover.observe(self.win[0].parentNode, {\r\n                            childList: true,\r\n                            characterData: false,\r\n                            attributes: false,\r\n                            subtree: false\r\n                        });\r\n                    } else {\r\n                        self.bind(self.win, (cap.isie && !cap.isie9) ? \"propertychange\" : \"DOMAttrModified\", self.onAttributeChange);\r\n                        if (cap.isie9) self.win[0].attachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\r\n                        self.bind(self.win, \"DOMNodeRemoved\", function (e) {\r\n                            if (e.target == self.win[0]) self.remove();\r\n                        });\r\n                    }\r\n                }\r\n\r\n                //\r\n\r\n                if (!self.ispage && self.opt.boxzoom) self.bind(window, \"resize\", self.resizeZoom);\r\n                if (self.istextarea) self.bind(self.win, \"mouseup\", self.lazyResize);\r\n\r\n                //        self.checkrtlmode = true;\r\n                self.lazyResize(30);\r\n\r\n            }\r\n\r\n            if (this.doc[0].nodeName == 'IFRAME') {\r\n                var oniframeload = function () {\r\n                    self.iframexd = false;\r\n                    var doc;\r\n                    try {\r\n                        doc = 'contentDocument' in this ? this.contentDocument : this.contentWindow.document;\r\n                        var a = doc.domain;\r\n                    } catch (e) {\r\n                        self.iframexd = true;\r\n                        doc = false\r\n                    }\r\n\r\n                    if (self.iframexd) {\r\n                        if (\"console\" in window) console.log('NiceScroll error: policy restriced iframe');\r\n                        return true; //cross-domain - I can't manage this        \r\n                    }\r\n\r\n                    self.forcescreen = true;\r\n\r\n                    if (self.isiframe) {\r\n                        self.iframe = {\r\n                            \"doc\": $(doc),\r\n                            \"html\": self.doc.contents().find('html')[0],\r\n                            \"body\": self.doc.contents().find('body')[0]\r\n                        };\r\n                        self.getContentSize = function () {\r\n                            return {\r\n                                w: Math.max(self.iframe.html.scrollWidth, self.iframe.body.scrollWidth),\r\n                                h: Math.max(self.iframe.html.scrollHeight, self.iframe.body.scrollHeight)\r\n                            };\r\n                        };\r\n                        self.docscroll = $(self.iframe.body); //$(this.contentWindow);\r\n                    }\r\n\r\n                    if (!cap.isios && self.opt.iframeautoresize && !self.isiframe) {\r\n                        self.win.scrollTop(0); // reset position\r\n                        self.doc.height(\"\"); //reset height to fix browser bug\r\n                        var hh = Math.max(doc.getElementsByTagName('html')[0].scrollHeight, doc.body.scrollHeight);\r\n                        self.doc.height(hh);\r\n                    }\r\n                    self.lazyResize(30);\r\n\r\n                    if (cap.isie7) self.css($(self.iframe.html), {\r\n                        'overflow-y': 'hidden'\r\n                    });\r\n                    self.css($(self.iframe.body), {\r\n                        'overflow-y': 'hidden'\r\n                    });\r\n\r\n                    if (cap.isios && self.haswrapper) {\r\n                        self.css($(doc.body), {\r\n                            '-webkit-transform': 'translate3d(0,0,0)'\r\n                        }); // avoid iFrame content clipping - thanks to http://blog.derraab.com/2012/04/02/avoid-iframe-content-clipping-with-css-transform-on-ios/\r\n                    }\r\n\r\n                    if ('contentWindow' in this) {\r\n                        self.bind(this.contentWindow, \"scroll\", self.onscroll); //IE8 & minor\r\n                    } else {\r\n                        self.bind(doc, \"scroll\", self.onscroll);\r\n                    }\r\n\r\n                    if (self.opt.enablemousewheel) {\r\n                        self.bind(doc, \"mousewheel\", self.onmousewheel);\r\n                    }\r\n\r\n                    if (self.opt.enablekeyboard) self.bind(doc, (cap.isopera) ? \"keypress\" : \"keydown\", self.onkeypress);\r\n\r\n                    if (cap.cantouch || self.opt.touchbehavior) {\r\n                        self.bind(doc, \"mousedown\", self.ontouchstart);\r\n                        self.bind(doc, \"mousemove\", function (e) {\r\n                            return self.ontouchmove(e, true)\r\n                        });\r\n                        if (self.opt.grabcursorenabled && cap.cursorgrabvalue) self.css($(doc.body), {\r\n                            'cursor': cap.cursorgrabvalue\r\n                        });\r\n                    }\r\n\r\n                    self.bind(doc, \"mouseup\", self.ontouchend);\r\n\r\n                    if (self.zoom) {\r\n                        if (self.opt.dblclickzoom) self.bind(doc, 'dblclick', self.doZoom);\r\n                        if (self.ongesturezoom) self.bind(doc, \"gestureend\", self.ongesturezoom);\r\n                    }\r\n                };\r\n\r\n                if (this.doc[0].readyState && this.doc[0].readyState == \"complete\") {\r\n                    setTimeout(function () {\r\n                        oniframeload.call(self.doc[0], false)\r\n                    }, 500);\r\n                }\r\n                self.bind(this.doc, \"load\", oniframeload);\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.showCursor = function (py, px) {\r\n            if (self.cursortimeout) {\r\n                clearTimeout(self.cursortimeout);\r\n                self.cursortimeout = 0;\r\n            }\r\n            if (!self.rail) return;\r\n            if (self.autohidedom) {\r\n                self.autohidedom.stop().css({\r\n                    opacity: self.opt.cursoropacitymax\r\n                });\r\n                self.cursoractive = true;\r\n            }\r\n\r\n            if (!self.rail.drag || self.rail.drag.pt != 1) {\r\n                if ((typeof py != \"undefined\") && (py !== false)) {\r\n                    self.scroll.y = Math.round(py * 1 / self.scrollratio.y);\r\n                }\r\n                if (typeof px != \"undefined\") {\r\n                    self.scroll.x = Math.round(px * 1 / self.scrollratio.x);\r\n                }\r\n            }\r\n\r\n            self.cursor.css({\r\n                height: self.cursorheight,\r\n                top: self.scroll.y\r\n            });\r\n            if (self.cursorh) {\r\n                var lx = (self.hasreversehr) ? self.scrollvaluemaxw - self.scroll.x : self.scroll.x;\r\n                (!self.rail.align && self.rail.visibility) ? self.cursorh.css({\r\n                    width: self.cursorwidth,\r\n                    left: lx + self.rail.width\r\n                }) : self.cursorh.css({\r\n                    width: self.cursorwidth,\r\n                    left: lx\r\n                });\r\n                self.cursoractive = true;\r\n            }\r\n\r\n            if (self.zoom) self.zoom.stop().css({\r\n                opacity: self.opt.cursoropacitymax\r\n            });\r\n        };\r\n\r\n        this.hideCursor = function (tm) {\r\n            if (self.cursortimeout) return;\r\n            if (!self.rail) return;\r\n            if (!self.autohidedom) return;\r\n            if (self.hasmousefocus && self.opt.autohidemode == \"leave\") return;\r\n            self.cursortimeout = setTimeout(function () {\r\n                if (!self.rail.active || !self.showonmouseevent) {\r\n                    self.autohidedom.stop().animate({\r\n                        opacity: self.opt.cursoropacitymin\r\n                    });\r\n                    if (self.zoom) self.zoom.stop().animate({\r\n                        opacity: self.opt.cursoropacitymin\r\n                    });\r\n                    self.cursoractive = false;\r\n                }\r\n                self.cursortimeout = 0;\r\n            }, tm || self.opt.hidecursordelay);\r\n        };\r\n\r\n        this.noticeCursor = function (tm, py, px) {\r\n            self.showCursor(py, px);\r\n            if (!self.rail.active) self.hideCursor(tm);\r\n        };\r\n\r\n        this.getContentSize =\r\n            (self.ispage) ?\r\n                function () {\r\n                    return {\r\n                        w: Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\r\n                        h: Math.max(document.body.scrollHeight, document.documentElement.scrollHeight)\r\n                    }\r\n                } : (self.haswrapper) ?\r\n                function () {\r\n                    return {\r\n                        w: self.doc.outerWidth() + parseInt(self.win.css('paddingLeft')) + parseInt(self.win.css('paddingRight')),\r\n                        h: self.doc.outerHeight() + parseInt(self.win.css('paddingTop')) + parseInt(self.win.css('paddingBottom'))\r\n                    }\r\n                } : function () {\r\n                return {\r\n                    w: self.docscroll[0].scrollWidth,\r\n                    h: self.docscroll[0].scrollHeight\r\n                }\r\n            };\r\n\r\n        this.onResize = function (e, page) {\r\n\r\n            if (!self || !self.win) return false;\r\n\r\n            if (!self.haswrapper && !self.ispage) {\r\n                if (self.win.css('display') == 'none') {\r\n                    if (self.visibility) self.hideRail().hideRailHr();\r\n                    return false;\r\n                } else {\r\n                    if (!self.hidden && !self.visibility) self.showRail().showRailHr();\r\n                }\r\n            }\r\n\r\n            var premaxh = self.page.maxh;\r\n            var premaxw = self.page.maxw;\r\n\r\n            var preview = {\r\n                h: self.view.h,\r\n                w: self.view.w\r\n            };\r\n\r\n            self.view = {\r\n                w: (self.ispage) ? self.win.width() : parseInt(self.win[0].clientWidth),\r\n                h: (self.ispage) ? self.win.height() : parseInt(self.win[0].clientHeight)\r\n            };\r\n\r\n            self.page = (page) ? page : self.getContentSize();\r\n\r\n            self.page.maxh = Math.max(0, self.page.h - self.view.h);\r\n            self.page.maxw = Math.max(0, self.page.w - self.view.w);\r\n\r\n            if ((self.page.maxh == premaxh) && (self.page.maxw == premaxw) && (self.view.w == preview.w) && (self.view.h == preview.h)) {\r\n                // test position        \r\n                if (!self.ispage) {\r\n                    var pos = self.win.offset();\r\n                    if (self.lastposition) {\r\n                        var lst = self.lastposition;\r\n                        if ((lst.top == pos.top) && (lst.left == pos.left)) return self; //nothing to do            \r\n                    }\r\n                    self.lastposition = pos;\r\n                } else {\r\n                    return self; //nothing to do\r\n                }\r\n            }\r\n\r\n            if (self.page.maxh == 0) {\r\n                self.hideRail();\r\n                self.scrollvaluemax = 0;\r\n                self.scroll.y = 0;\r\n                self.scrollratio.y = 0;\r\n                self.cursorheight = 0;\r\n                self.setScrollTop(0);\r\n                self.rail.scrollable = false;\r\n            } else {\r\n                self.page.maxh -= (self.opt.railpadding.top + self.opt.railpadding.bottom);  //**\r\n                self.rail.scrollable = true;\r\n            }\r\n\r\n            if (self.page.maxw == 0) {\r\n                self.hideRailHr();\r\n                self.scrollvaluemaxw = 0;\r\n                self.scroll.x = 0;\r\n                self.scrollratio.x = 0;\r\n                self.cursorwidth = 0;\r\n                self.setScrollLeft(0);\r\n                self.railh.scrollable = false;\r\n            } else {\r\n                self.page.maxw -= (self.opt.railpadding.left + self.opt.railpadding.right);  //**\r\n                self.railh.scrollable = true;\r\n            }\r\n\r\n            self.railslocked = (self.locked) || ((self.page.maxh == 0) && (self.page.maxw == 0));\r\n            if (self.railslocked) {\r\n                if (!self.ispage) self.updateScrollBar(self.view);\r\n                return false;\r\n            }\r\n\r\n            if (!self.hidden && !self.visibility) {\r\n                self.showRail().showRailHr();\r\n            }\r\n            else if (!self.hidden && !self.railh.visibility) self.showRailHr();\r\n\r\n            if (self.istextarea && self.win.css('resize') && self.win.css('resize') != 'none') self.view.h -= 20;\r\n\r\n            self.cursorheight = Math.min(self.view.h, Math.round(self.view.h * (self.view.h / self.page.h)));\r\n            self.cursorheight = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorheight);\r\n\r\n            self.cursorwidth = Math.min(self.view.w, Math.round(self.view.w * (self.view.w / self.page.w)));\r\n            self.cursorwidth = (self.opt.cursorfixedheight) ? self.opt.cursorfixedheight : Math.max(self.opt.cursorminheight, self.cursorwidth);\r\n\r\n            self.scrollvaluemax = self.view.h - self.cursorheight - self.cursor.hborder - (self.opt.railpadding.top + self.opt.railpadding.bottom);  //**\r\n\r\n            if (self.railh) {\r\n                self.railh.width = (self.page.maxh > 0) ? (self.view.w - self.rail.width) : self.view.w;\r\n                self.scrollvaluemaxw = self.railh.width - self.cursorwidth - self.cursorh.wborder - (self.opt.railpadding.left + self.opt.railpadding.right);  //**\r\n            }\r\n\r\n            /*\r\n             if (self.checkrtlmode&&self.railh) {\r\n             self.checkrtlmode = false;\r\n             if (self.opt.rtlmode&&self.scroll.x==0) self.setScrollLeft(self.page.maxw);\r\n             }\r\n             */\r\n\r\n            if (!self.ispage) self.updateScrollBar(self.view);\r\n\r\n            self.scrollratio = {\r\n                x: (self.page.maxw / self.scrollvaluemaxw),\r\n                y: (self.page.maxh / self.scrollvaluemax)\r\n            };\r\n\r\n            var sy = self.getScrollTop();\r\n            if (sy > self.page.maxh) {\r\n                self.doScrollTop(self.page.maxh);\r\n            } else {\r\n                self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\r\n                self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\r\n                if (self.cursoractive) self.noticeCursor();\r\n            }\r\n\r\n            if (self.scroll.y && (self.getScrollTop() == 0)) self.doScrollTo(Math.floor(self.scroll.y * self.scrollratio.y));\r\n\r\n            return self;\r\n        };\r\n\r\n        this.resize = self.onResize;\r\n\r\n        this.lazyResize = function (tm) { // event debounce\r\n            tm = (isNaN(tm)) ? 30 : tm;\r\n            self.debounced('resize', self.resize, tm);\r\n            return self;\r\n        };\r\n\r\n        // modified by MDN https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/wheel\r\n        function _modernWheelEvent(dom, name, fn, bubble) {\r\n            self._bind(dom, name, function (e) {\r\n                var e = (e) ? e : window.event;\r\n                var event = {\r\n                    original: e,\r\n                    target: e.target || e.srcElement,\r\n                    type: \"wheel\",\r\n                    deltaMode: e.type == \"MozMousePixelScroll\" ? 0 : 1,\r\n                    deltaX: 0,\r\n                    deltaZ: 0,\r\n                    preventDefault: function () {\r\n                        e.preventDefault ? e.preventDefault() : e.returnValue = false;\r\n                        return false;\r\n                    },\r\n                    stopImmediatePropagation: function () {\r\n                        (e.stopImmediatePropagation) ? e.stopImmediatePropagation() : e.cancelBubble = true;\r\n                    }\r\n                };\r\n\r\n                if (name == \"mousewheel\") {\r\n                    event.deltaY = -1 / 40 * e.wheelDelta;\r\n                    e.wheelDeltaX && (event.deltaX = -1 / 40 * e.wheelDeltaX);\r\n                } else {\r\n                    event.deltaY = e.detail;\r\n                }\r\n\r\n                return fn.call(dom, event);\r\n            }, bubble);\r\n        };\r\n\r\n\r\n        this.jqbind = function (dom, name, fn) { // use jquery bind for non-native events (mouseenter/mouseleave)\r\n            self.events.push({\r\n                e: dom,\r\n                n: name,\r\n                f: fn,\r\n                q: true\r\n            });\r\n            $(dom).bind(name, fn);\r\n        };\r\n\r\n        this.bind = function (dom, name, fn, bubble) { // touch-oriented & fixing jquery bind\r\n            var el = (\"jquery\" in dom) ? dom[0] : dom;\r\n\r\n            if (name == 'mousewheel') {\r\n                if (window.addEventListener || 'onwheel' in document) { // modern brosers & IE9 detection fix\r\n                    self._bind(el, \"wheel\", fn, bubble || false);\r\n                } else {\r\n                    var wname = (typeof document.onmousewheel != \"undefined\") ? \"mousewheel\" : \"DOMMouseScroll\"; // older IE/Firefox\r\n                    _modernWheelEvent(el, wname, fn, bubble || false);\r\n                    if (wname == \"DOMMouseScroll\") _modernWheelEvent(el, \"MozMousePixelScroll\", fn, bubble || false); // Firefox legacy\r\n                }\r\n            } else if (el.addEventListener) {\r\n                if (cap.cantouch && /mouseup|mousedown|mousemove/.test(name)) { // touch device support\r\n                    var tt = (name == 'mousedown') ? 'touchstart' : (name == 'mouseup') ? 'touchend' : 'touchmove';\r\n                    self._bind(el, tt, function (e) {\r\n                        if (e.touches) {\r\n                            if (e.touches.length < 2) {\r\n                                var ev = (e.touches.length) ? e.touches[0] : e;\r\n                                ev.original = e;\r\n                                fn.call(this, ev);\r\n                            }\r\n                        } else if (e.changedTouches) {\r\n                            var ev = e.changedTouches[0];\r\n                            ev.original = e;\r\n                            fn.call(this, ev);\r\n                        } //blackberry\r\n                    }, bubble || false);\r\n                }\r\n                self._bind(el, name, fn, bubble || false);\r\n                if (cap.cantouch && name == \"mouseup\") self._bind(el, \"touchcancel\", fn, bubble || false);\r\n            } else {\r\n                self._bind(el, name, function (e) {\r\n                    e = e || window.event || false;\r\n                    if (e) {\r\n                        if (e.srcElement) e.target = e.srcElement;\r\n                    }\r\n                    if (!(\"pageY\" in e)) {\r\n                        e.pageX = e.clientX + document.documentElement.scrollLeft;\r\n                        e.pageY = e.clientY + document.documentElement.scrollTop;\r\n                    }\r\n                    return ((fn.call(el, e) === false) || bubble === false) ? self.cancelEvent(e) : true;\r\n                });\r\n            }\r\n        };\r\n\r\n        if (cap.haseventlistener) {  // W3C standard model\r\n            this._bind = function (el, name, fn, bubble) { // primitive bind\r\n                self.events.push({\r\n                    e: el,\r\n                    n: name,\r\n                    f: fn,\r\n                    b: bubble,\r\n                    q: false\r\n                });\r\n                el.addEventListener(name, fn, bubble || false);\r\n            };\r\n            this.cancelEvent = function (e) {\r\n                if (!e) return false;\r\n                var e = (e.original) ? e.original : e;\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                if (e.preventManipulation) e.preventManipulation(); //IE10\r\n                return false;\r\n            };\r\n            this.stopPropagation = function (e) {\r\n                if (!e) return false;\r\n                var e = (e.original) ? e.original : e;\r\n                e.stopPropagation();\r\n                return false;\r\n            };\r\n            this._unbind = function (el, name, fn, bub) { // primitive unbind\r\n                el.removeEventListener(name, fn, bub);\r\n            };\r\n        } else {  // old IE model\r\n            this._bind = function (el, name, fn, bubble) { // primitive bind\r\n                self.events.push({\r\n                    e: el,\r\n                    n: name,\r\n                    f: fn,\r\n                    b: bubble,\r\n                    q: false\r\n                });\r\n                if (el.attachEvent) {\r\n                    el.attachEvent(\"on\" + name, fn);\r\n                } else {\r\n                    el[\"on\" + name] = fn;\r\n                }\r\n            };\r\n            // Thanks to http://www.switchonthecode.com !!\r\n            this.cancelEvent = function (e) {\r\n                var e = window.event || false;\r\n                if (!e) return false;\r\n                e.cancelBubble = true;\r\n                e.cancel = true;\r\n                e.returnValue = false;\r\n                return false;\r\n            };\r\n            this.stopPropagation = function (e) {\r\n                var e = window.event || false;\r\n                if (!e) return false;\r\n                e.cancelBubble = true;\r\n                return false;\r\n            };\r\n            this._unbind = function (el, name, fn, bub) { // primitive unbind IE old\r\n                if (el.detachEvent) {\r\n                    el.detachEvent('on' + name, fn);\r\n                } else {\r\n                    el['on' + name] = false;\r\n                }\r\n            };\r\n        }\r\n\r\n        this.unbindAll = function () {\r\n            for (var a = 0; a < self.events.length; a++) {\r\n                var r = self.events[a];\r\n                (r.q) ? r.e.unbind(r.n, r.f) : self._unbind(r.e, r.n, r.f, r.b);\r\n            }\r\n        };\r\n\r\n        this.showRail = function () {\r\n            if ((self.page.maxh != 0) && (self.ispage || self.win.css('display') != 'none')) {\r\n                self.visibility = true;\r\n                self.rail.visibility = true;\r\n                self.rail.css('display', 'block');\r\n            }\r\n            return self;\r\n        };\r\n\r\n        this.showRailHr = function () {\r\n            if (!self.railh) return self;\r\n            if ((self.page.maxw != 0) && (self.ispage || self.win.css('display') != 'none')) {\r\n                self.railh.visibility = true;\r\n                self.railh.css('display', 'block');\r\n            }\r\n            return self;\r\n        };\r\n\r\n        this.hideRail = function () {\r\n            self.visibility = false;\r\n            self.rail.visibility = false;\r\n            self.rail.css('display', 'none');\r\n            return self;\r\n        };\r\n\r\n        this.hideRailHr = function () {\r\n            if (!self.railh) return self;\r\n            self.railh.visibility = false;\r\n            self.railh.css('display', 'none');\r\n            return self;\r\n        };\r\n\r\n        this.show = function () {\r\n            self.hidden = false;\r\n            self.railslocked = false;\r\n            return self.showRail().showRailHr();\r\n        };\r\n\r\n        this.hide = function () {\r\n            self.hidden = true;\r\n            self.railslocked = true;\r\n            return self.hideRail().hideRailHr();\r\n        };\r\n\r\n        this.toggle = function () {\r\n            return (self.hidden) ? self.show() : self.hide();\r\n        };\r\n\r\n        this.remove = function () {\r\n            self.stop();\r\n            if (self.cursortimeout) clearTimeout(self.cursortimeout);\r\n            self.doZoomOut();\r\n            self.unbindAll();\r\n\r\n            if (cap.isie9) self.win[0].detachEvent(\"onpropertychange\", self.onAttributeChange); //IE9 DOMAttrModified bug\r\n\r\n            if (self.observer !== false) self.observer.disconnect();\r\n            if (self.observerremover !== false) self.observerremover.disconnect();\r\n            if (self.observerbody !== false) self.observerbody.disconnect();\r\n\r\n            self.events = null;\r\n\r\n            if (self.cursor) {\r\n                self.cursor.remove();\r\n            }\r\n            if (self.cursorh) {\r\n                self.cursorh.remove();\r\n            }\r\n            if (self.rail) {\r\n                self.rail.remove();\r\n            }\r\n            if (self.railh) {\r\n                self.railh.remove();\r\n            }\r\n            if (self.zoom) {\r\n                self.zoom.remove();\r\n            }\r\n            for (var a = 0; a < self.saved.css.length; a++) {\r\n                var d = self.saved.css[a];\r\n                d[0].css(d[1], (typeof d[2] == \"undefined\") ? '' : d[2]);\r\n            }\r\n            self.saved = false;\r\n            self.me.data('__nicescroll', ''); //erase all traces\r\n\r\n            // memory leak fixed by GianlucaGuarini - thanks a lot!\r\n            // remove the current nicescroll from the $.nicescroll array & normalize array\r\n            var lst = $.nicescroll;\r\n            lst.each(function (i) {\r\n                if (!this) return;\r\n                if (this.id === self.id) {\r\n                    delete lst[i];\r\n                    for (var b = ++i; b < lst.length; b++, i++) lst[i] = lst[b];\r\n                    lst.length--;\r\n                    if (lst.length) delete lst[lst.length];\r\n                }\r\n            });\r\n\r\n            for (var i in self) {\r\n                self[i] = null;\r\n                delete self[i];\r\n            }\r\n\r\n            self = null;\r\n\r\n        };\r\n\r\n        this.scrollstart = function (fn) {\r\n            this.onscrollstart = fn;\r\n            return self;\r\n        };\r\n        this.scrollend = function (fn) {\r\n            this.onscrollend = fn;\r\n            return self;\r\n        };\r\n        this.scrollcancel = function (fn) {\r\n            this.onscrollcancel = fn;\r\n            return self;\r\n        };\r\n\r\n        this.zoomin = function (fn) {\r\n            this.onzoomin = fn;\r\n            return self;\r\n        };\r\n        this.zoomout = function (fn) {\r\n            this.onzoomout = fn;\r\n            return self;\r\n        };\r\n\r\n        this.isScrollable = function (e) {\r\n            var dom = (e.target) ? e.target : e;\r\n            if (dom.nodeName == 'OPTION') return true;\r\n            while (dom && (dom.nodeType == 1) && !(/^BODY|HTML/.test(dom.nodeName))) {\r\n                var dd = $(dom);\r\n                var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\r\n                if (/scroll|auto/.test(ov)) return (dom.clientHeight != dom.scrollHeight);\r\n                dom = (dom.parentNode) ? dom.parentNode : false;\r\n            }\r\n            return false;\r\n        };\r\n\r\n        this.getViewport = function (me) {\r\n            var dom = (me && me.parentNode) ? me.parentNode : false;\r\n            while (dom && (dom.nodeType == 1) && !(/^BODY|HTML/.test(dom.nodeName))) {\r\n                var dd = $(dom);\r\n                if (/fixed|absolute/.test(dd.css(\"position\"))) return dd;\r\n                var ov = dd.css('overflowY') || dd.css('overflowX') || dd.css('overflow') || '';\r\n                if ((/scroll|auto/.test(ov)) && (dom.clientHeight != dom.scrollHeight)) return dd;\r\n                if (dd.getNiceScroll().length > 0) return dd;\r\n                dom = (dom.parentNode) ? dom.parentNode : false;\r\n            }\r\n            return false; //(dom) ? $(dom) : false;\r\n        };\r\n\r\n        this.triggerScrollEnd = function () {\r\n            if (!self.onscrollend) return;\r\n\r\n            var px = self.getScrollLeft();\r\n            var py = self.getScrollTop();\r\n\r\n            var info = {\r\n                \"type\": \"scrollend\",\r\n                \"current\": {\r\n                    \"x\": px,\r\n                    \"y\": py\r\n                },\r\n                \"end\": {\r\n                    \"x\": px,\r\n                    \"y\": py\r\n                }\r\n            };\r\n            self.onscrollend.call(self, info);\r\n        }\r\n\r\n        function execScrollWheel(e, hr, chkscroll) {\r\n            var px, py;\r\n\r\n            if (e.deltaMode == 0) { // PIXEL\r\n                px = -Math.floor(e.deltaX * (self.opt.mousescrollstep / (18 * 3)));\r\n                py = -Math.floor(e.deltaY * (self.opt.mousescrollstep / (18 * 3)));\r\n            } else if (e.deltaMode == 1) { // LINE\r\n                px = -Math.floor(e.deltaX * self.opt.mousescrollstep);\r\n                py = -Math.floor(e.deltaY * self.opt.mousescrollstep);\r\n            }\r\n\r\n            if (hr && self.opt.oneaxismousemode && (px == 0) && py) { // classic vertical-only mousewheel + browser with x/y support \r\n                px = py;\r\n                py = 0;\r\n\r\n                if (chkscroll) {\r\n                    var hrend = (px < 0) ? (self.getScrollLeft() >= self.page.maxw) : (self.getScrollLeft() <= 0);\r\n                    if (hrend) {  // preserve vertical scrolling\r\n                        py = px;\r\n                        px = 0;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if (px) {\r\n                if (self.scrollmom) {\r\n                    self.scrollmom.stop()\r\n                }\r\n                self.lastdeltax += px;\r\n                self.debounced(\"mousewheelx\", function () {\r\n                    var dt = self.lastdeltax;\r\n                    self.lastdeltax = 0;\r\n                    if (!self.rail.drag) {\r\n                        self.doScrollLeftBy(dt)\r\n                    }\r\n                }, 15);\r\n            }\r\n            if (py) {\r\n                if (self.opt.nativeparentscrolling && chkscroll && !self.ispage && !self.zoomactive) {\r\n                    if (py < 0) {\r\n                        if (self.getScrollTop() >= self.page.maxh) return true;\r\n                    } else {\r\n                        if (self.getScrollTop() <= 0) return true;\r\n                    }\r\n                }\r\n                if (self.scrollmom) {\r\n                    self.scrollmom.stop()\r\n                }\r\n                self.lastdeltay += py;\r\n                self.debounced(\"mousewheely\", function () {\r\n                    var dt = self.lastdeltay;\r\n                    self.lastdeltay = 0;\r\n                    if (!self.rail.drag) {\r\n                        self.doScrollBy(dt)\r\n                    }\r\n                }, 15);\r\n            }\r\n\r\n            e.stopImmediatePropagation();\r\n            return e.preventDefault();\r\n        };\r\n\r\n        this.onmousewheel = function (e) {\r\n            if (self.wheelprevented) return;\r\n            if (self.railslocked) {\r\n                self.debounced(\"checkunlock\", self.resize, 250);\r\n                return true;\r\n            }\r\n            if (self.rail.drag) return self.cancelEvent(e);\r\n\r\n            if (self.opt.oneaxismousemode == \"auto\" && e.deltaX != 0) self.opt.oneaxismousemode = false; // check two-axis mouse support (not very elegant)\r\n\r\n            if (self.opt.oneaxismousemode && e.deltaX == 0) {\r\n                if (!self.rail.scrollable) {\r\n                    if (self.railh && self.railh.scrollable) {\r\n                        return self.onmousewheelhr(e);\r\n                    } else {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            var nw = +(new Date());\r\n            var chk = false;\r\n            if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {\r\n                self.nativescrollingarea = self.isScrollable(e);\r\n                chk = true;\r\n            }\r\n            self.checkarea = nw;\r\n            if (self.nativescrollingarea) return true; // this isn't my business\r\n            var ret = execScrollWheel(e, false, chk);\r\n            if (ret) self.checkarea = 0;\r\n            return ret;\r\n        };\r\n\r\n        this.onmousewheelhr = function (e) {\r\n            if (self.wheelprevented) return;\r\n            if (self.railslocked || !self.railh.scrollable) return true;\r\n            if (self.rail.drag) return self.cancelEvent(e);\r\n\r\n            var nw = +(new Date());\r\n            var chk = false;\r\n            if (self.opt.preservenativescrolling && ((self.checkarea + 600) < nw)) {\r\n                self.nativescrollingarea = self.isScrollable(e);\r\n                chk = true;\r\n            }\r\n            self.checkarea = nw;\r\n            if (self.nativescrollingarea) return true; // this isn't my business\r\n            if (self.railslocked) return self.cancelEvent(e);\r\n\r\n            return execScrollWheel(e, true, chk);\r\n        };\r\n\r\n        this.stop = function () {\r\n            self.cancelScroll();\r\n            if (self.scrollmon) self.scrollmon.stop();\r\n            self.cursorfreezed = false;\r\n            self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\r\n            self.noticeCursor();\r\n            return self;\r\n        };\r\n\r\n        this.getTransitionSpeed = function (dif) {\r\n            var sp = Math.round(self.opt.scrollspeed * 10);\r\n            var ex = Math.min(sp, Math.round((dif / 20) * self.opt.scrollspeed));\r\n            return (ex > 20) ? ex : 0;\r\n        };\r\n\r\n        if (!self.opt.smoothscroll) {\r\n            this.doScrollLeft = function (x, spd) { //direct\r\n                var y = self.getScrollTop();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n            this.doScrollTop = function (y, spd) { //direct\r\n                var x = self.getScrollLeft();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n            this.doScrollPos = function (x, y, spd) { //direct\r\n                var nx = (x > self.page.maxw) ? self.page.maxw : x;\r\n                if (nx < 0) nx = 0;\r\n                var ny = (y > self.page.maxh) ? self.page.maxh : y;\r\n                if (ny < 0) ny = 0;\r\n                self.synched('scroll', function () {\r\n                    self.setScrollTop(ny);\r\n                    self.setScrollLeft(nx);\r\n                });\r\n            };\r\n            this.cancelScroll = function () {\r\n            }; // direct\r\n        } else if (self.ishwscroll && cap.hastransition && self.opt.usetransition && !!self.opt.smoothscroll) {\r\n            this.prepareTransition = function (dif, istime) {\r\n                var ex = (istime) ? ((dif > 20) ? dif : 0) : self.getTransitionSpeed(dif);\r\n                var trans = (ex) ? cap.prefixstyle + 'transform ' + ex + 'ms ease-out' : '';\r\n                if (!self.lasttransitionstyle || self.lasttransitionstyle != trans) {\r\n                    self.lasttransitionstyle = trans;\r\n                    self.doc.css(cap.transitionstyle, trans);\r\n                }\r\n                return ex;\r\n            };\r\n\r\n            this.doScrollLeft = function (x, spd) { //trans\r\n                var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollTop = function (y, spd) { //trans\r\n                var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollPos = function (x, y, spd) { //trans\r\n\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n\r\n                if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) self.cancelScroll(); //inverted movement detection      \r\n\r\n                if (self.opt.bouncescroll == false) {\r\n                    if (y < 0) y = 0;\r\n                    else if (y > self.page.maxh) y = self.page.maxh;\r\n                    if (x < 0) x = 0;\r\n                    else if (x > self.page.maxw) x = self.page.maxw;\r\n                }\r\n\r\n                if (self.scrollrunning && x == self.newscrollx && y == self.newscrolly) return false;\r\n\r\n                self.newscrolly = y;\r\n                self.newscrollx = x;\r\n\r\n                self.newscrollspeed = spd || false;\r\n\r\n                if (self.timer) return false;\r\n\r\n                self.timer = setTimeout(function () {\r\n\r\n                    var top = self.getScrollTop();\r\n                    var lft = self.getScrollLeft();\r\n\r\n                    var dst = {};\r\n                    dst.x = x - lft;\r\n                    dst.y = y - top;\r\n                    dst.px = lft;\r\n                    dst.py = top;\r\n\r\n                    var dd = Math.round(Math.sqrt(Math.pow(dst.x, 2) + Math.pow(dst.y, 2)));\r\n                    var ms = (self.newscrollspeed && self.newscrollspeed > 1) ? self.newscrollspeed : self.getTransitionSpeed(dd);\r\n                    if (self.newscrollspeed && self.newscrollspeed <= 1) ms *= self.newscrollspeed;\r\n\r\n                    self.prepareTransition(ms, true);\r\n\r\n                    if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\r\n\r\n                    if (ms > 0) {\r\n\r\n                        if (!self.scrollrunning && self.onscrollstart) {\r\n                            var info = {\r\n                                \"type\": \"scrollstart\",\r\n                                \"current\": {\r\n                                    \"x\": lft,\r\n                                    \"y\": top\r\n                                },\r\n                                \"request\": {\r\n                                    \"x\": x,\r\n                                    \"y\": y\r\n                                },\r\n                                \"end\": {\r\n                                    \"x\": self.newscrollx,\r\n                                    \"y\": self.newscrolly\r\n                                },\r\n                                \"speed\": ms\r\n                            };\r\n                            self.onscrollstart.call(self, info);\r\n                        }\r\n\r\n                        if (cap.transitionend) {\r\n                            if (!self.scrollendtrapped) {\r\n                                self.scrollendtrapped = true;\r\n                                self.bind(self.doc, cap.transitionend, self.onScrollTransitionEnd, false); //I have got to do something usefull!!\r\n                            }\r\n                        } else {\r\n                            if (self.scrollendtrapped) clearTimeout(self.scrollendtrapped);\r\n                            self.scrollendtrapped = setTimeout(self.onScrollTransitionEnd, ms); // simulate transitionend event\r\n                        }\r\n\r\n                        var py = top;\r\n                        var px = lft;\r\n                        self.timerscroll = {\r\n                            bz: new BezierClass(py, self.newscrolly, ms, 0, 0, 0.58, 1),\r\n                            bh: new BezierClass(px, self.newscrollx, ms, 0, 0, 0.58, 1)\r\n                        };\r\n                        if (!self.cursorfreezed) self.timerscroll.tm = setInterval(function () {\r\n                            self.showCursor(self.getScrollTop(), self.getScrollLeft())\r\n                        }, 60);\r\n\r\n                    }\r\n\r\n                    self.synched(\"doScroll-set\", function () {\r\n                        self.timer = 0;\r\n                        if (self.scrollendtrapped) self.scrollrunning = true;\r\n                        self.setScrollTop(self.newscrolly);\r\n                        self.setScrollLeft(self.newscrollx);\r\n                        if (!self.scrollendtrapped) self.onScrollTransitionEnd();\r\n                    });\r\n\r\n\r\n                }, 50);\r\n\r\n            };\r\n\r\n            this.cancelScroll = function () {\r\n                if (!self.scrollendtrapped) return true;\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n                self.scrollrunning = false;\r\n                if (!cap.transitionend) clearTimeout(cap.transitionend);\r\n                self.scrollendtrapped = false;\r\n                self._unbind(self.doc[0], cap.transitionend, self.onScrollTransitionEnd);\r\n                self.prepareTransition(0);\r\n                self.setScrollTop(py); // fire event onscroll\r\n                if (self.railh) self.setScrollLeft(px);\r\n                if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\r\n                self.timerscroll = false;\r\n\r\n                self.cursorfreezed = false;\r\n\r\n                self.showCursor(py, px);\r\n                return self;\r\n            };\r\n            this.onScrollTransitionEnd = function () {\r\n                if (self.scrollendtrapped) self._unbind(self.doc[0], cap.transitionend, self.onScrollTransitionEnd);\r\n                self.scrollendtrapped = false;\r\n                self.prepareTransition(0);\r\n                if (self.timerscroll && self.timerscroll.tm) clearInterval(self.timerscroll.tm);\r\n                self.timerscroll = false;\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n                self.setScrollTop(py); // fire event onscroll        \r\n                if (self.railh) self.setScrollLeft(px); // fire event onscroll left\r\n\r\n                self.noticeCursor(false, py, px);\r\n\r\n                self.cursorfreezed = false;\r\n\r\n                if (py < 0) py = 0\r\n                else if (py > self.page.maxh) py = self.page.maxh;\r\n                if (px < 0) px = 0\r\n                else if (px > self.page.maxw) px = self.page.maxw;\r\n                if ((py != self.newscrolly) || (px != self.newscrollx)) return self.doScrollPos(px, py, self.opt.snapbackspeed);\r\n\r\n                if (self.onscrollend && self.scrollrunning) {\r\n                    self.triggerScrollEnd();\r\n                }\r\n                self.scrollrunning = false;\r\n\r\n            };\r\n\r\n        } else {\r\n\r\n            this.doScrollLeft = function (x, spd) { //no-trans\r\n                var y = (self.scrollrunning) ? self.newscrolly : self.getScrollTop();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollTop = function (y, spd) { //no-trans\r\n                var x = (self.scrollrunning) ? self.newscrollx : self.getScrollLeft();\r\n                self.doScrollPos(x, y, spd);\r\n            };\r\n\r\n            this.doScrollPos = function (x, y, spd) { //no-trans\r\n                var y = ((typeof y == \"undefined\") || (y === false)) ? self.getScrollTop(true) : y;\r\n\r\n                if ((self.timer) && (self.newscrolly == y) && (self.newscrollx == x)) return true;\r\n\r\n                if (self.timer) clearAnimationFrame(self.timer);\r\n                self.timer = 0;\r\n\r\n                var py = self.getScrollTop();\r\n                var px = self.getScrollLeft();\r\n\r\n                if (((self.newscrolly - py) * (y - py) < 0) || ((self.newscrollx - px) * (x - px) < 0)) self.cancelScroll(); //inverted movement detection\r\n\r\n                self.newscrolly = y;\r\n                self.newscrollx = x;\r\n\r\n                if (!self.bouncescroll || !self.rail.visibility) {\r\n                    if (self.newscrolly < 0) {\r\n                        self.newscrolly = 0;\r\n                    } else if (self.newscrolly > self.page.maxh) {\r\n                        self.newscrolly = self.page.maxh;\r\n                    }\r\n                }\r\n                if (!self.bouncescroll || !self.railh.visibility) {\r\n                    if (self.newscrollx < 0) {\r\n                        self.newscrollx = 0;\r\n                    } else if (self.newscrollx > self.page.maxw) {\r\n                        self.newscrollx = self.page.maxw;\r\n                    }\r\n                }\r\n\r\n                self.dst = {};\r\n                self.dst.x = x - px;\r\n                self.dst.y = y - py;\r\n                self.dst.px = px;\r\n                self.dst.py = py;\r\n\r\n                var dst = Math.round(Math.sqrt(Math.pow(self.dst.x, 2) + Math.pow(self.dst.y, 2)));\r\n\r\n                self.dst.ax = self.dst.x / dst;\r\n                self.dst.ay = self.dst.y / dst;\r\n\r\n                var pa = 0;\r\n                var pe = dst;\r\n\r\n                if (self.dst.x == 0) {\r\n                    pa = py;\r\n                    pe = y;\r\n                    self.dst.ay = 1;\r\n                    self.dst.py = 0;\r\n                } else if (self.dst.y == 0) {\r\n                    pa = px;\r\n                    pe = x;\r\n                    self.dst.ax = 1;\r\n                    self.dst.px = 0;\r\n                }\r\n\r\n                var ms = self.getTransitionSpeed(dst);\r\n                if (spd && spd <= 1) ms *= spd;\r\n                if (ms > 0) {\r\n                    self.bzscroll = (self.bzscroll) ? self.bzscroll.update(pe, ms) : new BezierClass(pa, pe, ms, 0, 1, 0, 1);\r\n                } else {\r\n                    self.bzscroll = false;\r\n                }\r\n\r\n                if (self.timer) return;\r\n\r\n                if ((py == self.page.maxh && y >= self.page.maxh) || (px == self.page.maxw && x >= self.page.maxw)) self.checkContentSize();\r\n\r\n                var sync = 1;\r\n\r\n                function scrolling() {\r\n                    if (self.cancelAnimationFrame) return true;\r\n\r\n                    self.scrollrunning = true;\r\n\r\n                    sync = 1 - sync;\r\n                    if (sync) return (self.timer = setAnimationFrame(scrolling) || 1);\r\n\r\n                    var done = 0;\r\n                    var sx, sy;\r\n\r\n                    var sc = sy = self.getScrollTop();\r\n                    if (self.dst.ay) {\r\n                        sc = (self.bzscroll) ? self.dst.py + (self.bzscroll.getNow() * self.dst.ay) : self.newscrolly;\r\n                        var dr = sc - sy;\r\n                        if ((dr < 0 && sc < self.newscrolly) || (dr > 0 && sc > self.newscrolly)) sc = self.newscrolly;\r\n                        self.setScrollTop(sc);\r\n                        if (sc == self.newscrolly) done = 1;\r\n                    } else {\r\n                        done = 1;\r\n                    }\r\n\r\n                    var scx = sx = self.getScrollLeft();\r\n                    if (self.dst.ax) {\r\n                        scx = (self.bzscroll) ? self.dst.px + (self.bzscroll.getNow() * self.dst.ax) : self.newscrollx;\r\n                        var dr = scx - sx;\r\n                        if ((dr < 0 && scx < self.newscrollx) || (dr > 0 && scx > self.newscrollx)) scx = self.newscrollx;\r\n                        self.setScrollLeft(scx);\r\n                        if (scx == self.newscrollx) done += 1;\r\n                    } else {\r\n                        done += 1;\r\n                    }\r\n\r\n                    if (done == 2) {\r\n                        self.timer = 0;\r\n                        self.cursorfreezed = false;\r\n                        self.bzscroll = false;\r\n                        self.scrollrunning = false;\r\n                        if (sc < 0) sc = 0;\r\n                        else if (sc > self.page.maxh) sc = self.page.maxh;\r\n                        if (scx < 0) scx = 0;\r\n                        else if (scx > self.page.maxw) scx = self.page.maxw;\r\n                        if ((scx != self.newscrollx) || (sc != self.newscrolly)) self.doScrollPos(scx, sc);\r\n                        else {\r\n                            if (self.onscrollend) {\r\n                                self.triggerScrollEnd();\r\n                            }\r\n                        }\r\n                    } else {\r\n                        self.timer = setAnimationFrame(scrolling) || 1;\r\n                    }\r\n                };\r\n                self.cancelAnimationFrame = false;\r\n                self.timer = 1;\r\n\r\n                if (self.onscrollstart && !self.scrollrunning) {\r\n                    var info = {\r\n                        \"type\": \"scrollstart\",\r\n                        \"current\": {\r\n                            \"x\": px,\r\n                            \"y\": py\r\n                        },\r\n                        \"request\": {\r\n                            \"x\": x,\r\n                            \"y\": y\r\n                        },\r\n                        \"end\": {\r\n                            \"x\": self.newscrollx,\r\n                            \"y\": self.newscrolly\r\n                        },\r\n                        \"speed\": ms\r\n                    };\r\n                    self.onscrollstart.call(self, info);\r\n                }\r\n\r\n                scrolling();\r\n\r\n                if ((py == self.page.maxh && y >= py) || (px == self.page.maxw && x >= px)) self.checkContentSize();\r\n\r\n                self.noticeCursor();\r\n            };\r\n\r\n            this.cancelScroll = function () {\r\n                if (self.timer) clearAnimationFrame(self.timer);\r\n                self.timer = 0;\r\n                self.bzscroll = false;\r\n                self.scrollrunning = false;\r\n                return self;\r\n            };\r\n\r\n        }\r\n\r\n        this.doScrollBy = function (stp, relative) {\r\n            var ny = 0;\r\n            if (relative) {\r\n                ny = Math.floor((self.scroll.y - stp) * self.scrollratio.y)\r\n            } else {\r\n                var sy = (self.timer) ? self.newscrolly : self.getScrollTop(true);\r\n                ny = sy - stp;\r\n            }\r\n            if (self.bouncescroll) {\r\n                var haf = Math.round(self.view.h / 2);\r\n                if (ny < -haf) ny = -haf\r\n                else if (ny > (self.page.maxh + haf)) ny = (self.page.maxh + haf);\r\n            }\r\n            self.cursorfreezed = false;\r\n\r\n            var py = self.getScrollTop(true);\r\n            if (ny < 0 && py <= 0) return self.noticeCursor();\r\n            else if (ny > self.page.maxh && py >= self.page.maxh) {\r\n                self.checkContentSize();\r\n                return self.noticeCursor();\r\n            }\r\n\r\n            self.doScrollTop(ny);\r\n        };\r\n\r\n        this.doScrollLeftBy = function (stp, relative) {\r\n            var nx = 0;\r\n            if (relative) {\r\n                nx = Math.floor((self.scroll.x - stp) * self.scrollratio.x)\r\n            } else {\r\n                var sx = (self.timer) ? self.newscrollx : self.getScrollLeft(true);\r\n                nx = sx - stp;\r\n            }\r\n            if (self.bouncescroll) {\r\n                var haf = Math.round(self.view.w / 2);\r\n                if (nx < -haf) nx = -haf;\r\n                else if (nx > (self.page.maxw + haf)) nx = (self.page.maxw + haf);\r\n            }\r\n            self.cursorfreezed = false;\r\n\r\n            var px = self.getScrollLeft(true);\r\n            if (nx < 0 && px <= 0) return self.noticeCursor();\r\n            else if (nx > self.page.maxw && px >= self.page.maxw) return self.noticeCursor();\r\n\r\n            self.doScrollLeft(nx);\r\n        };\r\n\r\n        this.doScrollTo = function (pos, relative) {\r\n            var ny = (relative) ? Math.round(pos * self.scrollratio.y) : pos;\r\n            if (ny < 0) ny = 0;\r\n            else if (ny > self.page.maxh) ny = self.page.maxh;\r\n            self.cursorfreezed = false;\r\n            self.doScrollTop(pos);\r\n        };\r\n\r\n        this.checkContentSize = function () {\r\n            var pg = self.getContentSize();\r\n            if ((pg.h != self.page.h) || (pg.w != self.page.w)) self.resize(false, pg);\r\n        };\r\n\r\n        self.onscroll = function (e) {\r\n            if (self.rail.drag) return;\r\n            if (!self.cursorfreezed) {\r\n                self.synched('scroll', function () {\r\n                    self.scroll.y = Math.round(self.getScrollTop() * (1 / self.scrollratio.y));\r\n                    if (self.railh) self.scroll.x = Math.round(self.getScrollLeft() * (1 / self.scrollratio.x));\r\n                    self.noticeCursor();\r\n                });\r\n            }\r\n        };\r\n        self.bind(self.docscroll, \"scroll\", self.onscroll);\r\n\r\n        this.doZoomIn = function (e) {\r\n            if (self.zoomactive) return;\r\n            self.zoomactive = true;\r\n\r\n            self.zoomrestore = {\r\n                style: {}\r\n            };\r\n            var lst = ['position', 'top', 'left', 'zIndex', 'backgroundColor', 'marginTop', 'marginBottom', 'marginLeft', 'marginRight'];\r\n            var win = self.win[0].style;\r\n            for (var a in lst) {\r\n                var pp = lst[a];\r\n                self.zoomrestore.style[pp] = (typeof win[pp] != \"undefined\") ? win[pp] : '';\r\n            }\r\n\r\n            self.zoomrestore.style.width = self.win.css('width');\r\n            self.zoomrestore.style.height = self.win.css('height');\r\n\r\n            self.zoomrestore.padding = {\r\n                w: self.win.outerWidth() - self.win.width(),\r\n                h: self.win.outerHeight() - self.win.height()\r\n            };\r\n\r\n            if (cap.isios4) {\r\n                self.zoomrestore.scrollTop = $(window).scrollTop();\r\n                $(window).scrollTop(0);\r\n            }\r\n\r\n            self.win.css({\r\n                \"position\": (cap.isios4) ? \"absolute\" : \"fixed\",\r\n                \"top\": 0,\r\n                \"left\": 0,\r\n                \"z-index\": globalmaxzindex + 100,\r\n                \"margin\": \"0px\"\r\n            });\r\n            var bkg = self.win.css(\"backgroundColor\");\r\n            if (bkg == \"\" || /transparent|rgba\\(0, 0, 0, 0\\)|rgba\\(0,0,0,0\\)/.test(bkg)) self.win.css(\"backgroundColor\", \"#fff\");\r\n            self.rail.css({\r\n                \"z-index\": globalmaxzindex + 101\r\n            });\r\n            self.zoom.css({\r\n                \"z-index\": globalmaxzindex + 102\r\n            });\r\n            self.zoom.css('backgroundPosition', '0px -18px');\r\n            self.resizeZoom();\r\n\r\n            if (self.onzoomin) self.onzoomin.call(self);\r\n\r\n            return self.cancelEvent(e);\r\n        };\r\n\r\n        this.doZoomOut = function (e) {\r\n            if (!self.zoomactive) return;\r\n            self.zoomactive = false;\r\n\r\n            self.win.css(\"margin\", \"\");\r\n            self.win.css(self.zoomrestore.style);\r\n\r\n            if (cap.isios4) {\r\n                $(window).scrollTop(self.zoomrestore.scrollTop);\r\n            }\r\n\r\n            self.rail.css({\r\n                \"z-index\": self.zindex\r\n            });\r\n            self.zoom.css({\r\n                \"z-index\": self.zindex\r\n            });\r\n            self.zoomrestore = false;\r\n            self.zoom.css('backgroundPosition', '0px 0px');\r\n            self.onResize();\r\n\r\n            if (self.onzoomout) self.onzoomout.call(self);\r\n\r\n            return self.cancelEvent(e);\r\n        };\r\n\r\n        this.doZoom = function (e) {\r\n            return (self.zoomactive) ? self.doZoomOut(e) : self.doZoomIn(e);\r\n        };\r\n\r\n        this.resizeZoom = function () {\r\n            if (!self.zoomactive) return;\r\n\r\n            var py = self.getScrollTop(); //preserve scrolling position\r\n            self.win.css({\r\n                width: $(window).width() - self.zoomrestore.padding.w + \"px\",\r\n                height: $(window).height() - self.zoomrestore.padding.h + \"px\"\r\n            });\r\n            self.onResize();\r\n\r\n            self.setScrollTop(Math.min(self.page.maxh, py));\r\n        };\r\n\r\n        this.init();\r\n\r\n        $.nicescroll.push(this);\r\n\r\n    };\r\n\r\n    // Inspired by the work of Kin Blas\r\n    // http://webpro.host.adobe.com/people/jblas/momentum/includes/jquery.momentum.0.7.js  \r\n\r\n\r\n    var ScrollMomentumClass2D = function (nc) {\r\n        var self = this;\r\n        this.nc = nc;\r\n\r\n        this.lastx = 0;\r\n        this.lasty = 0;\r\n        this.speedx = 0;\r\n        this.speedy = 0;\r\n        this.lasttime = 0;\r\n        this.steptime = 0;\r\n        this.snapx = false;\r\n        this.snapy = false;\r\n        this.demulx = 0;\r\n        this.demuly = 0;\r\n\r\n        this.lastscrollx = -1;\r\n        this.lastscrolly = -1;\r\n\r\n        this.chkx = 0;\r\n        this.chky = 0;\r\n\r\n        this.timer = 0;\r\n\r\n        this.time = function () {\r\n            return +new Date(); //beautifull hack\r\n        };\r\n\r\n        this.reset = function (px, py) {\r\n            self.stop();\r\n            var now = self.time();\r\n            self.steptime = 0;\r\n            self.lasttime = now;\r\n            self.speedx = 0;\r\n            self.speedy = 0;\r\n            self.lastx = px;\r\n            self.lasty = py;\r\n            self.lastscrollx = -1;\r\n            self.lastscrolly = -1;\r\n        };\r\n\r\n        this.update = function (px, py) {\r\n            var now = self.time();\r\n            self.steptime = now - self.lasttime;\r\n            self.lasttime = now;\r\n            var dy = py - self.lasty;\r\n            var dx = px - self.lastx;\r\n            var sy = self.nc.getScrollTop();\r\n            var sx = self.nc.getScrollLeft();\r\n            var newy = sy + dy;\r\n            var newx = sx + dx;\r\n            self.snapx = (newx < 0) || (newx > self.nc.page.maxw);\r\n            self.snapy = (newy < 0) || (newy > self.nc.page.maxh);\r\n            self.speedx = dx;\r\n            self.speedy = dy;\r\n            self.lastx = px;\r\n            self.lasty = py;\r\n        };\r\n\r\n        this.stop = function () {\r\n            self.nc.unsynched(\"domomentum2d\");\r\n            if (self.timer) clearTimeout(self.timer);\r\n            self.timer = 0;\r\n            self.lastscrollx = -1;\r\n            self.lastscrolly = -1;\r\n        };\r\n\r\n        this.doSnapy = function (nx, ny) {\r\n            var snap = false;\r\n\r\n            if (ny < 0) {\r\n                ny = 0;\r\n                snap = true;\r\n            } else if (ny > self.nc.page.maxh) {\r\n                ny = self.nc.page.maxh;\r\n                snap = true;\r\n            }\r\n\r\n            if (nx < 0) {\r\n                nx = 0;\r\n                snap = true;\r\n            } else if (nx > self.nc.page.maxw) {\r\n                nx = self.nc.page.maxw;\r\n                snap = true;\r\n            }\r\n\r\n            (snap) ? self.nc.doScrollPos(nx, ny, self.nc.opt.snapbackspeed) : self.nc.triggerScrollEnd();\r\n        };\r\n\r\n        this.doMomentum = function (gp) {\r\n            var t = self.time();\r\n            var l = (gp) ? t + gp : self.lasttime;\r\n\r\n            var sl = self.nc.getScrollLeft();\r\n            var st = self.nc.getScrollTop();\r\n\r\n            var pageh = self.nc.page.maxh;\r\n            var pagew = self.nc.page.maxw;\r\n\r\n            self.speedx = (pagew > 0) ? Math.min(60, self.speedx) : 0;\r\n            self.speedy = (pageh > 0) ? Math.min(60, self.speedy) : 0;\r\n\r\n            var chk = l && (t - l) <= 60;\r\n\r\n            if ((st < 0) || (st > pageh) || (sl < 0) || (sl > pagew)) chk = false;\r\n\r\n            var sy = (self.speedy && chk) ? self.speedy : false;\r\n            var sx = (self.speedx && chk) ? self.speedx : false;\r\n\r\n            if (sy || sx) {\r\n                var tm = Math.max(16, self.steptime); //timeout granularity\r\n\r\n                if (tm > 50) { // do smooth\r\n                    var xm = tm / 50;\r\n                    self.speedx *= xm;\r\n                    self.speedy *= xm;\r\n                    tm = 50;\r\n                }\r\n\r\n                self.demulxy = 0;\r\n\r\n                self.lastscrollx = self.nc.getScrollLeft();\r\n                self.chkx = self.lastscrollx;\r\n                self.lastscrolly = self.nc.getScrollTop();\r\n                self.chky = self.lastscrolly;\r\n\r\n                var nx = self.lastscrollx;\r\n                var ny = self.lastscrolly;\r\n\r\n                var onscroll = function () {\r\n                    var df = ((self.time() - t) > 600) ? 0.04 : 0.02;\r\n\r\n                    if (self.speedx) {\r\n                        nx = Math.floor(self.lastscrollx - (self.speedx * (1 - self.demulxy)));\r\n                        self.lastscrollx = nx;\r\n                        if ((nx < 0) || (nx > pagew)) df = 0.10;\r\n                    }\r\n\r\n                    if (self.speedy) {\r\n                        ny = Math.floor(self.lastscrolly - (self.speedy * (1 - self.demulxy)));\r\n                        self.lastscrolly = ny;\r\n                        if ((ny < 0) || (ny > pageh)) df = 0.10;\r\n                    }\r\n\r\n                    self.demulxy = Math.min(1, self.demulxy + df);\r\n\r\n                    self.nc.synched(\"domomentum2d\", function () {\r\n\r\n                        if (self.speedx) {\r\n                            var scx = self.nc.getScrollLeft();\r\n                            if (scx != self.chkx) self.stop();\r\n                            self.chkx = nx;\r\n                            self.nc.setScrollLeft(nx);\r\n                        }\r\n\r\n                        if (self.speedy) {\r\n                            var scy = self.nc.getScrollTop();\r\n                            if (scy != self.chky) self.stop();\r\n                            self.chky = ny;\r\n                            self.nc.setScrollTop(ny);\r\n                        }\r\n\r\n                        if (!self.timer) {\r\n                            self.nc.hideCursor();\r\n                            self.doSnapy(nx, ny);\r\n                        }\r\n\r\n                    });\r\n\r\n                    if (self.demulxy < 1) {\r\n                        self.timer = setTimeout(onscroll, tm);\r\n                    } else {\r\n                        self.stop();\r\n                        self.nc.hideCursor();\r\n                        self.doSnapy(nx, ny);\r\n                    }\r\n                };\r\n\r\n                onscroll();\r\n\r\n            } else {\r\n                self.doSnapy(self.nc.getScrollLeft(), self.nc.getScrollTop());\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // override jQuery scrollTop\r\n\r\n    var _scrollTop = jQueryIWD.fn.scrollTop; // preserve original function\r\n\r\n    jQueryIWD.cssHooks[\"pageYOffset\"] = {\r\n        get: function (elem, computed, extra) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(elem);\r\n        },\r\n        set: function (elem, value) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call(elem, value);\r\n            return this;\r\n        }\r\n    };\r\n\r\n    /*  \r\n     $.fx.step[\"scrollTop\"] = function(fx){    \r\n     $.cssHooks[\"scrollTop\"].set( fx.elem, fx.now + fx.unit );\r\n     };\r\n     */\r\n\r\n    jQueryIWD.fn.scrollTop = function (value) {\r\n        if (typeof value == \"undefined\") {\r\n            var nice = (this[0]) ? $.data(this[0], '__nicescroll') || false : false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollTop() : _scrollTop.call(this);\r\n        } else {\r\n            return this.each(function () {\r\n                var nice = $.data(this, '__nicescroll') || false;\r\n                (nice && nice.ishwscroll) ? nice.setScrollTop(parseInt(value)) : _scrollTop.call($(this), value);\r\n            });\r\n        }\r\n    };\r\n\r\n    // override jQuery scrollLeft\r\n\r\n    var _scrollLeft = jQueryIWD.fn.scrollLeft; // preserve original function\r\n\r\n    $.cssHooks.pageXOffset = {\r\n        get: function (elem, computed, extra) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(elem);\r\n        },\r\n        set: function (elem, value) {\r\n            var nice = $.data(elem, '__nicescroll') || false;\r\n            (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call(elem, value);\r\n            return this;\r\n        }\r\n    };\r\n\r\n    /*  \r\n     $.fx.step[\"scrollLeft\"] = function(fx){\r\n     $.cssHooks[\"scrollLeft\"].set( fx.elem, fx.now + fx.unit );\r\n     };  \r\n     */\r\n\r\n    jQueryIWD.fn.scrollLeft = function (value) {\r\n        if (typeof value == \"undefined\") {\r\n            var nice = (this[0]) ? $.data(this[0], '__nicescroll') || false : false;\r\n            return (nice && nice.ishwscroll) ? nice.getScrollLeft() : _scrollLeft.call(this);\r\n        } else {\r\n            return this.each(function () {\r\n                var nice = $.data(this, '__nicescroll') || false;\r\n                (nice && nice.ishwscroll) ? nice.setScrollLeft(parseInt(value)) : _scrollLeft.call($(this), value);\r\n            });\r\n        }\r\n    };\r\n\r\n    var NiceScrollArray = function (doms) {\r\n        var self = this;\r\n        this.length = 0;\r\n        this.name = \"nicescrollarray\";\r\n\r\n        this.each = function (fn) {\r\n            for (var a = 0, i = 0; a < self.length; a++) fn.call(self[a], i++);\r\n            return self;\r\n        };\r\n\r\n        this.push = function (nice) {\r\n            self[self.length] = nice;\r\n            self.length++;\r\n        };\r\n\r\n        this.eq = function (idx) {\r\n            return self[idx];\r\n        };\r\n\r\n        if (doms) {\r\n            for (var a = 0; a < doms.length; a++) {\r\n                var nice = $.data(doms[a], '__nicescroll') || false;\r\n                if (nice) {\r\n                    this[this.length] = nice;\r\n                    this.length++;\r\n                }\r\n            }\r\n            ;\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    function mplex(el, lst, fn) {\r\n        for (var a = 0; a < lst.length; a++) fn(el, lst[a]);\r\n    };\r\n    mplex(\r\n        NiceScrollArray.prototype, ['show', 'hide', 'toggle', 'onResize', 'resize', 'remove', 'stop', 'doScrollPos'],\r\n        function (e, n) {\r\n            e[n] = function () {\r\n                var args = arguments;\r\n                return this.each(function () {\r\n                    this[n].apply(this, args);\r\n                });\r\n            };\r\n        }\r\n    );\r\n\r\n    jQueryIWD.fn.getNiceScroll = function (index) {\r\n        if (typeof index == \"undefined\") {\r\n            return new NiceScrollArray(this);\r\n        } else {\r\n            var nice = this[index] && $.data(this[index], '__nicescroll') || false;\r\n            return nice;\r\n        }\r\n    };\r\n\r\n    jQueryIWD.extend(jQueryIWD.expr[':'], {\r\n        nicescroll: function (a) {\r\n            return ($.data(a, '__nicescroll')) ? true : false;\r\n        }\r\n    });\r\n\r\n    jQueryIWD.fn.niceScroll = function (wrapper, opt) {\r\n        if (typeof opt == \"undefined\") {\r\n            if ((typeof wrapper == \"object\") && !(\"jquery\" in wrapper)) {\r\n                opt = wrapper;\r\n                wrapper = false;\r\n            }\r\n        }\r\n        opt = jQueryIWD.extend({}, opt); // cloning\r\n        var ret = new NiceScrollArray();\r\n        if (typeof opt == \"undefined\") opt = {};\r\n\r\n        if (wrapper || false) {\r\n            opt.doc = $(wrapper);\r\n            opt.win = $(this);\r\n        }\r\n        var docundef = !(\"doc\" in opt);\r\n        if (!docundef && !(\"win\" in opt)) opt.win = $(this);\r\n\r\n        this.each(function () {\r\n            var nice = $(this).data('__nicescroll') || false;\r\n            if (!nice) {\r\n                opt.doc = (docundef) ? $(this) : opt.doc;\r\n                nice = new NiceScrollClass(opt, $(this));\r\n                $(this).data('__nicescroll', nice);\r\n            }\r\n            ret.push(nice);\r\n        });\r\n        return (ret.length == 1) ? ret[0] : ret;\r\n    };\r\n\r\n    window.NiceScroll = {\r\n        getjQuery: function () {\r\n            return jQuery\r\n        }\r\n    };\r\n\r\n    if (!$.nicescroll) {\r\n        $.nicescroll = new NiceScrollArray();\r\n        $.nicescroll.options = _globaloptions;\r\n    }\r\n\r\n    return\r\n\r\n}));","IWD_Opc/js/view/sidebar.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'ko',\r\n        'jquery',\r\n        'IWD_Opc/js/model/sidebar'\r\n    ],\r\n    function(Component, ko, $, sidebarModel) {\r\n        'use strict';\r\n        return Component.extend({\r\n            setModalElement: function(element) {\r\n                sidebarModel.setPopup($(element));\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/authentication.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Ui/js/form/form',\r\n        'Magento_Customer/js/action/login',\r\n        'Magento_Customer/js/model/customer',\r\n        'mage/validation',\r\n        'Magento_Checkout/js/model/authentication-messages',\r\n        'Magento_Checkout/js/model/full-screen-loader'\r\n    ],\r\n    function($, Component, loginAction, customer, validation, messageContainer, fullScreenLoader) {\r\n        'use strict';\r\n        var checkoutConfig = window.checkoutConfig;\r\n\r\n        return Component.extend({\r\n            isGuestCheckoutAllowed: checkoutConfig.isGuestCheckoutAllowed,\r\n            isCustomerLoginRequired: checkoutConfig.isCustomerLoginRequired,\r\n            registerUrl: checkoutConfig.registerUrl,\r\n            forgotPasswordUrl: checkoutConfig.forgotPasswordUrl,\r\n            autocomplete: checkoutConfig.autocomplete,\r\n            defaults: {\r\n                template: 'IWD_Opc/authentication'\r\n            },\r\n\r\n            /** Is login form enabled for current customer */\r\n            isActive: function() {\r\n                return !customer.isLoggedIn();\r\n            },\r\n\r\n            /** Provide login action */\r\n            login: function(loginForm) {\r\n                var loginData = {},\r\n                    formDataArray = $(loginForm).serializeArray();\r\n\r\n                formDataArray.forEach(function (entry) {\r\n                    loginData[entry.name] = entry.value;\r\n                });\r\n\r\n                if($(loginForm).validation()\r\n                    && $(loginForm).validation('isValid')\r\n                ) {\r\n                    fullScreenLoader.startLoader();\r\n                    loginAction(loginData, checkoutConfig.checkoutUrl, undefined, messageContainer).always(function() {\r\n                        fullScreenLoader.stopLoader();\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/billing-address.js":"/*jshint browser:true*/\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'ko',\r\n        'Magento_Ui/js/form/form',\r\n        'Magento_Customer/js/model/customer',\r\n        'Magento_Customer/js/model/address-list',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/action/create-billing-address',\r\n        'Magento_Checkout/js/action/select-billing-address',\r\n        'Magento_Checkout/js/checkout-data',\r\n        'Magento_Checkout/js/model/checkout-data-resolver',\r\n        'Magento_Customer/js/customer-data',\r\n        'Magento_Checkout/js/action/set-billing-address',\r\n        'Magento_Ui/js/model/messageList',\r\n        'mage/translate'\r\n    ],\r\n    function (\r\n        ko,\r\n        Component,\r\n        customer,\r\n        addressList,\r\n        quote,\r\n        createBillingAddress,\r\n        selectBillingAddress,\r\n        checkoutData,\r\n        checkoutDataResolver,\r\n        customerData,\r\n        setBillingAddressAction,\r\n        globalMessageList,\r\n        $t\r\n    ) {\r\n        'use strict';\r\n\r\n        var lastSelectedBillingAddress = null,\r\n            newAddressOption = {\r\n                getAddressInline: function () {\r\n                    return $t('New Address');\r\n                },\r\n                customerAddressId: null\r\n            },\r\n            countryData = customerData.get('directory-data'),\r\n            addressOptions = addressList().filter(function (address) {\r\n                return address.getType() == 'customer-address';\r\n            });\r\n        addressOptions.push(newAddressOption);\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/billing-address'\r\n            },\r\n            currentBillingAddress: quote.billingAddress,\r\n            addressOptions: addressOptions,\r\n            customerHasAddresses: addressOptions.length > 1,\r\n\r\n            /**\r\n             * Init component\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n                quote.paymentMethod.subscribe(function () {\r\n                    checkoutDataResolver.resolveBillingAddress();\r\n                }, this);\r\n            },\r\n\r\n            /**\r\n             * @return {exports.initObservable}\r\n             */\r\n            initObservable: function () {\r\n                this._super()\r\n                    .observe({\r\n                        selectedAddress: null,\r\n                        isAddressDetailsVisible: quote.billingAddress() != null,\r\n                        isAddressFormVisible: !customer.isLoggedIn() || addressOptions.length == 1,\r\n                        isAddressSameAsShipping: false,\r\n                        saveInAddressBook: true\r\n                    });\r\n\r\n                quote.billingAddress.subscribe(function (newAddress) {\r\n                    if (quote.isVirtual()) {\r\n                        this.isAddressSameAsShipping(false);\r\n                    } else {\r\n                        this.isAddressSameAsShipping(\r\n                            newAddress != null &&\r\n                            newAddress.getCacheKey() == quote.shippingAddress().getCacheKey()\r\n                        );\r\n                    }\r\n\r\n                    if (newAddress != null && newAddress.saveInAddressBook !== undefined) {\r\n                        this.saveInAddressBook(newAddress.saveInAddressBook);\r\n                    }\r\n                    this.isAddressDetailsVisible(true);\r\n                }, this);\r\n\r\n                quote.shippingAddress.subscribe(function (newAddress) {\r\n                    if (!quote.isVirtual() && this.isAddressSameAsShipping()) {\r\n                        quote.billingAddress(newAddress);\r\n                    }\r\n                }, this);\r\n\r\n                return this;\r\n            },\r\n\r\n            canUseShippingAddress: ko.computed(function () {\r\n                return !quote.isVirtual() && quote.shippingAddress() && quote.shippingAddress().canUseForBilling();\r\n            }),\r\n\r\n            /**\r\n             * @param {Object} address\r\n             * @return {*}\r\n             */\r\n            addressOptionsText: function (address) {\r\n                return address.getAddressInline();\r\n            },\r\n\r\n            /**\r\n             * @return {Boolean}\r\n             */\r\n            useShippingAddress: function () {\r\n                if (this.isAddressSameAsShipping()) {\r\n                    selectBillingAddress(quote.shippingAddress());\r\n                    if (window.checkoutConfig.reloadOnBillingAddress) {\r\n                        setBillingAddressAction(globalMessageList);\r\n                    }\r\n                    this.isAddressDetailsVisible(true);\r\n                } else {\r\n                    lastSelectedBillingAddress = quote.billingAddress();\r\n                    quote.billingAddress(null);\r\n                    this.isAddressDetailsVisible(false);\r\n                }\r\n                checkoutData.setSelectedBillingAddress(null);\r\n\r\n                return true;\r\n            },\r\n\r\n            /**\r\n             * Update address action\r\n             */\r\n            updateAddress: function () {\r\n                if (this.selectedAddress() && this.selectedAddress() != newAddressOption) {\r\n                    selectBillingAddress(this.selectedAddress());\r\n                    checkoutData.setSelectedBillingAddress(this.selectedAddress().getKey());\r\n                    if (window.checkoutConfig.reloadOnBillingAddress) {\r\n                        setBillingAddressAction(globalMessageList);\r\n                    }\r\n                } else {\r\n                    this.source.set('params.invalid', false);\r\n                    this.source.trigger(this.dataScopePrefix + '.data.validate');\r\n                    if (this.source.get(this.dataScopePrefix + '.custom_attributes')) {\r\n                        this.source.trigger(this.dataScopePrefix + '.custom_attributes.data.validate');\r\n                    };\r\n\r\n                    if (!this.source.get('params.invalid')) {\r\n                        var addressData = this.source.get(this.dataScopePrefix),\r\n                            newBillingAddress;\r\n\r\n                        if (customer.isLoggedIn() && !this.customerHasAddresses) {\r\n                            this.saveInAddressBook(true);\r\n                        }\r\n                        addressData.save_in_address_book = this.saveInAddressBook();\r\n                        newBillingAddress = createBillingAddress(addressData);\r\n\r\n                        // New address must be selected as a billing address\r\n                        selectBillingAddress(newBillingAddress);\r\n                        checkoutData.setSelectedBillingAddress(newBillingAddress.getKey());\r\n                        checkoutData.setNewCustomerBillingAddress(addressData);\r\n\r\n                        if (window.checkoutConfig.reloadOnBillingAddress) {\r\n                            setBillingAddressAction(globalMessageList);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Edit address action\r\n             */\r\n            editAddress: function () {\r\n                lastSelectedBillingAddress = quote.billingAddress();\r\n                quote.billingAddress(null);\r\n                this.isAddressDetailsVisible(false);\r\n            },\r\n\r\n            /**\r\n             * Cancel address edit action\r\n             */\r\n            cancelAddressEdit: function () {\r\n                this.restoreBillingAddress();\r\n\r\n                if (quote.billingAddress()) {\r\n                    // restore 'Same As Shipping' checkbox state\r\n                    this.isAddressSameAsShipping(\r\n                        quote.billingAddress() != null &&\r\n                        quote.billingAddress().getCacheKey() == quote.shippingAddress().getCacheKey() &&\r\n                        !quote.isVirtual()\r\n                    );\r\n                    this.isAddressDetailsVisible(true);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Restore billing address\r\n             */\r\n            restoreBillingAddress: function () {\r\n                if (lastSelectedBillingAddress != null) {\r\n                    selectBillingAddress(lastSelectedBillingAddress);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * @param {Object} address\r\n             */\r\n            onAddressChange: function (address) {\r\n                this.isAddressFormVisible(address == newAddressOption);\r\n            },\r\n\r\n            /**\r\n             * @param {int} countryId\r\n             * @return {*}\r\n             */\r\n            getCountryName: function (countryId) {\r\n                return countryData()[countryId] != undefined ? countryData()[countryId].name : '';\r\n            },\r\n\r\n            /**\r\n             * @param {int} city\r\n             * @return {boolean}\r\n             */\r\n            hasCity: function (city) {\r\n                return city != null && city != undefined && city != '';\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/shipping.js":"define(\r\n    [\r\n        'jquery',\r\n        \"underscore\",\r\n        'Magento_Ui/js/form/form',\r\n        'ko',\r\n        'Magento_Customer/js/model/customer',\r\n        'Magento_Customer/js/model/address-list',\r\n        'Magento_Checkout/js/model/address-converter',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/action/create-shipping-address',\r\n        'Magento_Checkout/js/action/select-shipping-address',\r\n        'IWD_Opc/js/model/shipping-rates-validator',\r\n        'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n        'IWD_Opc/js/model/shipping-service',\r\n        'Magento_Checkout/js/action/select-shipping-method',\r\n        'Magento_Checkout/js/model/shipping-rate-registry',\r\n        'Magento_Checkout/js/action/set-shipping-information',\r\n        'Magento_Checkout/js/model/step-navigator',\r\n        'Magento_Ui/js/modal/modal',\r\n        'Magento_Checkout/js/model/checkout-data-resolver',\r\n        'Magento_Checkout/js/checkout-data',\r\n        'uiRegistry',\r\n        'mage/translate',\r\n        'IWD_Opc/js/model/shipping-rate-service'\r\n    ],\r\n    function(\r\n        $,\r\n        _,\r\n        Component,\r\n        ko,\r\n        customer,\r\n        addressList,\r\n        addressConverter,\r\n        quote,\r\n        createShippingAddress,\r\n        selectShippingAddress,\r\n        shippingRatesValidator,\r\n        formPopUpState,\r\n        shippingService,\r\n        selectShippingMethodAction,\r\n        rateRegistry,\r\n        setShippingInformationAction,\r\n        stepNavigator,\r\n        modal,\r\n        checkoutDataResolver,\r\n        checkoutData,\r\n        registry,\r\n        $t\r\n    ) {\r\n        'use strict';\r\n        var popUp = null;\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/shipping'\r\n            },\r\n            visible: ko.observable(!quote.isVirtual()),\r\n            errorValidationMessage: ko.observable(false),\r\n            isCustomerLoggedIn: customer.isLoggedIn,\r\n            isFormPopUpVisible: formPopUpState.isVisible,\r\n            isFormInline: addressList().length == 0,\r\n            isNewAddressAdded: ko.observable(false),\r\n            saveInAddressBook: true,\r\n            quoteIsVirtual: quote.isVirtual(),\r\n\r\n            initialize: function () {\r\n                var self = this;\r\n                this._super();\r\n\r\n                $('body').addClass('iwd-onepage-checkout').addClass(window.checkoutConfig.onestepcheckoutLayout);\r\n                if (quote.isVirtual()) {\r\n                    $('body').addClass('iwd-onepage-checkout').addClass('iwd-opc-virtual');\r\n                }\r\n                checkoutDataResolver.resolveShippingAddress();\r\n\r\n                var hasNewAddress = addressList.some(function (address) {\r\n                    return address.getType() == 'new-customer-address';\r\n                });\r\n\r\n                this.isNewAddressAdded(hasNewAddress);\r\n\r\n                this.isFormPopUpVisible.subscribe(function (value) {\r\n                    if (value) {\r\n                        self.getPopUp().openModal();\r\n                    }\r\n                });\r\n\r\n                quote.shippingMethod.subscribe(function (value) {\r\n                    self.errorValidationMessage(false);\r\n                });\r\n\r\n                registry.async('checkoutProvider')(function (checkoutProvider) {\r\n                    var shippingAddressData = checkoutData.getShippingAddressFromData();\r\n                    if (shippingAddressData) {\r\n                        checkoutProvider.set(\r\n                            'shippingAddress',\r\n                            $.extend({}, checkoutProvider.get('shippingAddress'), shippingAddressData)\r\n                        );\r\n                    }\r\n                    checkoutProvider.on('shippingAddress', function (shippingAddressData) {\r\n                        checkoutData.setShippingAddressFromData(shippingAddressData);\r\n                    });\r\n                });\r\n\r\n                return this;\r\n            },\r\n\r\n            navigate: function () {\r\n                //load data from server for shipping step\r\n            },\r\n\r\n            initElement: function(element) {\r\n                if (element.index === 'shipping-address-fieldset') {\r\n                    shippingRatesValidator.bindChangeHandlers(element.elems(), false);\r\n                }\r\n            },\r\n\r\n            getPopUp: function() {\r\n                var self = this;\r\n                if (!popUp) {\r\n                    var buttons = this.popUpForm.options.buttons;\r\n                    this.popUpForm.options.buttons = [\r\n                        {\r\n                            text: buttons.save.text ? buttons.save.text : $t('Save Address'),\r\n                            class: buttons.save.class ? buttons.save.class : 'action primary action-save-address',\r\n                            click: self.saveNewAddress.bind(self)\r\n                        },\r\n                        {\r\n                            text: buttons.cancel.text ? buttons.cancel.text: $t('Cancel'),\r\n                            class: buttons.cancel.class ? buttons.cancel.class : 'action secondary action-hide-popup',\r\n                            click: function() {\r\n                                this.closeModal();\r\n                            }\r\n                        }\r\n                    ];\r\n                    this.popUpForm.options.closed = function() {\r\n                        self.isFormPopUpVisible(false);\r\n                    };\r\n                    popUp = modal(this.popUpForm.options, $(this.popUpForm.element));\r\n                }\r\n                return popUp;\r\n            },\r\n\r\n            /** Show address form popup */\r\n            showFormPopUp: function() {\r\n                this.isFormPopUpVisible(true);\r\n            },\r\n\r\n\r\n            /** Save new shipping address */\r\n            saveNewAddress: function() {\r\n                this.source.set('params.invalid', false);\r\n                this.source.trigger('shippingAddress.data.validate');\r\n\r\n                if (!this.source.get('params.invalid')) {\r\n                    var addressData = this.source.get('shippingAddress');\r\n                    addressData.save_in_address_book = this.saveInAddressBook;\r\n\r\n                    // New address must be selected as a shipping address\r\n                    var newShippingAddress = createShippingAddress(addressData);\r\n                    selectShippingAddress(newShippingAddress);\r\n                    checkoutData.setSelectedShippingAddress(newShippingAddress.getKey());\r\n                    checkoutData.setNewCustomerShippingAddress(addressData);\r\n                    this.getPopUp().closeModal();\r\n                    this.isNewAddressAdded(true);\r\n                }\r\n            },\r\n\r\n            /** Shipping Method View **/\r\n            rates: shippingService.getShippingRates(),\r\n            isLoading: shippingService.isLoading,\r\n\r\n            carriers: shippingService.getShippingCarriers(),\r\n            ratesLength: ko.computed(function () {\r\n                return shippingService.getShippingRates().length;\r\n            }),\r\n\r\n            isSelected: ko.computed(function () {\r\n                    return quote.shippingMethod()\r\n                        ? quote.shippingMethod().carrier_code + '_' + quote.shippingMethod().method_code\r\n                        : null;\r\n                }\r\n            ),\r\n\r\n            selectShippingMethod: function(shippingMethod) {\r\n                selectShippingMethodAction(shippingMethod);\r\n                checkoutData.setSelectedShippingRate(shippingMethod.carrier_code + '_' + shippingMethod.method_code);\r\n                $('#co-shipping-method-form').submit();\r\n                return true;\r\n            },\r\n\r\n            setShippingInformation: function () {\r\n                if (this.validateShippingInformation()) {\r\n                    setShippingInformationAction().done(\r\n                        function() {\r\n                            stepNavigator.next();\r\n                        }\r\n                    );\r\n                }\r\n            },\r\n\r\n            validateShippingInformation: function () {\r\n                var shippingAddress,\r\n                    addressData,\r\n                    loginFormSelector = 'form[data-role=email-with-possible-login]',\r\n                    emailValidationResult = customer.isLoggedIn();\r\n\r\n                if (!quote.shippingMethod()) {\r\n                    this.errorValidationMessage('Please specify a shipping method');\r\n                    return false;\r\n                }\r\n\r\n                if (!customer.isLoggedIn()) {\r\n                    $(loginFormSelector).validation();\r\n                    emailValidationResult = Boolean($(loginFormSelector + ' input[name=username]').valid());\r\n                }\r\n\r\n                if (!emailValidationResult) {\r\n                    $(loginFormSelector + ' input[name=username]').focus();\r\n                }\r\n\r\n                if (this.isFormInline) {\r\n                    this.source.set('params.invalid', false);\r\n                    this.source.trigger('shippingAddress.data.validate');\r\n                    if (this.source.get('shippingAddress.custom_attributes')) {\r\n                        this.source.trigger('shippingAddress.custom_attributes.data.validate');\r\n                    };\r\n                    if (this.source.get('params.invalid')\r\n                        || !quote.shippingMethod().method_code\r\n                        || !quote.shippingMethod().carrier_code\r\n                        || !emailValidationResult\r\n                    ) {\r\n                        return false;\r\n                    }\r\n                    shippingAddress = quote.shippingAddress();\r\n                    addressData = addressConverter.formAddressDataToQuoteAddress(\r\n                        this.source.get('shippingAddress')\r\n                    );\r\n\r\n                    //Copy form data to quote shipping address object\r\n                    for (var field in addressData) {\r\n                        if (addressData.hasOwnProperty(field)\r\n                            && shippingAddress.hasOwnProperty(field)\r\n                            && typeof addressData[field] != 'function'\r\n                        ) {\r\n                            shippingAddress[field] = addressData[field];\r\n                        }\r\n                    }\r\n\r\n                    if (customer.isLoggedIn()) {\r\n                        shippingAddress.save_in_address_book = true;\r\n                    }\r\n                    selectShippingAddress(shippingAddress);\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/payment.js":"define(\r\n    [\r\n        'jquery',\r\n        \"underscore\",\r\n        'uiComponent',\r\n        'ko',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/step-navigator',\r\n        'Magento_Checkout/js/model/payment-service',\r\n        'Magento_Checkout/js/model/payment/method-converter',\r\n        'Magento_Checkout/js/action/get-payment-information',\r\n        'Magento_Checkout/js/model/checkout-data-resolver'\r\n    ],\r\n    function (\r\n        $,\r\n        _,\r\n        Component,\r\n        ko,\r\n        quote,\r\n        stepNavigator,\r\n        paymentService,\r\n        methodConverter,\r\n        getPaymentInformation,\r\n        checkoutDataResolver\r\n    ) {\r\n        'use strict';\r\n\r\n        /** Set payment methods to collection */\r\n        paymentService.setPaymentMethods(methodConverter(window.checkoutConfig.paymentMethods));\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/payment',\r\n                activeMethod: ''\r\n            },\r\n            isVisible: true,\r\n            quoteIsVirtual: quote.isVirtual(),\r\n            isPaymentMethodsAvailable: ko.computed(function () {\r\n                return paymentService.getAvailablePaymentMethods().length > 0;\r\n            }),\r\n\r\n            initialize: function () {\r\n                this._super();\r\n                checkoutDataResolver.resolvePaymentMethod();\r\n                return this;\r\n            },\r\n\r\n            getFormKey: function() {\r\n                return window.checkoutConfig.formKey;\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/checkout-agreements.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'ko',\r\n        'jquery',\r\n        'uiComponent',\r\n        'IWD_Opc/js/model/agreements/agreements-modal',\r\n        'IWD_Opc/js/iwd/plugins/jquery.nicescroll.min'\r\n    ],\r\n    function (ko, $, Component, agreementsModal) {\r\n        'use strict';\r\n        var agreementsConfig = window.checkoutConfig.checkoutAgreements,\r\n            agreementManualMode = 1;\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/checkout/checkout-agreements'\r\n            },\r\n            isVisible: agreementsConfig.isEnabled,\r\n            agreements: agreementsConfig.agreements,\r\n            modalTitle: ko.observable(null),\r\n            modalContent: ko.observable(null),\r\n            modalWindow: null,\r\n\r\n            /**\r\n             * Checks if agreement required\r\n             *\r\n             * @param element\r\n             */\r\n            isAgreementRequired: function(element) {\r\n                return element.mode == agreementManualMode;\r\n            },\r\n\r\n            /**\r\n             * Show agreement content in modal\r\n             *\r\n             * @param element\r\n             */\r\n            showContent: function (element) {\r\n                this.modalTitle(element.checkboxText);\r\n                this.modalContent(element.content);\r\n                agreementsModal.showModal();\r\n                $('.iwd-checkout-agreements-modal').closest('.modal-content').niceScroll({cursorcolor:\"#e5e5e5\",cursorwidth:\"8px\",railpadding: { top: 0, right: 7, left: 0, bottom: 0 }});\r\n            },\r\n\r\n            /**\r\n             * Init modal window for rendered element\r\n             *\r\n             * @param element\r\n             */\r\n            initModal: function(element) {\r\n                agreementsModal.createModal(element);\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/agreement-validation.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/payment/additional-validators',\r\n        'IWD_Opc/js/model/agreements/agreement-validator'\r\n    ],\r\n    function (Component, additionalValidators, agreementValidator) {\r\n        'use strict';\r\n        additionalValidators.registerValidator(agreementValidator);\r\n        return Component.extend({});\r\n    }\r\n);\r\n","IWD_Opc/js/view/grand-total-item.js":"/**\r\n * Copyright \u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'IWD_Opc/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Catalog/js/price-utils',\r\n        'Magento_Checkout/js/model/totals'\r\n    ],\r\n    function ($, Component, quote, riceUtils, totals) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            defaults: {\r\n                isFullTaxSummaryDisplayed: window.checkoutConfig.isFullTaxSummaryDisplayed || false,\r\n                template: 'IWD_Opc/grand-total-item'\r\n            },\r\n            totals: quote.getTotals(),\r\n            //isTaxDisplayedInGrandTotal: window.checkoutConfig.includeTaxInGrandTotal || false,\r\n            isDisplayed: function() {\r\n                return this.isFullMode();\r\n            },\r\n            getValue: function() {\r\n                var price = 0;\r\n                if (this.totals()) {\r\n                    price = totals.getSegment('grand_total').value;\r\n                }\r\n                return this.getFormattedPrice(price);\r\n            },\r\n            getBaseValue: function() {\r\n                var price = 0;\r\n                if (this.totals()) {\r\n                    price = this.totals().base_grand_total;\r\n                }\r\n                return priceUtils.formatPrice(price, quote.getBasePriceFormat());\r\n            },\r\n            getGrandTotalExclTax: function() {\r\n                var totals = this.totals();\r\n                if (!totals) {\r\n                    return 0;\r\n                }\r\n                return this.getFormattedPrice(totals.grand_total);\r\n            },\r\n            isBaseGrandTotalDisplayNeeded: function() {\r\n                var totals = this.totals();\r\n                if (!totals) {\r\n                    return false;\r\n                }\r\n                return totals.base_currency_code != totals.quote_currency_code;\r\n            }\r\n        });\r\n    }\r\n);","IWD_Opc/js/view/summary.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'uiComponent',\r\n        'IWD_Opc/js/model/totals'\r\n    ],\r\n    function(Component, totals) {\r\n        'use strict';\r\n        return Component.extend({\r\n            isLoading: totals.isLoading\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/tax.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'ko',\r\n        'Magento_Checkout/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Checkout/js/model/totals'\r\n    ],\r\n    function (ko, Component, quote, totals) {\r\n        \"use strict\";\r\n        var isTaxDisplayedInGrandTotal = window.checkoutConfig.includeTaxInGrandTotal;\r\n        var isFullTaxSummaryDisplayed = window.checkoutConfig.isFullTaxSummaryDisplayed;\r\n        var isZeroTaxDisplayed = window.checkoutConfig.isZeroTaxDisplayed;\r\n        return Component.extend({\r\n            defaults: {\r\n                isTaxDisplayedInGrandTotal: isTaxDisplayedInGrandTotal,\r\n                notCalculatedMessage: 'Not yet calculated',\r\n                template: 'IWD_Opc/summary/tax'\r\n            },\r\n            totals: quote.getTotals(),\r\n            isFullTaxSummaryDisplayed: isFullTaxSummaryDisplayed,\r\n            ifShowValue: function() {\r\n                if (this.isFullMode() && this.getPureValue() == 0) {\r\n                    return isZeroTaxDisplayed;\r\n                }\r\n                return true;\r\n            },\r\n            ifShowDetails: function() {\r\n                if (!this.isFullMode()) {\r\n                    return false;\r\n                }\r\n                return this.getPureValue() > 0 && isFullTaxSummaryDisplayed;\r\n            },\r\n            getPureValue: function() {\r\n                var amount = 0;\r\n                if (this.totals()) {\r\n                    var taxTotal = totals.getSegment('tax');\r\n                    if (taxTotal) {\r\n                        amount = taxTotal.value;\r\n                    }\r\n                }\r\n                return amount;\r\n            },\r\n            isCalculated: function() {\r\n                return this.totals() && this.isFullMode() && null != totals.getSegment('tax');\r\n            },\r\n            getValue: function() {\r\n                if (!this.isCalculated()) {\r\n                    return this.notCalculatedMessage;\r\n                }\r\n                var amount = totals.getSegment('tax').value;\r\n                return this.getFormattedPrice(amount);\r\n            },\r\n            formatPrice: function(amount) {\r\n                return this.getFormattedPrice(amount);\r\n            },\r\n            getDetails: function() {\r\n                var taxSegment = totals.getSegment('tax');\r\n                if (taxSegment && taxSegment.extension_attributes) {\r\n                    return taxSegment.extension_attributes.tax_grandtotal_details;\r\n                }\r\n                return [];\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/additional.js":"define(\r\n    [\r\n        'jquery',\r\n        'ko',\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/quote',\r\n        'IWD_Opc/js/action/set-additional-information',\r\n        'mage/calendar'\r\n    ],\r\n    function ($, ko, Component, quote, setAdditionalInformationAction, calendar) {\r\n        'use strict';\r\n\r\n        var isLoading = ko.observable(false);\r\n        var hsOscComment = ko.observable(null);\r\n        var hsOscDeliveryDate = ko.observable(null);\r\n        var hsOscSurvey = ko.observable(null);\r\n        var hsSurveyOtherAnswer = ko.observable(null);\r\n        var hsOscGiftwrap = ko.observable((quote.getTotals().iwd-opc_giftwrap_amount) ? true : false);\r\n        var canShowSurveyOther = ko.observable(false);\r\n\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/additional'\r\n            },\r\n\r\n            /**\r\n             * Applied flag\r\n             */\r\n            isLoading: isLoading,\r\n            canShowAdditionalInformation: window.checkoutConfig.isEnabledAdditionalInformation,\r\n            canShowComment: window.checkoutConfig.isEnabledOrderComment,\r\n            canShowDeliveryDate: window.checkoutConfig.isEnabledDeliveryDate,\r\n            canShowGiftwrap: window.checkoutConfig.isEnabledGiftwrap,\r\n            giftwrapFee: window.checkoutConfig.giftWrapFee,\r\n            giftwrapFeeFormatted: window.checkoutConfig.giftwrapFeeFormatted,\r\n            canShowSurvey: window.checkoutConfig.isEnabledSurvey,\r\n            surveyQuestion: window.checkoutConfig.surveyQuestion,\r\n            surveyOptions: window.checkoutConfig.surveyOptions,\r\n            hsOscComment: hsOscComment,\r\n            hsOscDeliveryDate: hsOscDeliveryDate,\r\n            hsOscSurvey: hsOscSurvey,\r\n            hsSurveyOtherAnswer: hsSurveyOtherAnswer,\r\n            hsOscGiftwrap: hsOscGiftwrap,\r\n            canShowSurveyOther: canShowSurveyOther,\r\n\r\n            /**\r\n             * Init component\r\n             */\r\n            initialize: function () {\r\n                this._super();\r\n                if(this.canShowDeliveryDate) {\r\n                    $(\"#iwd-opc-delivery-date\").calendar({\r\n                        showsTime: false,\r\n                        dateFormat: \"M/d/yy\",\r\n                        //buttonImage: \"http://localhost/magento2-dev/HS_OneStepCheckout/pub/static/frontend/Magento/luma/en_US/Magento_Theme/calendar.png\",\r\n                        buttonText: \"Select Date\"\r\n                    })\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Coupon form validation\r\n             *\r\n             * @returns {boolean}\r\n             */\r\n            validate: function() {\r\n                var form = '#discount-form';\r\n                return $(form).validation() && $(form).validation('isValid');\r\n            },\r\n\r\n            submitAdditional: function() {\r\n                isLoading(true);\r\n                var surveyAnswer = hsOscSurvey();\r\n                if(surveyAnswer == 'Other') {\r\n                    canShowSurveyOther(true);\r\n                    surveyAnswer = hsSurveyOtherAnswer();\r\n                } else {\r\n                    canShowSurveyOther(false);\r\n                    hsSurveyOtherAnswer(null);\r\n                }\r\n                var data = {\r\n                    additionalInformation: {\r\n                        hs_osc_comment: hsOscComment(),\r\n                        hs_osc_delivery_date: hsOscDeliveryDate(),\r\n                        hs_osc_survey_question: this.surveyQuestion,\r\n                        hs_osc_survey_answer: (surveyAnswer) ? surveyAnswer : null,\r\n                        hs_osc_giftwrap: hsOscGiftwrap()\r\n                    }\r\n                };\r\n                setAdditionalInformationAction(data, isLoading);\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/discount/discount-messages.js":"/**\r\n * Copyright \u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine([\r\n    'Magento_Ui/js/view/messages',\r\n    '../../model/payment/discount-messages'\r\n], function (Component, messageContainer) {\r\n    'use strict';\r\n\r\n    return Component.extend({\r\n\r\n\r\n        initialize: function (config) {\r\n            return this._super(config, messageContainer);\r\n        }\r\n    });\r\n});\r\n","IWD_Opc/js/view/discount/discount.js":"/**\r\n * Copyright \u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'ko',\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/quote',\r\n        'IWD_Opc/js/action/set-coupon-code',\r\n        'IWD_Opc/js/action/cancel-coupon',\r\n        'IWD_Opc/js/iwd/components'\r\n    ],\r\n    function ($, ko, Component, quote, setCouponCodeAction, cancelCouponAction) {\r\n        'use strict';\r\n        var totals = quote.getTotals();\r\n        var couponCode = ko.observable(null);\r\n        if (totals()) {\r\n            couponCode(totals()['coupon_code']);\r\n        }\r\n        var isApplied = ko.observable(couponCode() != null);\r\n        var isLoading = ko.observable(false);\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/payment/discount'\r\n            },\r\n            couponCode: couponCode,\r\n            /**\r\n             * Applied flag\r\n             */\r\n            isApplied: isApplied,\r\n            isLoading: isLoading,\r\n            /**\r\n             * Coupon code application procedure\r\n             */\r\n\r\n            apply: function () {\r\n                if (this.validate()) {\r\n                    isLoading(true);\r\n                    setCouponCodeAction(couponCode(), isApplied, isLoading);\r\n                }\r\n            },\r\n            /**\r\n             * Cancel using coupon\r\n             */\r\n            cancel: function () {\r\n                if (this.validate()) {\r\n                    isLoading(true);\r\n                    couponCode('');\r\n                    cancelCouponAction(isApplied, isLoading);\r\n                }\r\n            },\r\n            /**\r\n             * Coupon form validation\r\n             *\r\n             * @returns {boolean}\r\n             */\r\n            validate: function () {\r\n                var form = '#discount-form';\r\n                return $(form).validation() && $(form).validation('isValid');\r\n            }\r\n\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/shipping.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'IWD_Opc/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote'\r\n    ],\r\n    function ($, Component, quote) {\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/summary/shipping'\r\n            },\r\n            quoteIsVirtual: quote.isVirtual(),\r\n            totals: quote.getTotals(),\r\n            getShippingMethodTitle: function() {\r\n                if (!this.isCalculated()) {\r\n                    return '';\r\n                }\r\n                var shippingMethod = quote.shippingMethod();\r\n                return shippingMethod ? shippingMethod.carrier_title + \" - \" + shippingMethod.method_title : '';\r\n            },\r\n            isCalculated: function() {\r\n                return this.totals() && this.isFullMode() && null != quote.shippingMethod();\r\n            },\r\n            getValue: function() {\r\n                if (!this.isCalculated()) {\r\n                    return this.notCalculatedMessage;\r\n                }\r\n                var price =  this.totals().shipping_amount;\r\n                return this.getFormattedPrice(price);\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/abstract-total.js":"define(\r\n    [\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Catalog/js/price-utils',\r\n        'Magento_Checkout/js/model/totals',\r\n        'Magento_Checkout/js/model/step-navigator'\r\n    ],\r\n    function (Component, quote, priceUtils, totals, stepNavigator) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            getFormattedPrice: function (price) {\r\n                return priceUtils.formatPrice(price, quote.getPriceFormat());\r\n            },\r\n            getTotals: function() {\r\n                return totals.totals();\r\n            },\r\n            isFullMode: function() {\r\n                if (!this.getTotals()) {\r\n                    return false;\r\n                }\r\n                if(window.checkoutConfig.isEnabledOneStepCheckout) {\r\n                    return true;\r\n                }\r\n                return stepNavigator.isProcessed('shipping');\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/grand-total-button.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'Magento_Checkout/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Catalog/js/price-utils',\r\n        'Magento_Checkout/js/model/totals',\r\n        'IWD_Opc/js/iwd/plugins/jquery.nicescroll.min'\r\n    ],\r\n    function ($, Component, quote, riceUtils, totals) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            defaults: {\r\n                isFullTaxSummaryDisplayed: window.checkoutConfig.isFullTaxSummaryDisplayed || false,\r\n                template: 'IWD_Opc/summary/grand-total-button'\r\n            },\r\n            totals: quote.getTotals(),\r\n            //isTaxDisplayedInGrandTotal: window.checkoutConfig.includeTaxInGrandTotal || false,\r\n            isDisplayed: function() {\r\n                return this.isFullMode();\r\n            },\r\n            getValue: function() {\r\n                var price = 0;\r\n                if (this.totals()) {\r\n                    price = totals.getSegment('grand_total').value;\r\n                }\r\n                return this.getFormattedPrice(price);\r\n            },\r\n            getBaseValue: function() {\r\n                var price = 0;\r\n                if (this.totals()) {\r\n                    price = this.totals().base_grand_total;\r\n                }\r\n                return priceUtils.formatPrice(price, quote.getBasePriceFormat());\r\n            },\r\n            getGrandTotalExclTax: function() {\r\n                var totals = this.totals();\r\n                if (!totals) {\r\n                    return 0;\r\n                }\r\n                return this.getFormattedPrice(totals.grand_total);\r\n            },\r\n            isBaseGrandTotalDisplayNeeded: function() {\r\n                var totals = this.totals();\r\n                if (!totals) {\r\n                    return false;\r\n                }\r\n                return totals.base_currency_code != totals.quote_currency_code;\r\n            },\r\n            showDetails:function(){\r\n                $('.iwd-minicart-items-wrapper-two').niceScroll({cursorcolor:\"#e5e5e5\",railpadding: { top: 0, right: 7, left: 0, bottom: 0 }});\r\n                var summary_button = $('.iwd-summary-cart');\r\n                var arrow_button = $('.iwd-arrow-down');\r\n                //var table = $('#opc-sidebar .table-totals, #opc-sidebar .items-in-cart');\r\n                var table = $('.iwd-opc-summary-wrapper');\r\n\r\n                if(table.hasClass('show') && summary_button.hasClass('iwd-summary-cart-arrow') && arrow_button.hasClass('iwd-arrow-down')){\r\n                    table.removeClass('show');\r\n                    summary_button.removeClass('iwd-summary-cart-arrow');\r\n                    arrow_button.removeClass('iwd-arrow-up');\r\n                } else {\r\n                    table.addClass('show');\r\n                    summary_button.addClass('iwd-summary-cart-arrow');\r\n                    arrow_button.addClass('iwd-arrow-up');\r\n                }\r\n            }\r\n        });\r\n    }\r\n);\r\n\r\n","IWD_Opc/js/view/summary/totals.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'Magento_Checkout/js/view/summary/abstract-total'\r\n    ],\r\n    function (Component) {\r\n        'use strict';\r\n\r\n        return Component.extend({\r\n\r\n            /**\r\n             * @return {*}\r\n             */\r\n            isDisplayed: function () {\r\n                return this.isFullMode();\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/discount.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'Magento_Checkout/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote'\r\n    ],\r\n    function (Component, quote) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/summary/discount'\r\n            },\r\n            totals: quote.getTotals(),\r\n            isDisplayed: function() {\r\n                return this.isFullMode() && this.getPureValue() != 0;\r\n            },\r\n            getCouponCode: function() {\r\n                if (!this.totals()) {\r\n                    return null;\r\n                }\r\n                return this.totals()['coupon_code'];\r\n            },\r\n            getPureValue: function() {\r\n                var price = 0;\r\n                if (this.totals() && this.totals().discount_amount) {\r\n                    price = parseFloat(this.totals().discount_amount);\r\n                }\r\n                return price;\r\n            },\r\n            getValue: function() {\r\n                return this.getFormattedPrice(this.getPureValue());\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/giftwrap.js":"define(\r\n    [\r\n        'Magento_Checkout/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote'\r\n    ],\r\n    function (Component, quote) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/summary/giftwrap'\r\n            },\r\n            totals: quote.getTotals(),\r\n            isDisplayed: function() {\r\n                return this.isFullMode() && this.getPureValue() != 0;\r\n            },\r\n            getPureValue: function() {\r\n                var price = 0;\r\n                if (this.totals().total_segments) {\r\n                    var totals = this.totals().total_segments;\r\n                    for(var key in totals) {\r\n                        if(totals[key].code == 'iwd-opc_giftwrap') {\r\n                            price = parseFloat(totals[key].value);\r\n                        }\r\n                    }\r\n                }\r\n                return price;\r\n            },\r\n            getValue: function() {\r\n                return this.getFormattedPrice(this.getPureValue());\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/cart-items.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*browser:true*/\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'jquery',\r\n        'ko',\r\n        'Magento_Checkout/js/model/totals',\r\n        'uiComponent',\r\n        'Magento_Checkout/js/model/step-navigator',\r\n        'Magento_Checkout/js/model/quote'\r\n    ],\r\n    function ($, ko, totals, Component, stepNavigator, quote) {\r\n        'use strict';\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/summary/cart-items'\r\n            },\r\n            totals: totals.totals(),\r\n            getItems: totals.getItems(),\r\n            getItemsQty: function() {\r\n\r\n               return parseFloat(this.totals.items_qty);\r\n            },\r\n            isItemsBlockExpanded: function () {\r\n                return quote.isVirtual() || stepNavigator.isProcessed('shipping');\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/subtotal.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'IWD_Opc/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote'\r\n    ],\r\n    function (Component, quote) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/summary/subtotal'\r\n            },\r\n            getPureValue: function() {\r\n                var totals = quote.getTotals()();\r\n                if (totals) {\r\n                    return totals.subtotal;\r\n                }\r\n                return quote.subtotal;\r\n            },\r\n            getValue: function () {\r\n                return this.getFormattedPrice(this.getPureValue());\r\n            }\r\n\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/grand-total.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine(\r\n    [\r\n        'IWD_Opc/js/view/summary/abstract-total',\r\n        'Magento_Checkout/js/model/quote',\r\n        'Magento_Catalog/js/price-utils',\r\n        'Magento_Checkout/js/model/totals'\r\n    ],\r\n    function (Component, quote, priceUtils, totals) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            defaults: {\r\n                isFullTaxSummaryDisplayed: window.checkoutConfig.isFullTaxSummaryDisplayed || false,\r\n                template: 'IWD_Opc/summary/grand-total'\r\n            },\r\n            totals: quote.getTotals(),\r\n            isTaxDisplayedInGrandTotal: window.checkoutConfig.includeTaxInGrandTotal || false,\r\n            isDisplayed: function() {\r\n                return this.isFullMode();\r\n            },\r\n            getPureValue: function() {\r\n                var totals = quote.getTotals()();\r\n                if (totals) {\r\n                    return totals.grand_total;\r\n                }\r\n                return quote.grand_total;\r\n            },\r\n            getValue: function() {\r\n                return this.getFormattedPrice(this.getPureValue());\r\n            },\r\n            getBaseValue: function() {\r\n                var price = 0;\r\n                if (this.totals()) {\r\n                    price = this.totals().base_grand_total;\r\n                }\r\n                return priceUtils.formatPrice(price, quote.getBasePriceFormat());\r\n            },\r\n            getGrandTotalExclTax: function() {\r\n                var totals = this.totals();\r\n                if (!totals) {\r\n                    return 0;\r\n                }\r\n                return this.getFormattedPrice(totals.grand_total);\r\n            },\r\n            isBaseGrandTotalDisplayNeeded: function() {\r\n                var totals = this.totals();\r\n                if (!totals) {\r\n                    return false;\r\n                }\r\n                return totals.base_currency_code != totals.quote_currency_code;\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/item/details.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'uiComponent'\r\n    ],\r\n    function (Component) {\r\n        \"use strict\";\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'IWD_Opc/summary/item/details'\r\n            },\r\n            getValue: function(quoteItem) {\r\n                return quoteItem.name;\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/item/details/thumbnail.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'uiComponent'\r\n    ],\r\n    function (Component) {\r\n        \"use strict\";\r\n        var imageData = window.checkoutConfig.imageData;\r\n        return Component.extend({\r\n            defaults: {\r\n                template: 'Magento_Checkout/summary/item/details/thumbnail'\r\n            },\r\n            displayArea: 'before_details',\r\n            imageData: imageData,\r\n            getImageItem: function(item) {\r\n                if (this.imageData[item.item_id]) {\r\n                    return this.imageData[item.item_id];\r\n                }\r\n                return [];\r\n            },\r\n            getSrc: function(item) {\r\n                if (this.imageData[item.item_id]) {\r\n                    return this.imageData[item.item_id]['src'];\r\n                }\r\n                return null;\r\n            },\r\n            getWidth: function(item) {\r\n                if (this.imageData[item.item_id]) {\r\n                    return this.imageData[item.item_id]['width'];\r\n                }\r\n                return null;\r\n            },\r\n            getHeight: function(item) {\r\n                if (this.imageData[item.item_id]) {\r\n                    return this.imageData[item.item_id]['height'];\r\n                }\r\n                return null;\r\n            },\r\n            getAlt: function(item) {\r\n                if (this.imageData[item.item_id]) {\r\n                    return this.imageData[item.item_id]['alt'];\r\n                }\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/summary/item/details/subtotal.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*jshint browser:true jquery:true*/\r\n/*global alert*/\r\ndefine(\r\n    [\r\n        'Magento_Checkout/js/view/summary/abstract-total'\r\n    ],\r\n    function (viewModel) {\r\n        \"use strict\";\r\n        return viewModel.extend({\r\n            defaults: {\r\n                displayArea: 'after_details',\r\n                template: 'IWD_Opc/summary/item/details/subtotal'\r\n            },\r\n            getValue: function(quoteItem) {\r\n                return this.getFormattedPrice(quoteItem.row_total);\r\n            }\r\n        });\r\n    }\r\n);\r\n","IWD_Opc/js/view/shipping-address/list.js":"define([\r\n    'underscore',\r\n    'ko',\r\n    'mageUtils',\r\n    'uiComponent',\r\n    'uiLayout',\r\n    'Magento_Customer/js/model/address-list'\r\n], function (_, ko, utils, Component, layout, addressList) {\r\n    'use strict';\r\n    var defaultRendererTemplate = {\r\n        parent: '${ $.$data.parentName }',\r\n        name: '${ $.$data.name }',\r\n        component: 'IWD_Opc/js/view/shipping-address/address-renderer/default'\r\n    };\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'IWD_Opc/shipping-address/list',\r\n            visible: addressList().length > 0,\r\n            rendererTemplates: []\r\n        },\r\n\r\n        initialize: function () {\r\n            this._super()\r\n                .initChildren();\r\n\r\n            addressList.subscribe(\r\n                function(changes) {\r\n                    var self = this;\r\n                    changes.forEach(function(change) {\r\n                        if (change.status === 'added') {\r\n                            self.createRendererComponent(change.value, change.index);\r\n                        }\r\n                    });\r\n                },\r\n                this,\r\n                'arrayChange'\r\n            );\r\n            return this;\r\n        },\r\n\r\n        initConfig: function () {\r\n            this._super();\r\n            // the list of child components that are responsible for address rendering\r\n            this.rendererComponents = [];\r\n            return this;\r\n        },\r\n\r\n        initChildren: function () {\r\n            _.each(addressList(), this.createRendererComponent, this);\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Create new component that will render given address in the address list\r\n         *\r\n         * @param address\r\n         * @param index\r\n         */\r\n        createRendererComponent: function (address, index) {\r\n            if (index in this.rendererComponents) {\r\n                this.rendererComponents[index].address(address);\r\n            } else {\r\n                // rendererTemplates are provided via layout\r\n                var rendererTemplate = (address.getType() != undefined && this.rendererTemplates[address.getType()] != undefined)\r\n                    ? utils.extend({}, defaultRendererTemplate, this.rendererTemplates[address.getType()])\r\n                    : defaultRendererTemplate;\r\n                var templateData = {\r\n                    parentName: this.name,\r\n                    name: index\r\n                };\r\n                var rendererComponent = utils.template(rendererTemplate, templateData);\r\n                utils.extend(rendererComponent, {address: ko.observable(address)});\r\n                layout([rendererComponent]);\r\n                this.rendererComponents[index] = rendererComponent;\r\n            }\r\n        }\r\n    });\r\n});\r\n","IWD_Opc/js/view/shipping-address/address-renderer/default.js":"/**\r\n * Copyright \u00c2\u00a9 2015 Magento. All rights reserved.\r\n * See COPYING.txt for license details.\r\n */\r\n/*global define*/\r\ndefine([\r\n    'jquery',\r\n    'ko',\r\n    'uiComponent',\r\n    'Magento_Checkout/js/action/select-shipping-address',\r\n    'Magento_Checkout/js/model/quote',\r\n    'Magento_Checkout/js/model/shipping-address/form-popup-state',\r\n    'Magento_Checkout/js/checkout-data',\r\n    'Magento_Customer/js/customer-data'\r\n], function($, ko, Component, selectShippingAddressAction, quote, formPopUpState, checkoutData, customerData) {\r\n    'use strict';\r\n    var countryData = customerData.get('directory-data');\r\n\r\n    return Component.extend({\r\n        defaults: {\r\n            template: 'IWD_Opc/shipping-address/address-renderer/default'\r\n        },\r\n\r\n        initObservable: function () {\r\n            this._super();\r\n            this.isSelected = ko.computed(function() {\r\n                var isSelected = false;\r\n                var shippingAddress = quote.shippingAddress();\r\n                if (shippingAddress) {\r\n                    isSelected = shippingAddress.getKey() == this.address().getKey();\r\n                }\r\n                return isSelected;\r\n            }, this);\r\n\r\n            return this;\r\n        },\r\n\r\n        getCountryName: function(countryId) {\r\n            return (countryData()[countryId] != undefined) ? countryData()[countryId].name : \"\";\r\n        },\r\n\r\n        /** Set selected customer shipping address  */\r\n        selectAddress: function() {\r\n            selectShippingAddressAction(this.address());\r\n            checkoutData.setSelectedShippingAddress(this.address().getKey());\r\n        },\r\n\r\n        editAddress: function() {\r\n            formPopUpState.isVisible(true);\r\n            this.showPopup();\r\n\r\n        },\r\n        showPopup: function() {\r\n            $('[data-open-modal=\"opc-new-shipping-address\"]').trigger('click');\r\n        }\r\n    });\r\n});\r\n","matchMedia.js":"/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas, David Knight. Dual MIT/BSD license */\n\nwindow.matchMedia || (window.matchMedia = function() {\n    \"use strict\";\n\n    // For browsers that support matchMedium api such as IE 9 and webkit\n    var styleMedia = (window.styleMedia || window.media);\n\n    // For those that don't support matchMedium\n    if (!styleMedia) {\n        var style = document.createElement('style'),\n            script = document.getElementsByTagName('script')[0],\n            info = null;\n\n        style.type = 'text/css';\n        style.id = 'matchmediajs-test';\n\n        script.parentNode.insertBefore(style, script);\n\n        // 'style.currentStyle' is used by IE <= 8 and 'window.getComputedStyle' for all other browsers\n        info = ('getComputedStyle' in window) && window.getComputedStyle(style, null) || style.currentStyle;\n\n        styleMedia = {\n            matchMedium: function(media) {\n                var text = '@media ' + media + '{ #matchmediajs-test { width: 1px; } }';\n\n                // 'style.styleSheet' is used by IE <= 8 and 'style.textContent' for all other browsers\n                if (style.styleSheet) {\n                    style.styleSheet.cssText = text;\n                } else {\n                    style.textContent = text;\n                }\n\n                // Test if media query is true or false\n                return info.width === '1px';\n            }\n        };\n    }\n\n    return function(media) {\n        return {\n            matches: styleMedia.matchMedium(media || 'all'),\n            media: media || 'all'\n        };\n    };\n}());\n\n/*! matchMedia() polyfill addListener/removeListener extension. Author & copyright (c) 2012: Scott Jehl. Dual MIT/BSD license */\n(function() {\n    // Bail out for browsers that have addListener support\n    if (window.matchMedia && window.matchMedia('all').addListener) {\n        return false;\n    }\n\n    var localMatchMedia = window.matchMedia,\n        hasMediaQueries = localMatchMedia('only all').matches,\n        isListening = false,\n        timeoutID = 0, // setTimeout for debouncing 'handleChange'\n        queries = [], // Contains each 'mql' and associated 'listeners' if 'addListener' is used\n        handleChange = function(evt) {\n            // Debounce\n            clearTimeout(timeoutID);\n\n            timeoutID = setTimeout(function() {\n                for (var i = 0, il = queries.length; i < il; i++) {\n                    var mql = queries[i].mql,\n                        listeners = queries[i].listeners || [],\n                        matches = localMatchMedia(mql.media).matches;\n\n                    // Update mql.matches value and call listeners\n                    // Fire listeners only if transitioning to or from matched state\n                    if (matches !== mql.matches) {\n                        mql.matches = matches;\n\n                        for (var j = 0, jl = listeners.length; j < jl; j++) {\n                            listeners[j].call(window, mql);\n                        }\n                    }\n                }\n            }, 30);\n        };\n\n    window.matchMedia = function(media) {\n        var mql = localMatchMedia(media),\n            listeners = [],\n            index = 0;\n\n        mql.addListener = function(listener) {\n            // Changes would not occur to css media type so return now (Affects IE <= 8)\n            if (!hasMediaQueries) {\n                return;\n            }\n\n            // Set up 'resize' listener for browsers that support CSS3 media queries (Not for IE <= 8)\n            // There should only ever be 1 resize listener running for performance\n            if (!isListening) {\n                isListening = true;\n                window.addEventListener('resize', handleChange, true);\n            }\n\n            // Push object only if it has not been pushed already\n            if (index === 0) {\n                index = queries.push({\n                    mql: mql,\n                    listeners: listeners\n                });\n            }\n\n            listeners.push(listener);\n        };\n\n        mql.removeListener = function(listener) {\n            for (var i = 0, il = listeners.length; i < il; i++) {\n                if (listeners[i] === listener) {\n                    listeners.splice(i, 1);\n                }\n            }\n        };\n\n        return mql;\n    };\n}());\n\nwindow.mediaCheck = function(options) {\n    var mq;\n\n    function mqChange(mq, options) {\n        if (mq.matches) {\n            if (typeof options.entry === \"function\") {\n                options.entry();\n            }\n        } else if (typeof options.exit === \"function\") {\n            options.exit();\n        }\n    };\n\n    mq = window.matchMedia(options.media);\n\n    mq.addListener(function() {\n        mqChange(mq, options);\n    });\n\n    mqChange(mq, options);\n};","MutationObserver.js":"/**\n * @license\n * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n(function(global) {\n\n  var registrationsTable = new WeakMap();\n\n  var setImmediate;\n\n  // As much as we would like to use the native implementation, IE\n  // (all versions) suffers a rather annoying bug where it will drop or defer\n  // callbacks when heavy DOM operations are being performed concurrently.\n  //\n  // For a thorough discussion on this, see:\n  // http://codeforhire.com/2013/09/21/setimmediate-and-messagechannel-broken-on-internet-explorer-10/\n  if (/Trident|Edge/.test(navigator.userAgent)) {\n    // Sadly, this bug also affects postMessage and MessageQueues.\n    //\n    // We would like to use the onreadystatechange hack for IE <= 10, but it is\n    // dangerous in the polyfilled environment due to requiring that the\n    // observed script element be in the document.\n    setImmediate = setTimeout;\n\n  // If some other browser ever implements it, let's prefer their native\n  // implementation:\n  } else if (window.setImmediate) {\n    setImmediate = window.setImmediate;\n\n  // Otherwise, we fall back to postMessage as a means of emulating the next\n  // task semantics of setImmediate.\n  } else {\n    var setImmediateQueue = [];\n    var sentinel = String(Math.random());\n    window.addEventListener('message', function(e) {\n      if (e.data === sentinel) {\n        var queue = setImmediateQueue;\n        setImmediateQueue = [];\n        queue.forEach(function(func) {\n          func();\n        });\n      }\n    });\n    setImmediate = function(func) {\n      setImmediateQueue.push(func);\n      window.postMessage(sentinel, '*');\n    };\n  }\n\n  // This is used to ensure that we never schedule 2 callas to setImmediate\n  var isScheduled = false;\n\n  // Keep track of observers that needs to be notified next time.\n  var scheduledObservers = [];\n\n  /**\n   * Schedules |dispatchCallback| to be called in the future.\n   * @param {MutationObserver} observer\n   */\n  function scheduleCallback(observer) {\n    scheduledObservers.push(observer);\n    if (!isScheduled) {\n      isScheduled = true;\n      setImmediate(dispatchCallbacks);\n    }\n  }\n\n  function wrapIfNeeded(node) {\n    return window.ShadowDOMPolyfill &&\n        window.ShadowDOMPolyfill.wrapIfNeeded(node) ||\n        node;\n  }\n\n  function dispatchCallbacks() {\n    // http://dom.spec.whatwg.org/#mutation-observers\n\n    isScheduled = false; // Used to allow a new setImmediate call above.\n\n    var observers = scheduledObservers;\n    scheduledObservers = [];\n    // Sort observers based on their creation UID (incremental).\n    observers.sort(function(o1, o2) {\n      return o1.uid_ - o2.uid_;\n    });\n\n    var anyNonEmpty = false;\n    observers.forEach(function(observer) {\n\n      // 2.1, 2.2\n      var queue = observer.takeRecords();\n      // 2.3. Remove all transient registered observers whose observer is mo.\n      removeTransientObserversFor(observer);\n\n      // 2.4\n      if (queue.length) {\n        observer.callback_(queue, observer);\n        anyNonEmpty = true;\n      }\n    });\n\n    // 3.\n    if (anyNonEmpty)\n      dispatchCallbacks();\n  }\n\n  function removeTransientObserversFor(observer) {\n    observer.nodes_.forEach(function(node) {\n      var registrations = registrationsTable.get(node);\n      if (!registrations)\n        return;\n      registrations.forEach(function(registration) {\n        if (registration.observer === observer)\n          registration.removeTransientObservers();\n      });\n    });\n  }\n\n  /**\n   * This function is used for the \"For each registered observer observer (with\n   * observer's options as options) in target's list of registered observers,\n   * run these substeps:\" and the \"For each ancestor ancestor of target, and for\n   * each registered observer observer (with options options) in ancestor's list\n   * of registered observers, run these substeps:\" part of the algorithms. The\n   * |options.subtree| is checked to ensure that the callback is called\n   * correctly.\n   *\n   * @param {Node} target\n   * @param {function(MutationObserverInit):MutationRecord} callback\n   */\n  function forEachAncestorAndObserverEnqueueRecord(target, callback) {\n    for (var node = target; node; node = node.parentNode) {\n      var registrations = registrationsTable.get(node);\n\n      if (registrations) {\n        for (var j = 0; j < registrations.length; j++) {\n          var registration = registrations[j];\n          var options = registration.options;\n\n          // Only target ignores subtree.\n          if (node !== target && !options.subtree)\n            continue;\n\n          var record = callback(options);\n          if (record)\n            registration.enqueue(record);\n        }\n      }\n    }\n  }\n\n  var uidCounter = 0;\n\n  /**\n   * The class that maps to the DOM MutationObserver interface.\n   * @param {Function} callback.\n   * @constructor\n   */\n  function JsMutationObserver(callback) {\n    this.callback_ = callback;\n    this.nodes_ = [];\n    this.records_ = [];\n    this.uid_ = ++uidCounter;\n  }\n\n  JsMutationObserver.prototype = {\n    observe: function(target, options) {\n      target = wrapIfNeeded(target);\n\n      // 1.1\n      if (!options.childList && !options.attributes && !options.characterData ||\n\n          // 1.2\n          options.attributeOldValue && !options.attributes ||\n\n          // 1.3\n          options.attributeFilter && options.attributeFilter.length &&\n              !options.attributes ||\n\n          // 1.4\n          options.characterDataOldValue && !options.characterData) {\n\n        throw new SyntaxError();\n      }\n\n      var registrations = registrationsTable.get(target);\n      if (!registrations)\n        registrationsTable.set(target, registrations = []);\n\n      // 2\n      // If target's list of registered observers already includes a registered\n      // observer associated with the context object, replace that registered\n      // observer's options with options.\n      var registration;\n      for (var i = 0; i < registrations.length; i++) {\n        if (registrations[i].observer === this) {\n          registration = registrations[i];\n          registration.removeListeners();\n          registration.options = options;\n          break;\n        }\n      }\n\n      // 3.\n      // Otherwise, add a new registered observer to target's list of registered\n      // observers with the context object as the observer and options as the\n      // options, and add target to context object's list of nodes on which it\n      // is registered.\n      if (!registration) {\n        registration = new Registration(this, target, options);\n        registrations.push(registration);\n        this.nodes_.push(target);\n      }\n\n      registration.addListeners();\n    },\n\n    disconnect: function() {\n      this.nodes_.forEach(function(node) {\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          var registration = registrations[i];\n          if (registration.observer === this) {\n            registration.removeListeners();\n            registrations.splice(i, 1);\n            // Each node can only have one registered observer associated with\n            // this observer.\n            break;\n          }\n        }\n      }, this);\n      this.records_ = [];\n    },\n\n    takeRecords: function() {\n      var copyOfRecords = this.records_;\n      this.records_ = [];\n      return copyOfRecords;\n    }\n  };\n\n  /**\n   * @param {string} type\n   * @param {Node} target\n   * @constructor\n   */\n  function MutationRecord(type, target) {\n    this.type = type;\n    this.target = target;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.previousSibling = null;\n    this.nextSibling = null;\n    this.attributeName = null;\n    this.attributeNamespace = null;\n    this.oldValue = null;\n  }\n\n  function copyMutationRecord(original) {\n    var record = new MutationRecord(original.type, original.target);\n    record.addedNodes = original.addedNodes.slice();\n    record.removedNodes = original.removedNodes.slice();\n    record.previousSibling = original.previousSibling;\n    record.nextSibling = original.nextSibling;\n    record.attributeName = original.attributeName;\n    record.attributeNamespace = original.attributeNamespace;\n    record.oldValue = original.oldValue;\n    return record;\n  };\n\n  // We keep track of the two (possibly one) records used in a single mutation.\n  var currentRecord, recordWithOldValue;\n\n  /**\n   * Creates a record without |oldValue| and caches it as |currentRecord| for\n   * later use.\n   * @param {string} oldValue\n   * @return {MutationRecord}\n   */\n  function getRecord(type, target) {\n    return currentRecord = new MutationRecord(type, target);\n  }\n\n  /**\n   * Gets or creates a record with |oldValue| based in the |currentRecord|\n   * @param {string} oldValue\n   * @return {MutationRecord}\n   */\n  function getRecordWithOldValue(oldValue) {\n    if (recordWithOldValue)\n      return recordWithOldValue;\n    recordWithOldValue = copyMutationRecord(currentRecord);\n    recordWithOldValue.oldValue = oldValue;\n    return recordWithOldValue;\n  }\n\n  function clearRecords() {\n    currentRecord = recordWithOldValue = undefined;\n  }\n\n  /**\n   * @param {MutationRecord} record\n   * @return {boolean} Whether the record represents a record from the current\n   * mutation event.\n   */\n  function recordRepresentsCurrentMutation(record) {\n    return record === recordWithOldValue || record === currentRecord;\n  }\n\n  /**\n   * Selects which record, if any, to replace the last record in the queue.\n   * This returns |null| if no record should be replaced.\n   *\n   * @param {MutationRecord} lastRecord\n   * @param {MutationRecord} newRecord\n   * @param {MutationRecord}\n   */\n  function selectRecord(lastRecord, newRecord) {\n    if (lastRecord === newRecord)\n      return lastRecord;\n\n    // Check if the the record we are adding represents the same record. If\n    // so, we keep the one with the oldValue in it.\n    if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord))\n      return recordWithOldValue;\n\n    return null;\n  }\n\n  /**\n   * Class used to represent a registered observer.\n   * @param {MutationObserver} observer\n   * @param {Node} target\n   * @param {MutationObserverInit} options\n   * @constructor\n   */\n  function Registration(observer, target, options) {\n    this.observer = observer;\n    this.target = target;\n    this.options = options;\n    this.transientObservedNodes = [];\n  }\n\n  Registration.prototype = {\n    enqueue: function(record) {\n      var records = this.observer.records_;\n      var length = records.length;\n\n      // There are cases where we replace the last record with the new record.\n      // For example if the record represents the same mutation we need to use\n      // the one with the oldValue. If we get same record (this can happen as we\n      // walk up the tree) we ignore the new record.\n      if (records.length > 0) {\n        var lastRecord = records[length - 1];\n        var recordToReplaceLast = selectRecord(lastRecord, record);\n        if (recordToReplaceLast) {\n          records[length - 1] = recordToReplaceLast;\n          return;\n        }\n      } else {\n        scheduleCallback(this.observer);\n      }\n\n      records[length] = record;\n    },\n\n    addListeners: function() {\n      this.addListeners_(this.target);\n    },\n\n    addListeners_: function(node) {\n      var options = this.options;\n      if (options.attributes)\n        node.addEventListener('DOMAttrModified', this, true);\n\n      if (options.characterData)\n        node.addEventListener('DOMCharacterDataModified', this, true);\n\n      if (options.childList)\n        node.addEventListener('DOMNodeInserted', this, true);\n\n      if (options.childList || options.subtree)\n        node.addEventListener('DOMNodeRemoved', this, true);\n    },\n\n    removeListeners: function() {\n      this.removeListeners_(this.target);\n    },\n\n    removeListeners_: function(node) {\n      var options = this.options;\n      if (options.attributes)\n        node.removeEventListener('DOMAttrModified', this, true);\n\n      if (options.characterData)\n        node.removeEventListener('DOMCharacterDataModified', this, true);\n\n      if (options.childList)\n        node.removeEventListener('DOMNodeInserted', this, true);\n\n      if (options.childList || options.subtree)\n        node.removeEventListener('DOMNodeRemoved', this, true);\n    },\n\n    /**\n     * Adds a transient observer on node. The transient observer gets removed\n     * next time we deliver the change records.\n     * @param {Node} node\n     */\n    addTransientObserver: function(node) {\n      // Don't add transient observers on the target itself. We already have all\n      // the required listeners set up on the target.\n      if (node === this.target)\n        return;\n\n      this.addListeners_(node);\n      this.transientObservedNodes.push(node);\n      var registrations = registrationsTable.get(node);\n      if (!registrations)\n        registrationsTable.set(node, registrations = []);\n\n      // We know that registrations does not contain this because we already\n      // checked if node === this.target.\n      registrations.push(this);\n    },\n\n    removeTransientObservers: function() {\n      var transientObservedNodes = this.transientObservedNodes;\n      this.transientObservedNodes = [];\n\n      transientObservedNodes.forEach(function(node) {\n        // Transient observers are never added to the target.\n        this.removeListeners_(node);\n\n        var registrations = registrationsTable.get(node);\n        for (var i = 0; i < registrations.length; i++) {\n          if (registrations[i] === this) {\n            registrations.splice(i, 1);\n            // Each node can only have one registered observer associated with\n            // this observer.\n            break;\n          }\n        }\n      }, this);\n    },\n\n    handleEvent: function(e) {\n      // Stop propagation since we are managing the propagation manually.\n      // This means that other mutation events on the page will not work\n      // correctly but that is by design.\n      e.stopImmediatePropagation();\n\n      switch (e.type) {\n        case 'DOMAttrModified':\n          // http://dom.spec.whatwg.org/#concept-mo-queue-attributes\n\n          var name = e.attrName;\n          var namespace = e.relatedNode.namespaceURI;\n          var target = e.target;\n\n          // 1.\n          var record = new getRecord('attributes', target);\n          record.attributeName = name;\n          record.attributeNamespace = namespace;\n\n          // 2.\n          var oldValue =\n              e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\n\n          forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n            // 3.1, 4.2\n            if (!options.attributes)\n              return;\n\n            // 3.2, 4.3\n            if (options.attributeFilter && options.attributeFilter.length &&\n                options.attributeFilter.indexOf(name) === -1 &&\n                options.attributeFilter.indexOf(namespace) === -1) {\n              return;\n            }\n            // 3.3, 4.4\n            if (options.attributeOldValue)\n              return getRecordWithOldValue(oldValue);\n\n            // 3.4, 4.5\n            return record;\n          });\n\n          break;\n\n        case 'DOMCharacterDataModified':\n          // http://dom.spec.whatwg.org/#concept-mo-queue-characterdata\n          var target = e.target;\n\n          // 1.\n          var record = getRecord('characterData', target);\n\n          // 2.\n          var oldValue = e.prevValue;\n\n\n          forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n            // 3.1, 4.2\n            if (!options.characterData)\n              return;\n\n            // 3.2, 4.3\n            if (options.characterDataOldValue)\n              return getRecordWithOldValue(oldValue);\n\n            // 3.3, 4.4\n            return record;\n          });\n\n          break;\n\n        case 'DOMNodeRemoved':\n          this.addTransientObserver(e.target);\n          // Fall through.\n        case 'DOMNodeInserted':\n          // http://dom.spec.whatwg.org/#concept-mo-queue-childlist\n          var changedNode = e.target;\n          var addedNodes, removedNodes;\n          if (e.type === 'DOMNodeInserted') {\n            addedNodes = [changedNode];\n            removedNodes = [];\n          } else {\n\n            addedNodes = [];\n            removedNodes = [changedNode];\n          }\n          var previousSibling = changedNode.previousSibling;\n          var nextSibling = changedNode.nextSibling;\n\n          // 1.\n          var record = getRecord('childList', e.target.parentNode);\n          record.addedNodes = addedNodes;\n          record.removedNodes = removedNodes;\n          record.previousSibling = previousSibling;\n          record.nextSibling = nextSibling;\n\n          forEachAncestorAndObserverEnqueueRecord(e.relatedNode, function(options) {\n            // 2.1, 3.2\n            if (!options.childList)\n              return;\n\n            // 2.2, 3.3\n            return record;\n          });\n\n      }\n\n      clearRecords();\n    }\n  };\n\n  global.JsMutationObserver = JsMutationObserver;\n\n  if (!global.MutationObserver)\n    global.MutationObserver = JsMutationObserver;\n\n\n})(this);","es6-collections.js":"(function (exports) {'use strict';\n  //shared pointer\n  var i;\n  //shortcuts\n  var defineProperty = Object.defineProperty, is = function(a,b) { return isNaN(a)? isNaN(b): a === b; };\n\n\n  //Polyfill global objects\n  if (typeof WeakMap == 'undefined') {\n    exports.WeakMap = createCollection({\n      // WeakMap#delete(key:void*):boolean\n      'delete': sharedDelete,\n      // WeakMap#clear():\n      clear: sharedClear,\n      // WeakMap#get(key:void*):void*\n      get: sharedGet,\n      // WeakMap#has(key:void*):boolean\n      has: mapHas,\n      // WeakMap#set(key:void*, value:void*):void\n      set: sharedSet\n    }, true);\n  }\n\n  if (typeof Map == 'undefined' || typeof ((new Map).values) !== 'function' || !(new Map).values().next) {\n    exports.Map = createCollection({\n      // WeakMap#delete(key:void*):boolean\n      'delete': sharedDelete,\n      //:was Map#get(key:void*[, d3fault:void*]):void*\n      // Map#has(key:void*):boolean\n      has: mapHas,\n      // Map#get(key:void*):boolean\n      get: sharedGet,\n      // Map#set(key:void*, value:void*):void\n      set: sharedSet,\n      // Map#keys(void):Iterator\n      keys: sharedKeys,\n      // Map#values(void):Iterator\n      values: sharedValues,\n      // Map#entries(void):Iterator\n      entries: mapEntries,\n      // Map#forEach(callback:Function, context:void*):void ==> callback.call(context, key, value, mapObject) === not in specs`\n      forEach: sharedForEach,\n      // Map#clear():\n      clear: sharedClear\n    });\n  }\n\n  if (typeof Set == 'undefined' || typeof ((new Set).values) !== 'function' || !(new Set).values().next) {\n    exports.Set = createCollection({\n      // Set#has(value:void*):boolean\n      has: setHas,\n      // Set#add(value:void*):boolean\n      add: sharedAdd,\n      // Set#delete(key:void*):boolean\n      'delete': sharedDelete,\n      // Set#clear():\n      clear: sharedClear,\n      // Set#keys(void):Iterator\n      keys: sharedValues, // specs actually say \"the same function object as the initial value of the values property\"\n      // Set#values(void):Iterator\n      values: sharedValues,\n      // Set#entries(void):Iterator\n      entries: setEntries,\n      // Set#forEach(callback:Function, context:void*):void ==> callback.call(context, value, index) === not in specs\n      forEach: sharedForEach\n    });\n  }\n\n  if (typeof WeakSet == 'undefined') {\n    exports.WeakSet = createCollection({\n      // WeakSet#delete(key:void*):boolean\n      'delete': sharedDelete,\n      // WeakSet#add(value:void*):boolean\n      add: sharedAdd,\n      // WeakSet#clear():\n      clear: sharedClear,\n      // WeakSet#has(value:void*):boolean\n      has: setHas\n    }, true);\n  }\n\n\n  /**\n   * ES6 collection constructor\n   * @return {Function} a collection class\n   */\n  function createCollection(proto, objectOnly){\n    function Collection(a){\n      if (!this || this.constructor !== Collection) return new Collection(a);\n      this._keys = [];\n      this._values = [];\n      this._itp = []; // iteration pointers\n      this.objectOnly = objectOnly;\n\n      //parse initial iterable argument passed\n      if (a) init.call(this, a);\n    }\n\n    //define size for non object-only collections\n    if (!objectOnly) {\n      defineProperty(proto, 'size', {\n        get: sharedSize\n      });\n    }\n\n    //set prototype\n    proto.constructor = Collection;\n    Collection.prototype = proto;\n\n    return Collection;\n  }\n\n\n  /** parse initial iterable argument passed */\n  function init(a){\n    var i;\n    //init Set argument, like `[1,2,3,{}]`\n    if (this.add)\n      a.forEach(this.add, this);\n    //init Map argument like `[[1,2], [{}, 4]]`\n    else\n      a.forEach(function(a){this.set(a[0],a[1])}, this);\n  }\n\n\n  /** delete */\n  function sharedDelete(key) {\n    if (this.has(key)) {\n      this._keys.splice(i, 1);\n      this._values.splice(i, 1);\n      // update iteration pointers\n      this._itp.forEach(function(p) { if (i < p[0]) p[0]--; });\n    }\n    // Aurora here does it while Canary doesn't\n    return -1 < i;\n  };\n\n  function sharedGet(key) {\n    return this.has(key) ? this._values[i] : undefined;\n  }\n\n  function has(list, key) {\n    if (this.objectOnly && key !== Object(key))\n      throw new TypeError(\"Invalid value used as weak collection key\");\n    //NaN or 0 passed\n    if (key != key || key === 0) for (i = list.length; i-- && !is(list[i], key);){}\n    else i = list.indexOf(key);\n    return -1 < i;\n  }\n\n  function setHas(value) {\n    return has.call(this, this._values, value);\n  }\n\n  function mapHas(value) {\n    return has.call(this, this._keys, value);\n  }\n\n  /** @chainable */\n  function sharedSet(key, value) {\n    this.has(key) ?\n      this._values[i] = value\n      :\n      this._values[this._keys.push(key) - 1] = value\n    ;\n    return this;\n  }\n\n  /** @chainable */\n  function sharedAdd(value) {\n    if (!this.has(value)) this._values.push(value);\n    return this;\n  }\n\n  function sharedClear() {\n    this._values.length = 0;\n  }\n\n  /** keys, values, and iterate related methods */\n  function sharedKeys() {\n    return sharedIterator(this._itp, this._keys);\n  }\n\n  function sharedValues() {\n    return sharedIterator(this._itp, this._values);\n  }\n\n  function mapEntries() {\n    return sharedIterator(this._itp, this._keys, this._values);\n  }\n\n  function setEntries() {\n    return sharedIterator(this._itp, this._values, this._values);\n  }\n\n  function sharedIterator(itp, array, array2) {\n    var p = [0], done = false;\n    itp.push(p);\n    return {\n      next: function() {\n        var v, k = p[0];\n        if (!done && k < array.length) {\n          v = array2 ? [array[k], array2[k]]: array[k];\n          p[0]++;\n        } else {\n          done = true;\n          itp.splice(itp.indexOf(p), 1);\n        }\n        return { done: done, value: v };\n      }\n    };\n  }\n\n  function sharedSize() {\n    return this._values.length;\n  }\n\n  function sharedForEach(callback, context) {\n    var it = this.entries();\n    for (;;) {\n      var r = it.next();\n      if (r.done) break;\n      callback.call(context, r.value[1], r.value[0], this);\n    }\n  }\n\n})(typeof exports != 'undefined' && typeof global != 'undefined' ? global : window );","moment.js":"//! moment.js\n//! version : 2.8.1\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error(\"Implement me\")}}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(a){rb.suppressDeprecationWarnings===!1&&\"undefined\"!=typeof console&&console.warn&&console.warn(\"Deprecation warning: \"+a)}function e(a,b){var c=!0;return l(function(){return c&&(d(a),c=!1),b.apply(this,arguments)},b)}function f(a,b){nc[a]||(d(b),nc[a]=!0)}function g(a,b){return function(c){return o(a.call(this,c),b)}}function h(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function i(){}function j(a,b){b!==!1&&E(a),m(this,a),this._d=new Date(+a._d)}function k(a){var b=x(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=rb.localeData(),this._bubble()}function l(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty(\"toString\")&&(a.toString=b.toString),b.hasOwnProperty(\"valueOf\")&&(a.valueOf=b.valueOf),a}function m(a,b){var c,d,e;if(\"undefined\"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),\"undefined\"!=typeof b._i&&(a._i=b._i),\"undefined\"!=typeof b._f&&(a._f=b._f),\"undefined\"!=typeof b._l&&(a._l=b._l),\"undefined\"!=typeof b._strict&&(a._strict=b._strict),\"undefined\"!=typeof b._tzm&&(a._tzm=b._tzm),\"undefined\"!=typeof b._isUTC&&(a._isUTC=b._isUTC),\"undefined\"!=typeof b._offset&&(a._offset=b._offset),\"undefined\"!=typeof b._pf&&(a._pf=b._pf),\"undefined\"!=typeof b._locale&&(a._locale=b._locale),Fb.length>0)for(c in Fb)d=Fb[c],e=b[d],\"undefined\"!=typeof e&&(a[d]=e);return a}function n(a){return 0>a?Math.ceil(a):Math.floor(a)}function o(a,b,c){for(var d=\"\"+Math.abs(a),e=a>=0;d.length<b;)d=\"0\"+d;return(e?c?\"+\":\"\":\"-\")+d}function p(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,\"M\").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,\"M\"),c}function q(a,b){var c;return b=J(b,a),a.isBefore(b)?c=p(a,b):(c=p(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function r(a,b){return function(c,d){var e,g;return null===d||isNaN(+d)||(f(b,\"moment().\"+b+\"(period, number) is deprecated. Please use moment().\"+b+\"(number, period).\"),g=c,c=d,d=g),c=\"string\"==typeof c?+c:c,e=rb.duration(c,d),s(this,e,a),this}}function s(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&lb(a,\"Date\",kb(a,\"Date\")+f*c),g&&jb(a,kb(a,\"Month\")+g*c),d&&rb.updateOffset(a,f||g)}function t(a){return\"[object Array]\"===Object.prototype.toString.call(a)}function u(a){return\"[object Date]\"===Object.prototype.toString.call(a)||a instanceof Date}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&z(a[d])!==z(b[d]))&&g++;return g+f}function w(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,\"$1\");a=gc[a]||hc[b]||b}return a}function x(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=w(c),b&&(d[b]=a[c]));return d}function y(b){var c,d;if(0===b.indexOf(\"week\"))c=7,d=\"day\";else{if(0!==b.indexOf(\"month\"))return;c=12,d=\"month\"}rb[b]=function(e,f){var g,h,i=rb._locale[b],j=[];if(\"number\"==typeof e&&(f=e,e=a),h=function(a){var b=rb().utc().set(d,a);return i.call(rb._locale,b,e||\"\")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function z(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function A(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function B(a,b,c){return fb(rb([a,11,31+b-c]),b,c).week}function C(a){return D(a)?366:365}function D(a){return a%4===0&&a%100!==0||a%400===0}function E(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[yb]<0||a._a[yb]>11?yb:a._a[zb]<1||a._a[zb]>A(a._a[xb],a._a[yb])?zb:a._a[Ab]<0||a._a[Ab]>23?Ab:a._a[Bb]<0||a._a[Bb]>59?Bb:a._a[Cb]<0||a._a[Cb]>59?Cb:a._a[Db]<0||a._a[Db]>999?Db:-1,a._pf._overflowDayOfYear&&(xb>b||b>zb)&&(b=zb),a._pf.overflow=b)}function F(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function G(a){return a?a.toLowerCase().replace(\"_\",\"-\"):a}function H(a){for(var b,c,d,e,f=0;f<a.length;){for(e=G(a[f]).split(\"-\"),b=e.length,c=G(a[f+1]),c=c?c.split(\"-\"):null;b>0;){if(d=I(e.slice(0,b).join(\"-\")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function I(a){var b=null;if(!Eb[a]&&Gb)try{b=rb.locale(),require(\"./locale/\"+a),rb.locale(b)}catch(c){}return Eb[a]}function J(a,b){return b._isUTC?rb(a).zone(b._offset||0):rb(a).local()}function K(a){return a.match(/\\[[\\s\\S]/)?a.replace(/^\\[|\\]$/g,\"\"):a.replace(/\\\\/g,\"\")}function L(a){var b,c,d=a.match(Kb);for(b=0,c=d.length;c>b;b++)d[b]=mc[d[b]]?mc[d[b]]:K(d[b]);return function(e){var f=\"\";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ic[b]||(ic[b]=L(b)),ic[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Lb.lastIndex=0;d>=0&&Lb.test(a);)a=a.replace(Lb,c),Lb.lastIndex=0,d-=1;return a}function O(a,b){var c,d=b._strict;switch(a){case\"Q\":return Wb;case\"DDDD\":return Yb;case\"YYYY\":case\"GGGG\":case\"gggg\":return d?Zb:Ob;case\"Y\":case\"G\":case\"g\":return _b;case\"YYYYYY\":case\"YYYYY\":case\"GGGGG\":case\"ggggg\":return d?$b:Pb;case\"S\":if(d)return Wb;case\"SS\":if(d)return Xb;case\"SSS\":if(d)return Yb;case\"DDD\":return Nb;case\"MMM\":case\"MMMM\":case\"dd\":case\"ddd\":case\"dddd\":return Rb;case\"a\":case\"A\":return b._locale._meridiemParse;case\"X\":return Ub;case\"Z\":case\"ZZ\":return Sb;case\"T\":return Tb;case\"SSSS\":return Qb;case\"MM\":case\"DD\":case\"YY\":case\"GG\":case\"gg\":case\"HH\":case\"hh\":case\"mm\":case\"ss\":case\"ww\":case\"WW\":return d?Xb:Mb;case\"M\":case\"D\":case\"d\":case\"H\":case\"h\":case\"m\":case\"s\":case\"w\":case\"W\":case\"e\":case\"E\":return Mb;case\"Do\":return Vb;default:return c=new RegExp(X(W(a.replace(\"\\\\\",\"\")),\"i\"))}}function P(a){a=a||\"\";var b=a.match(Sb)||[],c=b[b.length-1]||[],d=(c+\"\").match(ec)||[\"-\",0,0],e=+(60*d[1])+z(d[2]);return\"+\"===d[0]?-e:e}function Q(a,b,c){var d,e=c._a;switch(a){case\"Q\":null!=b&&(e[yb]=3*(z(b)-1));break;case\"M\":case\"MM\":null!=b&&(e[yb]=z(b)-1);break;case\"MMM\":case\"MMMM\":d=c._locale.monthsParse(b),null!=d?e[yb]=d:c._pf.invalidMonth=b;break;case\"D\":case\"DD\":null!=b&&(e[zb]=z(b));break;case\"Do\":null!=b&&(e[zb]=z(parseInt(b,10)));break;case\"DDD\":case\"DDDD\":null!=b&&(c._dayOfYear=z(b));break;case\"YY\":e[xb]=rb.parseTwoDigitYear(b);break;case\"YYYY\":case\"YYYYY\":case\"YYYYYY\":e[xb]=z(b);break;case\"a\":case\"A\":c._isPm=c._locale.isPM(b);break;case\"H\":case\"HH\":case\"h\":case\"hh\":e[Ab]=z(b);break;case\"m\":case\"mm\":e[Bb]=z(b);break;case\"s\":case\"ss\":e[Cb]=z(b);break;case\"S\":case\"SS\":case\"SSS\":case\"SSSS\":e[Db]=z(1e3*(\"0.\"+b));break;case\"X\":c._d=new Date(1e3*parseFloat(b));break;case\"Z\":case\"ZZ\":c._useUTC=!0,c._tzm=P(b);break;case\"dd\":case\"ddd\":case\"dddd\":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case\"w\":case\"ww\":case\"W\":case\"WW\":case\"d\":case\"e\":case\"E\":a=a.substr(0,1);case\"gggg\":case\"GGGG\":case\"GGGGG\":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=z(b));break;case\"gg\":case\"GG\":c._w=c._w||{},c._w[a]=rb.parseTwoDigitYear(b)}}function R(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[xb],fb(rb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[xb],fb(rb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=gb(d,e,f,h,g),a._a[xb]=i.year,a._dayOfYear=i.dayOfYear}function S(a){var c,d,e,f,g=[];if(!a._d){for(e=U(a),a._w&&null==a._a[zb]&&null==a._a[yb]&&R(a),a._dayOfYear&&(f=b(a._a[xb],e[xb]),a._dayOfYear>C(f)&&(a._pf._overflowDayOfYear=!0),d=bb(f,0,a._dayOfYear),a._a[yb]=d.getUTCMonth(),a._a[zb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?bb:ab).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function T(a){var b;a._d||(b=x(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],S(a))}function U(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function V(a){if(a._f===rb.ISO_8601)return void Z(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=\"\"+a._i,h=g.length,i=0;for(d=N(a._f,a._locale).match(Kb)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(O(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),mc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),Q(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Ab]<12&&(a._a[Ab]+=12),a._isPm===!1&&12===a._a[Ab]&&(a._a[Ab]=0),S(a),E(a)}function W(a){return a.replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function X(a){return a.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\")}function Y(a){var b,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=m({},a),b._pf=c(),b._f=a._f[f],V(b),F(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,d=b));l(a,d||b)}function Z(a){var b,c,d=a._i,e=ac.exec(d);if(e){for(a._pf.iso=!0,b=0,c=cc.length;c>b;b++)if(cc[b][1].exec(d)){a._f=cc[b][0]+(e[6]||\" \");break}for(b=0,c=dc.length;c>b;b++)if(dc[b][1].exec(d)){a._f+=dc[b][0];break}d.match(Sb)&&(a._f+=\"Z\"),V(a)}else a._isValid=!1}function $(a){Z(a),a._isValid===!1&&(delete a._isValid,rb.createFromInputFallback(a))}function _(b){var c,d=b._i;d===a?b._d=new Date:u(d)?b._d=new Date(+d):null!==(c=Hb.exec(d))?b._d=new Date(+c[1]):\"string\"==typeof d?$(b):t(d)?(b._a=d.slice(0),S(b)):\"object\"==typeof d?T(b):\"number\"==typeof d?b._d=new Date(d):rb.createFromInputFallback(b)}function ab(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function bb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function cb(a,b){if(\"string\"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),\"number\"!=typeof a)return null}else a=parseInt(a,10);return a}function db(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function eb(a,b,c){var d=rb.duration(a).abs(),e=wb(d.as(\"s\")),f=wb(d.as(\"m\")),g=wb(d.as(\"h\")),h=wb(d.as(\"d\")),i=wb(d.as(\"M\")),j=wb(d.as(\"y\")),k=e<jc.s&&[\"s\",e]||1===f&&[\"m\"]||f<jc.m&&[\"mm\",f]||1===g&&[\"h\"]||g<jc.h&&[\"hh\",g]||1===h&&[\"d\"]||h<jc.d&&[\"dd\",h]||1===i&&[\"M\"]||i<jc.M&&[\"MM\",i]||1===j&&[\"y\"]||[\"yy\",j];return k[2]=b,k[3]=+a>0,k[4]=c,db.apply({},k)}function fb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=rb(a).add(f,\"d\"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function gb(a,b,c,d,e){var f,g,h=bb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:C(a-1)+g}}function hb(b){var c=b._i,d=b._f;return b._locale=b._locale||rb.localeData(b._l),null===c||d===a&&\"\"===c?rb.invalid({nullInput:!0}):(\"string\"==typeof c&&(b._i=c=b._locale.preparse(c)),rb.isMoment(c)?new j(c,!0):(d?t(d)?Y(b):V(b):_(b),new j(b)))}function ib(a,b){var c,d;if(1===b.length&&t(b[0])&&(b=b[0]),!b.length)return rb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function jb(a,b){var c;return\"string\"==typeof b&&(b=a.localeData().monthsParse(b),\"number\"!=typeof b)?a:(c=Math.min(a.date(),A(a.year(),b)),a._d[\"set\"+(a._isUTC?\"UTC\":\"\")+\"Month\"](b,c),a)}function kb(a,b){return a._d[\"get\"+(a._isUTC?\"UTC\":\"\")+b]()}function lb(a,b,c){return\"Month\"===b?jb(a,c):a._d[\"set\"+(a._isUTC?\"UTC\":\"\")+b](c)}function mb(a,b){return function(c){return null!=c?(lb(this,a,c),rb.updateOffset(this,b),this):kb(this,a)}}function nb(a){return 400*a/146097}function ob(a){return 146097*a/400}function pb(a){rb.duration.fn[a]=function(){return this._data[a]}}function qb(a){\"undefined\"==typeof ender&&(sb=vb.moment,vb.moment=a?e(\"Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.\",rb):rb)}for(var rb,sb,tb,ub=\"2.8.1\",vb=\"undefined\"!=typeof global?global:this,wb=Math.round,xb=0,yb=1,zb=2,Ab=3,Bb=4,Cb=5,Db=6,Eb={},Fb=[],Gb=\"undefined\"!=typeof module&&module.exports,Hb=/^\\/?Date\\((\\-?\\d+)/i,Ib=/(\\-)?(?:(\\d*)\\.)?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?)?/,Jb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Kb=/(\\[[^\\[]*\\])|(\\\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Lb=/(\\[[^\\[]*\\])|(\\\\)?(LT|LL?L?L?|l{1,4})/g,Mb=/\\d\\d?/,Nb=/\\d{1,3}/,Ob=/\\d{1,4}/,Pb=/[+\\-]?\\d{1,6}/,Qb=/\\d+/,Rb=/[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i,Sb=/Z|[\\+\\-]\\d\\d:?\\d\\d/gi,Tb=/T/i,Ub=/[\\+\\-]?\\d+(\\.\\d{1,3})?/,Vb=/\\d{1,2}/,Wb=/\\d/,Xb=/\\d\\d/,Yb=/\\d{3}/,Zb=/\\d{4}/,$b=/[+-]?\\d{6}/,_b=/[+-]?\\d+/,ac=/^\\s*(?:[+-]\\d{6}|\\d{4})-(?:(\\d\\d-\\d\\d)|(W\\d\\d$)|(W\\d\\d-\\d)|(\\d\\d\\d))((T| )(\\d\\d(:\\d\\d(:\\d\\d(\\.\\d+)?)?)?)?([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,bc=\"YYYY-MM-DDTHH:mm:ssZ\",cc=[[\"YYYYYY-MM-DD\",/[+-]\\d{6}-\\d{2}-\\d{2}/],[\"YYYY-MM-DD\",/\\d{4}-\\d{2}-\\d{2}/],[\"GGGG-[W]WW-E\",/\\d{4}-W\\d{2}-\\d/],[\"GGGG-[W]WW\",/\\d{4}-W\\d{2}/],[\"YYYY-DDD\",/\\d{4}-\\d{3}/]],dc=[[\"HH:mm:ss.SSSS\",/(T| )\\d\\d:\\d\\d:\\d\\d\\.\\d+/],[\"HH:mm:ss\",/(T| )\\d\\d:\\d\\d:\\d\\d/],[\"HH:mm\",/(T| )\\d\\d:\\d\\d/],[\"HH\",/(T| )\\d\\d/]],ec=/([\\+\\-]|\\d\\d)/gi,fc=(\"Date|Hours|Minutes|Seconds|Milliseconds\".split(\"|\"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),gc={ms:\"millisecond\",s:\"second\",m:\"minute\",h:\"hour\",d:\"day\",D:\"date\",w:\"week\",W:\"isoWeek\",M:\"month\",Q:\"quarter\",y:\"year\",DDD:\"dayOfYear\",e:\"weekday\",E:\"isoWeekday\",gg:\"weekYear\",GG:\"isoWeekYear\"},hc={dayofyear:\"dayOfYear\",isoweekday:\"isoWeekday\",isoweek:\"isoWeek\",weekyear:\"weekYear\",isoweekyear:\"isoWeekYear\"},ic={},jc={s:45,m:45,h:22,d:26,M:11},kc=\"DDD w W M D d\".split(\" \"),lc=\"M D H h m s w W\".split(\" \"),mc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},YYYYY:function(){return o(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?\"+\":\"-\";return b+o(Math.abs(a),6)},gg:function(){return o(this.weekYear()%100,2)},gggg:function(){return o(this.weekYear(),4)},ggggg:function(){return o(this.weekYear(),5)},GG:function(){return o(this.isoWeekYear()%100,2)},GGGG:function(){return o(this.isoWeekYear(),4)},GGGGG:function(){return o(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return z(this.milliseconds()/100)},SS:function(){return o(z(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},SSSS:function(){return o(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b=\"+\";return 0>a&&(a=-a,b=\"-\"),b+o(z(a/60),2)+\":\"+o(z(a)%60,2)},ZZ:function(){var a=-this.zone(),b=\"+\";return 0>a&&(a=-a,b=\"-\"),b+o(z(a/60),2)+o(z(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nc={},oc=[\"months\",\"monthsShort\",\"weekdays\",\"weekdaysShort\",\"weekdaysMin\"];kc.length;)tb=kc.pop(),mc[tb+\"o\"]=h(mc[tb],tb);for(;lc.length;)tb=lc.pop(),mc[tb+tb]=g(mc[tb],2);mc.DDDD=g(mc.DDD,3),l(i.prototype,{set:function(a){var b,c;for(c in a)b=a[c],\"function\"==typeof b?this[c]=b:this[\"_\"+c]=b},_months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),months:function(a){return this._months[a.month()]},_monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=rb.utc([2e3,b]),d=\"^\"+this.months(c,\"\")+\"|^\"+this.monthsShort(c,\"\"),this._monthsParse[b]=new RegExp(d.replace(\".\",\"\"),\"i\")),this._monthsParse[b].test(a))return b},_weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:\"Su_Mo_Tu_We_Th_Fr_Sa\".split(\"_\"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=rb([2e3,1]).day(b),d=\"^\"+this.weekdays(c,\"\")+\"|^\"+this.weekdaysShort(c,\"\")+\"|^\"+this.weekdaysMin(c,\"\"),this._weekdaysParse[b]=new RegExp(d.replace(\".\",\"\"),\"i\")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY LT\",LLLL:\"dddd, MMMM D, YYYY LT\"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return\"p\"===(a+\"\").toLowerCase().charAt(0)},_meridiemParse:/[ap]\\.?m?\\.?/i,meridiem:function(a,b,c){return a>11?c?\"pm\":\"PM\":c?\"am\":\"AM\"},_calendar:{sameDay:\"[Today at] LT\",nextDay:\"[Tomorrow at] LT\",nextWeek:\"dddd [at] LT\",lastDay:\"[Yesterday at] LT\",lastWeek:\"[Last] dddd [at] LT\",sameElse:\"L\"},calendar:function(a,b){var c=this._calendar[a];return\"function\"==typeof c?c.apply(b):c},_relativeTime:{future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return\"function\"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?\"future\":\"past\"];return\"function\"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace(\"%d\",a)},_ordinal:\"%d\",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return fb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:\"Invalid date\",invalidDate:function(){return this._invalidDate}}),rb=function(b,d,e,f){var g;return\"boolean\"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=c(),hb(g)},rb.suppressDeprecationWarnings=!1,rb.createFromInputFallback=e(\"moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.\",function(a){a._d=new Date(a._i)}),rb.min=function(){var a=[].slice.call(arguments,0);return ib(\"isBefore\",a)},rb.max=function(){var a=[].slice.call(arguments,0);return ib(\"isAfter\",a)},rb.utc=function(b,d,e,f){var g;return\"boolean\"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=d,g._strict=f,g._pf=c(),hb(g).utc()},rb.unix=function(a){return rb(1e3*a)},rb.duration=function(a,b){var c,d,e,f,g=a,h=null;return rb.isDuration(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:\"number\"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Ib.exec(a))?(c=\"-\"===h[1]?-1:1,g={y:0,d:z(h[zb])*c,h:z(h[Ab])*c,m:z(h[Bb])*c,s:z(h[Cb])*c,ms:z(h[Db])*c}):(h=Jb.exec(a))?(c=\"-\"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(\",\",\".\"));return(isNaN(b)?0:b)*c},g={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}):\"object\"==typeof g&&(\"from\"in g||\"to\"in g)&&(f=q(rb(g.from),rb(g.to)),g={},g.ms=f.milliseconds,g.M=f.months),d=new k(g),rb.isDuration(a)&&a.hasOwnProperty(\"_locale\")&&(d._locale=a._locale),d},rb.version=ub,rb.defaultFormat=bc,rb.ISO_8601=function(){},rb.momentProperties=Fb,rb.updateOffset=function(){},rb.relativeTimeThreshold=function(b,c){return jc[b]===a?!1:c===a?jc[b]:(jc[b]=c,!0)},rb.lang=e(\"moment.lang is deprecated. Use moment.locale instead.\",function(a,b){return rb.locale(a,b)}),rb.locale=function(a,b){var c;return a&&(c=\"undefined\"!=typeof b?rb.defineLocale(a,b):rb.localeData(a),c&&(rb.duration._locale=rb._locale=c)),rb._locale._abbr},rb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Eb[a]||(Eb[a]=new i),Eb[a].set(b),rb.locale(a),Eb[a]):(delete Eb[a],null)},rb.langData=e(\"moment.langData is deprecated. Use moment.localeData instead.\",function(a){return rb.localeData(a)}),rb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return rb._locale;if(!t(a)){if(b=I(a))return b;a=[a]}return H(a)},rb.isMoment=function(a){return a instanceof j||null!=a&&a.hasOwnProperty(\"_isAMomentObject\")},rb.isDuration=function(a){return a instanceof k};for(tb=oc.length-1;tb>=0;--tb)y(oc[tb]);rb.normalizeUnits=function(a){return w(a)},rb.invalid=function(a){var b=rb.utc(0/0);return null!=a?l(b._pf,a):b._pf.userInvalidated=!0,b},rb.parseZone=function(){return rb.apply(null,arguments).parseZone()},rb.parseTwoDigitYear=function(a){return z(a)+(z(a)>68?1900:2e3)},l(rb.fn=j.prototype,{clone:function(){return rb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale(\"en\").format(\"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ\")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=rb(this).utc();return 0<a.year()&&a.year()<=9999?M(a,\"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]\"):M(a,\"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]\")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&v(this._a,(this._isUTC?rb.utc(this._a):rb(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._d.getTimezoneOffset(),\"m\")),this},format:function(a){var b=M(this,a||rb.defaultFormat);return this.localeData().postformat(b)},add:r(1,\"add\"),subtract:r(-1,\"subtract\"),diff:function(a,b,c){var d,e,f=J(a,this),g=6e4*(this.zone()-f.zone());return b=w(b),\"year\"===b||\"month\"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-rb(this).startOf(\"month\")-(f-rb(f).startOf(\"month\")))/d,e-=6e4*(this.zone()-rb(this).startOf(\"month\").zone()-(f.zone()-rb(f).startOf(\"month\").zone()))/d,\"year\"===b&&(e/=12)):(d=this-f,e=\"second\"===b?d/1e3:\"minute\"===b?d/6e4:\"hour\"===b?d/36e5:\"day\"===b?(d-g)/864e5:\"week\"===b?(d-g)/6048e5:d),c?e:n(e)},from:function(a,b){return rb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(rb(),a)},calendar:function(a){var b=a||rb(),c=J(b,this).startOf(\"day\"),d=this.diff(c,\"days\",!0),e=-6>d?\"sameElse\":-1>d?\"lastWeek\":0>d?\"lastDay\":1>d?\"sameDay\":2>d?\"nextDay\":7>d?\"nextWeek\":\"sameElse\";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=cb(a,this.localeData()),this.add(a-b,\"d\")):b},month:mb(\"Month\",!0),startOf:function(a){switch(a=w(a)){case\"year\":this.month(0);case\"quarter\":case\"month\":this.date(1);case\"week\":case\"isoWeek\":case\"day\":this.hours(0);case\"hour\":this.minutes(0);case\"minute\":this.seconds(0);case\"second\":this.milliseconds(0)}return\"week\"===a?this.weekday(0):\"isoWeek\"===a&&this.isoWeekday(1),\"quarter\"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=w(a),this.startOf(a).add(1,\"isoWeek\"===a?\"week\":a).subtract(1,\"ms\")},isAfter:function(a,b){return b=\"undefined\"!=typeof b?b:\"millisecond\",+this.clone().startOf(b)>+rb(a).startOf(b)},isBefore:function(a,b){return b=\"undefined\"!=typeof b?b:\"millisecond\",+this.clone().startOf(b)<+rb(a).startOf(b)},isSame:function(a,b){return b=b||\"ms\",+this.clone().startOf(b)===+J(a,this).startOf(b)},min:e(\"moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548\",function(a){return a=rb.apply(null,arguments),this>a?this:a}),max:e(\"moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548\",function(a){return a=rb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._d.getTimezoneOffset():(\"string\"==typeof a&&(a=P(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._d.getTimezoneOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,\"m\"),d!==a&&(!b||this._changeInProgress?s(this,rb.duration(d-a,\"m\"),1,!1):this._changeInProgress||(this._changeInProgress=!0,rb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?\"UTC\":\"\"},zoneName:function(){return this._isUTC?\"Coordinated Universal Time\":\"\"},parseZone:function(){return this._tzm?this.zone(this._tzm):\"string\"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?rb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return A(this.year(),this.month())},dayOfYear:function(a){var b=wb((rb(this).startOf(\"day\")-rb(this).startOf(\"year\"))/864e5)+1;return null==a?b:this.add(a-b,\"d\")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=fb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,\"y\")},isoWeekYear:function(a){var b=fb(this,1,4).year;return null==a?b:this.add(a-b,\"y\")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),\"d\")},isoWeek:function(a){var b=fb(this,1,4).week;return null==a?b:this.add(7*(a-b),\"d\")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,\"d\")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return B(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return B(this.year(),a.dow,a.doy)},get:function(a){return a=w(a),this[a]()},set:function(a,b){return a=w(a),\"function\"==typeof this[a]&&this[a](b),this},locale:function(b){return b===a?this._locale._abbr:(this._locale=rb.localeData(b),this)},lang:e(\"moment().lang() is deprecated. Use moment().localeData() instead.\",function(b){return b===a?this.localeData():(this._locale=rb.localeData(b),this)}),localeData:function(){return this._locale}}),rb.fn.millisecond=rb.fn.milliseconds=mb(\"Milliseconds\",!1),rb.fn.second=rb.fn.seconds=mb(\"Seconds\",!1),rb.fn.minute=rb.fn.minutes=mb(\"Minutes\",!1),rb.fn.hour=rb.fn.hours=mb(\"Hours\",!0),rb.fn.date=mb(\"Date\",!0),rb.fn.dates=e(\"dates accessor is deprecated. Use date instead.\",mb(\"Date\",!0)),rb.fn.year=mb(\"FullYear\",!0),rb.fn.years=e(\"years accessor is deprecated. Use year instead.\",mb(\"FullYear\",!0)),rb.fn.days=rb.fn.day,rb.fn.months=rb.fn.month,rb.fn.weeks=rb.fn.week,rb.fn.isoWeeks=rb.fn.isoWeek,rb.fn.quarters=rb.fn.quarter,rb.fn.toJSON=rb.fn.toISOString,l(rb.duration.fn=k.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=n(d/1e3),g.seconds=a%60,b=n(a/60),g.minutes=b%60,c=n(b/60),g.hours=c%24,e+=n(c/24),h=n(nb(e)),e-=n(ob(h)),f+=n(e/30),e%=30,h+=n(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return n(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*z(this._months/12)},humanize:function(a){var b=eb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=rb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=rb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=w(a),this[a.toLowerCase()+\"s\"]()},as:function(a){var b,c;if(a=w(a),b=this._days+this._milliseconds/864e5,\"month\"===a||\"year\"===a)return c=this._months+12*nb(b),\"month\"===a?c:c/12;switch(b+=ob(this._months/12),a){case\"week\":return b/7;case\"day\":return b;case\"hour\":return 24*b;case\"minute\":return 24*b*60;case\"second\":return 24*b*60*60;case\"millisecond\":return 24*b*60*60*1e3;default:throw new Error(\"Unknown unit \"+a)}},lang:rb.fn.lang,locale:rb.fn.locale,toIsoString:e(\"toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)\",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?\"-\":\"\")+\"P\"+(a?a+\"Y\":\"\")+(b?b+\"M\":\"\")+(c?c+\"D\":\"\")+(d||e||f?\"T\":\"\")+(d?d+\"H\":\"\")+(e?e+\"M\":\"\")+(f?f+\"S\":\"\"):\"P0D\"},localeData:function(){return this._locale}});for(tb in fc)fc.hasOwnProperty(tb)&&pb(tb.toLowerCase());rb.duration.fn.asMilliseconds=function(){return this.as(\"ms\")},rb.duration.fn.asSeconds=function(){return this.as(\"s\")},rb.duration.fn.asMinutes=function(){return this.as(\"m\")},rb.duration.fn.asHours=function(){return this.as(\"h\")},rb.duration.fn.asDays=function(){return this.as(\"d\")},rb.duration.fn.asWeeks=function(){return this.as(\"weeks\")},rb.duration.fn.asMonths=function(){return this.as(\"M\")},rb.duration.fn.asYears=function(){return this.as(\"y\")},rb.locale(\"en\",{ordinal:function(a){var b=a%10,c=1===z(a%100/10)?\"th\":1===b?\"st\":2===b?\"nd\":3===b?\"rd\":\"th\";return a+c}}),Gb?module.exports=rb:\"function\"==typeof define&&define.amd?(define(\"moment\",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(vb.moment=sb),rb}),qb(!0)):qb()}).call(this);","FormData.js":"/*\n * FormData for XMLHttpRequest 2  -  Polyfill for Web Worker\n * (c) 2014 Rob Wu <rob@robwu.nl>\n * License: MIT\n * - append(name, value[, filename])\n * - XMLHttpRequest.prototype.send(object FormData)\n * \n * Specification: http://www.w3.org/TR/XMLHttpRequest/#formdata\n *                http://www.w3.org/TR/XMLHttpRequest/#the-send-method\n * The .append() implementation also accepts Uint8Array and ArrayBuffer objects\n * Web Workers do not natively support FormData:\n *                http://dev.w3.org/html5/workers/#apis-available-to-workers\n * Originally released in 2012 as a part of http://stackoverflow.com/a/10002486.\n * Updates since initial release:\n * - Forward-compatibility by testing whether FormData exists before defining it.\n * - Increased robustness of .append.\n * - Allow any typed array in .append.\n * - Remove use of String.prototype.toString to work around a Firefox bug.\n * - Use typed array in xhr.send instead of arraybuffer to get rid of deprecation\n *   warnings.\n **/\n(function(exports) {\n    if (exports.FormData) {\n        // Don't replace FormData if it already exists\n        return;\n    }\n    // Export variable to the global scope\n    exports.FormData = FormData;\n\n    var ___send$rw = XMLHttpRequest.prototype.send;\n    XMLHttpRequest.prototype.send = function(data) {\n        if (data instanceof FormData) {\n            if (!data.__endedMultipart) data.__append('--' + data.boundary + '--\\r\\n');\n            data.__endedMultipart = true;\n            this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + data.boundary);\n            data = new Uint8Array(data.data);\n        }\n        // Invoke original XHR.send\n        return ___send$rw.call(this, data);\n    };\n\n    function FormData() {\n        // Force a Constructor\n        if (!(this instanceof FormData)) return new FormData();\n        // Generate a random boundary - This must be unique with respect to the form's contents.\n        this.boundary = '------RWWorkerFormDataBoundary' + Math.random().toString(36);\n        var internal_data = this.data = [];\n        /**\n         * Internal method.\n         * @param inp String | ArrayBuffer | Uint8Array  Input\n         */\n        this.__append = function(inp) {\n            var i = 0, len;\n            if (typeof inp == 'string') {\n                for (len = inp.length; i < len; ++i)\n                    internal_data.push(inp.charCodeAt(i) & 0xff);\n            } else if (inp && inp.byteLength) {/*If ArrayBuffer or typed array */\n                if (!('byteOffset' in inp))   /* If ArrayBuffer, wrap in view */\n                    inp = new Uint8Array(inp);\n                for (len = inp.byteLength; i < len; ++i)\n                    internal_data.push(inp[i] & 0xff);\n            }\n        };\n    }\n    /**\n     * @param name     String                                   Key name\n     * @param value    String|Blob|File|typed array|ArrayBuffer Value\n     * @param filename String                                   Optional File name (when value is not a string).\n     **/\n    FormData.prototype.append = function(name, value, filename) {\n        if (this.__endedMultipart) {\n            // Truncate the closing boundary\n            this.data.length -= this.boundary.length + 6;\n            this.__endedMultipart = false;\n        }\n        if (arguments.length < 2) {\n            throw new SyntaxError('Not enough arguments');\n        }\n        var part = '--' + this.boundary + '\\r\\n' +\n            'Content-Disposition: form-data; name=\"' + name + '\"';\n\n        if (value instanceof File || value instanceof Blob) {\n            return this.append(name,\n                new Uint8Array(new FileReaderSync().readAsArrayBuffer(value)),\n                filename || value.name);\n        } else if (typeof value.byteLength == 'number') {\n            // Duck-typed typed array or array buffer\n            part += '; filename=\"'+ (filename || 'blob').replace(/\"/g,'%22') +'\"\\r\\n';\n            part += 'Content-Type: application/octet-stream\\r\\n\\r\\n';\n            this.__append(part);\n            this.__append(value);\n            part = '\\r\\n';\n        } else {\n            part += '\\r\\n\\r\\n' + value + '\\r\\n';\n        }\n        this.__append(part);\n    };\n})(this || self);\n","underscore.js":"//     Underscore.js 1.8.2\n//     http://underscorejs.org\n//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind,\n    nativeCreate       = Object.create;\n\n  // Naked function reference for surrogate-prototype-swapping.\n  var Ctor = function(){};\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.8.2';\n\n  // Internal function that returns an efficient (for current engines) version\n  // of the passed-in callback, to be repeatedly applied in other Underscore\n  // functions.\n  var optimizeCb = function(func, context, argCount) {\n    if (context === void 0) return func;\n    switch (argCount == null ? 3 : argCount) {\n      case 1: return function(value) {\n        return func.call(context, value);\n      };\n      case 2: return function(value, other) {\n        return func.call(context, value, other);\n      };\n      case 3: return function(value, index, collection) {\n        return func.call(context, value, index, collection);\n      };\n      case 4: return function(accumulator, value, index, collection) {\n        return func.call(context, accumulator, value, index, collection);\n      };\n    }\n    return function() {\n      return func.apply(context, arguments);\n    };\n  };\n\n  // A mostly-internal function to generate callbacks that can be applied\n  // to each element in a collection, returning the desired result \u00e2\u0080\u0094 either\n  // identity, an arbitrary callback, a property matcher, or a property accessor.\n  var cb = function(value, context, argCount) {\n    if (value == null) return _.identity;\n    if (_.isFunction(value)) return optimizeCb(value, context, argCount);\n    if (_.isObject(value)) return _.matcher(value);\n    return _.property(value);\n  };\n  _.iteratee = function(value, context) {\n    return cb(value, context, Infinity);\n  };\n\n  // An internal function for creating assigner functions.\n  var createAssigner = function(keysFunc, undefinedOnly) {\n    return function(obj) {\n      var length = arguments.length;\n      if (length < 2 || obj == null) return obj;\n      for (var index = 1; index < length; index++) {\n        var source = arguments[index],\n            keys = keysFunc(source),\n            l = keys.length;\n        for (var i = 0; i < l; i++) {\n          var key = keys[i];\n          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];\n        }\n      }\n      return obj;\n    };\n  };\n\n  // An internal function for creating a new object that inherits from another.\n  var baseCreate = function(prototype) {\n    if (!_.isObject(prototype)) return {};\n    if (nativeCreate) return nativeCreate(prototype);\n    Ctor.prototype = prototype;\n    var result = new Ctor;\n    Ctor.prototype = null;\n    return result;\n  };\n\n  // Helper for collection methods to determine whether a collection\n  // should be iterated as an array or as an object\n  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var isArrayLike = function(collection) {\n    var length = collection && collection.length;\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles raw objects in addition to array-likes. Treats all\n  // sparse array-likes as if they were dense.\n  _.each = _.forEach = function(obj, iteratee, context) {\n    iteratee = optimizeCb(iteratee, context);\n    var i, length;\n    if (isArrayLike(obj)) {\n      for (i = 0, length = obj.length; i < length; i++) {\n        iteratee(obj[i], i, obj);\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (i = 0, length = keys.length; i < length; i++) {\n        iteratee(obj[keys[i]], keys[i], obj);\n      }\n    }\n    return obj;\n  };\n\n  // Return the results of applying the iteratee to each element.\n  _.map = _.collect = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length,\n        results = Array(length);\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      results[index] = iteratee(obj[currentKey], currentKey, obj);\n    }\n    return results;\n  };\n\n  // Create a reducing function iterating left or right.\n  function createReduce(dir) {\n    // Optimized iterator function as using arguments.length\n    // in the main function will deoptimize the, see #1991.\n    function iterator(obj, iteratee, memo, keys, index, length) {\n      for (; index >= 0 && index < length; index += dir) {\n        var currentKey = keys ? keys[index] : index;\n        memo = iteratee(memo, obj[currentKey], currentKey, obj);\n      }\n      return memo;\n    }\n\n    return function(obj, iteratee, memo, context) {\n      iteratee = optimizeCb(iteratee, context, 4);\n      var keys = !isArrayLike(obj) && _.keys(obj),\n          length = (keys || obj).length,\n          index = dir > 0 ? 0 : length - 1;\n      // Determine the initial value if none is provided.\n      if (arguments.length < 3) {\n        memo = obj[keys ? keys[index] : index];\n        index += dir;\n      }\n      return iterator(obj, iteratee, memo, keys, index, length);\n    };\n  }\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`.\n  _.reduce = _.foldl = _.inject = createReduce(1);\n\n  // The right-associative version of reduce, also known as `foldr`.\n  _.reduceRight = _.foldr = createReduce(-1);\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, predicate, context) {\n    var key;\n    if (isArrayLike(obj)) {\n      key = _.findIndex(obj, predicate, context);\n    } else {\n      key = _.findKey(obj, predicate, context);\n    }\n    if (key !== void 0 && key !== -1) return obj[key];\n  };\n\n  // Return all the elements that pass a truth test.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, predicate, context) {\n    var results = [];\n    predicate = cb(predicate, context);\n    _.each(obj, function(value, index, list) {\n      if (predicate(value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, predicate, context) {\n    return _.filter(obj, _.negate(cb(predicate)), context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (!predicate(obj[currentKey], currentKey, obj)) return false;\n    }\n    return true;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Aliased as `any`.\n  _.some = _.any = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = !isArrayLike(obj) && _.keys(obj),\n        length = (keys || obj).length;\n    for (var index = 0; index < length; index++) {\n      var currentKey = keys ? keys[index] : index;\n      if (predicate(obj[currentKey], currentKey, obj)) return true;\n    }\n    return false;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `includes` and `include`.\n  _.contains = _.includes = _.include = function(obj, target, fromIndex) {\n    if (!isArrayLike(obj)) obj = _.values(obj);\n    return _.indexOf(obj, target, typeof fromIndex == 'number' && fromIndex) >= 0;\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      var func = isFunc ? method : value[method];\n      return func == null ? func : func.apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, _.property(key));\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs) {\n    return _.filter(obj, _.matcher(attrs));\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.find(obj, _.matcher(attrs));\n  };\n\n  // Return the maximum element (or element-based computation).\n  _.max = function(obj, iteratee, context) {\n    var result = -Infinity, lastComputed = -Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value > result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iteratee, context) {\n    var result = Infinity, lastComputed = Infinity,\n        value, computed;\n    if (iteratee == null && obj != null) {\n      obj = isArrayLike(obj) ? obj : _.values(obj);\n      for (var i = 0, length = obj.length; i < length; i++) {\n        value = obj[i];\n        if (value < result) {\n          result = value;\n        }\n      }\n    } else {\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index, list) {\n        computed = iteratee(value, index, list);\n        if (computed < lastComputed || computed === Infinity && result === Infinity) {\n          result = value;\n          lastComputed = computed;\n        }\n      });\n    }\n    return result;\n  };\n\n  // Shuffle a collection, using the modern version of the\n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher\u00e2\u0080\u0093Yates_shuffle).\n  _.shuffle = function(obj) {\n    var set = isArrayLike(obj) ? obj : _.values(obj);\n    var length = set.length;\n    var shuffled = Array(length);\n    for (var index = 0, rand; index < length; index++) {\n      rand = _.random(0, index);\n      if (rand !== index) shuffled[index] = shuffled[rand];\n      shuffled[rand] = set[index];\n    }\n    return shuffled;\n  };\n\n  // Sample **n** random values from a collection.\n  // If **n** is not specified, returns a single random element.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (n == null || guard) {\n      if (!isArrayLike(obj)) obj = _.values(obj);\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // Sort the object's values by a criterion produced by an iteratee.\n  _.sortBy = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iteratee(value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, iteratee, context) {\n      var result = {};\n      iteratee = cb(iteratee, context);\n      _.each(obj, function(value, index) {\n        var key = iteratee(value, index, obj);\n        behavior(result, value, key);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key].push(value); else result[key] = [value];\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, value, key) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, value, key) {\n    if (_.has(result, key)) result[key]++; else result[key] = 1;\n  });\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (isArrayLike(obj)) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return isArrayLike(obj) ? obj.length : _.keys(obj).length;\n  };\n\n  // Split a collection into two arrays: one whose elements all satisfy the given\n  // predicate, and one whose elements all do not satisfy the predicate.\n  _.partition = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var pass = [], fail = [];\n    _.each(obj, function(value, key, obj) {\n      (predicate(value, key, obj) ? pass : fail).push(value);\n    });\n    return [pass, fail];\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[0];\n    return _.initial(array, array.length - n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if (n == null || guard) return array[array.length - 1];\n    return _.rest(array, Math.max(0, array.length - n));\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, n == null || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, strict, startIndex) {\n    var output = [], idx = 0;\n    for (var i = startIndex || 0, length = input && input.length; i < length; i++) {\n      var value = input[i];\n      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {\n        //flatten current level of array or arguments object\n        if (!shallow) value = flatten(value, shallow, strict);\n        var j = 0, len = value.length;\n        output.length += len;\n        while (j < len) {\n          output[idx++] = value[j++];\n        }\n      } else if (!strict) {\n        output[idx++] = value;\n      }\n    }\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, false);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iteratee, context) {\n    if (array == null) return [];\n    if (!_.isBoolean(isSorted)) {\n      context = iteratee;\n      iteratee = isSorted;\n      isSorted = false;\n    }\n    if (iteratee != null) iteratee = cb(iteratee, context);\n    var result = [];\n    var seen = [];\n    for (var i = 0, length = array.length; i < length; i++) {\n      var value = array[i],\n          computed = iteratee ? iteratee(value, i, array) : value;\n      if (isSorted) {\n        if (!i || seen !== computed) result.push(value);\n        seen = computed;\n      } else if (iteratee) {\n        if (!_.contains(seen, computed)) {\n          seen.push(computed);\n          result.push(value);\n        }\n      } else if (!_.contains(result, value)) {\n        result.push(value);\n      }\n    }\n    return result;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(flatten(arguments, true, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    if (array == null) return [];\n    var result = [];\n    var argsLength = arguments.length;\n    for (var i = 0, length = array.length; i < length; i++) {\n      var item = array[i];\n      if (_.contains(result, item)) continue;\n      for (var j = 1; j < argsLength; j++) {\n        if (!_.contains(arguments[j], item)) break;\n      }\n      if (j === argsLength) result.push(item);\n    }\n    return result;\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = flatten(arguments, true, true, 1);\n    return _.filter(array, function(value){\n      return !_.contains(rest, value);\n    });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    return _.unzip(arguments);\n  };\n\n  // Complement of _.zip. Unzip accepts an array of arrays and groups\n  // each array's elements on shared indices\n  _.unzip = function(array) {\n    var length = array && _.max(array, 'length').length || 0;\n    var result = Array(length);\n\n    for (var index = 0; index < length; index++) {\n      result[index] = _.pluck(array, index);\n    }\n    return result;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    var result = {};\n    for (var i = 0, length = list && list.length; i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // Return the position of the first occurrence of an item in an array,\n  // or -1 if the item is not included in the array.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function(array, item, isSorted) {\n    var i = 0, length = array && array.length;\n    if (typeof isSorted == 'number') {\n      i = isSorted < 0 ? Math.max(0, length + isSorted) : isSorted;\n    } else if (isSorted && length) {\n      i = _.sortedIndex(array, item);\n      return array[i] === item ? i : -1;\n    }\n    if (item !== item) {\n      return _.findIndex(slice.call(array, i), _.isNaN);\n    }\n    for (; i < length; i++) if (array[i] === item) return i;\n    return -1;\n  };\n\n  _.lastIndexOf = function(array, item, from) {\n    var idx = array ? array.length : 0;\n    if (typeof from == 'number') {\n      idx = from < 0 ? idx + from + 1 : Math.min(idx, from + 1);\n    }\n    if (item !== item) {\n      return _.findLastIndex(slice.call(array, 0, idx), _.isNaN);\n    }\n    while (--idx >= 0) if (array[idx] === item) return idx;\n    return -1;\n  };\n\n  // Generator function to create the findIndex and findLastIndex functions\n  function createIndexFinder(dir) {\n    return function(array, predicate, context) {\n      predicate = cb(predicate, context);\n      var length = array != null && array.length;\n      var index = dir > 0 ? 0 : length - 1;\n      for (; index >= 0 && index < length; index += dir) {\n        if (predicate(array[index], index, array)) return index;\n      }\n      return -1;\n    };\n  }\n\n  // Returns the first index on an array-like that passes a predicate test\n  _.findIndex = createIndexFinder(1);\n\n  _.findLastIndex = createIndexFinder(-1);\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iteratee, context) {\n    iteratee = cb(iteratee, context, 1);\n    var value = iteratee(obj);\n    var low = 0, high = array.length;\n    while (low < high) {\n      var mid = Math.floor((low + high) / 2);\n      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;\n    }\n    return low;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = step || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var range = Array(length);\n\n    for (var idx = 0; idx < length; idx++, start += step) {\n      range[idx] = start;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Determines whether to execute a function as a constructor\n  // or a normal function with the provided arguments\n  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {\n    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);\n    var self = baseCreate(sourceFunc.prototype);\n    var result = sourceFunc.apply(self, args);\n    if (_.isObject(result)) return result;\n    return self;\n  };\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');\n    var args = slice.call(arguments, 2);\n    var bound = function() {\n      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));\n    };\n    return bound;\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context. _ acts\n  // as a placeholder, allowing any combination of arguments to be pre-filled.\n  _.partial = function(func) {\n    var boundArgs = slice.call(arguments, 1);\n    var bound = function() {\n      var position = 0, length = boundArgs.length;\n      var args = Array(length);\n      for (var i = 0; i < length; i++) {\n        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];\n      }\n      while (position < arguments.length) args.push(arguments[position++]);\n      return executeBound(func, bound, this, this, args);\n    };\n    return bound;\n  };\n\n  // Bind a number of an object's methods to that object. Remaining arguments\n  // are the method names to be bound. Useful for ensuring that all callbacks\n  // defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var i, length = arguments.length, key;\n    if (length <= 1) throw new Error('bindAll must be passed function names');\n    for (i = 1; i < length; i++) {\n      key = arguments[i];\n      obj[key] = _.bind(obj[key], obj);\n    }\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memoize = function(key) {\n      var cache = memoize.cache;\n      var address = '' + (hasher ? hasher.apply(this, arguments) : key);\n      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);\n      return cache[address];\n    };\n    memoize.cache = {};\n    return memoize;\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){\n      return func.apply(null, args);\n    }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = _.partial(_.delay, _, 1);\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : _.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = _.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n\n    var later = function() {\n      var last = _.now() - timestamp;\n\n      if (last < wait && last >= 0) {\n        timeout = setTimeout(later, wait - last);\n      } else {\n        timeout = null;\n        if (!immediate) {\n          result = func.apply(context, args);\n          if (!timeout) context = args = null;\n        }\n      }\n    };\n\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = _.now();\n      var callNow = immediate && !timeout;\n      if (!timeout) timeout = setTimeout(later, wait);\n      if (callNow) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n\n      return result;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return _.partial(wrapper, func);\n  };\n\n  // Returns a negated version of the passed-in predicate.\n  _.negate = function(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var args = arguments;\n    var start = args.length - 1;\n    return function() {\n      var i = start;\n      var result = args[start].apply(this, arguments);\n      while (i--) result = args[i].call(this, result);\n      return result;\n    };\n  };\n\n  // Returns a function that will only be executed on and after the Nth call.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Returns a function that will only be executed up to (but not including) the Nth call.\n  _.before = function(times, func) {\n    var memo;\n    return function() {\n      if (--times > 0) {\n        memo = func.apply(this, arguments);\n      }\n      if (times <= 1) func = null;\n      return memo;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = _.partial(_.before, 2);\n\n  // Object Functions\n  // ----------------\n\n  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.\n  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');\n  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',\n                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];\n\n  function collectNonEnumProps(obj, keys) {\n    var nonEnumIdx = nonEnumerableProps.length;\n    var constructor = obj.constructor;\n    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;\n\n    // Constructor is a special case.\n    var prop = 'constructor';\n    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);\n\n    while (nonEnumIdx--) {\n      prop = nonEnumerableProps[nonEnumIdx];\n      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {\n        keys.push(prop);\n      }\n    }\n  }\n\n  // Retrieve the names of an object's own properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    if (nativeKeys) return nativeKeys(obj);\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve all the property names of an object.\n  _.allKeys = function(obj) {\n    if (!_.isObject(obj)) return [];\n    var keys = [];\n    for (var key in obj) keys.push(key);\n    // Ahem, IE < 9.\n    if (hasEnumBug) collectNonEnumProps(obj, keys);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Returns the results of applying the iteratee to each element of the object\n  // In contrast to _.map it returns an object\n  _.mapObject = function(obj, iteratee, context) {\n    iteratee = cb(iteratee, context);\n    var keys =  _.keys(obj),\n          length = keys.length,\n          results = {},\n          currentKey;\n      for (var index = 0; index < length; index++) {\n        currentKey = keys[index];\n        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);\n      }\n      return results;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = createAssigner(_.allKeys);\n\n  // Assigns a given object with all the own properties in the passed-in object(s)\n  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\n  _.extendOwn = _.assign = createAssigner(_.keys);\n\n  // Returns the first key on an object that passes a predicate test\n  _.findKey = function(obj, predicate, context) {\n    predicate = cb(predicate, context);\n    var keys = _.keys(obj), key;\n    for (var i = 0, length = keys.length; i < length; i++) {\n      key = keys[i];\n      if (predicate(obj[key], key, obj)) return key;\n    }\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(object, oiteratee, context) {\n    var result = {}, obj = object, iteratee, keys;\n    if (obj == null) return result;\n    if (_.isFunction(oiteratee)) {\n      keys = _.allKeys(obj);\n      iteratee = optimizeCb(oiteratee, context);\n    } else {\n      keys = flatten(arguments, false, false, 1);\n      iteratee = function(value, key, obj) { return key in obj; };\n      obj = Object(obj);\n    }\n    for (var i = 0, length = keys.length; i < length; i++) {\n      var key = keys[i];\n      var value = obj[key];\n      if (iteratee(value, key, obj)) result[key] = value;\n    }\n    return result;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj, iteratee, context) {\n    if (_.isFunction(iteratee)) {\n      iteratee = _.negate(iteratee);\n    } else {\n      var keys = _.map(flatten(arguments, false, false, 1), String);\n      iteratee = function(value, key) {\n        return !_.contains(keys, key);\n      };\n    }\n    return _.pick(obj, iteratee, context);\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = createAssigner(_.allKeys, true);\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Returns whether an object has a given set of `key:value` pairs.\n  _.isMatch = function(object, attrs) {\n    var keys = _.keys(attrs), length = keys.length;\n    if (object == null) return !length;\n    var obj = Object(object);\n    for (var i = 0; i < length; i++) {\n      var key = keys[i];\n      if (attrs[key] !== obj[key] || !(key in obj)) return false;\n    }\n    return true;\n  };\n\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a === 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className !== toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, regular expressions, dates, and booleans are compared by value.\n      case '[object RegExp]':\n      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return '' + a === '' + b;\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive.\n        // Object(NaN) is equivalent to NaN\n        if (+a !== +a) return +b !== +b;\n        // An `egal` comparison is performed for other numeric values.\n        return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a === +b;\n    }\n\n    var areArrays = className === '[object Array]';\n    if (!areArrays) {\n      if (typeof a != 'object' || typeof b != 'object') return false;\n\n      // Objects with different constructors are not equivalent, but `Object`s or `Array`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&\n                               _.isFunction(bCtor) && bCtor instanceof bCtor)\n                          && ('constructor' in a && 'constructor' in b)) {\n        return false;\n      }\n    }\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    \n    // Initializing stack of traversed objects.\n    // It's done here since we only need them for objects and arrays comparison.\n    aStack = aStack || [];\n    bStack = bStack || [];\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] === a) return bStack[length] === b;\n    }\n\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n\n    // Recursively compare objects and arrays.\n    if (areArrays) {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      length = a.length;\n      if (length !== b.length) return false;\n      // Deep compare the contents, ignoring non-numeric properties.\n      while (length--) {\n        if (!eq(a[length], b[length], aStack, bStack)) return false;\n      }\n    } else {\n      // Deep compare objects.\n      var keys = _.keys(a), key;\n      length = keys.length;\n      // Ensure that both objects contain the same number of properties before comparing deep equality.\n      if (_.keys(b).length !== length) return false;\n      while (length--) {\n        // Deep compare each member\n        key = keys[length];\n        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return true;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n    return _.keys(obj).length === 0;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.\n  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) === '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE < 9), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return _.has(obj, 'callee');\n    };\n  }\n\n  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,\n  // IE 11 (#1621), and in Safari 8 (#1929).\n  if (typeof /./ != 'function' && typeof Int8Array != 'object') {\n    _.isFunction = function(obj) {\n      return typeof obj == 'function' || false;\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj !== +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return obj != null && hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iteratees.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Predicate-generating functions. Often useful outside of Underscore.\n  _.constant = function(value) {\n    return function() {\n      return value;\n    };\n  };\n\n  _.noop = function(){};\n\n  _.property = function(key) {\n    return function(obj) {\n      return obj == null ? void 0 : obj[key];\n    };\n  };\n\n  // Generates a function for a given object that returns a given property.\n  _.propertyOf = function(obj) {\n    return obj == null ? function(){} : function(key) {\n      return obj[key];\n    };\n  };\n\n  // Returns a predicate for checking whether an object has a given set of \n  // `key:value` pairs.\n  _.matcher = _.matches = function(attrs) {\n    attrs = _.extendOwn({}, attrs);\n    return function(obj) {\n      return _.isMatch(obj, attrs);\n    };\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iteratee, context) {\n    var accum = Array(Math.max(0, n));\n    iteratee = optimizeCb(iteratee, context, 1);\n    for (var i = 0; i < n; i++) accum[i] = iteratee(i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // A (possibly faster) way to get the current timestamp as an integer.\n  _.now = Date.now || function() {\n    return new Date().getTime();\n  };\n\n   // List of HTML entities for escaping.\n  var escapeMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  var unescapeMap = _.invert(escapeMap);\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  var createEscaper = function(map) {\n    var escaper = function(match) {\n      return map[match];\n    };\n    // Regexes for identifying a key that needs to be escaped\n    var source = '(?:' + _.keys(map).join('|') + ')';\n    var testRegexp = RegExp(source);\n    var replaceRegexp = RegExp(source, 'g');\n    return function(string) {\n      string = string == null ? '' : '' + string;\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\n    };\n  };\n  _.escape = createEscaper(escapeMap);\n  _.unescape = createEscaper(unescapeMap);\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property, fallback) {\n    var value = object == null ? void 0 : object[property];\n    if (value === void 0) {\n      value = fallback;\n    }\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\u2028|\\u2029/g;\n\n  var escapeChar = function(match) {\n    return '\\\\' + escapes[match];\n  };\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  // NB: `oldSettings` only exists for backwards compatibility.\n  _.template = function(text, settings, oldSettings) {\n    if (!settings && oldSettings) settings = oldSettings;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset).replace(escaper, escapeChar);\n      index = offset + match.length;\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      } else if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      } else if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n\n      // Adobe VMs need the match returned to produce the correct offest.\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + 'return __p;\\n';\n\n    try {\n      var render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled source as a convenience for precompilation.\n    var argument = settings.variable || 'obj';\n    template.source = 'function(' + argument + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function. Start chaining a wrapped Underscore object.\n  _.chain = function(obj) {\n    var instance = _(obj);\n    instance._chain = true;\n    return instance;\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(instance, obj) {\n    return instance._chain ? _(obj).chain() : obj;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    _.each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];\n      return result(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  _.each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  // Extracts the result from a wrapped and chained object.\n  _.prototype.value = function() {\n    return this._wrapped;\n  };\n\n  // Provide unwrapping proxy for some methods used in engine operations\n  // such as arithmetic and JSON stringification.\n  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;\n  \n  _.prototype.toString = function() {\n    return '' + this._wrapped;\n  };\n\n  // AMD registration happens at the end for compatibility with AMD loaders\n  // that may not enforce next-turn semantics on modules. Even though general\n  // practice for AMD registration is to be anonymous, underscore registers\n  // as a named module because, like jQuery, it is a base library that is\n  // popular enough to be bundled in a third party lib, but not be part of\n  // an AMD load request. Those cases could generate an error when an\n  // anonymous define() is called outside of a loader request.\n  if (typeof define === 'function' && define.amd) {\n    define('underscore', [], function() {\n      return _;\n    });\n  }\n}.call(this));","requirejs/domReady.js":"/**\n * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/requirejs/domReady for details\n */\n/*jslint */\n/*global require: false, define: false, requirejs: false,\n  window: false, clearInterval: false, document: false,\n  self: false, setInterval: false */\n\n\ndefine(function () {\n    'use strict';\n\n    var isTop, testDiv, scrollIntervalId,\n        isBrowser = typeof window !== \"undefined\" && window.document,\n        isPageLoaded = !isBrowser,\n        doc = isBrowser ? document : null,\n        readyCalls = [];\n\n    function runCallbacks(callbacks) {\n        var i;\n        for (i = 0; i < callbacks.length; i += 1) {\n            callbacks[i](doc);\n        }\n    }\n\n    function callReady() {\n        var callbacks = readyCalls;\n\n        if (isPageLoaded) {\n            //Call the DOM ready callbacks\n            if (callbacks.length) {\n                readyCalls = [];\n                runCallbacks(callbacks);\n            }\n        }\n    }\n\n    /**\n     * Sets the page as loaded.\n     */\n    function pageLoaded() {\n        if (!isPageLoaded) {\n            isPageLoaded = true;\n            if (scrollIntervalId) {\n                clearInterval(scrollIntervalId);\n            }\n\n            callReady();\n        }\n    }\n\n    if (isBrowser) {\n        if (document.addEventListener) {\n            //Standards. Hooray! Assumption here that if standards based,\n            //it knows about DOMContentLoaded.\n            document.addEventListener(\"DOMContentLoaded\", pageLoaded, false);\n            window.addEventListener(\"load\", pageLoaded, false);\n        } else if (window.attachEvent) {\n            window.attachEvent(\"onload\", pageLoaded);\n\n            testDiv = document.createElement('div');\n            try {\n                isTop = window.frameElement === null;\n            } catch (e) {}\n\n            //DOMContentLoaded approximation that uses a doScroll, as found by\n            //Diego Perini: http://javascript.nwbox.com/IEContentLoaded/,\n            //but modified by other contributors, including jdalton\n            if (testDiv.doScroll && isTop && window.external) {\n                scrollIntervalId = setInterval(function () {\n                    try {\n                        testDiv.doScroll();\n                        pageLoaded();\n                    } catch (e) {}\n                }, 30);\n            }\n        }\n\n        //Check if document already complete, and if so, just trigger page load\n        //listeners. Latest webkit browsers also use \"interactive\", and\n        //will fire the onDOMContentLoaded before \"interactive\" but not after\n        //entering \"interactive\" or \"complete\". More details:\n        //http://dev.w3.org/html5/spec/the-end.html#the-end\n        //http://stackoverflow.com/questions/3665561/document-readystate-of-interactive-vs-ondomcontentloaded\n        //Hmm, this is more complicated on further use, see \"firing too early\"\n        //bug: https://github.com/requirejs/domReady/issues/1\n        //so removing the || document.readyState === \"interactive\" test.\n        //There is still a window.onload binding that should get fired if\n        //DOMContentLoaded is missed.\n        if (document.readyState === \"complete\") {\n            pageLoaded();\n        }\n    }\n\n    /** START OF PUBLIC API **/\n\n    /**\n     * Registers a callback for DOM ready. If DOM is already ready, the\n     * callback is called immediately.\n     * @param {Function} callback\n     */\n    function domReady(callback) {\n        if (isPageLoaded) {\n            callback(doc);\n        } else {\n            readyCalls.push(callback);\n        }\n        return domReady;\n    }\n\n    domReady.version = '2.0.1';\n\n    /**\n     * Loader Plugin API method\n     */\n    domReady.load = function (name, req, onLoad, config) {\n        if (config.isBuild) {\n            onLoad(null);\n        } else {\n            domReady(onLoad);\n        }\n    };\n\n    /** END OF PUBLIC API **/\n\n    return domReady;\n});","jquery/jquery-migrate.js":"/*!\n * jQuery Migrate - v1.2.1 - 2013-05-08\n * https://github.com/jquery/jquery-migrate\n * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT\n */\n(function( jQuery, window, undefined ) {\n// See http://bugs.jquery.com/ticket/13335\n// \"use strict\";\n\n\nvar warnedAbout = {};\n\n// List of warnings already given; public read only\njQuery.migrateWarnings = [];\n\n// Set to true to prevent console output; migrateWarnings still maintained\n// jQuery.migrateMute = false;\n\n// Show a message on the console so devs know we're active\nif ( !jQuery.migrateMute && window.console && window.console.log ) {\n\twindow.console.log(\"JQMIGRATE: Logging is active\");\n}\n\n// Set to false to disable traces that appear with warnings\nif ( jQuery.migrateTrace === undefined ) {\n\tjQuery.migrateTrace = true;\n}\n\n// Forget any warnings we've already given; public\njQuery.migrateReset = function() {\n\twarnedAbout = {};\n\tjQuery.migrateWarnings.length = 0;\n};\n\nfunction migrateWarn( msg) {\n\tvar console = window.console;\n\tif ( !warnedAbout[ msg ] ) {\n\t\twarnedAbout[ msg ] = true;\n\t\tjQuery.migrateWarnings.push( msg );\n\t\tif ( console && console.warn && !jQuery.migrateMute ) {\n\t\t\tconsole.warn( \"JQMIGRATE: \" + msg );\n\t\t\tif ( jQuery.migrateTrace && console.trace ) {\n\t\t\t\tconsole.trace();\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction migrateWarnProp( obj, prop, value, msg ) {\n\tif ( Object.defineProperty ) {\n\t\t// On ES5 browsers (non-oldIE), warn if the code tries to get prop;\n\t\t// allow property to be overwritten in case some other plugin wants it\n\t\ttry {\n\t\t\tObject.defineProperty( obj, prop, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function() {\n\t\t\t\t\tmigrateWarn( msg );\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\tset: function( newValue ) {\n\t\t\t\t\tmigrateWarn( msg );\n\t\t\t\t\tvalue = newValue;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t} catch( err ) {\n\t\t\t// IE8 is a dope about Object.defineProperty, can't warn there\n\t\t}\n\t}\n\n\t// Non-ES5 (or broken) browser; just set the property\n\tjQuery._definePropertyBroken = true;\n\tobj[ prop ] = value;\n}\n\nif ( document.compatMode === \"BackCompat\" ) {\n\t// jQuery has never supported or tested Quirks Mode\n\tmigrateWarn( \"jQuery is not compatible with Quirks Mode\" );\n}\n\n\nvar attrFn = jQuery( \"<input/>\", { size: 1 } ).attr(\"size\") && jQuery.attrFn,\n\toldAttr = jQuery.attr,\n\tvalueAttrGet = jQuery.attrHooks.value && jQuery.attrHooks.value.get ||\n\t\tfunction() { return null; },\n\tvalueAttrSet = jQuery.attrHooks.value && jQuery.attrHooks.value.set ||\n\t\tfunction() { return undefined; },\n\trnoType = /^(?:input|button)$/i,\n\trnoAttrNodeType = /^[238]$/,\n\trboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\n\truseDefault = /^(?:checked|selected)$/i;\n\n// jQuery.attrFn\nmigrateWarnProp( jQuery, \"attrFn\", attrFn || {}, \"jQuery.attrFn is deprecated\" );\n\njQuery.attr = function( elem, name, value, pass ) {\n\tvar lowerName = name.toLowerCase(),\n\t\tnType = elem && elem.nodeType;\n\n\tif ( pass ) {\n\t\t// Since pass is used internally, we only warn for new jQuery\n\t\t// versions where there isn't a pass arg in the formal params\n\t\tif ( oldAttr.length < 4 ) {\n\t\t\tmigrateWarn(\"jQuery.fn.attr( props, pass ) is deprecated\");\n\t\t}\n\t\tif ( elem && !rnoAttrNodeType.test( nType ) &&\n\t\t\t(attrFn ? name in attrFn : jQuery.isFunction(jQuery.fn[name])) ) {\n\t\t\treturn jQuery( elem )[ name ]( value );\n\t\t}\n\t}\n\n\t// Warn if user tries to set `type`, since it breaks on IE 6/7/8; by checking\n\t// for disconnected elements we don't warn on $( \"<button>\", { type: \"button\" } ).\n\tif ( name === \"type\" && value !== undefined && rnoType.test( elem.nodeName ) && elem.parentNode ) {\n\t\tmigrateWarn(\"Can't change the 'type' of an input or button in IE 6/7/8\");\n\t}\n\n\t// Restore boolHook for boolean property/attribute synchronization\n\tif ( !jQuery.attrHooks[ lowerName ] && rboolean.test( lowerName ) ) {\n\t\tjQuery.attrHooks[ lowerName ] = {\n\t\t\tget: function( elem, name ) {\n\t\t\t\t// Align boolean attributes with corresponding properties\n\t\t\t\t// Fall back to attribute presence where some booleans are not supported\n\t\t\t\tvar attrNode,\n\t\t\t\t\tproperty = jQuery.prop( elem, name );\n\t\t\t\treturn property === true || typeof property !== \"boolean\" &&\n\t\t\t\t\t( attrNode = elem.getAttributeNode(name) ) && attrNode.nodeValue !== false ?\n\n\t\t\t\t\tname.toLowerCase() :\n\t\t\t\t\tundefined;\n\t\t\t},\n\t\t\tset: function( elem, value, name ) {\n\t\t\t\tvar propName;\n\t\t\t\tif ( value === false ) {\n\t\t\t\t\t// Remove boolean attributes when set to false\n\t\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\t} else {\n\t\t\t\t\t// value is true since we know at this point it's type boolean and not false\n\t\t\t\t\t// Set boolean attributes to the same name and set the DOM property\n\t\t\t\t\tpropName = jQuery.propFix[ name ] || name;\n\t\t\t\t\tif ( propName in elem ) {\n\t\t\t\t\t\t// Only set the IDL specifically if it already exists on the element\n\t\t\t\t\t\telem[ propName ] = true;\n\t\t\t\t\t}\n\n\t\t\t\t\telem.setAttribute( name, name.toLowerCase() );\n\t\t\t\t}\n\t\t\t\treturn name;\n\t\t\t}\n\t\t};\n\n\t\t// Warn only for attributes that can remain distinct from their properties post-1.9\n\t\tif ( ruseDefault.test( lowerName ) ) {\n\t\t\tmigrateWarn( \"jQuery.fn.attr('\" + lowerName + \"') may use property instead of attribute\" );\n\t\t}\n\t}\n\n\treturn oldAttr.call( jQuery, elem, name, value );\n};\n\n// attrHooks: value\njQuery.attrHooks.value = {\n\tget: function( elem, name ) {\n\t\tvar nodeName = ( elem.nodeName || \"\" ).toLowerCase();\n\t\tif ( nodeName === \"button\" ) {\n\t\t\treturn valueAttrGet.apply( this, arguments );\n\t\t}\n\t\tif ( nodeName !== \"input\" && nodeName !== \"option\" ) {\n\t\t\tmigrateWarn(\"jQuery.fn.attr('value') no longer gets properties\");\n\t\t}\n\t\treturn name in elem ?\n\t\t\telem.value :\n\t\t\tnull;\n\t},\n\tset: function( elem, value ) {\n\t\tvar nodeName = ( elem.nodeName || \"\" ).toLowerCase();\n\t\tif ( nodeName === \"button\" ) {\n\t\t\treturn valueAttrSet.apply( this, arguments );\n\t\t}\n\t\tif ( nodeName !== \"input\" && nodeName !== \"option\" ) {\n\t\t\tmigrateWarn(\"jQuery.fn.attr('value', val) no longer sets properties\");\n\t\t}\n\t\t// Does not return so that setAttribute is also used\n\t\telem.value = value;\n\t}\n};\n\n\nvar matched, browser,\n\toldInit = jQuery.fn.init,\n\toldParseJSON = jQuery.parseJSON,\n\t// Note: XSS check is done below after string is trimmed\n\trquickExpr = /^([^<]*)(<[\\w\\W]+>)([^>]*)$/;\n\n// $(html) \"looks like html\" rule change\njQuery.fn.init = function( selector, context, rootjQuery ) {\n\tvar match;\n\n\tif ( selector && typeof selector === \"string\" && !jQuery.isPlainObject( context ) &&\n\t\t\t(match = rquickExpr.exec( jQuery.trim( selector ) )) && match[ 0 ] ) {\n\t\t// This is an HTML string according to the \"old\" rules; is it still?\n\t\tif ( selector.charAt( 0 ) !== \"<\" ) {\n\t\t\tmigrateWarn(\"$(html) HTML strings must start with '<' character\");\n\t\t}\n\t\tif ( match[ 3 ] ) {\n\t\t\tmigrateWarn(\"$(html) HTML text after last tag is ignored\");\n\t\t}\n\t\t// Consistently reject any HTML-like string starting with a hash (#9521)\n\t\t// Note that this may break jQuery 1.6.x code that otherwise would work.\n\t\tif ( match[ 0 ].charAt( 0 ) === \"#\" ) {\n\t\t\tmigrateWarn(\"HTML string cannot start with a '#' character\");\n\t\t\tjQuery.error(\"JQMIGRATE: Invalid selector string (XSS)\");\n\t\t}\n\t\t// Now process using loose rules; let pre-1.8 play too\n\t\tif ( context && context.context ) {\n\t\t\t// jQuery object as context; parseHTML expects a DOM object\n\t\t\tcontext = context.context;\n\t\t}\n\t\tif ( jQuery.parseHTML ) {\n\t\t\treturn oldInit.call( this, jQuery.parseHTML( match[ 2 ], context, true ),\n\t\t\t\t\tcontext, rootjQuery );\n\t\t}\n\t}\n\treturn oldInit.apply( this, arguments );\n};\njQuery.fn.init.prototype = jQuery.fn;\n\n// Let $.parseJSON(falsy_value) return null\njQuery.parseJSON = function( json ) {\n\tif ( !json && json !== null ) {\n\t\tmigrateWarn(\"jQuery.parseJSON requires a valid JSON string\");\n\t\treturn null;\n\t}\n\treturn oldParseJSON.apply( this, arguments );\n};\n\njQuery.uaMatch = function( ua ) {\n\tua = ua.toLowerCase();\n\n\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\n\t\t/(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\n\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\n\t\t/(msie) ([\\w.]+)/.exec( ua ) ||\n\t\tua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\n\t\t[];\n\n\treturn {\n\t\tbrowser: match[ 1 ] || \"\",\n\t\tversion: match[ 2 ] || \"0\"\n\t};\n};\n\n// Don't clobber any existing jQuery.browser in case it's different\nif ( !jQuery.browser ) {\n\tmatched = jQuery.uaMatch( navigator.userAgent );\n\tbrowser = {};\n\n\tif ( matched.browser ) {\n\t\tbrowser[ matched.browser ] = true;\n\t\tbrowser.version = matched.version;\n\t}\n\n\t// Chrome is Webkit, but Webkit is also Safari.\n\tif ( browser.chrome ) {\n\t\tbrowser.webkit = true;\n\t} else if ( browser.webkit ) {\n\t\tbrowser.safari = true;\n\t}\n\n\tjQuery.browser = browser;\n}\n\n// Warn if the code tries to get jQuery.browser\nmigrateWarnProp( jQuery, \"browser\", jQuery.browser, \"jQuery.browser is deprecated\" );\n\njQuery.sub = function() {\n\tfunction jQuerySub( selector, context ) {\n\t\treturn new jQuerySub.fn.init( selector, context );\n\t}\n\tjQuery.extend( true, jQuerySub, this );\n\tjQuerySub.superclass = this;\n\tjQuerySub.fn = jQuerySub.prototype = this();\n\tjQuerySub.fn.constructor = jQuerySub;\n\tjQuerySub.sub = this.sub;\n\tjQuerySub.fn.init = function init( selector, context ) {\n\t\tif ( context && context instanceof jQuery && !(context instanceof jQuerySub) ) {\n\t\t\tcontext = jQuerySub( context );\n\t\t}\n\n\t\treturn jQuery.fn.init.call( this, selector, context, rootjQuerySub );\n\t};\n\tjQuerySub.fn.init.prototype = jQuerySub.fn;\n\tvar rootjQuerySub = jQuerySub(document);\n\tmigrateWarn( \"jQuery.sub() is deprecated\" );\n\treturn jQuerySub;\n};\n\n\n// Ensure that $.ajax gets the new parseJSON defined in core.js\njQuery.ajaxSetup({\n\tconverters: {\n\t\t\"text json\": jQuery.parseJSON\n\t}\n});\n\n\nvar oldFnData = jQuery.fn.data;\n\njQuery.fn.data = function( name ) {\n\tvar ret, evt,\n\t\telem = this[0];\n\n\t// Handles 1.7 which has this behavior and 1.8 which doesn't\n\tif ( elem && name === \"events\" && arguments.length === 1 ) {\n\t\tret = jQuery.data( elem, name );\n\t\tevt = jQuery._data( elem, name );\n\t\tif ( ( ret === undefined || ret === evt ) && evt !== undefined ) {\n\t\t\tmigrateWarn(\"Use of jQuery.fn.data('events') is deprecated\");\n\t\t\treturn evt;\n\t\t}\n\t}\n\treturn oldFnData.apply( this, arguments );\n};\n\n\nvar rscriptType = /\\/(java|ecma)script/i,\n\toldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\n\njQuery.fn.andSelf = function() {\n\tmigrateWarn(\"jQuery.fn.andSelf() replaced by jQuery.fn.addBack()\");\n\treturn oldSelf.apply( this, arguments );\n};\n\n// Since jQuery.clean is used internally on older versions, we only shim if it's missing\nif ( !jQuery.clean ) {\n\tjQuery.clean = function( elems, context, fragment, scripts ) {\n\t\t// Set context per 1.8 logic\n\t\tcontext = context || document;\n\t\tcontext = !context.nodeType && context[0] || context;\n\t\tcontext = context.ownerDocument || context;\n\n\t\tmigrateWarn(\"jQuery.clean() is deprecated\");\n\n\t\tvar i, elem, handleScript, jsTags,\n\t\t\tret = [];\n\n\t\tjQuery.merge( ret, jQuery.buildFragment( elems, context ).childNodes );\n\n\t\t// Complex logic lifted directly from jQuery 1.8\n\t\tif ( fragment ) {\n\t\t\t// Special handling of each script element\n\t\t\thandleScript = function( elem ) {\n\t\t\t\t// Check if we consider it executable\n\t\t\t\tif ( !elem.type || rscriptType.test( elem.type ) ) {\n\t\t\t\t\t// Detach the script and store it in the scripts array (if provided) or the fragment\n\t\t\t\t\t// Return truthy to indicate that it has been handled\n\t\t\t\t\treturn scripts ?\n\t\t\t\t\t\tscripts.push( elem.parentNode ? elem.parentNode.removeChild( elem ) : elem ) :\n\t\t\t\t\t\tfragment.appendChild( elem );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor ( i = 0; (elem = ret[i]) != null; i++ ) {\n\t\t\t\t// Check if we're done after handling an executable script\n\t\t\t\tif ( !( jQuery.nodeName( elem, \"script\" ) && handleScript( elem ) ) ) {\n\t\t\t\t\t// Append to fragment and handle embedded scripts\n\t\t\t\t\tfragment.appendChild( elem );\n\t\t\t\t\tif ( typeof elem.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\t\t\t// handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration\n\t\t\t\t\t\tjsTags = jQuery.grep( jQuery.merge( [], elem.getElementsByTagName(\"script\") ), handleScript );\n\n\t\t\t\t\t\t// Splice the scripts into ret after their former ancestor and advance our index beyond them\n\t\t\t\t\t\tret.splice.apply( ret, [i + 1, 0].concat( jsTags ) );\n\t\t\t\t\t\ti += jsTags.length;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t};\n}\n\nvar eventAdd = jQuery.event.add,\n\teventRemove = jQuery.event.remove,\n\teventTrigger = jQuery.event.trigger,\n\toldToggle = jQuery.fn.toggle,\n\toldLive = jQuery.fn.live,\n\toldDie = jQuery.fn.die,\n\tajaxEvents = \"ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess\",\n\trajaxEvent = new RegExp( \"\\\\b(?:\" + ajaxEvents + \")\\\\b\" ),\n\trhoverHack = /(?:^|\\s)hover(\\.\\S+|)\\b/,\n\thoverHack = function( events ) {\n\t\tif ( typeof( events ) !== \"string\" || jQuery.event.special.hover ) {\n\t\t\treturn events;\n\t\t}\n\t\tif ( rhoverHack.test( events ) ) {\n\t\t\tmigrateWarn(\"'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'\");\n\t\t}\n\t\treturn events && events.replace( rhoverHack, \"mouseenter$1 mouseleave$1\" );\n\t};\n\n// Event props removed in 1.9, put them back if needed; no practical way to warn them\nif ( jQuery.event.props && jQuery.event.props[ 0 ] !== \"attrChange\" ) {\n\tjQuery.event.props.unshift( \"attrChange\", \"attrName\", \"relatedNode\", \"srcElement\" );\n}\n\n// Undocumented jQuery.event.handle was \"deprecated\" in jQuery 1.7\nif ( jQuery.event.dispatch ) {\n\tmigrateWarnProp( jQuery.event, \"handle\", jQuery.event.dispatch, \"jQuery.event.handle is undocumented and deprecated\" );\n}\n\n// Support for 'hover' pseudo-event and ajax event warnings\njQuery.event.add = function( elem, types, handler, data, selector ){\n\tif ( elem !== document && rajaxEvent.test( types ) ) {\n\t\tmigrateWarn( \"AJAX events should be attached to document: \" + types );\n\t}\n\teventAdd.call( this, elem, hoverHack( types || \"\" ), handler, data, selector );\n};\njQuery.event.remove = function( elem, types, handler, selector, mappedTypes ){\n\teventRemove.call( this, elem, hoverHack( types ) || \"\", handler, selector, mappedTypes );\n};\n\njQuery.fn.error = function() {\n\tvar args = Array.prototype.slice.call( arguments, 0);\n\tmigrateWarn(\"jQuery.fn.error() is deprecated\");\n\targs.splice( 0, 0, \"error\" );\n\tif ( arguments.length ) {\n\t\treturn this.bind.apply( this, args );\n\t}\n\t// error event should not bubble to window, although it does pre-1.7\n\tthis.triggerHandler.apply( this, args );\n\treturn this;\n};\n\njQuery.fn.toggle = function( fn, fn2 ) {\n\n\t// Don't mess with animation or css toggles\n\tif ( !jQuery.isFunction( fn ) || !jQuery.isFunction( fn2 ) ) {\n\t\treturn oldToggle.apply( this, arguments );\n\t}\n\tmigrateWarn(\"jQuery.fn.toggle(handler, handler...) is deprecated\");\n\n\t// Save reference to arguments for access in closure\n\tvar args = arguments,\n\t\tguid = fn.guid || jQuery.guid++,\n\t\ti = 0,\n\t\ttoggler = function( event ) {\n\t\t\t// Figure out which function to execute\n\t\t\tvar lastToggle = ( jQuery._data( this, \"lastToggle\" + fn.guid ) || 0 ) % i;\n\t\t\tjQuery._data( this, \"lastToggle\" + fn.guid, lastToggle + 1 );\n\n\t\t\t// Make sure that clicks stop\n\t\t\tevent.preventDefault();\n\n\t\t\t// and execute the function\n\t\t\treturn args[ lastToggle ].apply( this, arguments ) || false;\n\t\t};\n\n\t// link all the functions, so any of them can unbind this click handler\n\ttoggler.guid = guid;\n\twhile ( i < args.length ) {\n\t\targs[ i++ ].guid = guid;\n\t}\n\n\treturn this.click( toggler );\n};\n\njQuery.fn.live = function( types, data, fn ) {\n\tmigrateWarn(\"jQuery.fn.live() is deprecated\");\n\tif ( oldLive ) {\n\t\treturn oldLive.apply( this, arguments );\n\t}\n\tjQuery( this.context ).on( types, this.selector, data, fn );\n\treturn this;\n};\n\njQuery.fn.die = function( types, fn ) {\n\tmigrateWarn(\"jQuery.fn.die() is deprecated\");\n\tif ( oldDie ) {\n\t\treturn oldDie.apply( this, arguments );\n\t}\n\tjQuery( this.context ).off( types, this.selector || \"**\", fn );\n\treturn this;\n};\n\n// Turn global events into document-triggered events\njQuery.event.trigger = function( event, data, elem, onlyHandlers  ){\n\tif ( !elem && !rajaxEvent.test( event ) ) {\n\t\tmigrateWarn( \"Global events are undocumented and deprecated\" );\n\t}\n\treturn eventTrigger.call( this,  event, data, elem || document, onlyHandlers  );\n};\njQuery.each( ajaxEvents.split(\"|\"),\n\tfunction( _, name ) {\n\t\tjQuery.event.special[ name ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\t// The document needs no shimming; must be !== for oldIE\n\t\t\t\tif ( elem !== document ) {\n\t\t\t\t\tjQuery.event.add( document, name + \".\" + jQuery.guid, function() {\n\t\t\t\t\t\tjQuery.event.trigger( name, null, elem, true );\n\t\t\t\t\t});\n\t\t\t\t\tjQuery._data( this, name, jQuery.guid++ );\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tif ( this !== document ) {\n\t\t\t\t\tjQuery.event.remove( document, name + \".\" + jQuery._data( this, name ) );\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t};\n\t}\n);\n\n\n})( jQuery, window );\n","jquery/jquery.cookie.js":"/*jshint eqnull:true */\n/*!\n * jQuery Cookie Plugin v1.1\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2011, Klaus Hartl\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://www.opensource.org/licenses/mit-license.php\n * http://www.opensource.org/licenses/GPL-2.0\n */\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([\"jquery\"], factory);\n    } else {\n        factory(jQuery);\n    }\n}(function ($) {\n\n    var pluses = /\\+/g;\n    function raw(s) {\n        return s;\n    }\n    function decoded(s) {\n        return decodeURIComponent(s.replace(pluses, ' '));\n    }\n\n    $.cookie = function(key, value, options) {\n\n        // key and at least value given, set cookie...\n        if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value == null)) {\n            options = $.extend({}, $.cookie.defaults, options);\n\n            if (value == null) {\n                options.expires = -1;\n            }\n\n            if (typeof options.expires === 'number') {\n                var days = options.expires, t = options.expires = new Date();\n                t.setDate(t.getDate() + days);\n            }\n\n            value = String(value);\n\n            return (document.cookie = [\n                encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value),\n                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n                options.path    ? '; path=' + options.path : '',\n                options.domain  ? '; domain=' + options.domain : '',\n                options.secure  ? '; secure' : ''\n            ].join(''));\n        }\n\n        // key and possibly options given, get cookie...\n        options = value || $.cookie.defaults || {};\n        var decode = options.raw ? raw : decoded;\n        var cookies = document.cookie.split('; ');\n        for (var i = 0, parts; (parts = cookies[i] && cookies[i].split('=')); i++) {\n            if (decode(parts.shift()) === key) {\n                return decode(parts.join('='));\n            }\n        }\n        return null;\n    };\n\n    $.cookie.defaults = {};\n\n}));\n","jquery/jquery.validate.js":"/**\n * jQuery Validation Plugin @VERSION\n *\n * http://bassistance.de/jquery-plugins/jquery-plugin-validation/\n * http://docs.jquery.com/Plugins/Validation\n *\n * Copyright (c) 2012 J\u00c3\u00b6rn Zaefferer\n *\n * Dual licensed under the MIT and GPL licenses:\n *   http://www.opensource.org/licenses/mit-license.php\n *   http://www.gnu.org/licenses/gpl.html\n */\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([\n            \"jquery\",\n            \"jquery/jquery.metadata\"\n        ], factory);\n    } else {\n        factory(jQuery);\n    }\n}(function (jQuery) {\n\n(function ($) {\n\n    $.extend($.fn, {\n        // http://docs.jquery.com/Plugins/Validation/validate\n        validate: function (options) {\n\n            // if nothing is selected, return nothing; can't chain anyway\n            if (!this.length) {\n                if (options && options.debug && window.console) {\n                    console.warn(\"nothing selected, can't validate, returning nothing\");\n                }\n                return;\n            }\n\n            // check if a validator for this form was already created\n            var validator = $.data(this[0], 'validator');\n            if (validator) {\n                return validator;\n            }\n\n            // Add novalidate tag if HTML5.\n            this.attr('novalidate', 'novalidate');\n\n            validator = new $.validator(options, this[0]);\n            $.data(this[0], 'validator', validator);\n\n            if (validator.settings.onsubmit) {\n\n                this.validateDelegate(\":submit\", \"click\", function (ev) {\n                    if (validator.settings.submitHandler) {\n                        validator.submitButton = ev.target;\n                    }\n                    // allow suppressing validation by adding a cancel class to the submit button\n                    if ($(ev.target).hasClass('cancel')) {\n                        validator.cancelSubmit = true;\n                    }\n                });\n\n                // validate the form on submit\n                this.submit(function (event) {\n                    if (validator.settings.debug) {\n                        // prevent form submit to be able to see console output\n                        event.preventDefault();\n                    }\n                    function handle() {\n                        var hidden;\n                        if (validator.settings.submitHandler) {\n                            if (validator.submitButton) {\n                                // insert a hidden input as a replacement for the missing submit button\n                                hidden = $(\"<input type='hidden'/>\").attr(\"name\", validator.submitButton.name).val(validator.submitButton.value).appendTo(validator.currentForm);\n                            }\n                            validator.settings.submitHandler.call(validator, validator.currentForm, event);\n                            if (validator.submitButton) {\n                                // and clean up afterwards; thanks to no-block-scope, hidden can be referenced\n                                hidden.remove();\n                            }\n                            return false;\n                        }\n                        return true;\n                    }\n\n                    // prevent submit for invalid forms or custom submit handlers\n                    if (validator.cancelSubmit) {\n                        validator.cancelSubmit = false;\n                        return handle();\n                    }\n                    if (validator.form()) {\n                        if (validator.pendingRequest) {\n                            validator.formSubmitted = true;\n                            return false;\n                        }\n                        return handle();\n                    } else {\n                        validator.focusInvalid();\n                        return false;\n                    }\n                });\n            }\n\n            return validator;\n        },\n        // http://docs.jquery.com/Plugins/Validation/valid\n        valid: function () {\n            if ($(this[0]).is('form')) {\n                return this.validate().form();\n            } else {\n                var valid = true;\n                var validator = $(this[0].form).validate();\n                this.each(function () {\n                    valid &= validator.element(this);\n                });\n                return valid;\n            }\n        },\n        // attributes: space seperated list of attributes to retrieve and remove\n        removeAttrs: function (attributes) {\n            var result = {},\n                $element = this;\n            $.each(attributes.split(/\\s/), function (index, value) {\n                result[value] = $element.attr(value);\n                $element.removeAttr(value);\n            });\n            return result;\n        },\n        // http://docs.jquery.com/Plugins/Validation/rules\n        rules: function (command, argument) {\n            var element = this[0];\n\n            if (command) {\n                var settings = $.data(element.form, 'validator').settings;\n                var staticRules = settings.rules;\n                var existingRules = $.validator.staticRules(element);\n                switch (command) {\n                    case \"add\":\n                        $.extend(existingRules, $.validator.normalizeRule(argument));\n                        staticRules[element.name] = existingRules;\n                        if (argument.messages) {\n                            settings.messages[element.name] = $.extend(settings.messages[element.name], argument.messages);\n                        }\n                        break;\n                    case \"remove\":\n                        if (!argument) {\n                            delete staticRules[element.name];\n                            return existingRules;\n                        }\n                        var filtered = {};\n                        $.each(argument.split(/\\s/), function (index, method) {\n                            filtered[method] = existingRules[method];\n                            delete existingRules[method];\n                        });\n                        return filtered;\n                }\n            }\n\n            var data = $.validator.normalizeRules(\n                $.extend(\n                    {},\n                    $.validator.metadataRules(element),\n                    $.validator.classRules(element),\n                    $.validator.attributeRules(element),\n                    $.validator.staticRules(element)\n                ), element);\n\n            // make sure required is at front\n            if (data.required) {\n                var param = data.required;\n                delete data.required;\n                data = $.extend({required: param}, data);\n            }\n\n            return data;\n        }\n    });\n\n// Custom selectors\n    $.extend($.expr[\":\"], {\n        // http://docs.jquery.com/Plugins/Validation/blank\n        blank: function (a) {\n            return !$.trim(\"\" + a.value);\n        },\n        // http://docs.jquery.com/Plugins/Validation/filled\n        filled: function (a) {\n            return !!$.trim(\"\" + a.value);\n        },\n        // http://docs.jquery.com/Plugins/Validation/unchecked\n        unchecked: function (a) {\n            return !a.checked;\n        }\n    });\n\n// constructor for validator\n    $.validator = function (options, form) {\n        this.settings = $.extend(true, {}, $.validator.defaults, options);\n        this.currentForm = form;\n        this.init();\n    };\n\n    $.validator.format = function (source, params) {\n        if (arguments.length === 1) {\n            return function () {\n                var args = $.makeArray(arguments);\n                args.unshift(source);\n                return $.validator.format.apply(this, args);\n            };\n        }\n        if (arguments.length > 2 && params.constructor !== Array) {\n            params = $.makeArray(arguments).slice(1);\n        }\n        if (params.constructor !== Array) {\n            params = [ params ];\n        }\n        $.each(params, function (i, n) {\n            source = source.replace(new RegExp(\"\\\\{\" + i + \"\\\\}\", \"g\"), n);\n        });\n        return source;\n    };\n\n    $.extend($.validator, {\n\n        defaults: {\n            messages: {},\n            groups: {},\n            rules: {},\n            errorClass: \"error\",\n            validClass: \"valid\",\n            errorElement: \"label\",\n            focusInvalid: true,\n            errorContainer: $([]),\n            errorLabelContainer: $([]),\n            onsubmit: true,\n            ignore: \":hidden\",\n            ignoreTitle: false,\n            onfocusin: function (element, event) {\n                this.lastActive = element;\n\n                // hide error label and remove error class on focus if enabled\n                if (this.settings.focusCleanup && !this.blockFocusCleanup) {\n                    if (this.settings.unhighlight) {\n                        this.settings.unhighlight.call(this, element, this.settings.errorClass, this.settings.validClass);\n                    }\n                    this.addWrapper(this.errorsFor(element)).hide();\n                }\n            },\n            onfocusout: function (element, event) {\n                if (!this.checkable(element) && (element.name in this.submitted || !this.optional(element))) {\n                    this.element(element);\n                }\n            },\n            onkeyup: function (element, event) {\n                if (event.which == 9 && this.elementValue(element) === '') {\n                    return;\n                } else if (element.name in this.submitted || element === this.lastActive) {\n                    this.element(element);\n                }\n            },\n            onclick: function (element, event) {\n                // click on selects, radiobuttons and checkboxes\n                if (element.name in this.submitted) {\n                    this.element(element);\n                }\n                // or option elements, check parent select in that case\n                else if (element.parentNode.name in this.submitted) {\n                    this.element(element.parentNode);\n                }\n            },\n            highlight: function (element, errorClass, validClass) {\n                if (element.type === 'radio') {\n                    this.findByName(element.name).addClass(errorClass).removeClass(validClass);\n                } else {\n                    $(element).addClass(errorClass).removeClass(validClass);\n                }\n            },\n            unhighlight: function (element, errorClass, validClass) {\n                if (element.type === 'radio') {\n                    this.findByName(element.name).removeClass(errorClass).addClass(validClass);\n                } else {\n                    $(element).removeClass(errorClass).addClass(validClass);\n                }\n            }\n        },\n\n        // http://docs.jquery.com/Plugins/Validation/Validator/setDefaults\n        setDefaults: function (settings) {\n            $.extend($.validator.defaults, settings);\n        },\n\n        messages: {\n            required: \"This field is required.\",\n            remote: \"Please fix this field.\",\n            email: \"Please enter a valid email address.\",\n            url: \"Please enter a valid URL.\",\n            date: \"Please enter a valid date.\",\n            dateISO: \"Please enter a valid date (ISO).\",\n            number: \"Please enter a valid number.\",\n            digits: \"Please enter only digits.\",\n            creditcard: \"Please enter a valid credit card number.\",\n            equalTo: \"Please enter the same value again.\",\n            maxlength: $.validator.format(\"Please enter no more than {0} characters.\"),\n            minlength: $.validator.format(\"Please enter at least {0} characters.\"),\n            rangelength: $.validator.format(\"Please enter a value between {0} and {1} characters long.\"),\n            range: $.validator.format(\"Please enter a value between {0} and {1}.\"),\n            max: $.validator.format(\"Please enter a value less than or equal to {0}.\"),\n            min: $.validator.format(\"Please enter a value greater than or equal to {0}.\")\n        },\n\n        autoCreateRanges: false,\n\n        prototype: {\n\n            init: function () {\n                this.labelContainer = $(this.settings.errorLabelContainer);\n                this.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);\n                this.containers = $(this.settings.errorContainer).add(this.settings.errorLabelContainer);\n                this.submitted = {};\n                this.valueCache = {};\n                this.pendingRequest = 0;\n                this.pending = {};\n                this.invalid = {};\n                this.reset();\n\n                var groups = (this.groups = {});\n                $.each(this.settings.groups, function (key, value) {\n                    $.each(value.split(/\\s/), function (index, name) {\n                        groups[name] = key;\n                    });\n                });\n                var rules = this.settings.rules;\n                $.each(rules, function (key, value) {\n                    rules[key] = $.validator.normalizeRule(value);\n                });\n\n                function delegate(event) {\n                    var validator = $.data(this[0].form, \"validator\"),\n                        eventType = \"on\" + event.type.replace(/^validate/, \"\");\n                    if (validator.settings[eventType]) {\n                        validator.settings[eventType].call(validator, this[0], event);\n                    }\n                }\n\n                $(this.currentForm)\n                    .validateDelegate(\":text, [type='password'], [type='file'], select, textarea, \" +\n                    \"[type='number'], [type='search'], input.search, [type='tel'], [type='url'], \" +\n                    \"[type='email'], [type='datetime'], [type='date'], [type='month'], \" +\n                    \"[type='week'], [type='time'], [type='datetime-local'], \" +\n                    \"[type='range'], [type='color'] \",\n                    \"focusin focusout keyup\", delegate)\n                    .validateDelegate(\"[type='radio'], [type='checkbox'], select, option\", \"click\", delegate);\n\n                if (this.settings.invalidHandler) {\n                    $(this.currentForm).bind(\"invalid-form.validate\", this.settings.invalidHandler);\n                }\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Validator/form\n            form: function () {\n                this.checkForm();\n                $.extend(this.submitted, this.errorMap);\n                this.invalid = $.extend({}, this.errorMap);\n                if (!this.valid()) {\n                    $(this.currentForm).triggerHandler(\"invalid-form\", [this]);\n                }\n                this.showErrors();\n                return this.valid();\n            },\n\n            checkForm: function () {\n                this.prepareForm();\n                for (var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++) {\n                    this.check(elements[i]);\n                }\n                return this.valid();\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Validator/element\n            element: function (element) {\n                element = this.validationTargetFor(this.clean(element));\n                this.lastElement = element;\n                this.prepareElement(element);\n                this.currentElements = $(element);\n                var result = this.check(element) !== false;\n                if (result) {\n                    delete this.invalid[element.name];\n                } else {\n                    this.invalid[element.name] = true;\n                }\n                if (!this.numberOfInvalids()) {\n                    // Hide error containers on last error\n                    this.toHide = this.toHide.add(this.containers);\n                }\n                this.showErrors();\n                return result;\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Validator/showErrors\n            showErrors: function (errors) {\n                if (errors) {\n                    // add items to error list and map\n                    $.extend(this.errorMap, errors);\n                    this.errorList = [];\n                    for (var name in errors) {\n                        this.errorList.push({\n                            message: errors[name],\n                            element: this.findByName(name)[0]\n                        });\n                    }\n                    // remove items from success list\n                    this.successList = $.grep(this.successList, function (element) {\n                        return !(element.name in errors);\n                    });\n                }\n                if (this.settings.showErrors) {\n                    this.settings.showErrors.call(this, this.errorMap, this.errorList);\n                } else {\n                    this.defaultShowErrors();\n                }\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Validator/resetForm\n            resetForm: function () {\n                if ($.fn.resetForm) {\n                    $(this.currentForm).resetForm();\n                }\n                this.submitted = {};\n                this.lastElement = null;\n                this.prepareForm();\n                this.hideErrors();\n                this.elements().removeClass(this.settings.errorClass).removeData(\"previousValue\");\n            },\n\n            numberOfInvalids: function () {\n                return this.objectLength(this.invalid);\n            },\n\n            objectLength: function (obj) {\n                var count = 0;\n                for (var i in obj) {\n                    count++;\n                }\n                return count;\n            },\n\n            hideErrors: function () {\n                this.addWrapper(this.toHide).hide();\n            },\n\n            valid: function () {\n                return this.size() === 0;\n            },\n\n            size: function () {\n                return this.errorList.length;\n            },\n\n            focusInvalid: function () {\n                if (this.settings.focusInvalid) {\n                    try {\n                        $(this.findLastActive() || this.errorList.length && this.errorList[0].element || [])\n                            .filter(\":visible\")\n                            .focus()\n                            // manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find\n                            .trigger(\"focusin\");\n                    } catch (e) {\n                        // ignore IE throwing errors when focusing hidden elements\n                    }\n                }\n            },\n\n            findLastActive: function () {\n                var lastActive = this.lastActive;\n                return lastActive && $.grep(this.errorList,function (n) {\n                    return n.element.name === lastActive.name;\n                }).length === 1 && lastActive;\n            },\n\n            elements: function () {\n                var validator = this,\n                    rulesCache = {};\n\n                // select all valid inputs inside the form (no submit or reset buttons)\n                return $(this.currentForm)\n                    .find(\"input, select, textarea\")\n                    .not(\":submit, :reset, :image, [disabled]\")\n                    .not(this.settings.ignore)\n                    .filter(function () {\n                        if (!this.name && validator.settings.debug && window.console) {\n                            console.error(\"%o has no name assigned\", this);\n                        }\n\n                        // select only the first element for each name, and only those with rules specified\n                        if (this.name in rulesCache || !validator.objectLength($(this).rules())) {\n                            return false;\n                        }\n\n                        rulesCache[this.name] = true;\n                        return true;\n                    });\n            },\n\n            clean: function (selector) {\n                return $(selector)[0];\n            },\n\n            errors: function () {\n                var errorClass = this.settings.errorClass.replace(' ', '.');\n                return $(this.settings.errorElement + \".\" + errorClass, this.errorContext);\n            },\n\n            reset: function () {\n                this.successList = [];\n                this.errorList = [];\n                this.errorMap = {};\n                this.toShow = $([]);\n                this.toHide = $([]);\n                this.currentElements = $([]);\n            },\n\n            prepareForm: function () {\n                this.reset();\n                this.toHide = this.errors().add(this.containers);\n            },\n\n            prepareElement: function (element) {\n                this.reset();\n                this.toHide = this.errorsFor(element);\n            },\n\n            elementValue: function (element) {\n                var type = $(element).attr('type'),\n                    val = $(element).val();\n\n                if (type === 'radio' || type === 'checkbox') {\n                    return $('input[name=\"' + $(element).attr('name') + '\"]:checked').val();\n                }\n\n                if (typeof val === 'string') {\n                    return val.replace(/\\r/g, \"\");\n                }\n                return val;\n            },\n\n            check: function (element) {\n                element = this.validationTargetFor(this.clean(element));\n\n                var rules = $(element).rules();\n                var dependencyMismatch = false;\n                var val = this.elementValue(element);\n                var result;\n\n                for (var method in rules) {\n                    var rule = { method: method, parameters: rules[method] };\n                    try {\n\n                        result = $.validator.methods[method].call(this, val, element, rule.parameters);\n\n                        // if a method indicates that the field is optional and therefore valid,\n                        // don't mark it as valid when there are no other rules\n                        if (result === \"dependency-mismatch\") {\n                            dependencyMismatch = true;\n                            continue;\n                        }\n                        dependencyMismatch = false;\n\n                        if (result === \"pending\") {\n                            this.toHide = this.toHide.not(this.errorsFor(element));\n                            return;\n                        }\n\n                        if (!result) {\n                            this.formatAndAdd(element, rule);\n                            return false;\n                        }\n                    } catch (e) {\n                        if (this.settings.debug && window.console) {\n                            console.log(\"exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method\", e);\n                        }\n                        throw e;\n                    }\n                }\n                if (dependencyMismatch) {\n                    return;\n                }\n                if (this.objectLength(rules)) {\n                    this.successList.push(element);\n                }\n                return true;\n            },\n\n            // return the custom message for the given element and validation method\n            // specified in the element's \"messages\" metadata\n            customMetaMessage: function (element, method) {\n                if (!$.metadata) {\n                    return;\n                }\n                var meta = this.settings.meta ? $(element).metadata()[this.settings.meta] : $(element).metadata();\n                return meta && meta.messages && meta.messages[method];\n            },\n\n            // return the custom message for the given element and validation method\n            // specified in the element's HTML5 data attribute\n            customDataMessage: function (element, method) {\n                return $(element).data('msg-' + method.toLowerCase()) || (element.attributes && $(element).attr('data-msg-' + method.toLowerCase()));\n            },\n\n            // return the custom message for the given element name and validation method\n            customMessage: function (name, method) {\n                var m = this.settings.messages[name];\n                return m && (m.constructor === String ? m : m[method]);\n            },\n\n            // return the first defined argument, allowing empty strings\n            findDefined: function () {\n                for (var i = 0; i < arguments.length; i++) {\n                    if (arguments[i] !== undefined) {\n                        return arguments[i];\n                    }\n                }\n                return undefined;\n            },\n\n            defaultMessage: function (element, method) {\n                var noMessage = $.mage.__(\"Warning: No message defined for %s\");\n                return this.findDefined(\n                    this.customMessage(element.name, method),\n                    this.customDataMessage(element, method),\n                    this.customMetaMessage(element, method),\n                    // title is never undefined, so handle empty string as undefined\n                    !this.settings.ignoreTitle && element.title || undefined,\n                    $.validator.messages[method],\n                    \"<strong>\" + noMessage.replace('%s', element.name) + \"</strong>\"\n                );\n            },\n\n            formatAndAdd: function (element, rule) {\n                var message = this.defaultMessage(element, rule.method),\n                    theregex = /\\$?\\{(\\d+)\\}/g;\n                if (typeof message === \"function\") {\n                    message = message.call(this, rule.parameters, element);\n                } else if (theregex.test(message)) {\n                    message = $.validator.format(message.replace(theregex, '{$1}'), rule.parameters);\n                }\n                this.errorList.push({\n                    message: message,\n                    element: element\n                });\n\n                this.errorMap[element.name] = message;\n                this.submitted[element.name] = message;\n            },\n\n            addWrapper: function (toToggle) {\n                if (this.settings.wrapper) {\n                    toToggle = toToggle.add(toToggle.parent(this.settings.wrapper));\n                }\n                return toToggle;\n            },\n\n            defaultShowErrors: function () {\n                var i, elements;\n                for (i = 0; this.errorList[i]; i++) {\n                    var error = this.errorList[i];\n                    if (this.settings.highlight) {\n                        this.settings.highlight.call(this, error.element, this.settings.errorClass, this.settings.validClass);\n                    }\n                    this.showLabel(error.element, error.message);\n                }\n                if (this.errorList.length) {\n                    this.toShow = this.toShow.add(this.containers);\n                }\n                if (this.settings.success) {\n                    for (i = 0; this.successList[i]; i++) {\n                        this.showLabel(this.successList[i]);\n                    }\n                }\n                if (this.settings.unhighlight) {\n                    for (i = 0, elements = this.validElements(); elements[i]; i++) {\n                        this.settings.unhighlight.call(this, elements[i], this.settings.errorClass, this.settings.validClass);\n                    }\n                }\n                this.toHide = this.toHide.not(this.toShow);\n                this.hideErrors();\n                this.addWrapper(this.toShow).show();\n            },\n\n            validElements: function () {\n                return this.currentElements.not(this.invalidElements());\n            },\n\n            invalidElements: function () {\n                return $(this.errorList).map(function () {\n                    return this.element;\n                });\n            },\n\n            showLabel: function (element, message) {\n                var label = this.errorsFor(element);\n                if (label.length) {\n                    // refresh error/success class\n                    label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);\n\n                    // check if we have a generated label, replace the message then\n                    if (label.attr(\"generated\")) {\n                        label.hide().html(message);\n                    }\n                } else {\n                    // create label\n                    label = $(\"<\" + this.settings.errorElement + \"/>\")\n                        .attr({\"for\": this.idOrName(element), generated: true})\n                        .addClass(this.settings.errorClass)\n                        .html(message || \"\");\n                    if (this.settings.wrapper) {\n                        // make sure the element is visible, even in IE\n                        // actually showing the wrapped element is handled elsewhere\n                        label = label.hide().show().wrap(\"<\" + this.settings.wrapper + \"/>\").parent();\n                    }\n                    if (!this.labelContainer.append(label).length) {\n                        if (this.settings.errorPlacement) {\n                            this.settings.errorPlacement(label, $(element));\n                        } else {\n                            label.insertAfter(element);\n                        }\n                    }\n                }\n                if (!message && this.settings.success) {\n                    label.text(\"\");\n                    if (typeof this.settings.success === \"string\") {\n                        label.addClass(this.settings.success);\n                    } else {\n                        this.settings.success(label, element);\n                    }\n                }\n                this.toShow = this.toShow.add(label);\n            },\n\n            errorsFor: function (element) {\n                var name = this.idOrName(element);\n                return this.errors().filter(function () {\n                    return $(this).attr('for') === name;\n                });\n            },\n\n            idOrName: function (element) {\n                return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);\n            },\n\n            validationTargetFor: function (element) {\n                // if radio/checkbox, validate first element in group instead\n                if (this.checkable(element)) {\n                    element = this.findByName(element.name).not(this.settings.ignore)[0];\n                }\n                return element;\n            },\n\n            checkable: function (element) {\n                return (/radio|checkbox/i).test(element.type);\n            },\n\n            findByName: function (name) {\n                return $(this.currentForm).find('[name=\"' + name + '\"]');\n            },\n\n            getLength: function (value, element) {\n                switch (element.nodeName.toLowerCase()) {\n                    case 'select':\n                        return $(\"option:selected\", element).length;\n                    case 'input':\n                        if (this.checkable(element)) {\n                            return this.findByName(element.name).filter(':checked').length;\n                        }\n                }\n                return value.length;\n            },\n\n            depend: function (param, element) {\n                return this.dependTypes[typeof param] ? this.dependTypes[typeof param](param, element) : true;\n            },\n\n            dependTypes: {\n                \"boolean\": function (param, element) {\n                    return param;\n                },\n                \"string\": function (param, element) {\n                    return !!$(param, element.form).length;\n                },\n                \"function\": function (param, element) {\n                    return param(element);\n                }\n            },\n\n            optional: function (element) {\n                var val = this.elementValue(element);\n                return !$.validator.methods.required.call(this, val, element) && \"dependency-mismatch\";\n            },\n\n            startRequest: function (element) {\n                if (!this.pending[element.name]) {\n                    this.pendingRequest++;\n                    this.pending[element.name] = true;\n                }\n            },\n\n            stopRequest: function (element, valid) {\n                this.pendingRequest--;\n                // sometimes synchronization fails, make sure pendingRequest is never < 0\n                if (this.pendingRequest < 0) {\n                    this.pendingRequest = 0;\n                }\n                delete this.pending[element.name];\n                if (valid && this.pendingRequest === 0 && this.formSubmitted && this.form()) {\n                    $(this.currentForm).submit();\n                    this.formSubmitted = false;\n                } else if (!valid && this.pendingRequest === 0 && this.formSubmitted) {\n                    $(this.currentForm).triggerHandler(\"invalid-form\", [this]);\n                    this.formSubmitted = false;\n                }\n            },\n\n            previousValue: function (element) {\n                return $.data(element, \"previousValue\") || $.data(element, \"previousValue\", {\n                    old: null,\n                    valid: true,\n                    message: this.defaultMessage(element, \"remote\")\n                });\n            }\n\n        },\n\n        classRuleSettings: {\n            required: {required: true},\n            email: {email: true},\n            url: {url: true},\n            date: {date: true},\n            dateISO: {dateISO: true},\n            number: {number: true},\n            digits: {digits: true},\n            creditcard: {creditcard: true}\n        },\n\n        addClassRules: function (className, rules) {\n            if (className.constructor === String) {\n                this.classRuleSettings[className] = rules;\n            } else {\n                $.extend(this.classRuleSettings, className);\n            }\n        },\n\n        classRules: function (element) {\n            var rules = {};\n            var classes = $(element).attr('class');\n            if (classes) {\n                $.each(classes.split(' '), function () {\n                    if (this in $.validator.classRuleSettings) {\n                        $.extend(rules, $.validator.classRuleSettings[this]);\n                    }\n                });\n            }\n            return rules;\n        },\n\n        attributeRules: function (element) {\n            var rules = {};\n            var $element = $(element);\n\n            for (var method in $.validator.methods) {\n                var value;\n\n                // support for <input required> in both html5 and older browsers\n                if (method === 'required') {\n                    value = $element.get(0).getAttribute(method);\n                    // Some browsers return an empty string for the required attribute\n                    // and non-HTML5 browsers might have required=\"\" markup\n                    if (value === \"\") {\n                        value = true;\n                    }\n                    // force non-HTML5 browsers to return bool\n                    value = !!value;\n                } else {\n                    value = $element.attr(method);\n                }\n\n                if (value) {\n                    rules[method] = value;\n                } else if ($element[0].getAttribute(\"type\") === method) {\n                    rules[method] = true;\n                }\n            }\n\n            // maxlength may be returned as -1, 2147483647 (IE) and 524288 (safari) for text inputs\n            if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {\n                delete rules.maxlength;\n            }\n\n            return rules;\n        },\n\n        metadataRules: function (element) {\n            if (!$.metadata) {\n                return {};\n            }\n\n            var meta = $.data(element.form, 'validator').settings.meta;\n            return meta ?\n                $(element).metadata()[meta] :\n                $(element).metadata();\n        },\n\n        staticRules: function (element) {\n            var rules = {};\n            var validator = $.data(element.form, 'validator');\n            if (validator.settings.rules) {\n                rules = $.validator.normalizeRule(validator.settings.rules[element.name]) || {};\n            }\n            return rules;\n        },\n\n        normalizeRules: function (rules, element) {\n            // handle dependency check\n            $.each(rules, function (prop, val) {\n                // ignore rule when param is explicitly false, eg. required:false\n                if (val === false) {\n                    delete rules[prop];\n                    return;\n                }\n                if (val.param || val.depends) {\n                    var keepRule = true;\n                    switch (typeof val.depends) {\n                        case \"string\":\n                            keepRule = !!$(val.depends, element.form).length;\n                            break;\n                        case \"function\":\n                            keepRule = val.depends.call(element, element);\n                            break;\n                    }\n                    if (keepRule) {\n                        rules[prop] = val.param !== undefined ? val.param : true;\n                    } else {\n                        delete rules[prop];\n                    }\n                }\n            });\n\n            // evaluate parameters\n            $.each(rules, function (rule, parameter) {\n                rules[rule] = $.isFunction(parameter) ? parameter(element) : parameter;\n            });\n\n            // clean number parameters\n            $.each(['minlength', 'maxlength', 'min', 'max'], function () {\n                if (rules[this]) {\n                    rules[this] = Number(rules[this]);\n                }\n            });\n            $.each(['rangelength', 'range'], function () {\n                if (rules[this]) {\n                    rules[this] = [Number(rules[this][0]), Number(rules[this][1])];\n                }\n            });\n\n            if ($.validator.autoCreateRanges) {\n                // auto-create ranges\n                if (rules.min && rules.max) {\n                    rules.range = [rules.min, rules.max];\n                    delete rules.min;\n                    delete rules.max;\n                }\n                if (rules.minlength && rules.maxlength) {\n                    rules.rangelength = [rules.minlength, rules.maxlength];\n                    delete rules.minlength;\n                    delete rules.maxlength;\n                }\n            }\n\n            // To support custom messages in metadata ignore rule methods titled \"messages\"\n            if (rules.messages) {\n                delete rules.messages;\n            }\n\n            return rules;\n        },\n\n        // Converts a simple string to a {string: true} rule, e.g., \"required\" to {required:true}\n        normalizeRule: function (data) {\n            if (typeof data === \"string\") {\n                var transformed = {};\n                $.each(data.split(/\\s/), function () {\n                    transformed[this] = true;\n                });\n                data = transformed;\n            }\n            return data;\n        },\n\n        // http://docs.jquery.com/Plugins/Validation/Validator/addMethod\n        addMethod: function (name, method, message) {\n            $.validator.methods[name] = method;\n            $.validator.messages[name] = message !== undefined ? message : $.validator.messages[name];\n            if (method.length < 3) {\n                $.validator.addClassRules(name, $.validator.normalizeRule(name));\n            }\n        },\n\n        methods: {\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/required\n            required: function (value, element, param) {\n                // check if dependency is met\n                if (!this.depend(param, element)) {\n                    return \"dependency-mismatch\";\n                }\n                if (element.nodeName.toLowerCase() === \"select\") {\n                    // could be an array for select-multiple or a string, both are fine this way\n                    var val = $(element).val();\n                    return val && val.length > 0;\n                }\n                if (this.checkable(element)) {\n                    return this.getLength(value, element) > 0;\n                }\n                return $.trim(value).length > 0;\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/remote\n            remote: function (value, element, param) {\n                if (this.optional(element)) {\n                    return \"dependency-mismatch\";\n                }\n\n                var previous = this.previousValue(element);\n                if (!this.settings.messages[element.name]) {\n                    this.settings.messages[element.name] = {};\n                }\n                previous.originalMessage = this.settings.messages[element.name].remote;\n                this.settings.messages[element.name].remote = previous.message;\n\n                param = typeof param === \"string\" && {url: param} || param;\n\n                if (this.pending[element.name]) {\n                    return \"pending\";\n                }\n                if (previous.old === value) {\n                    return previous.valid;\n                }\n\n                previous.old = value;\n                var validator = this;\n                this.startRequest(element);\n                var data = {};\n                data[element.name] = value;\n                $.ajax($.extend(true, {\n                    url: param,\n                    mode: \"abort\",\n                    port: \"validate\" + element.name,\n                    dataType: \"json\",\n                    data: data,\n                    success: function (response) {\n                        validator.settings.messages[element.name].remote = previous.originalMessage;\n                        var valid = response === true || response === \"true\";\n                        if (valid) {\n                            var submitted = validator.formSubmitted;\n                            validator.prepareElement(element);\n                            validator.formSubmitted = submitted;\n                            validator.successList.push(element);\n                            delete validator.invalid[element.name];\n                            validator.showErrors();\n                        } else {\n                            var errors = {};\n                            var message = response || validator.defaultMessage(element, \"remote\");\n                            errors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;\n                            validator.invalid[element.name] = true;\n                            validator.showErrors(errors);\n                        }\n                        previous.valid = valid;\n                        validator.stopRequest(element, valid);\n                    }\n                }, param));\n                return \"pending\";\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/minlength\n            minlength: function (value, element, param) {\n                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);\n                return this.optional(element) || length >= param;\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/maxlength\n            maxlength: function (value, element, param) {\n                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);\n                return this.optional(element) || length <= param;\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/rangelength\n            rangelength: function (value, element, param) {\n                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);\n                return this.optional(element) || ( length >= param[0] && length <= param[1] );\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/min\n            min: function (value, element, param) {\n                return this.optional(element) || value >= param;\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/max\n            max: function (value, element, param) {\n                return this.optional(element) || value <= param;\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/range\n            range: function (value, element, param) {\n                return this.optional(element) || ( value >= param[0] && value <= param[1] );\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/email\n            email: function (value, element) {\n                // contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/\n                return this.optional(element) || /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i.test(value);\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/url\n            url: function (value, element) {\n                // contributed by Scott Gonzalez: http://projects.scottsplayground.com/iri/\n                return this.optional(element) || /^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test(value);\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/date\n            date: function (value, element) {\n                return this.optional(element) || !/Invalid|NaN/.test(new Date(value));\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/dateISO\n            dateISO: function (value, element) {\n                return this.optional(element) || /^\\d{4}[\\/\\-]\\d{1,2}[\\/\\-]\\d{1,2}$/.test(value);\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/number\n            number: function (value, element) {\n                return this.optional(element) || /^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test(value);\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/digits\n            digits: function (value, element) {\n                return this.optional(element) || /^\\d+$/.test(value);\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/creditcard\n            // based on http://en.wikipedia.org/wiki/Luhn\n            creditcard: function (value, element) {\n                if (this.optional(element)) {\n                    return \"dependency-mismatch\";\n                }\n                // accept only spaces, digits and dashes\n                if (/[^0-9 \\-]+/.test(value)) {\n                    return false;\n                }\n                var nCheck = 0,\n                    nDigit = 0,\n                    bEven = false;\n\n                value = value.replace(/\\D/g, \"\");\n\n                for (var n = value.length - 1; n >= 0; n--) {\n                    var cDigit = value.charAt(n);\n                    nDigit = parseInt(cDigit, 10);\n                    if (bEven) {\n                        if ((nDigit *= 2) > 9) {\n                            nDigit -= 9;\n                        }\n                    }\n                    nCheck += nDigit;\n                    bEven = !bEven;\n                }\n\n                return (nCheck % 10) === 0;\n            },\n\n            // http://docs.jquery.com/Plugins/Validation/Methods/equalTo\n            equalTo: function (value, element, param) {\n                // bind to the blur event of the target in order to revalidate whenever the target field is updated\n                // TODO find a way to bind the event just once, avoiding the unbind-rebind overhead\n                var target = $(param);\n                if (this.settings.onfocusout) {\n                    target.unbind(\".validate-equalTo\").bind(\"blur.validate-equalTo\", function () {\n                        $(element).valid();\n                    });\n                }\n                return value === target.val();\n            }\n\n        }\n\n    });\n\n// deprecated, use $.validator.format instead\n    $.format = $.validator.format;\n\n}(jQuery));\n\n// ajax mode: abort\n// usage: $.ajax({ mode: \"abort\"[, port: \"uniqueport\"]});\n// if mode:\"abort\" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()\n(function ($) {\n    var pendingRequests = {};\n    // Use a prefilter if available (1.5+)\n    if ($.ajaxPrefilter) {\n        $.ajaxPrefilter(function (settings, _, xhr) {\n            var port = settings.port;\n            if (settings.mode === \"abort\") {\n                if (pendingRequests[port]) {\n                    pendingRequests[port].abort();\n                }\n                pendingRequests[port] = xhr;\n            }\n        });\n    } else {\n        // Proxy ajax\n        var ajax = $.ajax;\n        $.ajax = function (settings) {\n            var mode = ( \"mode\" in settings ? settings : $.ajaxSettings ).mode,\n                port = ( \"port\" in settings ? settings : $.ajaxSettings ).port;\n            if (mode === \"abort\") {\n                if (pendingRequests[port]) {\n                    pendingRequests[port].abort();\n                }\n                return (pendingRequests[port] = ajax.apply(this, arguments));\n            }\n            return ajax.apply(this, arguments);\n        };\n    }\n}(jQuery));\n\n// provides cross-browser focusin and focusout events\n// IE has native support, in other browsers, use event caputuring (neither bubbles)\n\n// provides delegate(type: String, delegate: Selector, handler: Callback) plugin for easier event delegation\n// handler is only called when $(event.target).is(delegate), in the scope of the jquery-object for event.target\n(function ($) {\n    // only implement if not provided by jQuery core (since 1.4)\n    // TODO verify if jQuery 1.4's implementation is compatible with older jQuery special-event APIs\n    if (!jQuery.event.special.focusin && !jQuery.event.special.focusout && document.addEventListener) {\n        $.each({\n            focus: 'focusin',\n            blur: 'focusout'\n        }, function (original, fix) {\n            $.event.special[fix] = {\n                setup: function () {\n                    this.addEventListener(original, handler, true);\n                },\n                teardown: function () {\n                    this.removeEventListener(original, handler, true);\n                },\n                handler: function (e) {\n                    var args = arguments;\n                    args[0] = $.event.fix(e);\n                    args[0].type = fix;\n                    return $.event.handle.apply(this, args);\n                }\n            };\n            function handler(e) {\n                e = $.event.fix(e);\n                e.type = fix;\n                return $.event.handle.call(this, e);\n            }\n        });\n    }\n    $.extend($.fn, {\n        validateDelegate: function (delegate, type, handler) {\n            return this.bind(type, function (event) {\n                var target = $(event.target);\n                if (target.is(delegate)) {\n                    return handler.apply(target, arguments);\n                }\n            });\n        }\n    });\n}(jQuery));\n\n}));","jquery/jquery.parsequery.js":"/**\n * Copyright (c) 2010 Conrad Irwin <conrad@rapportive.com> MIT license.\n * Based loosely on original: Copyright (c) 2008 mkmanning MIT license.\n *\n * Parses CGI query strings into javascript objects.\n *\n * See the README for details.\n **/\n/*jshint jquery:true */\n/*global window:true */\ndefine([\n    \"jquery\"\n], function($){\n\n    $.parseQuery = function(options) {\n        var config = {query: window.location.search || \"\"},\n            params = {};\n\n        if (typeof options === 'string') {\n            options = {query: options};\n        }\n        $.extend(config, $.parseQuery, options);\n        config.query = config.query.replace(/^\\?/, '');\n\n        $.each(config.query.split(config.separator), function(i, param) {\n            var pair = param.split('='),\n                key = config.decode(pair.shift(), null).toString(),\n                value = config.decode(pair.length ? pair.join('=') : null, key);\n\n            if (config.array_keys(key)) {\n                params[key] = params[key] || [];\n                params[key].push(value);\n            } else {\n                params[key] = value;\n            }\n        });\n\n        return params;\n    };\n\n    $.parseQuery.decode = $.parseQuery.default_decode = function(string) {\n        return decodeURIComponent((string || \"\").replace('+', ' '));\n    };\n\n    $.parseQuery.array_keys = function() {\n        return false;\n    };\n\n    $.parseQuery.separator = \"&\";\n\n});\n","jquery/jquery.tabs.js":"/* ========================================================\n * bootstrap-tab.js v2.0.4\n * http://twitter.github.com/bootstrap/javascript.html#tabs\n * ========================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ======================================================== */\n\ndefine([\n  \"jquery\"\n], function(jQuery){\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* TAB CLASS DEFINITION\n  * ==================== */\n\n  var Tab = function ( element ) {\n    this.element = $(element)\n  };\n\n  Tab.prototype = {\n\n    constructor: Tab\n\n  , show: function () {\n      var $this = this.element\n        , $ul = $this.closest('ul:not(.dropdown-menu)')\n        , selector = $this.attr('data-target')\n        , previous\n        , $target\n        , e;\n\n      if (!selector) {\n        selector = $this.attr('href');\n        selector = selector && selector.replace(/.*(?=#[^\\s]*$)/, ''); //strip for ie7\n      }\n\n      if ( $this.parent('li').hasClass('active') ) return;\n\n      previous = $ul.find('.active a').last()[0];\n\n      e = $.Event('show', {\n        relatedTarget: previous\n      });\n\n      $this.trigger(e);\n\n      if (e.isDefaultPrevented()) return;\n\n      $target = $(selector);\n\n      this.activate($this.parent('li'), $ul);\n      this.activate($target, $target.parent(), function () {\n        $this.trigger({\n          type: 'shown'\n        , relatedTarget: previous\n        })\n      })\n    }\n\n  , activate: function ( element, container, callback) {\n      var $active = container.find('> .active')\n        , transition = callback\n            && $.support.transition\n            && $active.hasClass('fade');\n\n      function next() {\n        $active\n          .removeClass('active')\n          .find('> .dropdown-menu > .active')\n          .removeClass('active');\n\n        element.addClass('active');\n\n        if (transition) {\n          element[0].offsetWidth; // reflow for transition\n          element.addClass('in');\n        } else {\n          element.removeClass('fade')\n        }\n\n        if ( element.parent('.dropdown-menu') ) {\n          element.closest('li.dropdown').addClass('active')\n        }\n\n        callback && callback()\n      }\n\n      transition ?\n        $active.one($.support.transition.end, next) :\n        next();\n\n      $active.removeClass('in')\n    }\n  };\n\n\n /* TAB PLUGIN DEFINITION\n  * ===================== */\n\n  $.fn.tab = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('tab');\n      if (!data) $this.data('tab', (data = new Tab(this)));\n      if (typeof option == 'string') data[option]()\n    })\n  };\n\n  $.fn.tab.Constructor = Tab;\n\n\n /* TAB DATA-API\n  * ============ */\n\n  $(function () {\n    $('body').on('click.tab.data-api', '[data-toggle=\"tab\"], [data-toggle=\"pill\"]', function (e) {\n      e.preventDefault();\n      $(this).tab('show')\n    })\n  })\n\n}(jQuery);\n\n/* =============================================================\n * bootstrap-collapse.js v2.0.4\n * http://twitter.github.com/bootstrap/javascript.html#collapse\n * =============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================ */\n\n\n!function ($) {\n\n  \"use strict\"; // jshint ;_;\n\n\n /* COLLAPSE PUBLIC CLASS DEFINITION\n  * ================================ */\n\n  var Collapse = function (element, options) {\n    this.$element = $(element);\n    this.options = $.extend({}, $.fn.collapse.defaults, options);\n\n    if (this.options.parent) {\n      this.$parent = $(this.options.parent)\n    }\n\n    this.options.toggle && this.toggle()\n  };\n\n  Collapse.prototype = {\n\n    constructor: Collapse\n\n  , dimension: function () {\n      var hasWidth = this.$element.hasClass('width');\n      return hasWidth ? 'width' : 'height'\n    }\n\n  , show: function () {\n      var dimension\n        , scroll\n        , actives\n        , hasData;\n\n      if (this.transitioning) return;\n\n      dimension = this.dimension();\n      scroll = $.camelCase(['scroll', dimension].join('-'));\n      actives = this.$parent && this.$parent.find('> .accordion-group > .in');\n\n      if (actives && actives.length) {\n        hasData = actives.data('collapse');\n        if (hasData && hasData.transitioning) return;\n        actives.collapse('hide');\n        hasData || actives.data('collapse', null)\n      }\n\n      this.$element[dimension](0);\n      this.transition('addClass', $.Event('show'), 'shown');\n      this.$element[dimension](this.$element[0][scroll]);\n    }\n\n  , hide: function () {\n      var dimension;\n      if (this.transitioning) return;\n      dimension = this.dimension();\n      this.reset(this.$element[dimension]());\n      this.transition('removeClass', $.Event('hide'), 'hidden');\n      this.$element[dimension](0)\n    }\n\n  , reset: function (size) {\n      var dimension = this.dimension();\n\n      this.$element\n        .removeClass('collapse')\n        [dimension](size || 'auto')\n        [0].offsetWidth;\n\n      this.$element[size !== null ? 'addClass' : 'removeClass']('collapse');\n\n      return this\n    }\n\n  , transition: function (method, startEvent, completeEvent) {\n      var that = this\n        , complete = function () {\n            if (startEvent.type == 'show') that.reset();\n            that.transitioning = 0;\n            that.$element.trigger(completeEvent)\n          };\n\n      this.$element.trigger(startEvent);\n\n      if (startEvent.isDefaultPrevented()) return;\n\n      this.transitioning = 1;\n\n      this.$element[method]('in');\n\n      $.support.transition && this.$element.hasClass('collapse') ?\n        this.$element.one($.support.transition.end, complete) :\n        complete()\n    }\n\n  , toggle: function () {\n      this[this.$element.hasClass('in') ? 'hide' : 'show']();\n    }\n\n  };\n\n\n /* COLLAPSIBLE PLUGIN DEFINITION\n  * ============================== */\n\n  $.fn.collapse = function (option) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('collapse')\n        , options = typeof option == 'object' && option;\n      if (!data) $this.data('collapse', (data = new Collapse(this, options)));\n      if (typeof option == 'string') data[option]()\n    })\n  };\n\n  $.fn.collapse.defaults = {\n    toggle: true\n  };\n\n  $.fn.collapse.Constructor = Collapse;\n\n\n /* COLLAPSIBLE DATA-API\n  * ==================== */\n\n  $(function () {\n    $('body').on('click.collapse.data-api', '[data-toggle=collapse]', function ( e ) {\n      var $this = $(this), href\n        , target = $this.attr('data-target')\n          || e.preventDefault()\n          || (href = $this.attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '') //strip for ie7\n        , option = $(target).data('collapse') ? 'toggle' : $this.data();\n      $(target).collapse(option);\n        $(this).toggleClass('active');\n    })\n  })\n\n}(jQuery);\n\n});","jquery/jquery.metadata.js":"/*\n * Metadata - jQuery plugin for parsing metadata from elements\n *\n * Copyright (c) 2006 John Resig, Yehuda Katz, J\u00c3\u00af\u00c2\u00bf\u00c2\u00bd\u00c3\u0083\u00c2\u00b6rn Zaefferer, Paul McLanahan\n *\n * Dual licensed under the MIT and GPL licenses:\n *   http://www.opensource.org/licenses/mit-license.php\n *   http://www.gnu.org/licenses/gpl.html\n *\n * Revision: $Id: jquery.metadata.js 3640 2007-10-11 18:34:38Z pmclanahan $\n *\n */\n\n/**\n * Sets the type of metadata to use. Metadata is encoded in JSON, and each property\n * in the JSON will become a property of the element itself.\n *\n * There are four supported types of metadata storage:\n *\n *   attr:  Inside an attribute. The name parameter indicates *which* attribute.\n *\n *   class: Inside the class attribute, wrapped in curly braces: { }\n *\n *   elem:  Inside a child element (e.g. a script tag). The\n *          name parameter indicates *which* element.\n *   html5: Values are stored in data-* attributes.\n *\n * The metadata for an element is loaded the first time the element is accessed via jQuery.\n *\n * As a result, you can define the metadata type, use $(expr) to load the metadata into the elements\n * matched by expr, then redefine the metadata type and run another $(expr) for other elements.\n *\n * @name $.metadata.setType\n *\n * @example <p id=\"one\" class=\"some_class {item_id: 1, item_label: 'Label'}\">This is a p</p>\n * @before $.metadata.setType(\"class\")\n * @after $(\"#one\").metadata().item_id == 1; $(\"#one\").metadata().item_label == \"Label\"\n * @desc Reads metadata from the class attribute\n *\n * @example <p id=\"one\" class=\"some_class\" data=\"{item_id: 1, item_label: 'Label'}\">This is a p</p>\n * @before $.metadata.setType(\"attr\", \"data\")\n * @after $(\"#one\").metadata().item_id == 1; $(\"#one\").metadata().item_label == \"Label\"\n * @desc Reads metadata from a \"data\" attribute\n *\n * @example <p id=\"one\" class=\"some_class\"><script>{item_id: 1, item_label: 'Label'}</script>This is a p</p>\n * @before $.metadata.setType(\"elem\", \"script\")\n * @after $(\"#one\").metadata().item_id == 1; $(\"#one\").metadata().item_label == \"Label\"\n * @desc Reads metadata from a nested script element\n *\n * @example <p id=\"one\" class=\"some_class\" data-item_id=\"1\" data-item_label=\"Label\">This is a p</p>\n * @before $.metadata.setType(\"html5\")\n * @after $(\"#one\").metadata().item_id == 1; $(\"#one\").metadata().item_label == \"Label\"\n * @desc Reads metadata from a series of data-* attributes\n *\n * @param String type The encoding type\n * @param String name The name of the attribute to be used to get metadata (optional)\n * @cat Plugins/Metadata\n * @descr Sets the type of encoding to be used when loading metadata for the first time\n * @type undefined\n * @see metadata()\n */\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([\"jquery\"], factory);\n    } else {\n        factory(jQuery);\n    }\n}(function ($) {\n\n\n    $.extend({\n        metadata : {\n            defaults : {\n                type: 'class',\n                name: 'metadata',\n                cre: /({.*})/,\n                single: 'metadata',\n                meta:'validate'\n            },\n            setType: function( type, name ){\n                this.defaults.type = type;\n                this.defaults.name = name;\n            },\n            get: function( elem, opts ){\n                var settings = $.extend({},this.defaults,opts);\n                // check for empty string in single property\n                if (!settings.single.length) {\n                    settings.single = 'metadata';\n                }\n                if (!settings.meta.length) {\n                    settings.meta = 'validate';\n                }\n\n                var data = $.data(elem, settings.single);\n                // returned cached data if it already exists\n                if ( data ) return data;\n\n                data = \"{}\";\n\n                var getData = function(data) {\n                    if(typeof data != \"string\") return data;\n\n                    if( data.indexOf('{') < 0 ) {\n                        data = eval(\"(\" + data + \")\");\n                    }\n                }\n\n                var getObject = function(data) {\n                    if(typeof data != \"string\") return data;\n\n                    data = eval(\"(\" + data + \")\");\n                    return data;\n                }\n\n                if ( settings.type == \"html5\" ) {\n                    var object = {};\n                    $( elem.attributes ).each(function() {\n                        var name = this.nodeName;\n                        if (name.indexOf('data-' + settings.meta) === 0) {\n                            name = name.replace(/^data-/, '');\n                        }\n                        else {\n                            return true;\n                        }\n                        object[name] = getObject(this.value);\n                    });\n                } else {\n                    if ( settings.type == \"class\" ) {\n                        var m = settings.cre.exec( elem.className );\n                        if ( m )\n                            data = m[1];\n                    } else if ( settings.type == \"elem\" ) {\n                        if( !elem.getElementsByTagName ) return;\n                        var e = elem.getElementsByTagName(settings.name);\n                        if ( e.length )\n                            data = $.trim(e[0].innerHTML);\n                    } else if ( elem.getAttribute != undefined ) {\n                        var attr = elem.getAttribute( settings.name );\n                        if ( attr )\n                            data = attr;\n                    }\n                    object = getObject(data.indexOf(\"{\") < 0 ? \"{\" + data + \"}\" : data);\n                }\n\n                $.data( elem, settings.single, object );\n                return object;\n            }\n        }\n    });\n\n    /**\n     * Returns the metadata object for the first member of the jQuery object.\n     *\n     * @name metadata\n     * @descr Returns element's metadata object\n     * @param Object opts An object contianing settings to override the defaults\n     * @type jQuery\n     * @cat Plugins/Metadata\n     */\n    $.fn.metadata = function( opts ){\n        return $.metadata.get( this[0], opts );\n    };\n\n}));","jquery/jquery.storageapi.min.js":"/* jQuery Storage API Plugin 1.7.3 https://github.com/julien-maurel/jQuery-Storage-API */\n!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):e(\"object\"==typeof exports?require(\"jquery\"):jQuery)}(function(e){function t(t){var r,i,n,o=arguments.length,s=window[t],a=arguments,u=a[1];if(2>o)throw Error(\"Minimum 2 arguments must be given\");if(e.isArray(u)){i={};for(var f in u){r=u[f];try{i[r]=JSON.parse(s.getItem(r))}catch(c){i[r]=s.getItem(r)}}return i}if(2!=o){try{i=JSON.parse(s.getItem(u))}catch(c){throw new ReferenceError(u+\" is not defined in this storage\")}for(var f=2;o-1>f;f++)if(i=i[a[f]],void 0===i)throw new ReferenceError([].slice.call(a,1,f+1).join(\".\")+\" is not defined in this storage\");if(e.isArray(a[f])){n=i,i={};for(var m in a[f])i[a[f][m]]=n[a[f][m]];return i}return i[a[f]]}try{return JSON.parse(s.getItem(u))}catch(c){return s.getItem(u)}}function r(t){var r,i,n=arguments.length,o=window[t],s=arguments,a=s[1],u=s[2],f={};if(2>n||!e.isPlainObject(a)&&3>n)throw Error(\"Minimum 3 arguments must be given or second parameter must be an object\");if(e.isPlainObject(a)){for(var c in a)r=a[c],e.isPlainObject(r)?o.setItem(c,JSON.stringify(r)):o.setItem(c,r);return a}if(3==n)return\"object\"==typeof u?o.setItem(a,JSON.stringify(u)):o.setItem(a,u),u;try{i=o.getItem(a),null!=i&&(f=JSON.parse(i))}catch(m){}i=f;for(var c=2;n-2>c;c++)r=s[c],i[r]&&e.isPlainObject(i[r])||(i[r]={}),i=i[r];return i[s[c]]=s[c+1],o.setItem(a,JSON.stringify(f)),f}function i(t){var r,i,n=arguments.length,o=window[t],s=arguments,a=s[1];if(2>n)throw Error(\"Minimum 2 arguments must be given\");if(e.isArray(a)){for(var u in a)o.removeItem(a[u]);return!0}if(2==n)return o.removeItem(a),!0;try{r=i=JSON.parse(o.getItem(a))}catch(f){throw new ReferenceError(a+\" is not defined in this storage\")}for(var u=2;n-1>u;u++)if(i=i[s[u]],void 0===i)throw new ReferenceError([].slice.call(s,1,u).join(\".\")+\" is not defined in this storage\");if(e.isArray(s[u]))for(var c in s[u])delete i[s[u][c]];else delete i[s[u]];return o.setItem(a,JSON.stringify(r)),!0}function n(t,r){var n=a(t);for(var o in n)i(t,n[o]);if(r)for(var o in e.namespaceStorages)u(o)}function o(r){var i=arguments.length,n=arguments,s=(window[r],n[1]);if(1==i)return 0==a(r).length;if(e.isArray(s)){for(var u=0;u<s.length;u++)if(!o(r,s[u]))return!1;return!0}try{var f=t.apply(this,arguments);e.isArray(n[i-1])||(f={totest:f});for(var u in f)if(!(e.isPlainObject(f[u])&&e.isEmptyObject(f[u])||e.isArray(f[u])&&!f[u].length)&&f[u])return!1;return!0}catch(c){return!0}}function s(r){var i=arguments.length,n=arguments,o=(window[r],n[1]);if(2>i)throw Error(\"Minimum 2 arguments must be given\");if(e.isArray(o)){for(var a=0;a<o.length;a++)if(!s(r,o[a]))return!1;return!0}try{var u=t.apply(this,arguments);e.isArray(n[i-1])||(u={totest:u});for(var a in u)if(void 0===u[a]||null===u[a])return!1;return!0}catch(f){return!1}}function a(r){var i=arguments.length,n=window[r],o=arguments,s=(o[1],[]),a={};if(a=i>1?t.apply(this,o):n,a._cookie)for(var u in e.cookie())\"\"!=u&&s.push(u.replace(a._prefix,\"\"));else for(var f in a)s.push(f);return s}function u(t){if(!t||\"string\"!=typeof t)throw Error(\"First parameter must be a string\");g?(window.localStorage.getItem(t)||window.localStorage.setItem(t,\"{}\"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,\"{}\")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,\"{}\"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,\"{}\"));var r={localStorage:e.extend({},e.localStorage,{_ns:t}),sessionStorage:e.extend({},e.sessionStorage,{_ns:t})};return e.cookie&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,\"{}\"),r.cookieStorage=e.extend({},e.cookieStorage,{_ns:t})),e.namespaceStorages[t]=r,r}function f(e){if(!window[e])return!1;var t=\"jsapi\";try{return window[e].setItem(t,t),window[e].removeItem(t),!0}catch(r){return!1}}var c=\"ls_\",m=\"ss_\",g=f(\"localStorage\"),h={_type:\"\",_ns:\"\",_callMethod:function(e,t){var r=[this._type],t=Array.prototype.slice.call(t),i=t[0];return this._ns&&r.push(this._ns),\"string\"==typeof i&&-1!==i.indexOf(\".\")&&(t.shift(),[].unshift.apply(t,i.split(\".\"))),[].push.apply(r,t),e.apply(this,r)},get:function(){return this._callMethod(t,arguments)},set:function(){var t=arguments.length,i=arguments,n=i[0];if(1>t||!e.isPlainObject(n)&&2>t)throw Error(\"Minimum 2 arguments must be given or first parameter must be an object\");if(e.isPlainObject(n)&&this._ns){for(var o in n)r(this._type,this._ns,o,n[o]);return n}var s=this._callMethod(r,i);return this._ns?s[n.split(\".\")[0]]:s},remove:function(){if(arguments.length<1)throw Error(\"Minimum 1 argument must be given\");return this._callMethod(i,arguments)},removeAll:function(e){return this._ns?(r(this._type,this._ns,{}),!0):n(this._type,e)},isEmpty:function(){return this._callMethod(o,arguments)},isSet:function(){if(arguments.length<1)throw Error(\"Minimum 1 argument must be given\");return this._callMethod(s,arguments)},keys:function(){return this._callMethod(a,arguments)}};if(e.cookie){window.name||(window.name=Math.floor(1e8*Math.random()));var l={_cookie:!0,_prefix:\"\",_expires:null,_path:null,_domain:null,setItem:function(t,r){e.cookie(this._prefix+t,r,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(t){return e.cookie(this._prefix+t)},removeItem:function(t){return e.removeCookie(this._prefix+t)},clear:function(){for(var t in e.cookie())\"\"!=t&&(!this._prefix&&-1===t.indexOf(c)&&-1===t.indexOf(m)||this._prefix&&0===t.indexOf(this._prefix))&&e.removeCookie(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};g||(window.localCookieStorage=e.extend({},l,{_prefix:c,_expires:3650}),window.sessionCookieStorage=e.extend({},l,{_prefix:m+window.name+\"_\"})),window.cookieStorage=e.extend({},l),e.cookieStorage=e.extend({},h,{_type:\"cookieStorage\",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}e.initNamespaceStorage=function(e){return u(e)},g?(e.localStorage=e.extend({},h,{_type:\"localStorage\"}),e.sessionStorage=e.extend({},h,{_type:\"sessionStorage\"})):(e.localStorage=e.extend({},h,{_type:\"localCookieStorage\"}),e.sessionStorage=e.extend({},h,{_type:\"sessionCookieStorage\"})),e.namespaceStorages={},e.removeAllStorages=function(t){e.localStorage.removeAll(t),e.sessionStorage.removeAll(t),e.cookieStorage&&e.cookieStorage.removeAll(t),t||(e.namespaceStorages={})}});","knockoutjs/knockout-fast-foreach.js":"/*!\n  Knockout Fast Foreach v0.4.1 (2015-07-17T14:06:15.974Z)\n  By: Brian M Hunt (C) 2015\n  License: MIT\n\n  Adds `fastForEach` to `ko.bindingHandlers`.\n*/\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['knockout'], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory(require('knockout'));\n  } else {\n    root.KnockoutFastForeach = factory(root.ko);\n  }\n}(this, function (ko) {\n  \"use strict\";\n// index.js\n// --------\n// Fast For Each\n//\n// Employing sound techniques to make a faster Knockout foreach binding.\n// --------\n\n//      Utilities\n\n// from https://github.com/jonschlinkert/is-plain-object\nfunction isPlainObject(o) {\n  return !!o && typeof o === 'object' && o.constructor === Object;\n}\n\n// From knockout/src/virtualElements.js\nvar commentNodesHaveTextProperty = document && document.createComment(\"test\").text === \"<!--test-->\";\nvar startCommentRegex = commentNodesHaveTextProperty ? /^<!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*-->$/ : /^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/;\nvar supportsDocumentFragment = document && typeof document.createDocumentFragment === \"function\";\nfunction isVirtualNode(node) {\n  return (node.nodeType === 8) && startCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);\n}\n\n\n// Get a copy of the (possibly virtual) child nodes of the given element,\n// put them into a container, then empty the given node.\nfunction makeTemplateNode(sourceNode) {\n  var container = document.createElement(\"div\");\n  var parentNode;\n  if (sourceNode.content) {\n    // For e.g. <template> tags\n    parentNode = sourceNode.content;\n  } else if (sourceNode.tagName === 'SCRIPT') {\n    parentNode = document.createElement(\"div\");\n    parentNode.innerHTML = sourceNode.text;\n  } else {\n    // Anything else e.g. <div>\n    parentNode = sourceNode;\n  }\n  ko.utils.arrayForEach(ko.virtualElements.childNodes(parentNode), function (child) {\n    // FIXME - This cloneNode could be expensive; we may prefer to iterate over the\n    // parentNode children in reverse (so as not to foul the indexes as childNodes are\n    // removed from parentNode when inserted into the container)\n    if (child) {\n      container.insertBefore(child.cloneNode(true), null);\n    }\n  });\n  return container;\n}\n\nfunction insertAllAfter(containerNode, nodeOrNodeArrayToInsert, insertAfterNode) {\n  var frag, len, i;\n  // poor man's node and array check, should be enough for this\n  if (typeof nodeOrNodeArrayToInsert.nodeType !== \"undefined\" && typeof nodeOrNodeArrayToInsert.length === \"undefined\") {\n    throw new Error(\"Expected a single node or a node array\");\n  }\n\n  if (typeof nodeOrNodeArrayToInsert.nodeType !== \"undefined\") {\n    ko.virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert, insertAfterNode);\n    return;\n  }\n\n  if (nodeOrNodeArrayToInsert.length === 1) {\n    ko.virtualElements.insertAfter(containerNode, nodeOrNodeArrayToInsert[0], insertAfterNode);\n    return;\n  }\n\n  if (supportsDocumentFragment) {\n    frag = document.createDocumentFragment();\n\n    for (i = 0, len = nodeOrNodeArrayToInsert.length; i !== len; ++i) {\n      frag.appendChild(nodeOrNodeArrayToInsert[i]);\n    }\n    ko.virtualElements.insertAfter(containerNode, frag, insertAfterNode);\n  } else {\n    // Nodes are inserted in reverse order - pushed down immediately after\n    // the last node for the previous item or as the first node of element.\n    for (i = nodeOrNodeArrayToInsert.length - 1; i >= 0; --i) {\n      var child = nodeOrNodeArrayToInsert[i];\n      if (!child) {\n        return;\n      }\n      ko.virtualElements.insertAfter(containerNode, child, insertAfterNode);\n    }\n  }\n}\n\n// Mimic a KO change item 'add'\nfunction valueToChangeAddItem(value, index) {\n  return {\n    status: 'added',\n    value: value,\n    index: index\n  };\n}\n\nfunction isAdditionAdjacentToLast(changeIndex, arrayChanges) {\n  return changeIndex > 0 &&\n    changeIndex < arrayChanges.length &&\n    arrayChanges[changeIndex].status === \"added\" &&\n    arrayChanges[changeIndex - 1].status === \"added\" &&\n    arrayChanges[changeIndex - 1].index === arrayChanges[changeIndex].index - 1;\n}\n\nfunction FastForEach(spec) {\n  this.element = spec.element;\n  this.container = isVirtualNode(this.element) ?\n                   this.element.parentNode : this.element;\n  this.$context = spec.$context;\n  this.data = spec.data;\n  this.as = spec.as;\n  this.noContext = spec.noContext;\n  this.templateNode = makeTemplateNode(\n    spec.name ? document.getElementById(spec.name).cloneNode(true) : spec.element\n  );\n  this.afterQueueFlush = spec.afterQueueFlush;\n  this.beforeQueueFlush = spec.beforeQueueFlush;\n  this.changeQueue = [];\n  this.lastNodesList = [];\n  this.indexesToDelete = [];\n  this.rendering_queued = false;\n\n  // Remove existing content.\n  ko.virtualElements.emptyNode(this.element);\n\n  // Prime content\n  var primeData = ko.unwrap(this.data);\n  if (primeData.map) {\n    this.onArrayChange(primeData.map(valueToChangeAddItem));\n  }\n\n  // Watch for changes\n  if (ko.isObservable(this.data)) {\n    if (!this.data.indexOf) {\n      // Make sure the observable is trackable.\n      this.data = this.data.extend({trackArrayChanges: true});\n    }\n    this.changeSubs = this.data.subscribe(this.onArrayChange, this, 'arrayChange');\n  }\n}\n\n\nFastForEach.animateFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame || window.msRequestAnimationFrame ||\n  function(cb) { return window.setTimeout(cb, 1000 / 60); };\n\n\nFastForEach.prototype.dispose = function () {\n  if (this.changeSubs) {\n    this.changeSubs.dispose();\n  }\n};\n\n\n// If the array changes we register the change.\nFastForEach.prototype.onArrayChange = function (changeSet) {\n  var self = this;\n  var changeMap = {\n    added: [],\n    deleted: []\n  };\n  for (var i = 0, len = changeSet.length; i < len; i++) {\n    // the change is appended to a last change info object when both are 'added' and have indexes next to each other\n    // here I presume that ko is sending changes in monotonic order (in index variable) which happens to be true, tested with push and splice with multiple pushed values\n    if (isAdditionAdjacentToLast(i, changeSet)) {\n      var batchValues = changeMap.added[changeMap.added.length - 1].values;\n      if (!batchValues) {\n        // transform the last addition into a batch addition object\n        var lastAddition = changeMap.added.pop();\n        var batchAddition = {\n          isBatch: true,\n          status: 'added',\n          index: lastAddition.index,\n          values: [lastAddition.value]\n        };\n        batchValues = batchAddition.values;\n        changeMap.added.push(batchAddition);\n      }\n      batchValues.push(changeSet[i].value);\n    } else {\n      changeMap[changeSet[i].status].push(changeSet[i]);\n    }\n  }\n  if (changeMap.deleted.length > 0) {\n    this.changeQueue.push.apply(this.changeQueue, changeMap.deleted);\n    this.changeQueue.push({status: 'clearDeletedIndexes'});\n  }\n  this.changeQueue.push.apply(this.changeQueue, changeMap.added);\n  // Once a change is registered, the ticking count-down starts for the processQueue.\n  if (this.changeQueue.length > 0 && !this.rendering_queued) {\n    this.rendering_queued = true;\n    FastForEach.animateFrame.call(window, function () { self.processQueue(); });\n  }\n};\n\n\n// Reflect all the changes in the queue in the DOM, then wipe the queue.\nFastForEach.prototype.processQueue = function () {\n  var self = this;\n\n  // Callback so folks can do things before the queue flush.\n  if (typeof this.beforeQueueFlush === 'function') {\n    this.beforeQueueFlush(this.changeQueue);\n  }\n\n  ko.utils.arrayForEach(this.changeQueue, function (changeItem) {\n    // console.log(self.data(), \"CI\", JSON.stringify(changeItem, null, 2), JSON.stringify($(self.element).text()))\n    self[changeItem.status](changeItem);\n    // console.log(\"  ==> \", JSON.stringify($(self.element).text()))\n  });\n  this.rendering_queued = false;\n  // Callback so folks can do things.\n  if (typeof this.afterQueueFlush === 'function') {\n    this.afterQueueFlush(this.changeQueue);\n  }\n  this.changeQueue = [];\n};\n\n\n// Process a changeItem with {status: 'added', ...}\nFastForEach.prototype.added = function (changeItem) {\n  var index = changeItem.index;\n  var valuesToAdd = changeItem.isBatch ? changeItem.values : [changeItem.value];\n  var referenceElement = this.lastNodesList[index - 1] || null;\n  // gather all childnodes for a possible batch insertion\n  var allChildNodes = [];\n\n  for (var i = 0, len = valuesToAdd.length; i < len; ++i) {\n    var templateClone = this.templateNode.cloneNode(true);\n    var childContext;\n\n    if (this.noContext) {\n      childContext = this.$context.extend({\n        '$item': valuesToAdd[i]\n      });\n    } else {\n      childContext = this.$context.createChildContext(valuesToAdd[i], this.as || null);\n    }\n\n    // apply bindings first, and then process child nodes, because bindings can add childnodes\n    ko.applyBindingsToDescendants(childContext, templateClone);\n\n    var childNodes = ko.virtualElements.childNodes(templateClone);\n    // Note discussion at https://github.com/angular/angular.js/issues/7851\n    allChildNodes.push.apply(allChildNodes, Array.prototype.slice.call(childNodes));\n    this.lastNodesList.splice(index + i, 0, childNodes[childNodes.length - 1]);\n  }\n\n  insertAllAfter(this.element, allChildNodes, referenceElement);\n};\n\n\n// Process a changeItem with {status: 'deleted', ...}\nFastForEach.prototype.deleted = function (changeItem) {\n  var index = changeItem.index;\n  var ptr = this.lastNodesList[index],\n      // We use this.element because that will be the last previous node\n      // for virtual element lists.\n      lastNode = this.lastNodesList[index - 1] || this.element;\n  do {\n    ptr = ptr.previousSibling;\n    ko.removeNode((ptr && ptr.nextSibling) || ko.virtualElements.firstChild(this.element));\n  } while (ptr && ptr !== lastNode);\n  // The \"last node\" in the DOM from which we begin our delets of the next adjacent node is\n  // now the sibling that preceded the first node of this item.\n  this.lastNodesList[index] = this.lastNodesList[index - 1];\n  this.indexesToDelete.push(index);\n};\n\n\n// We batch our deletion of item indexes in our parallel array.\n// See brianmhunt/knockout-fast-foreach#6/#8\nFastForEach.prototype.clearDeletedIndexes = function () {\n  // We iterate in reverse on the presumption (following the unit tests) that KO's diff engine\n  // processes diffs (esp. deletes) monotonically ascending i.e. from index 0 -> N.\n  for (var i = this.indexesToDelete.length - 1; i >= 0; --i) {\n    this.lastNodesList.splice(this.indexesToDelete[i], 1);\n  }\n  this.indexesToDelete = [];\n};\n\n\nko.bindingHandlers.fastForEach = {\n  // Valid valueAccessors:\n  //    []\n  //    ko.observable([])\n  //    ko.observableArray([])\n  //    ko.computed\n  //    {data: array, name: string, as: string}\n  init: function init(element, valueAccessor, bindings, vm, context) {\n    var value = valueAccessor(),\n        ffe;\n    if (isPlainObject(value)) {\n      value.element = value.element || element;\n      value.$context = context;\n      ffe = new FastForEach(value);\n    } else {\n      ffe = new FastForEach({\n        element: element,\n        data: ko.unwrap(context.$rawData) === value ? context.$rawData : value,\n        $context: context\n      });\n    }\n    ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\n      ffe.dispose();\n    });\n    return {controlsDescendantBindings: true};\n  },\n\n  // Export for testing, debugging, and overloading.\n  FastForEach: FastForEach\n};\n\nko.virtualElements.allowedBindings.fastForEach = true;\n}));","mage/common.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true*/\ndefine([\n    'jquery',\n    'domReady!'\n], function ($) {\n    'use strict';\n\n    /* Form with auto submit feature */\n    $('form[data-auto-submit=\"true\"]').submit();\n});\n","mage/layout.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\n/*jshint browser:true jquery:true */\n/*global console:true*/\ndefine(['underscore'], function($) {\n    return {\n        build: function(config) {\n            var types = _.map(_.flatten(config), function(item) {\n                return item.type;\n            });\n            require(types, function () {\n                \n            });\n        }\n    };\n});\n","mage/tooltip.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    \"jquery\",\n    \"jquery/ui\"\n], function($){\n\t'use strict';\n\t\n\t//Widget Wrapper\n\t$.widget('mage.tooltip', $.ui.tooltip, {\n\t});\n\n    return $.mage.tooltip;\n});\n","mage/bootstrap.js":"/**\n * Copyright \u00c2\u00a9 2016 Magento. All rights reserved.\n * See COPYING.txt for license details.\n */\ndefine([\n    'jquery',\n    'mage/apply/main',\n    'Magento_Ui/js/lib/knockout/bootstrap'\n], function ($, mage) {\n    'use strict';\n\n    $.ajaxSetup({\n        cache: false\n    });\n\n    /**\n     * Init all components defined via data-mage-init attribute.\n     */\n    $(mage.apply);\n});\n"}
    }
});
